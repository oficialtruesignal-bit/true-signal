{"file_contents":{"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","path":null,"size_bytes":80,"size_tokens":null},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Portal>\n    <TooltipPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </TooltipPrimitive.Portal>\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","path":null,"size_bytes":1267,"size_tokens":null},"client/src/lib/supabase.ts":{"content":"import { createClient } from '@supabase/supabase-js';\n\n// These will be populated by the user in the .env file\nconst supabaseUrl = import.meta.env.VITE_SUPABASE_URL || 'https://placeholder.supabase.co';\nconst supabaseKey = import.meta.env.VITE_SUPABASE_ANON_KEY || 'placeholder';\n\nexport const supabase = createClient(supabaseUrl, supabaseKey);\n\n// Mock helper to check if we are in \"Real Mode\"\nexport const isSupabaseConfigured = () => {\n  return import.meta.env.VITE_SUPABASE_URL && import.meta.env.VITE_SUPABASE_ANON_KEY;\n};\n","path":null,"size_bytes":528,"size_tokens":null},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","path":null,"size_bytes":649,"size_tokens":null},"client/src/components/signal-form.tsx":{"content":"import { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { toast } from \"@/hooks/use-toast\";\nimport { Signal } from \"@/lib/mock-data\";\nimport { imageUploadService } from \"@/lib/image-upload-service\";\nimport { useState, useRef } from \"react\";\nimport { X, ScanLine, Loader2, Sparkles, Check } from \"lucide-react\";\nimport axios from \"axios\";\n\nconst formSchema = z.object({\n  league: z.string().optional(),\n  homeTeam: z.string().min(1, \"Time casa obrigat√≥rio\"),\n  awayTeam: z.string().min(1, \"Time fora obrigat√≥rio\"),\n  homeTeamLogo: z.string().optional().nullable(),\n  awayTeamLogo: z.string().optional().nullable(),\n  fixtureId: z.string().optional().nullable(),\n  matchTime: z.string().optional().nullable(),\n  market: z.string().min(1, \"Mercado obrigat√≥rio\"),\n  odd: z.string().refine((val) => !isNaN(Number(val)) && Number(val) > 0, {\n    message: \"Odd obrigat√≥ria\",\n  }),\n  betLink: z.string().url().optional().or(z.literal('')),\n  imageUrl: z.string().optional().nullable(),\n  analysisSummary: z.string().optional().nullable(),\n});\n\ninterface SignalFormProps {\n  onAdd: (signal: any) => void;\n  initialData?: Partial<Signal>;\n}\n\ninterface ScannedBet {\n  home_team: string;\n  away_team: string;\n  market: string;\n  odd: number;\n  league: string;\n  match_time?: string;\n}\n\ninterface ScanResult {\n  bets: ScannedBet[];\n  total_odd: number;\n  is_multiple: boolean;\n}\n\nexport function SignalForm({ onAdd, initialData }: SignalFormProps) {\n  const [uploadedImageUrl, setUploadedImageUrl] = useState<string | null>(null);\n  const [isScanning, setIsScanning] = useState(false);\n  const [scanResult, setScanResult] = useState<ScanResult | null>(null);\n  const [scanError, setScanError] = useState<string | null>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const form = useForm<z.infer<typeof formSchema>>({\n    resolver: zodResolver(formSchema),\n    defaultValues: {\n      league: initialData?.league || \"\",\n      homeTeam: initialData?.homeTeam || \"\",\n      awayTeam: initialData?.awayTeam || \"\",\n      homeTeamLogo: initialData?.homeTeamLogo || \"\",\n      awayTeamLogo: initialData?.awayTeamLogo || \"\",\n      fixtureId: initialData?.fixtureId?.toString() || \"\",\n      matchTime: \"\",\n      market: \"\",\n      odd: \"\",\n      betLink: \"\",\n      imageUrl: \"\",\n    },\n  });\n\n  const convertToBase64 = (file: File): Promise<string> => {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.readAsDataURL(file);\n      reader.onload = () => resolve(reader.result as string);\n      reader.onerror = error => reject(error);\n    });\n  };\n\n  const handleFileSelect = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n\n    if (!file.type.startsWith('image/')) {\n      toast({ title: \"Selecione uma imagem v√°lida\", variant: \"destructive\" });\n      return;\n    }\n\n    if (file.size > 5 * 1024 * 1024) {\n      toast({ title: \"Imagem muito grande (m√°x 5MB)\", variant: \"destructive\" });\n      return;\n    }\n\n    setScanError(null);\n    setScanResult(null);\n\n    const base64 = await convertToBase64(file);\n    setUploadedImageUrl(base64);\n\n    imageUploadService.uploadTipImage(file).then((uploadResult) => {\n      if (uploadResult.success && uploadResult.url) {\n        setUploadedImageUrl(uploadResult.url);\n        form.setValue('imageUrl', uploadResult.url);\n      }\n    }).catch(() => {\n      console.log('Upload falhou, usando apenas scan');\n    });\n\n    setIsScanning(true);\n    toast({ \n      title: \"ü§ñ IA est√° lendo seu bilhete...\", \n      className: \"bg-primary/10 border-primary/20 text-primary\" \n    });\n\n    try {\n      const response = await axios.post('/api/scan-ticket', { \n        imageBase64: base64 \n      });\n\n      if (response.data.success && response.data.data) {\n        const data = response.data.data as ScanResult;\n        setScanResult(data);\n\n        if (data.bets && data.bets.length > 0) {\n          const firstBet = data.bets[0];\n          \n          // Combina todos os mercados com quebra de linha\n          const allMarkets = data.bets\n            .map(bet => bet.market)\n            .filter(Boolean)\n            .join('\\n');\n          \n          form.setValue('league', firstBet.league || '');\n          form.setValue('homeTeam', firstBet.home_team || '');\n          form.setValue('awayTeam', firstBet.away_team || '');\n          form.setValue('market', allMarkets || firstBet.market || '');\n          form.setValue('odd', data.total_odd?.toString() || firstBet.odd?.toString() || '');\n          \n          // Hor√°rio do jogo extra√≠do pelo scanner\n          if (firstBet.match_time) {\n            form.setValue('matchTime', firstBet.match_time);\n          }\n\n          const timeInfo = firstBet.match_time \n            ? ` - ${new Date(firstBet.match_time).toLocaleString('pt-BR', { day: '2-digit', month: '2-digit', hour: '2-digit', minute: '2-digit' })}`\n            : '';\n\n          toast({ \n            title: \"‚ú® Bilhete lido com sucesso!\", \n            description: data.is_multiple \n              ? `${data.bets.length} mercados: ${allMarkets} - Odd ${data.total_odd}${timeInfo}`\n              : `${firstBet.home_team} x ${firstBet.away_team}${timeInfo}`,\n            className: \"bg-primary/10 border-primary/20 text-primary\" \n          });\n        }\n      }\n    } catch (error: any) {\n      console.error('Scan error:', error);\n      const errorMessage = error.response?.data?.message || 'Erro ao escanear. Preencha manualmente.';\n      setScanError(errorMessage);\n      toast({ \n        title: \"IA n√£o conseguiu ler\", \n        description: errorMessage,\n        variant: \"destructive\" \n      });\n    } finally {\n      setIsScanning(false);\n    }\n  };\n\n  const removeImage = () => {\n    setUploadedImageUrl(null);\n    setScanResult(null);\n    setScanError(null);\n    form.reset({\n      league: \"\",\n      homeTeam: \"\",\n      awayTeam: \"\",\n      homeTeamLogo: \"\",\n      awayTeamLogo: \"\",\n      fixtureId: \"\",\n      matchTime: \"\",\n      market: \"\",\n      odd: \"\",\n      betLink: \"\",\n      imageUrl: \"\",\n    });\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  function onSubmit(values: z.infer<typeof formSchema>) {\n    const newSignal = {\n      league: values.league,\n      homeTeam: values.homeTeam,\n      awayTeam: values.awayTeam,\n      homeTeamLogo: values.homeTeamLogo || undefined,\n      awayTeamLogo: values.awayTeamLogo || undefined,\n      fixtureId: values.fixtureId || undefined,\n      matchTime: values.matchTime || undefined,\n      market: values.market,\n      odd: parseFloat(values.odd),\n      betLink: values.betLink || undefined,\n      imageUrl: uploadedImageUrl?.startsWith('http') ? uploadedImageUrl : undefined,\n      status: \"pending\" as const,\n      isLive: false,\n      analysisSummary: values.analysisSummary || undefined,\n    };\n    \n    onAdd(newSignal);\n    \n    form.reset();\n    setUploadedImageUrl(null);\n    setScanResult(null);\n    setScanError(null);\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n    \n    toast({\n      title: \"Sinal Criado com Sucesso\",\n      className: \"bg-primary/10 border-primary/20 text-primary\",\n    });\n  }\n\n  return (\n    <Form {...form}>\n      <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n        \n        {/* DROPZONE - Scanner de Bilhete */}\n        <div className=\"space-y-3\">\n          <input\n            ref={fileInputRef}\n            type=\"file\"\n            accept=\"image/*\"\n            onChange={handleFileSelect}\n            className=\"hidden\"\n          />\n          \n          {uploadedImageUrl ? (\n            <div className=\"relative rounded-xl overflow-hidden border-2 border-primary/50 bg-primary/5\">\n              <img \n                src={uploadedImageUrl} \n                alt=\"Preview\" \n                className=\"w-full h-48 object-cover\"\n              />\n              <button\n                type=\"button\"\n                onClick={removeImage}\n                className=\"absolute top-2 right-2 p-1.5 bg-red-500 rounded-full text-white hover:bg-red-600 transition-colors\"\n              >\n                <X className=\"w-4 h-4\" />\n              </button>\n              \n              <div className=\"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/90 to-transparent p-3\">\n                {isScanning ? (\n                  <div className=\"flex items-center gap-2 text-primary\">\n                    <Loader2 className=\"w-4 h-4 animate-spin\" />\n                    <span className=\"text-sm font-medium\">IA est√° lendo o bilhete...</span>\n                  </div>\n                ) : scanResult ? (\n                  <div className=\"flex items-center gap-2 text-primary\">\n                    <Check className=\"w-4 h-4\" />\n                    <span className=\"text-sm font-medium\">\n                      {scanResult.is_multiple \n                        ? `${scanResult.bets.length} apostas ‚Ä¢ Odd ${scanResult.total_odd}`\n                        : 'Bilhete lido com sucesso!'\n                      }\n                    </span>\n                  </div>\n                ) : scanError ? (\n                  <div className=\"flex items-center gap-2 text-yellow-500\">\n                    <span className=\"text-sm\">‚ö†Ô∏è Preencha os campos manualmente</span>\n                  </div>\n                ) : (\n                  <div className=\"flex items-center gap-2 text-gray-400\">\n                    <span className=\"text-sm\">Imagem carregada</span>\n                  </div>\n                )}\n              </div>\n            </div>\n          ) : (\n            <button\n              type=\"button\"\n              onClick={() => fileInputRef.current?.click()}\n              disabled={isScanning}\n              className=\"w-full h-40 border-2 border-dashed border-primary/40 bg-primary/5 rounded-xl flex flex-col items-center justify-center gap-3 hover:border-primary/70 hover:bg-primary/10 transition-all cursor-pointer group\"\n            >\n              <div className=\"relative\">\n                <ScanLine className=\"w-12 h-12 text-primary group-hover:scale-110 transition-transform\" />\n                <Sparkles className=\"w-5 h-5 text-yellow-400 absolute -top-1 -right-1 animate-pulse\" />\n              </div>\n              <div className=\"text-center\">\n                <span className=\"text-base text-gray-300 font-medium block\">\n                  Clique para subir o Print\n                </span>\n                <span className=\"text-sm text-primary mt-1 block\">\n                  ü™Ñ A IA preenche tudo automaticamente\n                </span>\n              </div>\n            </button>\n          )}\n        </div>\n\n        {/* Campos preenchidos pela IA (edit√°veis) */}\n        {(uploadedImageUrl || scanResult) && (\n          <div className=\"space-y-4 pt-2 border-t border-primary/10\">\n            <p className=\"text-xs text-muted-foreground\">Confira e corrija se necess√°rio:</p>\n            \n            <FormField\n              control={form.control}\n              name=\"odd\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel className=\"text-white text-xs\">Odd Total</FormLabel>\n                  <FormControl>\n                    <Input \n                      placeholder=\"1.90\" \n                      {...field} \n                      className=\"bg-black/40 border-primary/20 text-white focus-visible:ring-primary h-9 text-sm\" \n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n            \n            <div className=\"grid grid-cols-2 gap-3\">\n              <FormField\n                control={form.control}\n                name=\"homeTeam\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel className=\"text-white text-xs\">Time Casa</FormLabel>\n                    <FormControl>\n                      <Input \n                        placeholder=\"Ex: Arsenal\" \n                        {...field} \n                        className=\"bg-black/40 border-primary/20 text-white focus-visible:ring-primary h-9 text-sm\" \n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              <FormField\n                control={form.control}\n                name=\"awayTeam\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel className=\"text-white text-xs\">Time Fora</FormLabel>\n                    <FormControl>\n                      <Input \n                        placeholder=\"Ex: Chelsea\" \n                        {...field} \n                        className=\"bg-black/40 border-primary/20 text-white focus-visible:ring-primary h-9 text-sm\" \n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <FormField\n              control={form.control}\n              name=\"market\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel className=\"text-white text-xs\">Linhas do Bilhete (uma por linha)</FormLabel>\n                  <FormControl>\n                    <textarea \n                      placeholder={`Ex:\\nInternacional - Mais de 6.5 Chutes\\nVasco - Mais de 8.5 Chutes\\nAmbos os times receberem cart√£o\\nMenos de 14 escanteios`}\n                      {...field} \n                      rows={5}\n                      className=\"w-full bg-black/40 border border-primary/20 text-white focus-visible:ring-primary text-sm rounded-md px-3 py-2 resize-none placeholder:text-gray-500\" \n                    />\n                  </FormControl>\n                  <p className=\"text-[10px] text-gray-500 mt-1\">Cada linha ser√° exibida separadamente no bilhete</p>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"betLink\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel className=\"text-white text-xs\">Link da Bet (Opcional)</FormLabel>\n                  <FormControl>\n                    <Input \n                      placeholder=\"https://bet365.com/...\" \n                      {...field} \n                      className=\"bg-black/40 border-primary/20 text-white focus-visible:ring-primary h-9 text-sm\" \n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"analysisSummary\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel className=\"text-white text-xs\">Justificativa da Entrada (Opcional)</FormLabel>\n                  <FormControl>\n                    <textarea \n                      placeholder=\"Ex: Newcastle jogando em casa tem 85% de aproveitamento nos √∫ltimos 5 jogos. Tottenham vem de derrota e est√° sem seu principal atacante.\"\n                      {...field} \n                      value={field.value || ''}\n                      rows={3}\n                      className=\"w-full bg-black/40 border border-primary/20 text-white focus-visible:ring-primary text-sm rounded-md px-3 py-2 resize-none placeholder:text-gray-500\" \n                    />\n                  </FormControl>\n                  <p className=\"text-[10px] text-gray-500 mt-1\">Explique o motivo da entrada para os usu√°rios</p>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <Button \n              type=\"submit\" \n              disabled={isScanning}\n              className=\"w-full bg-primary hover:bg-primary/90 text-black font-bold shadow-glow disabled:opacity-50\"\n            >\n              {isScanning ? 'Aguarde a IA...' : 'Publicar Sinal'}\n            </Button>\n          </div>\n        )}\n      </form>\n    </Form>\n  );\n}\n","path":null,"size_bytes":16415,"size_tokens":null},"client/src/pages/dashboard.tsx":{"content":"import { Layout } from \"@/components/layout\";\nimport { useDashboardData } from \"@/hooks/use-dashboard-data\";\nimport { TrendingUp, Target, Zap, Flame, Activity, Bot, Sparkles, ArrowRight, BarChart2, DollarSign } from \"lucide-react\";\nimport { AreaChart, Area, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';\nimport { LiveMetricsBar } from \"@/components/live-metrics-bar\";\nimport { InstallAppBanner } from \"@/components/install-app-banner\";\nimport { useState, useEffect } from \"react\";\nimport { useLanguage } from \"@/hooks/use-language\";\n\nexport default function Dashboard() {\n  const { t } = useLanguage();\n  const stats = useDashboardData();\n  const [scannerMessages, setScannerMessages] = useState<string[]>([]);\n  const [showFullDashboard, setShowFullDashboard] = useState(false);\n  \n  // AI Scanner simulation\n  useEffect(() => {\n    const messages = [\n      '> Initializing Market Scanner...',\n      '> Scanning Premier League matches...',\n      '> Analyzing La Liga patterns...',\n      '> Processing Serie A data...',\n      '> Bundesliga: High confidence detected',\n      '> Champions League: 3 opportunities found',\n      '> Brasileir√£o: Value bet identified',\n      '> Pattern match: Over 0.5 HT (88% confidence)',\n      '> Flamengo vs Corinthians: BTTS analyzed',\n      '> Manchester City: Home Win probability 92%',\n      '> Real Madrid: Goal pattern detected',\n      '> Bayern Munich: Over 2.5 FT signal',\n      '> Arsenal vs Chelsea: Draw No Bet opportunity',\n      '> Barcelona: Asian Handicap -0.5 green light',\n      '> PSG: High-value market discovered',\n      '> Liverpool: Attacking pattern confirmed',\n    ];\n    \n    let currentIndex = 0;\n    const interval = setInterval(() => {\n      setScannerMessages((prev) => {\n        const newMessages = [...prev, messages[currentIndex]];\n        currentIndex = (currentIndex + 1) % messages.length;\n        return newMessages.slice(-8); // Keep last 8 messages\n      });\n    }, 2000);\n    \n    return () => clearInterval(interval);\n  }, []);\n\n  return (\n    <Layout>\n      {/* Header */}\n      <div className=\"mb-8\">\n        <h1 className=\"text-4xl font-display font-bold text-slate-900 dark:text-white mb-2 flex items-center gap-3\">\n          <Sparkles className=\"w-8 h-8 text-primary animate-pulse\" />\n          {t.dashboard.title}\n        </h1>\n        <p className=\"text-muted-foreground\">{t.dashboard.subtitle}</p>\n      </div>\n\n      {/* Dashboard Preview - Clean & Professional */}\n      {!showFullDashboard ? (\n        <div className=\"space-y-6\">\n          {/* Live Metrics Bar */}\n          <LiveMetricsBar />\n          \n          {/* Performance Chart Preview - Professional */}\n          <div className=\"bg-card border border-primary/10 rounded-2xl p-6 shadow-[0_0_40px_rgba(51,184,100,0.1)]\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <div>\n                <h3 className=\"text-lg font-display font-bold text-slate-900 dark:text-white flex items-center gap-2\">\n                  <TrendingUp className=\"w-5 h-5 text-primary\" />\n                  {t.dashboard.performanceChart}\n                </h3>\n                <p className=\"text-xs text-muted-foreground mt-1\">{t.dashboard.performanceSubtitle}</p>\n              </div>\n              <span className=\"text-[10px] font-bold bg-primary/10 text-primary px-3 py-1.5 rounded-full border border-primary/20\">\n                {t.dashboard.realtime}\n              </span>\n            </div>\n            \n            <div className=\"h-[200px]\">\n              <ResponsiveContainer width=\"100%\" height=\"100%\">\n                <AreaChart data={stats.profitHistory}>\n                  <defs>\n                    <linearGradient id=\"previewGradient\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                      <stop offset=\"5%\" stopColor=\"#33b864\" stopOpacity={0.4}/>\n                      <stop offset=\"95%\" stopColor=\"#33b864\" stopOpacity={0}/>\n                    </linearGradient>\n                  </defs>\n                  <CartesianGrid strokeDasharray=\"3 3\" stroke=\"rgba(51, 184, 100, 0.05)\" />\n                  <XAxis \n                    dataKey=\"time\" \n                    stroke=\"rgba(148, 163, 184, 0.3)\" \n                    style={{ fontSize: '9px' }}\n                    tick={{ fill: 'rgba(148, 163, 184, 0.5)' }}\n                  />\n                  <YAxis \n                    stroke=\"rgba(148, 163, 184, 0.3)\" \n                    style={{ fontSize: '9px' }}\n                    tick={{ fill: 'rgba(148, 163, 184, 0.5)' }}\n                    tickFormatter={(value) => `${value} pts`}\n                  />\n                  <Area \n                    type=\"monotone\" \n                    dataKey=\"profit\" \n                    stroke=\"#33b864\" \n                    strokeWidth={3}\n                    fill=\"url(#previewGradient)\" \n                  />\n                </AreaChart>\n              </ResponsiveContainer>\n            </div>\n          </div>\n\n          {/* Install App Banner - Preview */}\n          <div className=\"bg-gradient-to-r from-[#121212] to-[#0a0a0a] border border-[#33b864]/20 rounded-2xl p-5\">\n            <h3 className=\"text-lg font-bold text-white\">üöÄ TESTE: Banner de instala√ß√£o aqui!</h3>\n            <p className=\"text-sm text-gray-300\">Se voc√™ v√™ isso, o banner est√° funcionando!</p>\n          </div>\n          <InstallAppBanner />\n\n          {/* CTA to See Full Dashboard - Enhanced */}\n          <div className=\"text-center pt-4\">\n            <button\n              onClick={() => setShowFullDashboard(true)}\n              className=\"inline-flex items-center gap-3 px-10 py-5 bg-primary hover:bg-primary/90 text-black font-bold text-lg rounded-xl transition-all duration-300 shadow-[0_0_40px_rgba(51,184,100,0.4)] hover:shadow-[0_0_60px_rgba(51,184,100,0.6)] hover:scale-105\"\n              data-testid=\"button-view-full-dashboard\"\n            >\n              <Sparkles className=\"w-5 h-5\" />\n              {t.dashboard.viewFull}\n              <ArrowRight className=\"w-5 h-5\" />\n            </button>\n            <p className=\"text-sm text-muted-foreground mt-4\">\n              {t.dashboard.viewFullDesc}\n            </p>\n          </div>\n        </div>\n      ) : (\n        <>\n          {/* Bento Grid Layout - Full Dashboard */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-12 gap-6\">\n        {/* KPI Cards - Top (4 cards with real stats) */}\n        <div className=\"lg:col-span-12 grid grid-cols-2 lg:grid-cols-4 gap-4\">\n          {/* Assertividade */}\n          <div \n            className=\"bg-card border border-primary/10 rounded-2xl p-5 shadow-[0_0_30px_rgba(51,184,100,0.08)] hover:shadow-[0_0_40px_rgba(51,184,100,0.15)] transition-all duration-300\"\n            data-testid=\"kpi-winrate\"\n          >\n            <div className=\"flex items-center justify-between mb-2\">\n              <Target className=\"w-5 h-5 text-primary\" />\n              <span className=\"text-[9px] font-bold bg-emerald-500/10 text-emerald-500 px-2 py-1 rounded border border-emerald-500/20\">\n                {stats.monthlyStats?.settledTips ? 'REAL' : 'DEMO'}\n              </span>\n            </div>\n            <div className=\"space-y-1\">\n              <p className=\"text-xs text-muted-foreground font-medium\">Taxa de Acerto</p>\n              <p className=\"text-2xl font-bold text-slate-900 dark:text-white font-mono\">\n                {stats.winRate.toFixed(1)}%\n              </p>\n              <p className=\"text-[9px] text-muted-foreground\">\n                {stats.monthlyStats ? `${stats.monthlyStats.greenTips}W / ${stats.monthlyStats.redTips}L` : 'Precis√£o Institucional'}\n              </p>\n            </div>\n          </div>\n\n          {/* ROI (Return on Investment) */}\n          <div \n            className=\"bg-card border border-primary/10 rounded-2xl p-5 shadow-[0_0_30px_rgba(51,184,100,0.08)] hover:shadow-[0_0_40px_rgba(51,184,100,0.15)] transition-all duration-300\"\n            data-testid=\"kpi-roi\"\n          >\n            <div className=\"flex items-center justify-between mb-2\">\n              <BarChart2 className=\"w-5 h-5 text-primary\" />\n              <span className={`text-[9px] font-bold px-2 py-1 rounded border ${\n                stats.monthlyStats?.roi && stats.monthlyStats.roi > 0 \n                  ? 'bg-emerald-500/10 text-emerald-500 border-emerald-500/20' \n                  : 'bg-red-500/10 text-red-500 border-red-500/20'\n              }`}>\n                ROI\n              </span>\n            </div>\n            <div className=\"space-y-1\">\n              <p className=\"text-xs text-muted-foreground font-medium\">Retorno</p>\n              <p className={`text-2xl font-bold font-mono ${\n                stats.monthlyStats?.roi && stats.monthlyStats.roi > 0 ? 'text-emerald-500' : 'text-red-500'\n              }`}>\n                {stats.monthlyStats?.roi ? `${stats.monthlyStats.roi > 0 ? '+' : ''}${stats.monthlyStats.roi.toFixed(1)}%` : '+0.0%'}\n              </p>\n              <p className=\"text-[9px] text-muted-foreground\">\n                Lucro: {stats.monthlyStats?.totalProfit ? `${stats.monthlyStats.totalProfit > 0 ? '+' : ''}${stats.monthlyStats.totalProfit.toFixed(2)}u` : '0.00u'}\n              </p>\n            </div>\n          </div>\n\n          {/* Tips Enviadas */}\n          <div \n            className=\"bg-card border border-primary/10 rounded-2xl p-5 shadow-[0_0_30px_rgba(51,184,100,0.08)] hover:shadow-[0_0_40px_rgba(51,184,100,0.15)] transition-all duration-300\"\n            data-testid=\"kpi-total\"\n          >\n            <div className=\"flex items-center justify-between mb-2\">\n              <Zap className=\"w-5 h-5 text-primary\" />\n              <Activity className=\"w-4 h-4 text-primary animate-pulse\" />\n            </div>\n            <div className=\"space-y-1\">\n              <p className=\"text-xs text-muted-foreground font-medium\">Sinais do M√™s</p>\n              <p className=\"text-2xl font-bold text-slate-900 dark:text-white font-mono\">\n                {stats.totalTips.toLocaleString('pt-BR')}\n              </p>\n              <p className=\"text-[9px] text-muted-foreground\">\n                {stats.monthlyStats?.pendingTips ? `${stats.monthlyStats.pendingTips} pendentes` : 'Volume Acumulado'}\n              </p>\n            </div>\n          </div>\n\n          {/* Sequ√™ncia Atual */}\n          <div \n            className=\"bg-card border border-primary/10 rounded-2xl p-5 shadow-[0_0_30px_rgba(51,184,100,0.08)] hover:shadow-[0_0_40px_rgba(51,184,100,0.15)] transition-all duration-300\"\n            data-testid=\"kpi-streak\"\n          >\n            <div className=\"flex items-center justify-between mb-2\">\n              <Flame className=\"w-5 h-5 text-orange-500\" />\n              <span className=\"text-[9px] font-bold bg-orange-500/10 text-orange-500 px-2 py-1 rounded border border-orange-500/20 animate-pulse\">\n                HOT\n              </span>\n            </div>\n            <div className=\"space-y-1\">\n              <p className=\"text-xs text-muted-foreground font-medium\">Sequ√™ncia Verde</p>\n              <p className=\"text-2xl font-bold text-orange-500 font-mono flex items-center gap-2\">\n                {stats.currentStreak} \n                <Flame className=\"w-5 h-5 animate-pulse\" />\n              </p>\n              <p className=\"text-[9px] text-muted-foreground\">\n                Greens Consecutivos\n              </p>\n            </div>\n          </div>\n        </div>\n\n        {/* Performance Chart - Center */}\n        <div className=\"lg:col-span-8 bg-card border border-primary/10 rounded-2xl p-6 shadow-[0_0_30px_rgba(51,184,100,0.08)]\">\n          <div className=\"flex items-center justify-between mb-6\">\n            <div>\n              <h2 className=\"text-xl font-display font-bold text-slate-900 dark:text-white flex items-center gap-2\">\n                <TrendingUp className=\"w-5 h-5 text-primary\" />\n                Evolu√ß√£o de Performance\n              </h2>\n              <p className=\"text-xs text-muted-foreground mt-1\">√öltimas 24 horas ‚Ä¢ Atualiza√ß√£o em tempo real</p>\n            </div>\n          </div>\n          \n          <div className=\"h-[300px]\" data-testid=\"profit-chart\">\n            <ResponsiveContainer width=\"100%\" height=\"100%\">\n              <AreaChart data={stats.profitHistory}>\n                <defs>\n                  <linearGradient id=\"profitGradient\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                    <stop offset=\"5%\" stopColor=\"#33b864\" stopOpacity={0.3}/>\n                    <stop offset=\"95%\" stopColor=\"#33b864\" stopOpacity={0}/>\n                  </linearGradient>\n                </defs>\n                <CartesianGrid strokeDasharray=\"3 3\" stroke=\"rgba(148, 163, 184, 0.1)\" />\n                <XAxis \n                  dataKey=\"time\" \n                  stroke=\"rgba(148, 163, 184, 0.5)\" \n                  style={{ fontSize: '10px' }}\n                  tick={{ fill: 'rgba(148, 163, 184, 0.7)' }}\n                />\n                <YAxis \n                  stroke=\"rgba(148, 163, 184, 0.5)\" \n                  style={{ fontSize: '10px' }}\n                  tick={{ fill: 'rgba(148, 163, 184, 0.7)' }}\n                  tickFormatter={(value) => `${value} pts`}\n                />\n                <Tooltip \n                  contentStyle={{ \n                    backgroundColor: '#121212', \n                    border: '1px solid rgba(51, 184, 100, 0.2)',\n                    borderRadius: '8px',\n                    color: '#fff'\n                  }}\n                  formatter={(value: number) => [`${value.toFixed(0)} pontos`, 'Performance']}\n                />\n                <Area \n                  type=\"monotone\" \n                  dataKey=\"profit\" \n                  stroke=\"#33b864\" \n                  strokeWidth={2}\n                  fill=\"url(#profitGradient)\" \n                />\n              </AreaChart>\n            </ResponsiveContainer>\n          </div>\n        </div>\n\n        {/* AI Scanner - Right Sidebar */}\n        <div className=\"lg:col-span-4 space-y-4\">\n          <div className=\"bg-[#1a1a1a] border-2 border-white/10 rounded-2xl p-6 shadow-xl shadow-black/60 overflow-hidden\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h2 className=\"text-lg font-display font-bold text-slate-900 dark:text-white flex items-center gap-2\">\n                <Bot className=\"w-5 h-5 text-primary animate-pulse\" />\n                AI Scanner\n              </h2>\n              <span className=\"text-[9px] font-bold bg-primary/10 text-primary px-2 py-1 rounded border border-primary/20 animate-pulse\">\n                SCANNING\n              </span>\n            </div>\n            \n            <div \n              className=\"font-mono text-[11px] space-y-2 h-[300px] overflow-hidden\"\n              data-testid=\"ai-scanner\"\n            >\n              {scannerMessages.map((msg, index) => (\n                <div \n                  key={index} \n                  className=\"text-primary/70 animate-in fade-in slide-in-from-bottom-2 duration-300\"\n                  style={{ \n                    opacity: 1 - (scannerMessages.length - index - 1) * 0.15,\n                    animationDelay: `${index * 50}ms`\n                  }}\n                >\n                  {msg}\n                </div>\n              ))}\n            </div>\n            \n            <div className=\"mt-4 pt-4 border-t border-primary/10\">\n              <p className=\"text-[10px] text-muted-foreground flex items-center gap-2\">\n                <div className=\"w-2 h-2 bg-primary rounded-full animate-pulse\"></div>\n                Sistema Ativo ‚Ä¢ Processando mercados globais\n              </p>\n            </div>\n          </div>\n\n          {/* Install App Banner */}\n          <InstallAppBanner />\n        </div>\n\n        {/* Recent Activity - Bottom */}\n        <div className=\"lg:col-span-12 bg-card border border-primary/10 rounded-2xl p-6 shadow-[0_0_30px_rgba(51,184,100,0.08)]\">\n          <div className=\"flex items-center justify-between mb-6\">\n            <h2 className=\"text-xl font-display font-bold text-slate-900 dark:text-white flex items-center gap-2\">\n              <Activity className=\"w-5 h-5 text-primary\" />\n              Hist√≥rico de Sinais\n            </h2>\n            <p className=\"text-xs text-muted-foreground\">\n              {stats.recentTips.length} sinais recentes\n            </p>\n          </div>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3\" data-testid=\"activity-list\">\n            {stats.recentTips.slice(0, 12).map((tip) => (\n              <div \n                key={tip.id}\n                className=\"flex items-center justify-between p-4 bg-background/50 dark:bg-background/30 rounded-xl border border-gray-200 dark:border-white/5 hover:border-primary/20 transition-all duration-200\"\n                data-testid={`tip-${tip.id}`}\n              >\n                <div className=\"flex-1 min-w-0\">\n                  <p className=\"text-sm font-semibold text-slate-900 dark:text-white truncate\">{tip.matchName}</p>\n                  <p className=\"text-xs text-primary truncate\">{tip.league}</p>\n                  <p className=\"text-[10px] text-muted-foreground mt-1\">{tip.market} {tip.odd.toFixed(2)}</p>\n                </div>\n                <div className=\"ml-4 flex-shrink-0\">\n                  {tip.status === 'green' && (\n                    <span className=\"text-xs font-bold bg-emerald-500/10 text-emerald-500 px-3 py-1.5 rounded-lg border border-emerald-500/20\">\n                      GREEN\n                    </span>\n                  )}\n                  {tip.status === 'red' && (\n                    <span className=\"text-xs font-bold bg-red-500/10 text-red-500 px-3 py-1.5 rounded-lg border border-red-500/20\">\n                      RED\n                    </span>\n                  )}\n                  {tip.status === 'pending' && (\n                    <span className=\"text-xs font-bold bg-amber-500/10 text-amber-500 px-3 py-1.5 rounded-lg border border-amber-500/20 animate-pulse\">\n                      LIVE\n                    </span>\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n        </>\n      )}\n    </Layout>\n  );\n}\n","path":null,"size_bytes":18180,"size_tokens":null},"client/src/hooks/use-auth.tsx":{"content":"import { createContext, useContext, useState, useEffect, ReactNode } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { toast } from \"sonner\";\nimport { supabase } from \"@/lib/supabase\";\nimport type { User as SupabaseUser } from \"@supabase/supabase-js\";\n\ninterface User {\n  id: string;\n  email: string;\n  firstName: string;\n  role: 'user' | 'admin';\n  subscriptionStatus: 'trial' | 'active' | 'expired';\n  createdAt: string;\n  trialStartDate: string | null;\n  subscriptionActivatedAt: string | null;\n  subscriptionEndsAt: string | null;\n  termsAcceptedAt: string | null;\n  privacyAcceptedAt: string | null;\n  riskDisclaimerAcceptedAt: string | null;\n}\n\ninterface AuthContextType {\n  user: User | null;\n  isLoading: boolean;\n  login: (email: string, password: string) => Promise<void>;\n  register: (name: string, email: string, password: string) => Promise<void>;\n  logout: () => void;\n  reloadProfile: () => Promise<void>;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport function AuthProvider({ children }: { children: ReactNode }) {\n  const [user, setUser] = useState<User | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [, setLocation] = useLocation();\n\n  useEffect(() => {\n    // Timeout to prevent infinite loading\n    const loadingTimeout = setTimeout(() => {\n      setIsLoading(false);\n    }, 8000);\n\n    // Check active session\n    supabase.auth.getSession().then(({ data: { session } }) => {\n      clearTimeout(loadingTimeout);\n      if (session?.user) {\n        loadUserProfile(session.user.id, false, session.user);\n      } else {\n        // Check localStorage backup for offline access (only valid Supabase sessions)\n        const storedUser = localStorage.getItem('vantage_user');\n        if (storedUser) {\n          try {\n            const parsed = JSON.parse(storedUser);\n            // Skip test accounts - require real Supabase auth\n            const isTestAccount = parsed.email === 'a@a.com' || parsed.email?.includes('test');\n            if (parsed.id && parsed.email && !isTestAccount) {\n              console.log('üîÑ [AUTH] Restoring user from localStorage backup');\n              loadUserProfile(parsed.id, false, { id: parsed.id, email: parsed.email, user_metadata: { first_name: parsed.firstName } });\n              return;\n            } else if (isTestAccount) {\n              console.log('üîí [AUTH] Clearing test account from localStorage');\n              localStorage.removeItem('vantage_user');\n            }\n          } catch (e) {\n            console.error('Error parsing stored user:', e);\n          }\n        }\n        setIsLoading(false);\n      }\n    }).catch(() => {\n      clearTimeout(loadingTimeout);\n      // On network error, try localStorage backup (only valid Supabase sessions)\n      const storedUser = localStorage.getItem('vantage_user');\n      if (storedUser) {\n        try {\n          const parsed = JSON.parse(storedUser);\n          // Skip test accounts - require real Supabase auth\n          const isTestAccount = parsed.email === 'a@a.com' || parsed.email?.includes('test');\n          if (parsed.id && parsed.email && !isTestAccount) {\n            loadUserProfile(parsed.id, false, { id: parsed.id, email: parsed.email, user_metadata: { first_name: parsed.firstName } });\n            return;\n          } else if (isTestAccount) {\n            console.log('üîí [AUTH] Clearing test account from localStorage');\n            localStorage.removeItem('vantage_user');\n          }\n        } catch (e) {\n          console.error('Error parsing stored user:', e);\n        }\n      }\n      setIsLoading(false);\n    });\n\n    // Listen for auth changes\n    const {\n      data: { subscription },\n    } = supabase.auth.onAuthStateChange((_event, session) => {\n      if (session?.user) {\n        loadUserProfile(session.user.id, false, session.user);\n      } else {\n        // Don't clear user immediately if we have valid localStorage backup (not test accounts)\n        const storedUser = localStorage.getItem('vantage_user');\n        if (storedUser) {\n          try {\n            const parsed = JSON.parse(storedUser);\n            const isTestAccount = parsed.email === 'a@a.com' || parsed.email?.includes('test');\n            if (isTestAccount) {\n              console.log('üîí [AUTH] Clearing test account from localStorage');\n              localStorage.removeItem('vantage_user');\n              setUser(null);\n            }\n          } catch (e) {\n            setUser(null);\n          }\n        } else {\n          setUser(null);\n        }\n        setIsLoading(false);\n      }\n    });\n\n    return () => subscription.unsubscribe();\n  }, []);\n\n  const loadUserProfile = async (userId: string, forceReload = false, supabaseUserData?: { id: string; email?: string; user_metadata?: { first_name?: string } }) => {\n    const startTime = Date.now();\n    \n    try {\n      console.log('üîÑ [AUTH DEBUG] Loading profile for userId:', userId);\n      console.log('üîÑ [AUTH DEBUG] Force reload:', forceReload);\n      \n      // Use provided user data or try to fetch from Supabase\n      let userEmail = supabaseUserData?.email;\n      let userFirstName = supabaseUserData?.user_metadata?.first_name;\n      \n      if (!userEmail) {\n        // Try to get from Supabase auth if not provided\n        const { data: { user: supabaseUser } } = await supabase.auth.getUser();\n        userEmail = supabaseUser?.email;\n        userFirstName = supabaseUser?.user_metadata?.first_name;\n      }\n      \n      // If still no user data, try localStorage backup\n      if (!userEmail) {\n        console.log('‚ö†Ô∏è [AUTH DEBUG] No Supabase session, checking localStorage backup');\n        \n        const storedUser = localStorage.getItem('vantage_user');\n        if (storedUser) {\n          try {\n            const parsed = JSON.parse(storedUser);\n            if (parsed.id === userId) {\n              userEmail = parsed.email;\n              userFirstName = parsed.firstName;\n              console.log('‚úÖ [AUTH DEBUG] Found user in localStorage backup:', userEmail);\n            }\n          } catch (e) {\n            console.error('Error parsing stored user:', e);\n          }\n        }\n        \n        // If still no user data, clear and stop\n        if (!userEmail) {\n          console.log('‚ùå [AUTH DEBUG] No user data found, clearing session');\n          localStorage.removeItem('vantage_user');\n          setUser(null);\n          setIsLoading(false);\n          return;\n        }\n      }\n\n      const response = await fetch('/api/profile/sync', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          id: userId,\n          email: userEmail,\n          firstName: userFirstName || userEmail?.split('@')[0],\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to sync profile');\n      }\n\n      const { profile: data } = await response.json();\n\n      console.log('üìä [AUTH DEBUG] Profile data from backend:', data);\n\n      if (data) {\n        const userData = {\n          id: data.id,\n          email: data.email,\n          firstName: data.firstName,\n          role: data.role as 'user' | 'admin',\n          subscriptionStatus: (data.subscriptionStatus || 'trial') as 'trial' | 'active' | 'expired',\n          createdAt: data.createdAt,\n          trialStartDate: data.trialStartDate || null,\n          subscriptionActivatedAt: data.subscriptionActivatedAt || null,\n          subscriptionEndsAt: data.subscriptionEndsAt || null,\n          termsAcceptedAt: data.termsAcceptedAt || null,\n          privacyAcceptedAt: data.privacyAcceptedAt || null,\n          riskDisclaimerAcceptedAt: data.riskDisclaimerAcceptedAt || null,\n        };\n        \n        console.log('‚úÖ [AUTH DEBUG] Setting user state with role:', userData.role);\n        console.log('üë§ [AUTH DEBUG] Full user object:', userData);\n        \n        // Save user to localStorage for backup/recovery\n        localStorage.setItem('vantage_user', JSON.stringify(userData));\n        \n        setUser(userData);\n      }\n    } catch (error) {\n      console.error('üí• [AUTH DEBUG] Error loading profile:', error);\n    } finally {\n      const elapsed = Date.now() - startTime;\n      const minDelay = 1000;\n      if (elapsed < minDelay) {\n        await new Promise(resolve => setTimeout(resolve, minDelay - elapsed));\n      }\n      setIsLoading(false);\n    }\n  };\n\n  const login = async (email: string, password: string) => {\n    setIsLoading(true);\n    const startTime = Date.now();\n    \n    // Try server-side auth proxy first (more reliable)\n    const attemptServerLogin = async (): Promise<{ success: boolean; user?: any; profile?: any; error?: string }> => {\n      try {\n        console.log('üîê [AUTH] Attempting server-side login...');\n        const response = await fetch('/api/auth/login', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({ email, password }),\n        });\n        \n        const data = await response.json();\n        \n        if (!response.ok) {\n          return { success: false, error: data.error || 'Login failed' };\n        }\n        \n        console.log('‚úÖ [AUTH] Server-side login successful');\n        return { success: true, user: data.user, profile: data.profile };\n      } catch (e: any) {\n        console.error('‚ùå [AUTH] Server login failed:', e);\n        return { success: false, error: e.message };\n      }\n    };\n    \n    // Fallback to direct Supabase auth\n    const attemptDirectLogin = async (): Promise<{ success: boolean; user?: any; error?: string }> => {\n      try {\n        console.log('üîê [AUTH] Attempting direct Supabase login...');\n        const { data, error } = await supabase.auth.signInWithPassword({\n          email,\n          password,\n        });\n        \n        if (error) {\n          return { success: false, error: error.message };\n        }\n        \n        console.log('‚úÖ [AUTH] Direct Supabase login successful');\n        return { success: true, user: data.user };\n      } catch (e: any) {\n        console.error('‚ùå [AUTH] Direct login failed:', e);\n        return { success: false, error: e.message };\n      }\n    };\n    \n    try {\n      // Try server proxy first\n      let result = await attemptServerLogin();\n      \n      // If server proxy fails, try direct Supabase\n      if (!result.success) {\n        console.log('‚ö†Ô∏è [AUTH] Server login failed, trying direct...');\n        result = await attemptDirectLogin();\n      }\n      \n      if (!result.success) {\n        throw new Error(result.error || 'Login failed');\n      }\n\n      if (result.user) {\n        // If we got profile from server, use it directly\n        if (result.profile) {\n          const userData = {\n            id: result.profile.id,\n            email: result.profile.email,\n            firstName: result.profile.firstName,\n            role: result.profile.role as 'user' | 'admin',\n            subscriptionStatus: (result.profile.subscriptionStatus || 'trial') as 'trial' | 'active' | 'expired',\n            createdAt: result.profile.createdAt,\n            trialStartDate: result.profile.trialStartDate || null,\n            subscriptionActivatedAt: result.profile.subscriptionActivatedAt || null,\n            subscriptionEndsAt: result.profile.subscriptionEndsAt || null,\n            termsAcceptedAt: result.profile.termsAcceptedAt || null,\n            privacyAcceptedAt: result.profile.privacyAcceptedAt || null,\n            riskDisclaimerAcceptedAt: result.profile.riskDisclaimerAcceptedAt || null,\n          };\n          localStorage.setItem('vantage_user', JSON.stringify(userData));\n          setUser(userData);\n        } else {\n          await loadUserProfile(result.user.id, false, result.user);\n        }\n        toast.success(`Bem-vindo de volta!`);\n        setLocation(\"/app\");\n      }\n    } catch (error: any) {\n      console.error('üîê [AUTH] Login error:', error);\n      \n      // Handle network errors gracefully\n      if (error.message === 'Failed to fetch' || error.name === 'TypeError' || error.name === 'AuthRetryableFetchError') {\n        toast.error(\"Erro de conex√£o. Verifique sua internet e tente novamente.\");\n      } else if (error.message?.includes('Invalid login credentials') || error.message?.includes('incorretos')) {\n        toast.error(\"Email ou senha incorretos.\");\n      } else {\n        toast.error(error.message || \"Erro ao fazer login. Tente novamente.\");\n      }\n      throw error;\n    } finally {\n      // Ensure minimum 1 second loading screen\n      const elapsed = Date.now() - startTime;\n      const minDelay = 1000;\n      if (elapsed < minDelay) {\n        await new Promise(resolve => setTimeout(resolve, minDelay - elapsed));\n      }\n      setIsLoading(false);\n    }\n  };\n\n  const register = async (name: string, email: string, password: string) => {\n    setIsLoading(true);\n    const startTime = Date.now();\n    \n    try {\n      // Step 1: Sign up the user\n      const { data: signUpData, error: signUpError } = await supabase.auth.signUp({\n        email,\n        password,\n        options: {\n          data: {\n            first_name: name,\n          },\n          emailRedirectTo: window.location.origin + '/app',\n        },\n      });\n\n      if (signUpError) throw signUpError;\n\n      // Step 2: If email confirmation is disabled, immediately sign in\n      if (signUpData.session) {\n        // Session already established (email confirmation disabled)\n        if (signUpData.user) {\n          await loadUserProfile(signUpData.user.id);\n          toast.success(\"Conta criada com sucesso! Bem-vindo.\");\n          setLocation(\"/app\");\n        }\n      } else {\n        // Email confirmation required - sign in immediately to establish session\n        const { data: signInData, error: signInError } = await supabase.auth.signInWithPassword({\n          email,\n          password,\n        });\n\n        if (signInError) {\n          // Email confirmation might be required\n          toast.info(\"Verifique seu email para confirmar a conta.\");\n          setIsLoading(false);\n          return;\n        }\n\n        if (signInData.user) {\n          await loadUserProfile(signInData.user.id);\n          toast.success(\"Conta criada com sucesso! Bem-vindo.\");\n          setLocation(\"/app\");\n        }\n      }\n    } catch (error: any) {\n      toast.error(error.message || \"Erro ao criar conta\");\n      throw error;\n    } finally {\n      // Ensure minimum 1 second loading screen\n      const elapsed = Date.now() - startTime;\n      const minDelay = 1000;\n      if (elapsed < minDelay) {\n        await new Promise(resolve => setTimeout(resolve, minDelay - elapsed));\n      }\n      setIsLoading(false);\n    }\n  };\n\n  const logout = async () => {\n    await supabase.auth.signOut();\n    setUser(null);\n    toast.info(\"Voc√™ saiu da conta.\");\n    setLocation(\"/auth\");\n  };\n\n  const reloadProfile = async () => {\n    const { data: { session } } = await supabase.auth.getSession();\n    if (session?.user) {\n      console.log('üîÑ [AUTH DEBUG] Forcing profile reload...');\n      await loadUserProfile(session.user.id, true);\n    }\n  };\n\n  return (\n    <AuthContext.Provider value={{ user, isLoading, login, register, logout, reloadProfile }}>\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error(\"useAuth must be used within an AuthProvider\");\n  }\n  return context;\n}\n","path":null,"size_bytes":15476,"size_tokens":null},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-background\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-destructive\" />\n            <h1 className=\"text-2xl font-bold text-foreground\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-muted-foreground\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","path":null,"size_bytes":728,"size_tokens":null},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","path":null,"size_bytes":140,"size_tokens":null},"client/src/components/ui/command.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","path":null,"size_bytes":4887,"size_tokens":null},"client/src/components/bet-card.tsx":{"content":"import { Signal } from \"@/lib/mock-data\";\nimport { Copy, Heart, Brain, TrendingUp, Info, ChevronDown, ChevronUp, Check, Eye, Pencil, Trash2 } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\nimport { toast } from \"@/hooks/use-toast\";\nimport { getTeamLogo } from \"@/lib/team-logos\";\nimport { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { useQueryClient } from \"@tanstack/react-query\";\nimport { tipsService } from \"@/lib/tips-service\";\nimport { useFavorites } from \"@/hooks/use-favorites\";\nimport { useUserBets } from \"@/hooks/use-user-bets\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from \"@/components/ui/popover\";\n\ninterface BetCardProps {\n  signal: Signal;\n  onDelete?: () => void;\n  unitValue?: number | null;\n}\n\nfunction TeamShield({ teamName, logoUrl: propLogoUrl, size = \"md\" }: { teamName: string; logoUrl?: string | null; size?: \"sm\" | \"md\" | \"lg\" }) {\n  const [imageError, setImageError] = useState(false);\n  const fallbackLogoUrl = getTeamLogo(teamName);\n  const logoUrl = propLogoUrl || fallbackLogoUrl;\n  \n  const sizeClasses = {\n    sm: \"w-6 h-6\",\n    md: \"w-10 h-10\",\n    lg: \"w-12 h-12\"\n  };\n  \n  if (logoUrl && !imageError) {\n    return (\n      <img \n        src={logoUrl} \n        alt={teamName}\n        className={cn(sizeClasses[size], \"rounded-full object-cover bg-white/5\")}\n        onError={() => setImageError(true)}\n      />\n    );\n  }\n  \n  const initial = teamName?.charAt(0)?.toUpperCase() || '?';\n  return (\n    <div className={cn(\n      sizeClasses[size], \n      \"rounded-full bg-[#33b864]/20 flex items-center justify-center border border-[#33b864]/40\"\n    )}>\n      <span className={cn(\n        \"text-[#33b864] font-bold\",\n        size === \"sm\" ? \"text-xs\" : size === \"md\" ? \"text-base\" : \"text-lg\"\n      )}>{initial}</span>\n    </div>\n  );\n}\n\nfunction AnalysisModal({ signal, isOpen, onClose }: { signal: Signal; isOpen: boolean; onClose: () => void }) {\n  if (!isOpen) return null;\n  \n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80\" onClick={onClose}>\n      <div \n        className=\"w-full max-w-md bg-[#121212] border border-white/10 rounded-2xl p-5 space-y-4\"\n        onClick={e => e.stopPropagation()}\n      >\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-2\">\n            <div className=\"w-8 h-8 rounded-full bg-[#33b864]/20 flex items-center justify-center\">\n              <Brain className=\"w-4 h-4 text-[#33b864]\" />\n            </div>\n            <div>\n              <p className=\"text-sm font-bold text-white\">TRUE SIGNAL IA</p>\n              <p className=\"text-[10px] text-gray-500\">An√°lise automatizada</p>\n            </div>\n          </div>\n          <button onClick={onClose} className=\"p-2 hover:bg-white/10 rounded-lg transition-colors\">\n            <span className=\"text-gray-400 text-xl\">√ó</span>\n          </button>\n        </div>\n        \n        {signal.analysisSummary && (\n          <div className=\"p-4 bg-[#0d0d0d] rounded-xl border border-white/5\">\n            <p className=\"text-sm text-gray-200 leading-relaxed pl-3 border-l-2 border-[#33b864]\">\n              \"{signal.analysisSummary}\"\n            </p>\n          </div>\n        )}\n        \n        <div className=\"space-y-2\">\n          <p className=\"text-[10px] text-gray-500 uppercase tracking-wide\">Dados utilizados:</p>\n          <div className=\"flex flex-wrap gap-2\">\n            {signal.homeTeam && signal.homeGoalsAvg && (\n              <span className=\"px-2 py-1 text-[10px] bg-white/5 text-gray-400 rounded border border-white/10\">\n                {signal.homeTeam}: {parseFloat(String(signal.homeGoalsAvg)).toFixed(2)} gols/jogo\n              </span>\n            )}\n            {signal.awayTeam && signal.awayGoalsAvg && (\n              <span className=\"px-2 py-1 text-[10px] bg-white/5 text-gray-400 rounded border border-white/10\">\n                {signal.awayTeam}: {parseFloat(String(signal.awayGoalsAvg)).toFixed(2)} gols/jogo\n              </span>\n            )}\n            {signal.probability && (\n              <span className=\"px-2 py-1 text-[10px] bg-blue-500/10 text-blue-400 rounded border border-blue-500/20\">\n                Probabilidade: {signal.probability.toFixed(1)}%\n              </span>\n            )}\n          </div>\n        </div>\n        \n        <div className=\"flex items-center justify-between pt-3 border-t border-white/5\">\n          {signal.confidence && (\n            <span className={cn(\n              \"text-sm font-bold\",\n              signal.confidence >= 85 ? \"text-green-400\" :\n              signal.confidence >= 75 ? \"text-yellow-400\" : \"text-orange-400\"\n            )}>\n              {signal.confidence.toFixed(0)}% confian√ßa\n            </span>\n          )}\n          {signal.expectedValue && signal.expectedValue > 0 && (\n            <span className=\"text-sm font-bold text-green-400\">\n              +{signal.expectedValue.toFixed(1)}% EV\n            </span>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport function BetCard({ signal, onDelete, unitValue }: BetCardProps) {\n  const { user } = useAuth();\n  const queryClient = useQueryClient();\n  const { isFavorite, toggleFavorite, isPending: isFavoritesPending } = useFavorites();\n  const { hasEntered, getBet, enterBet, markResult, isEntering, isMarkingResult } = useUserBets();\n  const isAdmin = user?.role === 'admin';\n  const [currentStatus, setCurrentStatus] = useState<Signal[\"status\"]>(signal.status);\n  const [officialLeague, setOfficialLeague] = useState<string>(signal.league);\n  const [officialMatchTime, setOfficialMatchTime] = useState<string | null>(null);\n  const [homeTeamLogo, setHomeTeamLogo] = useState<string | null>(signal.homeTeamLogo || null);\n  const [awayTeamLogo, setAwayTeamLogo] = useState<string | null>(signal.awayTeamLogo || null);\n  const [isCopied, setIsCopied] = useState(false);\n  const [showDeleteDialog, setShowDeleteDialog] = useState(false);\n  const [showAnalysis, setShowAnalysis] = useState(false);\n  const [hasFetchedFromAPI, setHasFetchedFromAPI] = useState(false);\n  \n  const userBet = getBet(signal.id);\n  const userHasEntered = hasEntered(signal.id);\n  \n  const parsedLegs = (() => {\n    if (!signal.legs) return [];\n    if (Array.isArray(signal.legs)) return signal.legs;\n    if (typeof signal.legs === 'string') {\n      try {\n        const parsed = JSON.parse(signal.legs);\n        return Array.isArray(parsed) ? parsed : [];\n      } catch {\n        return [];\n      }\n    }\n    return [];\n  })();\n  \n  const hasMultipleLegs = parsedLegs.length > 1;\n  const tipIsFavorited = isFavorite(signal.id);\n  const isComboTip = signal.isCombo ?? hasMultipleLegs;\n  \n  useEffect(() => {\n    if (isComboTip) return;\n    const hasLogosInDB = signal.homeTeamLogo && signal.awayTeamLogo;\n    if (hasLogosInDB || hasFetchedFromAPI || !signal.fixtureId) return;\n\n    const fetchFixtureData = async () => {\n      try {\n        const response = await axios.get(`/api/football/fixtures/${signal.fixtureId}`);\n        const fixture = response.data.response?.[0];\n        \n        if (fixture) {\n          if (fixture.league?.name) setOfficialLeague(fixture.league.name);\n          if (fixture.fixture?.date) setOfficialMatchTime(fixture.fixture.date);\n          if (fixture.teams?.home?.logo) setHomeTeamLogo(fixture.teams.home.logo);\n          if (fixture.teams?.away?.logo) setAwayTeamLogo(fixture.teams.away.logo);\n        }\n        setHasFetchedFromAPI(true);\n      } catch (error) {\n        console.error('Erro ao buscar fixture:', error);\n        setHasFetchedFromAPI(true);\n      }\n    };\n    \n    fetchFixtureData();\n  }, [signal.fixtureId, hasFetchedFromAPI, isComboTip, signal.homeTeamLogo, signal.awayTeamLogo]);\n\n  const totalOdd = (() => {\n    if (signal.odd) return parseFloat(String(signal.odd));\n    if (parsedLegs.length > 0) {\n      return parsedLegs.reduce((acc, leg) => acc * (leg.odd || 1), 1);\n    }\n    return 1;\n  })();\n\n  const expectedValue = signal.expectedValue || 0;\n  const stakeUnits = 2.0;\n  const stakeValue = unitValue ? (stakeUnits * unitValue) : 2;\n\n  const handleCopy = async () => {\n    if (signal.betLink) {\n      window.open(signal.betLink, '_blank');\n      toast({\n        title: \"Abrindo Bet365...\",\n        description: \"Voc√™ ser√° redirecionado para fazer sua aposta.\",\n      });\n    } else {\n      const textToCopy = isComboTip\n        ? parsedLegs.map(leg => `${leg.homeTeam} x ${leg.awayTeam} - ${leg.market}: ${leg.outcome} @${leg.odd?.toFixed(2)}`).join('\\n')\n        : `${signal.homeTeam} x ${signal.awayTeam} - ${signal.market} @${totalOdd.toFixed(2)}`;\n      \n      await navigator.clipboard.writeText(textToCopy);\n      setIsCopied(true);\n      toast({\n        title: \"Bilhete copiado!\",\n        description: \"Cole na sua casa de apostas.\",\n      });\n      setTimeout(() => setIsCopied(false), 2000);\n    }\n  };\n\n  const handleStatusChange = async (newStatus: 'pending' | 'green' | 'red') => {\n    try {\n      await tipsService.updateStatus(signal.id, newStatus);\n      setCurrentStatus(newStatus);\n      queryClient.invalidateQueries({ queryKey: ['tips'] });\n      toast({\n        title: \"Status atualizado\",\n        description: `Bilhete marcado como ${newStatus === 'green' ? 'GANHOU' : newStatus === 'red' ? 'PERDIDA' : 'PENDENTE'}`,\n      });\n    } catch (error) {\n      toast({\n        title: \"Erro\",\n        description: \"N√£o foi poss√≠vel atualizar o status.\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const handleDelete = async () => {\n    try {\n      await tipsService.delete(signal.id);\n      queryClient.invalidateQueries({ queryKey: ['tips'] });\n      toast({\n        title: \"Bilhete removido\",\n        description: \"O bilhete foi deletado com sucesso.\",\n      });\n      onDelete?.();\n    } catch (error) {\n      toast({\n        title: \"Erro\",\n        description: \"N√£o foi poss√≠vel deletar o bilhete.\",\n        variant: \"destructive\",\n      });\n    }\n    setShowDeleteDialog(false);\n  };\n\n  const displayHomeTeam = isComboTip ? parsedLegs[0]?.homeTeam : signal.homeTeam;\n  const displayAwayTeam = isComboTip ? parsedLegs[0]?.awayTeam : signal.awayTeam;\n  const displayHomeLogo = isComboTip ? parsedLegs[0]?.homeTeamLogo : homeTeamLogo;\n  const displayAwayLogo = isComboTip ? parsedLegs[0]?.awayTeamLogo : awayTeamLogo;\n  const displayLeague = isComboTip ? parsedLegs[0]?.league || signal.league : officialLeague;\n  const displayDateTime = (() => {\n    if (isComboTip) {\n      const legTime = parsedLegs[0]?.time;\n      if (legTime) {\n        const today = new Date();\n        const day = today.getDate().toString().padStart(2, '0');\n        const month = (today.getMonth() + 1).toString().padStart(2, '0');\n        return `${day}/${month} ‚Ä¢ ${legTime}`;\n      }\n      return null;\n    }\n    if (officialMatchTime) {\n      const date = new Date(officialMatchTime);\n      const day = date.getDate().toString().padStart(2, '0');\n      const month = (date.getMonth() + 1).toString().padStart(2, '0');\n      const hours = date.getHours().toString().padStart(2, '0');\n      const minutes = date.getMinutes().toString().padStart(2, '0');\n      return `${day}/${month} ‚Ä¢ ${hours}:${minutes}`;\n    }\n    return null;\n  })();\n\n  const markets = isComboTip && parsedLegs.length > 0\n    ? parsedLegs.map(leg => ({ text: `${leg.market}${leg.outcome ? ': ' + leg.outcome : ''}`, odd: leg.odd }))\n    : signal.market.split('\\n').filter(line => line.trim()).map(line => ({ text: line.trim(), odd: null }));\n\n  const hasAnalysis = signal.analysisSummary || signal.confidence || signal.expectedValue;\n\n  return (\n    <>\n      <div \n        className=\"w-full bg-[#0a0a0a] border-2 border-[#33b864]/40 rounded-2xl overflow-hidden shadow-lg shadow-[#33b864]/10\"\n        data-testid={`bet-card-${signal.id}`}\n      >\n        {/* BLOCO A: HEADER - Favoritar + Badges EV/ODD */}\n        <div className=\"flex items-center justify-between px-4 py-3\">\n          <div className=\"flex items-center gap-2\">\n            <button\n              onClick={() => toggleFavorite(signal.id)}\n              disabled={isFavoritesPending}\n              className={cn(\n                \"w-10 h-10 rounded-xl border flex items-center justify-center transition-all\",\n                tipIsFavorited \n                  ? \"bg-red-500/10 border-red-500/30 text-red-500\" \n                  : \"bg-transparent border-white/20 text-gray-500 hover:text-red-400 hover:border-red-500/30\"\n              )}\n              data-testid={`button-favorite-${signal.id}`}\n            >\n              <Heart className={cn(\"w-5 h-5\", tipIsFavorited && \"fill-current\")} />\n            </button>\n            \n            {isAdmin && (\n              <div className=\"flex items-center gap-1\">\n                <button \n                  onClick={() => setShowDeleteDialog(true)}\n                  className=\"w-8 h-8 rounded-lg bg-white/5 hover:bg-red-500/10 flex items-center justify-center transition-colors\"\n                  data-testid=\"delete-signal-button\"\n                >\n                  <Trash2 className=\"w-4 h-4 text-red-500\" />\n                </button>\n                <DropdownMenu>\n                  <DropdownMenuTrigger asChild>\n                    <button \n                      className=\"w-8 h-8 rounded-lg bg-white/5 hover:bg-[#33b864]/10 flex items-center justify-center transition-colors\"\n                      data-testid=\"edit-status-button\"\n                    >\n                      <Pencil className=\"w-4 h-4 text-[#33b864]\" />\n                    </button>\n                  </DropdownMenuTrigger>\n                  <DropdownMenuContent align=\"start\" className=\"bg-[#121212] border-[#33b864]/30\">\n                    <DropdownMenuItem onClick={() => handleStatusChange('pending')} className=\"text-[#33b864] cursor-pointer hover:bg-[#33b864]/10\">\n                      ‚è≥ PENDENTE\n                    </DropdownMenuItem>\n                    <DropdownMenuItem onClick={() => handleStatusChange('green')} className=\"text-green-500 cursor-pointer hover:bg-green-500/10\">\n                      ‚úÖ GANHOU\n                    </DropdownMenuItem>\n                    <DropdownMenuItem onClick={() => handleStatusChange('red')} className=\"text-red-500 cursor-pointer hover:bg-red-500/10\">\n                      ‚ùå PERDIDA\n                    </DropdownMenuItem>\n                  </DropdownMenuContent>\n                </DropdownMenu>\n              </div>\n            )}\n          </div>\n          \n          <div className=\"flex items-center gap-2\">\n            {expectedValue > 0 && (\n              <div className=\"px-3 py-1.5 rounded-lg bg-[#33b864]/10 border border-[#33b864]/30\">\n                <span className=\"text-[#33b864] font-bold text-sm\">+EV {expectedValue.toFixed(1)}%</span>\n              </div>\n            )}\n            <div className=\"px-4 py-1.5 rounded-lg bg-[#33b864]\">\n              <span className=\"text-black font-bold text-sm\">ODD {totalOdd.toFixed(2)}</span>\n            </div>\n          </div>\n        </div>\n\n        {/* BLOCO B: INFORMA√á√ïES DO JOGO */}\n        <div className=\"mx-4 p-4 bg-white/5 rounded-xl border border-white/5\">\n          <div className=\"flex items-center justify-between\">\n            <TeamShield teamName={displayHomeTeam || ''} logoUrl={displayHomeLogo} size=\"lg\" />\n            \n            <div className=\"flex-1 text-center px-2 min-w-0\">\n              <p className=\"text-white font-bold text-sm whitespace-nowrap overflow-hidden text-ellipsis\">\n                {displayHomeTeam} <span className=\"text-gray-500 font-normal\">x</span> {displayAwayTeam}\n              </p>\n              <p className=\"text-gray-500 text-xs mt-1 whitespace-nowrap overflow-hidden text-ellipsis\">\n                {displayLeague}{displayDateTime ? ` ‚Ä¢ ${displayDateTime}` : ''}\n              </p>\n            </div>\n            \n            <TeamShield teamName={displayAwayTeam || ''} logoUrl={displayAwayLogo} size=\"lg\" />\n          </div>\n        </div>\n\n        {/* BLOCO C: LISTA DE MERCADOS COM TIMELINE */}\n        <div className=\"px-4 py-4\">\n          <div className=\"relative pl-6\">\n            {markets.length > 1 && (\n              <div className=\"absolute left-[7px] top-2 bottom-2 w-[2px] bg-[#33b864]\"></div>\n            )}\n            \n            <div className=\"space-y-3\">\n              {markets.map((market, idx) => (\n                <div key={idx} className=\"relative flex items-center gap-3\">\n                  <div className=\"absolute -left-6 w-4 h-4 rounded-full bg-[#33b864] flex items-center justify-center\">\n                    <Check className=\"w-2.5 h-2.5 text-black\" strokeWidth={3} />\n                  </div>\n                  <div className=\"flex-1\">\n                    <span className=\"text-white font-medium text-sm\">{market.text}</span>\n                    {market.odd && (\n                      <span className=\"text-gray-400 text-sm ml-1\">(@{market.odd.toFixed(2)})</span>\n                    )}\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n\n        {/* BLOCO D: RODAP√â DE A√á√ÉO */}\n        <div className=\"px-4 pb-4 space-y-3\">\n          {/* Linha 1: Entrada + Ver An√°lise */}\n          <div className=\"flex items-center gap-2\">\n            <div className=\"flex-1 px-3 py-2 bg-[#1a1a1a] rounded-lg border border-white/10\">\n              <span className=\"text-gray-400 text-xs\">Entrada: </span>\n              <span className=\"text-white font-bold text-xs\">R$ {stakeValue.toFixed(2)}</span>\n              <span className=\"text-gray-500 text-[10px] ml-1\">({stakeUnits.toFixed(1)}u)</span>\n            </div>\n            \n            {hasAnalysis && (\n              <button \n                onClick={() => setShowAnalysis(true)}\n                className=\"flex items-center gap-1.5 px-3 py-2 bg-transparent border border-white/20 rounded-lg hover:bg-white/5 transition-colors\"\n                data-testid={`btn-analysis-${signal.id}`}\n              >\n                <Eye className=\"w-3.5 h-3.5 text-gray-400\" />\n                <span className=\"text-gray-300 text-xs font-medium\">VER AN√ÅLISE</span>\n              </button>\n            )}\n          </div>\n          \n          {/* Linha 2: Bot√£o Principal */}\n          {currentStatus === 'green' ? (\n            <div className=\"w-full h-12 bg-green-500/20 border border-green-500 rounded-xl flex items-center justify-center gap-2\">\n              <Check className=\"w-5 h-5 text-green-400\" />\n              <span className=\"text-green-400 font-bold text-sm uppercase tracking-wide\">GANHOU</span>\n            </div>\n          ) : currentStatus === 'red' ? (\n            <div className=\"w-full h-12 bg-red-500/20 border border-red-500 rounded-xl flex items-center justify-center gap-2\">\n              <span className=\"text-red-400 font-bold text-sm uppercase tracking-wide\">‚úó PERDIDA</span>\n            </div>\n          ) : (\n            <button \n              onClick={handleCopy}\n              data-testid={`button-copy-${signal.id}`}\n              className=\"w-full h-12 bg-[#33b864] hover:bg-[#289a54] active:scale-[0.98] transition-all rounded-xl flex items-center justify-center gap-2 shadow-lg shadow-[#33b864]/20\"\n            >\n              <Copy className=\"w-5 h-5 text-black\" />\n              <span className=\"text-black font-bold text-sm uppercase tracking-wide\">\n                {isCopied ? \"COPIADO!\" : \"COPIAR BILHETE\"}\n              </span>\n            </button>\n          )}\n        </div>\n      </div>\n\n      <AnalysisModal signal={signal} isOpen={showAnalysis} onClose={() => setShowAnalysis(false)} />\n      \n      <AlertDialog open={showDeleteDialog} onOpenChange={setShowDeleteDialog}>\n        <AlertDialogContent className=\"bg-[#121212] border-[#33b864]/30\">\n          <AlertDialogHeader>\n            <AlertDialogTitle className=\"text-white\">Deletar Bilhete?</AlertDialogTitle>\n            <AlertDialogDescription className=\"text-gray-400\">\n              Esta a√ß√£o n√£o pode ser desfeita. O bilhete ser√° permanentemente removido.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel className=\"bg-white/5 border-white/10 text-white hover:bg-white/10\">\n              Cancelar\n            </AlertDialogCancel>\n            <AlertDialogAction onClick={handleDelete} className=\"bg-red-500 hover:bg-red-600 text-white\">\n              Deletar\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </>\n  );\n}\n","path":null,"size_bytes":20922,"size_tokens":null},"client/src/components/ui/input-group.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Textarea } from \"@/components/ui/textarea\"\n\nfunction InputGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"input-group\"\n      role=\"group\"\n      className={cn(\n        \"group/input-group border-input dark:bg-input/30 shadow-xs relative flex w-full items-center rounded-md border outline-none transition-[color,box-shadow]\",\n        \"h-9 has-[>textarea]:h-auto\",\n\n        // Variants based on alignment.\n        \"has-[>[data-align=inline-start]]:[&>input]:pl-2\",\n        \"has-[>[data-align=inline-end]]:[&>input]:pr-2\",\n        \"has-[>[data-align=block-start]]:h-auto has-[>[data-align=block-start]]:flex-col has-[>[data-align=block-start]]:[&>input]:pb-3\",\n        \"has-[>[data-align=block-end]]:h-auto has-[>[data-align=block-end]]:flex-col has-[>[data-align=block-end]]:[&>input]:pt-3\",\n\n        // Focus state.\n        \"has-[[data-slot=input-group-control]:focus-visible]:ring-ring has-[[data-slot=input-group-control]:focus-visible]:ring-1\",\n\n        // Error state.\n        \"has-[[data-slot][aria-invalid=true]]:ring-destructive/20 has-[[data-slot][aria-invalid=true]]:border-destructive dark:has-[[data-slot][aria-invalid=true]]:ring-destructive/40\",\n\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nconst inputGroupAddonVariants = cva(\n  \"text-muted-foreground flex h-auto cursor-text select-none items-center justify-center gap-2 py-1.5 text-sm font-medium group-data-[disabled=true]/input-group:opacity-50 [&>kbd]:rounded-[calc(var(--radius)-5px)] [&>svg:not([class*='size-'])]:size-4\",\n  {\n    variants: {\n      align: {\n        \"inline-start\":\n          \"order-first pl-3 has-[>button]:ml-[-0.45rem] has-[>kbd]:ml-[-0.35rem]\",\n        \"inline-end\":\n          \"order-last pr-3 has-[>button]:mr-[-0.4rem] has-[>kbd]:mr-[-0.35rem]\",\n        \"block-start\":\n          \"[.border-b]:pb-3 order-first w-full justify-start px-3 pt-3 group-has-[>input]/input-group:pt-2.5\",\n        \"block-end\":\n          \"[.border-t]:pt-3 order-last w-full justify-start px-3 pb-3 group-has-[>input]/input-group:pb-2.5\",\n      },\n    },\n    defaultVariants: {\n      align: \"inline-start\",\n    },\n  }\n)\n\nfunction InputGroupAddon({\n  className,\n  align = \"inline-start\",\n  ...props\n}: React.ComponentProps<\"div\"> & VariantProps<typeof inputGroupAddonVariants>) {\n  return (\n    <div\n      role=\"group\"\n      data-slot=\"input-group-addon\"\n      data-align={align}\n      className={cn(inputGroupAddonVariants({ align }), className)}\n      onClick={(e) => {\n        if ((e.target as HTMLElement).closest(\"button\")) {\n          return\n        }\n        e.currentTarget.parentElement?.querySelector(\"input\")?.focus()\n      }}\n      {...props}\n    />\n  )\n}\n\nconst inputGroupButtonVariants = cva(\n  \"flex items-center gap-2 text-sm shadow-none\",\n  {\n    variants: {\n      size: {\n        xs: \"h-6 gap-1 rounded-[calc(var(--radius)-5px)] px-2 has-[>svg]:px-2 [&>svg:not([class*='size-'])]:size-3.5\",\n        sm: \"h-8 gap-1.5 rounded-md px-2.5 has-[>svg]:px-2.5\",\n        \"icon-xs\":\n          \"size-6 rounded-[calc(var(--radius)-5px)] p-0 has-[>svg]:p-0\",\n        \"icon-sm\": \"size-8 p-0 has-[>svg]:p-0\",\n      },\n    },\n    defaultVariants: {\n      size: \"xs\",\n    },\n  }\n)\n\nfunction InputGroupButton({\n  className,\n  type = \"button\",\n  variant = \"ghost\",\n  size = \"xs\",\n  ...props\n}: Omit<React.ComponentProps<typeof Button>, \"size\"> &\n  VariantProps<typeof inputGroupButtonVariants>) {\n  return (\n    <Button\n      type={type}\n      data-size={size}\n      variant={variant}\n      className={cn(inputGroupButtonVariants({ size }), className)}\n      {...props}\n    />\n  )\n}\n\nfunction InputGroupText({ className, ...props }: React.ComponentProps<\"span\">) {\n  return (\n    <span\n      className={cn(\n        \"text-muted-foreground flex items-center gap-2 text-sm [&_svg:not([class*='size-'])]:size-4 [&_svg]:pointer-events-none\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction InputGroupInput({\n  className,\n  ...props\n}: React.ComponentProps<\"input\">) {\n  return (\n    <Input\n      data-slot=\"input-group-control\"\n      className={cn(\n        \"flex-1 rounded-none border-0 bg-transparent shadow-none focus-visible:ring-0 dark:bg-transparent\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction InputGroupTextarea({\n  className,\n  ...props\n}: React.ComponentProps<\"textarea\">) {\n  return (\n    <Textarea\n      data-slot=\"input-group-control\"\n      className={cn(\n        \"flex-1 resize-none rounded-none border-0 bg-transparent py-3 shadow-none focus-visible:ring-0 dark:bg-transparent\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  InputGroup,\n  InputGroupAddon,\n  InputGroupButton,\n  InputGroupText,\n  InputGroupInput,\n  InputGroupTextarea,\n}\n","path":null,"size_bytes":4971,"size_tokens":null},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Minus } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-9 w-9 items-center justify-center border-y border-r border-input text-sm shadow-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-1 ring-ring\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Minus />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","path":null,"size_bytes":2143,"size_tokens":null},"server/app.ts":{"content":"import { type Server } from \"node:http\";\nimport path from \"node:path\";\n\nimport express, { type Express, type Request, Response, NextFunction } from \"express\";\nimport helmet from \"helmet\";\nimport rateLimit from \"express-rate-limit\";\nimport { registerRoutes } from \"./routes\";\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport const app = express();\n\n// Trust proxy for rate limiting behind reverse proxy (Replit)\napp.set('trust proxy', 1);\n\n// Security Headers (helmet)\nconst isProduction = process.env.NODE_ENV === 'production';\napp.use(helmet({\n  contentSecurityPolicy: {\n    directives: {\n      defaultSrc: [\"'self'\"],\n      scriptSrc: [\"'self'\", \"'unsafe-inline'\", \"'unsafe-eval'\", \"https://sdk.mercadopago.com\", \"https://http2.mlstatic.com\", \"https://*.mercadopago.com\", \"https://*.mercadolibre.com\", \"blob:\"],\n      styleSrc: [\"'self'\", \"'unsafe-inline'\", \"https://fonts.googleapis.com\", \"https://http2.mlstatic.com\", \"https://*.mercadopago.com\"],\n      fontSrc: [\"'self'\", \"https://fonts.gstatic.com\", \"https://http2.mlstatic.com\", \"data:\"],\n      imgSrc: [\"'self'\", \"data:\", \"https:\", \"blob:\"],\n      connectSrc: [\"'self'\", \"https://api.mercadopago.com\", \"https://events.mercadopago.com\", \"https://*.mercadopago.com\", \"https://*.mercadolibre.com\", \"https://http2.mlstatic.com\", \"https://api-sports.io\", \"https://v3.football.api-sports.io\", \"wss:\", \"ws:\"],\n      frameSrc: [\"'self'\", \"https://www.mercadopago.com.br\", \"https://sdk.mercadopago.com\", \"https://*.mercadopago.com\"],\n      objectSrc: [\"'none'\"],\n      workerSrc: [\"'self'\", \"blob:\"],\n      childSrc: [\"'self'\", \"blob:\"],\n      upgradeInsecureRequests: isProduction ? [] : null,\n    },\n  },\n  crossOriginEmbedderPolicy: false,\n  crossOriginOpenerPolicy: { policy: \"same-origin-allow-popups\" },\n}));\n\n// Rate Limiting - General API\nconst generalLimiter = rateLimit({\n  windowMs: 15 * 60 * 1000, // 15 minutes\n  max: 500, // 500 requests per 15 minutes\n  message: { error: \"Muitas requisi√ß√µes. Tente novamente em alguns minutos.\" },\n  standardHeaders: true,\n  legacyHeaders: false,\n});\n\n// Rate Limiting - Stricter for auth/payment endpoints\nconst strictLimiter = rateLimit({\n  windowMs: 15 * 60 * 1000, // 15 minutes\n  max: 30, // 30 requests per 15 minutes\n  message: { error: \"Muitas tentativas. Aguarde 15 minutos.\" },\n  standardHeaders: true,\n  legacyHeaders: false,\n});\n\n// Rate Limiting - Admin endpoints\nconst adminLimiter = rateLimit({\n  windowMs: 60 * 60 * 1000, // 1 hour\n  max: 50, // 50 requests per hour\n  message: { error: \"Limite de requisi√ß√µes admin atingido.\" },\n  standardHeaders: true,\n  legacyHeaders: false,\n});\n\n// Apply rate limiters to specific routes\napp.use('/api/', generalLimiter);\napp.use('/api/auth/', strictLimiter);\napp.use('/api/mercadopago/', strictLimiter);\napp.use('/api/admin/', adminLimiter);\n\ndeclare module 'http' {\n  interface IncomingMessage {\n    rawBody: unknown\n  }\n}\napp.use(express.json({\n  limit: '50mb',\n  verify: (req, _res, buf) => {\n    req.rawBody = buf;\n  }\n}));\napp.use(express.urlencoded({ extended: false, limit: '50mb' }));\n\n// Serve attached_assets as static files\napp.use('/attached_assets', express.static(path.join(process.cwd(), 'attached_assets')));\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const reqPath = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (reqPath.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${reqPath} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"‚Ä¶\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\nexport default async function runApp(\n  setup: (app: Express, server: Server) => Promise<void>,\n) {\n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly run the final setup after setting up all the other routes so\n  // the catch-all route doesn't interfere with the other routes\n  await setup(app, server);\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || '5000', 10);\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    log(`serving on port ${port}`);\n  });\n}\n","path":null,"size_bytes":5201,"size_tokens":null},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-2 w-full overflow-hidden rounded-full bg-primary/20\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","path":null,"size_bytes":792,"size_tokens":null},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline text-left [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","path":null,"size_bytes":2001,"size_tokens":null},"client/src/components/ui/kbd.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Kbd({ className, ...props }: React.ComponentProps<\"kbd\">) {\n  return (\n    <kbd\n      data-slot=\"kbd\"\n      className={cn(\n        \"bg-muted text-muted-foreground pointer-events-none inline-flex h-5 w-fit min-w-5 select-none items-center justify-center gap-1 rounded-sm px-1 font-sans text-xs font-medium\",\n        \"[&_svg:not([class*='size-'])]:size-3\",\n        \"[[data-slot=tooltip-content]_&]:bg-background/20 [[data-slot=tooltip-content]_&]:text-background dark:[[data-slot=tooltip-content]_&]:bg-background/10\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction KbdGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <kbd\n      data-slot=\"kbd-group\"\n      className={cn(\"inline-flex items-center gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Kbd, KbdGroup }\n","path":null,"size_bytes":862,"size_tokens":null},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-white/80 dark:bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n      {children}\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","path":null,"size_bytes":4296,"size_tokens":null},"client/src/components/ui/menubar.tsx":{"content":"import * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-9 items-center space-x-1 rounded-md border bg-background p-1 shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-4 w-4 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","path":null,"size_bytes":8608,"size_tokens":null},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","path":null,"size_bytes":1877,"size_tokens":null},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-9 px-2 min-w-9\",\n        sm: \"h-8 px-1.5 min-w-8\",\n        lg: \"h-10 px-2.5 min-w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","path":null,"size_bytes":1486,"size_tokens":null},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","path":null,"size_bytes":1723,"size_tokens":null},"client/src/components/ui/empty.tsx":{"content":"import { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Empty({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"empty\"\n      className={cn(\n        \"flex min-w-0 flex-1 flex-col items-center justify-center gap-6 text-balance rounded-lg border-dashed p-6 text-center md:p-12\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction EmptyHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"empty-header\"\n      className={cn(\n        \"flex max-w-sm flex-col items-center gap-2 text-center\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nconst emptyMediaVariants = cva(\n  \"mb-2 flex shrink-0 items-center justify-center [&_svg]:pointer-events-none [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        icon: \"bg-muted text-foreground flex size-10 shrink-0 items-center justify-center rounded-lg [&_svg:not([class*='size-'])]:size-6\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nfunction EmptyMedia({\n  className,\n  variant = \"default\",\n  ...props\n}: React.ComponentProps<\"div\"> & VariantProps<typeof emptyMediaVariants>) {\n  return (\n    <div\n      data-slot=\"empty-icon\"\n      data-variant={variant}\n      className={cn(emptyMediaVariants({ variant, className }))}\n      {...props}\n    />\n  )\n}\n\nfunction EmptyTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"empty-title\"\n      className={cn(\"text-lg font-medium tracking-tight\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction EmptyDescription({ className, ...props }: React.ComponentProps<\"p\">) {\n  return (\n    <div\n      data-slot=\"empty-description\"\n      className={cn(\n        \"text-muted-foreground [&>a:hover]:text-primary text-sm/relaxed [&>a]:underline [&>a]:underline-offset-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction EmptyContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"empty-content\"\n      className={cn(\n        \"flex w-full min-w-0 max-w-sm flex-col items-center gap-4 text-balance text-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Empty,\n  EmptyHeader,\n  EmptyTitle,\n  EmptyDescription,\n  EmptyContent,\n  EmptyMedia,\n}\n","path":null,"size_bytes":2396,"size_tokens":null},"client/src/components/ui/label.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","path":null,"size_bytes":724,"size_tokens":null},"client/src/pages/admin.tsx":{"content":"import { Layout } from \"@/components/layout\";\nimport { SignalForm } from \"@/components/signal-form\";\nimport { ManualTicketForm } from \"@/components/manual-ticket-form\";\nimport { AiDraftsPanel } from \"@/components/ai-drafts-panel\";\nimport { MultiBotPanel } from \"@/components/multi-bot-panel\";\nimport { tipsService } from \"@/lib/tips-service\";\nimport { useEffect, useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Trophy, XCircle, Clock, ShieldAlert, Trash2, ScanLine, Copy, Check, Zap, PenLine, Crown, UserPlus, Loader2, Brain, LayoutDashboard, Flame, Target, Activity, RefreshCw, AlertTriangle, ChevronRight, Gift, Star, PlusCircle, Eye, Sparkles, TrendingUp, Diamond } from \"lucide-react\";\nimport { Signal } from \"@/lib/mock-data\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { useLocation } from \"wouter\";\nimport { toast } from \"sonner\";\nimport axios from \"axios\";\nimport { cn } from \"@/lib/utils\";\n\ninterface LivePressureData {\n  fixtureId: string;\n  league: string;\n  homeTeam: string;\n  awayTeam: string;\n  matchMinute: number;\n  score: string;\n  homePressure: number;\n  awayPressure: number;\n  homeGoalProbability: number;\n  awayGoalProbability: number;\n  homePressureDelta: number;\n  awayPressureDelta: number;\n  alertTriggered: boolean;\n  alertType?: string;\n}\n\ntype AdminTab = 'tickets' | 'free' | 'live' | 'ai' | 'bots' | 'oraculo';\n\ninterface AnalyzedOpportunity {\n  fixtureId: number;\n  homeTeam: string;\n  awayTeam: string;\n  homeTeamLogo: string;\n  awayTeamLogo: string;\n  league: string;\n  leagueLogo: string;\n  matchDate: string;\n  matchTime: string;\n  market: string;\n  probability: number;\n  bookmakerOdd: number | null;\n  fairOdd: number;\n  expectedValue: number | null;\n  status: 'APPROVED' | 'REJECTED_NO_ODDS' | 'REJECTED_LOW_EV' | 'REJECTED_LOW_PROB';\n  rejectionReason?: string;\n  potentialBadge: 'DIAMOND' | 'GOLD' | 'SILVER' | null;\n}\n\ninterface EliteSignal {\n  fixtureId: number;\n  league: string;\n  leagueLogo: string;\n  homeTeam: string;\n  awayTeam: string;\n  homeTeamLogo: string;\n  awayTeamLogo: string;\n  matchDate: string;\n  matchTime: string;\n  market: string;\n  marketCategory: 'GOALS' | 'CORNERS' | 'CARDS' | 'BTTS' | 'RESULT';\n  prediction: string;\n  probability: number;\n  bookmakerOdd: number;\n  fairOdd: number;\n  expectedValue: number;\n  confidenceScore: number;\n  badgeType: 'DIAMOND' | 'GOLD' | 'SILVER';\n  reasoning: {\n    primary: string;\n    homeAnalysis: string;\n    awayAnalysis: string;\n    h2hInsight: string;\n    refereeInsight?: string;\n    contextInsight: string;\n  };\n  patternStrength: number;\n  dataPoints: {\n    homeForm: string;\n    awayForm: string;\n    h2hRecord: string;\n    homePosition: string;\n    awayPosition: string;\n  };\n}\n\nfunction OraculoTab({ user }: { user: any }) {\n  const [isScanning, setIsScanning] = useState(false);\n  const [expandedCard, setExpandedCard] = useState<number | null>(null);\n  const [filterCategory, setFilterCategory] = useState<string>('ALL');\n  const [showAnalyzedModal, setShowAnalyzedModal] = useState(false);\n\n  const { data: eliteData, refetch } = useQuery({\n    queryKey: ['elite-results'],\n    queryFn: async () => {\n      const response = await axios.get('/api/elite/results');\n      return response.data;\n    },\n    refetchInterval: false,\n  });\n\n  const runScan = async () => {\n    setIsScanning(true);\n    try {\n      const response = await axios.post('/api/elite/scan', {\n        adminEmail: user?.email,\n        adminUserId: user?.id,\n      });\n      \n      if (response.data.success) {\n        toast.success(`üéØ ELITE ENGINE: ${response.data.diamondSignals} DIAMOND + ${response.data.goldSignals} GOLD encontrados! EV M√©dio: ${response.data.avgExpectedValue}%`);\n        refetch();\n      }\n    } catch (error: any) {\n      toast.error(error.response?.data?.error || 'Erro ao executar varredura');\n    } finally {\n      setIsScanning(false);\n    }\n  };\n\n  const filteredOpportunities = eliteData?.opportunities?.filter((s: EliteSignal) => \n    filterCategory === 'ALL' || s.marketCategory === filterCategory\n  ) || [];\n\n  const categoryIcons: Record<string, React.ReactNode> = {\n    'GOALS': '‚öΩ',\n    'CORNERS': 'üö©',\n    'CARDS': 'üü®',\n    'BTTS': 'üîÑ',\n    'RESULT': 'üèÜ'\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header ELITE ENGINE */}\n      <Card className=\"border-cyan-500/30 bg-gradient-to-br from-cyan-500/5 via-blue-600/5 to-purple-500/5\">\n        <CardHeader className=\"pb-3\">\n          <div className=\"flex items-center justify-between flex-wrap gap-4\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"w-14 h-14 rounded-xl bg-gradient-to-br from-cyan-400 via-blue-500 to-purple-500 flex items-center justify-center shadow-lg shadow-cyan-500/30 animate-pulse\">\n                <Diamond className=\"w-7 h-7 text-white\" />\n              </div>\n              <div>\n                <CardTitle className=\"flex items-center gap-2 text-xl\">\n                  ELITE ENGINE\n                  <Badge className=\"bg-gradient-to-r from-cyan-500 to-blue-500 text-white border-0 text-xs\">POISSON + xG</Badge>\n                </CardTitle>\n                <CardDescription className=\"text-gray-400\">\n                  Motor Preditivo Avan√ßado ‚Ä¢ EV Calculation ‚Ä¢ Pattern Detection\n                </CardDescription>\n              </div>\n            </div>\n            <Button\n              onClick={runScan}\n              disabled={isScanning}\n              size=\"lg\"\n              className=\"bg-gradient-to-r from-cyan-500 via-blue-500 to-purple-500 text-white font-bold hover:opacity-90 shadow-lg shadow-cyan-500/30\"\n              data-testid=\"button-run-elite\"\n            >\n              {isScanning ? (\n                <>\n                  <Loader2 className=\"w-5 h-5 mr-2 animate-spin\" />\n                  Analisando...\n                </>\n              ) : (\n                <>\n                  <ScanLine className=\"w-5 h-5 mr-2\" />\n                  üîç PESQUISAR BILHETES\n                </>\n              )}\n            </Button>\n          </div>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid grid-cols-2 md:grid-cols-5 gap-3\">\n            <div className=\"bg-black/30 rounded-lg p-3 text-center\">\n              <p className=\"text-xs text-gray-500\">Jogos Escaneados</p>\n              <p className=\"text-xl font-bold text-white\">{eliteData?.totalFixturesScanned || 0}</p>\n            </div>\n            <div \n              className=\"bg-black/30 rounded-lg p-3 text-center cursor-pointer hover:bg-black/50 transition-colors border border-transparent hover:border-cyan-500/30\"\n              onClick={() => setShowAnalyzedModal(true)}\n              data-testid=\"button-show-analyzed\"\n            >\n              <p className=\"text-xs text-gray-500\">Analisados <Eye className=\"w-3 h-3 inline ml-1\" /></p>\n              <p className=\"text-xl font-bold text-cyan-400\">{eliteData?.analyzedOpportunities?.length || eliteData?.fixturesAnalyzed || 0}</p>\n            </div>\n            <div className=\"bg-black/30 rounded-lg p-3 text-center border border-cyan-500/30\">\n              <p className=\"text-xs text-cyan-400\">üíé DIAMOND</p>\n              <p className=\"text-xl font-bold text-cyan-400\">{eliteData?.diamondSignals || 0}</p>\n            </div>\n            <div className=\"bg-black/30 rounded-lg p-3 text-center border border-yellow-500/30\">\n              <p className=\"text-xs text-yellow-400\">üèÜ GOLD</p>\n              <p className=\"text-xl font-bold text-yellow-400\">{eliteData?.goldSignals || 0}</p>\n            </div>\n            <div className=\"bg-black/30 rounded-lg p-3 text-center border border-[#33b864]/30\">\n              <p className=\"text-xs text-[#33b864]\">üìà EV M√©dio</p>\n              <p className=\"text-xl font-bold text-[#33b864]\">{eliteData?.avgExpectedValue || 0}%</p>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Filtros e Legenda */}\n      <div className=\"flex flex-wrap items-center justify-between gap-4\">\n        <div className=\"flex flex-wrap items-center gap-2\">\n          {['ALL', 'GOALS', 'BTTS', 'CORNERS', 'CARDS'].map(cat => (\n            <Button\n              key={cat}\n              size=\"sm\"\n              variant={filterCategory === cat ? \"default\" : \"outline\"}\n              onClick={() => setFilterCategory(cat)}\n              className={cn(\n                \"text-xs\",\n                filterCategory === cat && \"bg-gradient-to-r from-cyan-500 to-blue-500 text-white border-0\"\n              )}\n            >\n              {cat === 'ALL' ? 'üéØ Todos' : `${categoryIcons[cat]} ${cat}`}\n            </Button>\n          ))}\n        </div>\n        <div className=\"flex flex-wrap items-center gap-3 text-sm\">\n          <div className=\"flex items-center gap-1\">\n            <Badge className=\"bg-gradient-to-r from-cyan-400 to-blue-500 text-black border-0 text-[10px]\">\n              <Diamond className=\"w-2.5 h-2.5 mr-0.5\" />\n              DIAMOND\n            </Badge>\n            <span className=\"text-gray-500 text-xs\">EV‚â•7% + Prob‚â•72%</span>\n          </div>\n          <div className=\"flex items-center gap-1\">\n            <Badge className=\"bg-gradient-to-r from-yellow-400 to-amber-500 text-black border-0 text-[10px]\">\n              <Star className=\"w-2.5 h-2.5 mr-0.5\" />\n              GOLD\n            </Badge>\n            <span className=\"text-gray-500 text-xs\">EV‚â•4% + Prob‚â•62%</span>\n          </div>\n          <div className=\"flex items-center gap-1\">\n            <Badge className=\"bg-gray-500 text-white border-0 text-[10px]\">\n              SILVER\n            </Badge>\n            <span className=\"text-gray-500 text-xs\">EV‚â•2.5% + Prob‚â•58%</span>\n          </div>\n        </div>\n      </div>\n\n      {/* Lista de Oportunidades ELITE */}\n      {!eliteData?.hasResults ? (\n        <Card className=\"border-dashed border-cyan-500/30\">\n          <CardContent className=\"py-16 text-center\">\n            <Diamond className=\"w-20 h-20 mx-auto mb-4 text-cyan-500/30\" />\n            <h3 className=\"text-xl font-bold text-white mb-2\">Motor Elite Pronto</h3>\n            <p className=\"text-gray-400 mb-4\">Clique em \"PESQUISAR BILHETES\" para iniciar a an√°lise completa</p>\n            <div className=\"flex flex-wrap justify-center gap-2 text-xs text-gray-500\">\n              <span className=\"px-2 py-1 bg-black/30 rounded\">üìä Modelo Poisson</span>\n              <span className=\"px-2 py-1 bg-black/30 rounded\">üìà xG Analysis</span>\n              <span className=\"px-2 py-1 bg-black/30 rounded\">üí∞ EV Calculation</span>\n              <span className=\"px-2 py-1 bg-black/30 rounded\">üî• Cl√°ssicos</span>\n              <span className=\"px-2 py-1 bg-black/30 rounded\">üìã Posi√ß√£o Tabela</span>\n              <span className=\"px-2 py-1 bg-black/30 rounded\">üè† Fator Casa</span>\n            </div>\n          </CardContent>\n        </Card>\n      ) : filteredOpportunities.length === 0 ? (\n        <Card className=\"border-dashed border-gray-700\">\n          <CardContent className=\"py-16 text-center\">\n            <AlertTriangle className=\"w-16 h-16 mx-auto mb-4 text-gray-500\" />\n            <h3 className=\"text-xl font-bold text-white mb-2\">\n              {filterCategory === 'ALL' ? 'Nenhuma oportunidade encontrada' : `Nenhum bilhete de ${filterCategory}`}\n            </h3>\n            <p className=\"text-gray-400\">Filtros aplicados n√£o encontraram resultados com EV positivo</p>\n          </CardContent>\n        </Card>\n      ) : (\n        <div className=\"grid gap-4\">\n          {filteredOpportunities.map((signal: EliteSignal, index: number) => (\n            <Card \n              key={signal.fixtureId + '-' + signal.market + '-' + index} \n              className={cn(\n                \"border transition-all cursor-pointer\",\n                signal.badgeType === 'DIAMOND' \n                  ? \"border-cyan-500/40 bg-gradient-to-br from-cyan-500/10 to-blue-500/10 hover:border-cyan-400\"\n                  : signal.badgeType === 'GOLD'\n                    ? \"border-yellow-500/40 bg-gradient-to-br from-yellow-500/10 to-amber-500/10 hover:border-yellow-400\"\n                    : \"border-gray-600/40 bg-gradient-to-br from-gray-600/10 to-gray-700/10 hover:border-gray-500\"\n              )}\n              onClick={() => setExpandedCard(expandedCard === index ? null : index)}\n              data-testid={`elite-card-${index}`}\n            >\n              <CardContent className=\"p-4\">\n                {/* Header do Card */}\n                <div className=\"flex items-start justify-between mb-3 gap-2\">\n                  <div className=\"flex items-center gap-3\">\n                    <div className=\"flex -space-x-2\">\n                      <img src={signal.homeTeamLogo} alt=\"\" className=\"w-10 h-10 rounded-full bg-white/10 border-2 border-white/20\" />\n                      <img src={signal.awayTeamLogo} alt=\"\" className=\"w-10 h-10 rounded-full bg-white/10 border-2 border-white/20\" />\n                    </div>\n                    <div>\n                      <p className=\"text-white font-bold text-sm\">\n                        {signal.homeTeam} vs {signal.awayTeam}\n                      </p>\n                      <p className=\"text-gray-500 text-xs flex items-center gap-2\">\n                        <img src={signal.leagueLogo} alt=\"\" className=\"w-4 h-4\" />\n                        {signal.league} ‚Ä¢ {signal.matchDate} {signal.matchTime}\n                      </p>\n                    </div>\n                  </div>\n                  \n                  <div className=\"flex items-center gap-2 flex-shrink-0\">\n                    {signal.badgeType === 'DIAMOND' ? (\n                      <Badge className=\"bg-gradient-to-r from-cyan-400 to-blue-500 text-white border-0 font-bold shadow-lg shadow-cyan-500/30\">\n                        <Diamond className=\"w-3 h-3 mr-1\" />\n                        DIAMOND\n                      </Badge>\n                    ) : signal.badgeType === 'GOLD' ? (\n                      <Badge className=\"bg-gradient-to-r from-yellow-400 to-amber-500 text-black border-0 font-bold\">\n                        <Star className=\"w-3 h-3 mr-1\" />\n                        GOLD\n                      </Badge>\n                    ) : (\n                      <Badge className=\"bg-gray-600 text-white border-0\">\n                        SILVER\n                      </Badge>\n                    )}\n                  </div>\n                </div>\n\n                {/* Mercado + M√©tricas */}\n                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-2 mb-3\">\n                  <div className=\"col-span-2 bg-black/40 rounded-lg p-3\">\n                    <div className=\"flex items-center gap-2 mb-1\">\n                      <span className=\"text-lg\">{categoryIcons[signal.marketCategory]}</span>\n                      <span className=\"text-white font-bold text-sm\">{signal.market}</span>\n                    </div>\n                    <p className=\"text-gray-400 text-xs\">{signal.prediction}</p>\n                  </div>\n                  <div className=\"bg-black/40 rounded-lg p-2 text-center\">\n                    <p className=\"text-[10px] text-gray-500\">PROB</p>\n                    <p className=\"text-lg font-bold text-white\">{signal.probability}%</p>\n                  </div>\n                  <div className=\"bg-black/40 rounded-lg p-2 text-center\">\n                    <p className=\"text-[10px] text-gray-500\">EV</p>\n                    <p className={cn(\n                      \"text-lg font-bold\",\n                      signal.expectedValue >= 8 ? \"text-cyan-400\" : \n                      signal.expectedValue >= 5 ? \"text-[#33b864]\" : \"text-yellow-400\"\n                    )}>+{signal.expectedValue}%</p>\n                  </div>\n                </div>\n\n                {/* Odds */}\n                <div className=\"flex items-center justify-between bg-black/30 rounded-lg p-2 mb-2\">\n                  <div className=\"flex items-center gap-4 text-xs\">\n                    <span className=\"text-gray-500\">Odd Bet365: <span className=\"text-white font-bold\">{signal.bookmakerOdd}</span></span>\n                    <span className=\"text-gray-500\">Odd Justa: <span className=\"text-cyan-400 font-bold\">{signal.fairOdd}</span></span>\n                  </div>\n                  <div className=\"flex items-center gap-2 text-xs\">\n                    <span className=\"text-gray-500\">{signal.dataPoints.homeForm}</span>\n                    <span className=\"text-gray-400\">vs</span>\n                    <span className=\"text-gray-500\">{signal.dataPoints.awayForm}</span>\n                  </div>\n                </div>\n\n                {/* Detalhes Expandidos */}\n                {expandedCard === index && (\n                  <div className=\"space-y-3 mt-4 pt-4 border-t border-white/10\">\n                    <div className=\"bg-gradient-to-r from-cyan-500/10 to-blue-500/10 border border-cyan-500/30 rounded-lg p-3\">\n                      <p className=\"text-xs text-cyan-400 mb-1 font-bold\">üìä An√°lise Poisson</p>\n                      <p className=\"text-sm text-white\">{signal.reasoning.primary}</p>\n                    </div>\n                    <div className=\"grid grid-cols-2 gap-3\">\n                      <div className=\"bg-black/20 rounded-lg p-3\">\n                        <p className=\"text-xs text-gray-500 mb-1\">üè† Mandante ({signal.dataPoints.homePosition})</p>\n                        <p className=\"text-xs text-gray-300\">{signal.reasoning.homeAnalysis}</p>\n                      </div>\n                      <div className=\"bg-black/20 rounded-lg p-3\">\n                        <p className=\"text-xs text-gray-500 mb-1\">‚úàÔ∏è Visitante ({signal.dataPoints.awayPosition})</p>\n                        <p className=\"text-xs text-gray-300\">{signal.reasoning.awayAnalysis}</p>\n                      </div>\n                    </div>\n                    <div className=\"bg-black/20 rounded-lg p-3\">\n                      <p className=\"text-xs text-gray-500 mb-1\">‚öîÔ∏è H2H: {signal.dataPoints.h2hRecord}</p>\n                      <p className=\"text-xs text-gray-300\">{signal.reasoning.h2hInsight}</p>\n                    </div>\n                    {signal.reasoning.refereeInsight && (\n                      <div className=\"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-3\">\n                        <p className=\"text-xs text-yellow-400 mb-1\">üë®‚Äç‚öñÔ∏è Fator √Årbitro</p>\n                        <p className=\"text-xs text-gray-300\">{signal.reasoning.refereeInsight}</p>\n                      </div>\n                    )}\n                    <div className=\"bg-gradient-to-r from-[#33b864]/10 to-emerald-500/10 border border-[#33b864]/30 rounded-lg p-3\">\n                      <p className=\"text-xs text-[#33b864] mb-1\">üéØ Contexto do Jogo</p>\n                      <p className=\"text-sm text-white\">{signal.reasoning.contextInsight}</p>\n                    </div>\n                  </div>\n                )}\n\n                {/* Indicador de Expans√£o */}\n                <div className=\"flex justify-center mt-2\">\n                  <ChevronRight className={cn(\n                    \"w-4 h-4 text-gray-500 transition-transform\",\n                    expandedCard === index && \"rotate-90\"\n                  )} />\n                </div>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      )}\n\n      {/* Modal de Oportunidades Analisadas */}\n      {showAnalyzedModal && (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm\">\n          <div className=\"bg-[#1a1a2e] border border-cyan-500/30 rounded-xl w-full max-w-4xl max-h-[80vh] overflow-hidden shadow-2xl shadow-cyan-500/20\">\n            <div className=\"flex items-center justify-between p-4 border-b border-cyan-500/30 bg-gradient-to-r from-cyan-500/10 to-blue-500/10\">\n              <div className=\"flex items-center gap-3\">\n                <Eye className=\"w-5 h-5 text-cyan-400\" />\n                <h3 className=\"text-lg font-bold text-white\">Oportunidades Analisadas</h3>\n                <Badge className=\"bg-cyan-500/20 text-cyan-400 border-cyan-500/30\">\n                  {eliteData?.analyzedOpportunities?.length || 0} mercados\n                </Badge>\n              </div>\n              <Button \n                variant=\"ghost\" \n                size=\"sm\" \n                onClick={() => setShowAnalyzedModal(false)}\n                className=\"text-gray-400 hover:text-white\"\n              >\n                <XCircle className=\"w-5 h-5\" />\n              </Button>\n            </div>\n            <div className=\"p-4 overflow-y-auto max-h-[calc(80vh-80px)]\">\n              {!eliteData?.analyzedOpportunities?.length ? (\n                <div className=\"text-center py-8\">\n                  <AlertTriangle className=\"w-12 h-12 mx-auto text-gray-500 mb-4\" />\n                  <p className=\"text-gray-400\">Nenhuma oportunidade analisada ainda. Execute uma varredura primeiro.</p>\n                </div>\n              ) : (\n                <div className=\"space-y-3\">\n                  {/* Resumo */}\n                  <div className=\"grid grid-cols-4 gap-2 mb-4\">\n                    <div className=\"bg-green-500/10 border border-green-500/30 rounded-lg p-3 text-center\">\n                      <p className=\"text-xs text-green-400\">Aprovados</p>\n                      <p className=\"text-xl font-bold text-green-400\">\n                        {eliteData.analyzedOpportunities.filter((o: AnalyzedOpportunity) => o.status === 'APPROVED').length}\n                      </p>\n                    </div>\n                    <div className=\"bg-red-500/10 border border-red-500/30 rounded-lg p-3 text-center\">\n                      <p className=\"text-xs text-red-400\">EV Baixo</p>\n                      <p className=\"text-xl font-bold text-red-400\">\n                        {eliteData.analyzedOpportunities.filter((o: AnalyzedOpportunity) => o.status === 'REJECTED_LOW_EV').length}\n                      </p>\n                    </div>\n                    <div className=\"bg-orange-500/10 border border-orange-500/30 rounded-lg p-3 text-center\">\n                      <p className=\"text-xs text-orange-400\">Prob. Baixa</p>\n                      <p className=\"text-xl font-bold text-orange-400\">\n                        {eliteData.analyzedOpportunities.filter((o: AnalyzedOpportunity) => o.status === 'REJECTED_LOW_PROB').length}\n                      </p>\n                    </div>\n                    <div className=\"bg-gray-500/10 border border-gray-500/30 rounded-lg p-3 text-center\">\n                      <p className=\"text-xs text-gray-400\">Sem Odds</p>\n                      <p className=\"text-xl font-bold text-gray-400\">\n                        {eliteData.analyzedOpportunities.filter((o: AnalyzedOpportunity) => o.status === 'REJECTED_NO_ODDS').length}\n                      </p>\n                    </div>\n                  </div>\n\n                  {/* Lista de Oportunidades */}\n                  {eliteData.analyzedOpportunities.map((opp: AnalyzedOpportunity, idx: number) => (\n                    <div \n                      key={`${opp.fixtureId}-${opp.market}-${idx}`}\n                      className={cn(\n                        \"rounded-lg p-3 border\",\n                        opp.status === 'APPROVED' \n                          ? \"bg-green-500/10 border-green-500/30\" \n                          : opp.status === 'REJECTED_LOW_EV'\n                            ? \"bg-red-500/10 border-red-500/30\"\n                            : opp.status === 'REJECTED_LOW_PROB'\n                              ? \"bg-orange-500/10 border-orange-500/30\"\n                              : \"bg-gray-500/10 border-gray-500/30\"\n                      )}\n                    >\n                      <div className=\"flex items-center justify-between flex-wrap gap-2\">\n                        <div className=\"flex items-center gap-2\">\n                          <img src={opp.homeTeamLogo} alt=\"\" className=\"w-5 h-5\" />\n                          <span className=\"text-sm text-white font-medium\">{opp.homeTeam}</span>\n                          <span className=\"text-xs text-gray-500\">vs</span>\n                          <span className=\"text-sm text-white font-medium\">{opp.awayTeam}</span>\n                          <img src={opp.awayTeamLogo} alt=\"\" className=\"w-5 h-5\" />\n                        </div>\n                        <div className=\"flex items-center gap-2\">\n                          <Badge className={cn(\n                            \"text-[10px]\",\n                            opp.status === 'APPROVED' ? \"bg-green-500 text-white\" :\n                            opp.status === 'REJECTED_LOW_EV' ? \"bg-red-500 text-white\" :\n                            opp.status === 'REJECTED_LOW_PROB' ? \"bg-orange-500 text-white\" :\n                            \"bg-gray-500 text-white\"\n                          )}>\n                            {opp.status === 'APPROVED' ? '‚úì APROVADO' : \n                             opp.status === 'REJECTED_LOW_EV' ? '‚úó EV BAIXO' :\n                             opp.status === 'REJECTED_LOW_PROB' ? '‚úó PROB BAIXA' :\n                             '‚úó SEM ODDS'}\n                          </Badge>\n                          {opp.potentialBadge && (\n                            <Badge className={cn(\n                              \"text-[10px]\",\n                              opp.potentialBadge === 'DIAMOND' ? \"bg-gradient-to-r from-cyan-400 to-blue-500 text-black\" :\n                              opp.potentialBadge === 'GOLD' ? \"bg-gradient-to-r from-yellow-400 to-amber-500 text-black\" :\n                              \"bg-gray-500 text-white\"\n                            )}>\n                              {opp.potentialBadge}\n                            </Badge>\n                          )}\n                        </div>\n                      </div>\n                      <div className=\"mt-2 grid grid-cols-2 md:grid-cols-5 gap-2 text-xs\">\n                        <div>\n                          <span className=\"text-gray-500\">Mercado:</span>\n                          <span className=\"ml-1 text-white\">{opp.market}</span>\n                        </div>\n                        <div>\n                          <span className=\"text-gray-500\">Prob:</span>\n                          <span className=\"ml-1 text-cyan-400\">{opp.probability}%</span>\n                        </div>\n                        <div>\n                          <span className=\"text-gray-500\">Odd:</span>\n                          <span className=\"ml-1 text-white\">{opp.bookmakerOdd?.toFixed(2) || '-'}</span>\n                        </div>\n                        <div>\n                          <span className=\"text-gray-500\">Fair:</span>\n                          <span className=\"ml-1 text-gray-400\">{opp.fairOdd.toFixed(2)}</span>\n                        </div>\n                        <div>\n                          <span className=\"text-gray-500\">EV:</span>\n                          <span className={cn(\n                            \"ml-1\",\n                            (opp.expectedValue || 0) >= 3 ? \"text-green-400\" : \"text-red-400\"\n                          )}>\n                            {opp.expectedValue !== null ? `${opp.expectedValue}%` : '-'}\n                          </span>\n                        </div>\n                      </div>\n                      {opp.rejectionReason && (\n                        <p className=\"mt-2 text-xs text-gray-400 italic\">{opp.rejectionReason}</p>\n                      )}\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default function Admin() {\n  const queryClient = useQueryClient();\n  const { user } = useAuth();\n  const [, setLocation] = useLocation();\n  const [copiedId, setCopiedId] = useState<string | null>(null);\n  const [premiumEmail, setPremiumEmail] = useState(\"\");\n  const [premiumDays, setPremiumDays] = useState(\"30\");\n  const [isActivatingPremium, setIsActivatingPremium] = useState(false);\n  const [activeTab, setActiveTab] = useState<AdminTab>('tickets');\n  const [ticketSubTab, setTicketSubTab] = useState<'manual' | 'scanner'>('manual');\n  \n  console.log('üîß Admin Page Loaded - Version 5.0 - Multi-Bot System');\n\n  // DESATIVADO: Monitor de Jogos Quentes - Em Constru√ß√£o (consumo excessivo de API-Football)\n\n  const handleActivatePremium = async () => {\n    if (!premiumEmail.trim()) {\n      toast.error(\"Digite o email do usu√°rio\");\n      return;\n    }\n    \n    const days = parseInt(premiumDays);\n    if (isNaN(days) || days < 1) {\n      toast.error(\"Digite um n√∫mero v√°lido de dias\");\n      return;\n    }\n\n    if (!user?.email || !user?.id) {\n      toast.error(\"Voc√™ precisa estar logado como admin\");\n      return;\n    }\n\n    setIsActivatingPremium(true);\n    try {\n      const response = await axios.post(\"/api/admin/activate-premium\", {\n        email: premiumEmail.trim(),\n        days: days,\n        adminEmail: user.email,\n        adminUserId: user.id,\n      });\n      \n      if (response.data.success) {\n        toast.success(`Acesso Premium ativado para ${premiumEmail} por ${days} dias!`);\n        setPremiumEmail(\"\");\n        setPremiumDays(\"30\");\n      } else {\n        toast.error(response.data.error || \"Erro ao ativar premium\");\n      }\n    } catch (error: any) {\n      console.error(\"Error activating premium:\", error);\n      toast.error(error.response?.data?.error || \"Erro ao ativar acesso premium\");\n    } finally {\n      setIsActivatingPremium(false);\n    }\n  };\n\n  const copyTicket = (signal: Signal) => {\n    const text = `üéØ TRUE SIGNAL\n\n‚öΩ ${signal.homeTeam} vs ${signal.awayTeam}\nüìä ${signal.market}\nüí∞ ODD: ${signal.odd.toFixed(2)}\n${signal.betLink ? `üîó ${signal.betLink}` : ''}\n\nüì± @vantage`;\n    \n    navigator.clipboard.writeText(text);\n    setCopiedId(signal.id);\n    toast.success(\"Bilhete copiado!\");\n    setTimeout(() => setCopiedId(null), 2000);\n  };\n\n  useEffect(() => {\n    if (user && user.role !== 'admin' && user.email !== 'kwillianferreira@gmail.com') {\n      toast.error(\"Acesso negado. Apenas administradores podem acessar esta p√°gina.\");\n      setLocation(\"/app\");\n    }\n  }, [user, setLocation]);\n\n  if (!user || (user.role !== 'admin' && user.email !== 'kwillianferreira@gmail.com')) {\n    return (\n      <Layout>\n        <div className=\"flex flex-col items-center justify-center min-h-[60vh] text-center\">\n          <ShieldAlert className=\"w-16 h-16 text-red-500 mb-4\" />\n          <h2 className=\"text-2xl font-bold text-white mb-2\">Acesso Negado</h2>\n          <p className=\"text-muted-foreground\">Apenas administradores podem acessar esta p√°gina.</p>\n        </div>\n      </Layout>\n    );\n  }\n\n  const { data: signals = [] } = useQuery({\n    queryKey: ['tips'],\n    queryFn: tipsService.getAll,\n  });\n\n  const createMutation = useMutation({\n    mutationFn: tipsService.create,\n    onSuccess: async (newTip) => {\n      queryClient.invalidateQueries({ queryKey: ['tips'] });\n      toast.success(\"Sinal criado com sucesso!\");\n      \n      try {\n        const { notificationService } = await import(\"@/lib/notification-service\");\n        await notificationService.sendNewTipNotification({\n          match: `${newTip.homeTeam} vs ${newTip.awayTeam}`,\n          market: newTip.market,\n          odd: newTip.odd,\n        });\n      } catch (error) {\n        console.error(\"Error sending notification:\", error);\n      }\n    },\n    onError: (error: any) => {\n      toast.error(error.message || \"Erro ao criar tip. Apenas administradores podem criar tips.\");\n    }\n  });\n\n  const createFreeMutation = useMutation({\n    mutationFn: async (formData: any) => {\n      const newTip = await tipsService.create(formData);\n      await axios.patch(`/api/tips/${newTip.id}/free`, {\n        isFree: true,\n        adminEmail: user?.email,\n        adminUserId: user?.id,\n      });\n      return newTip;\n    },\n    onSuccess: async (newTip) => {\n      queryClient.invalidateQueries({ queryKey: ['tips'] });\n      toast.success(\"Bilhete FREE criado com sucesso!\");\n      \n      try {\n        const { notificationService } = await import(\"@/lib/notification-service\");\n        await notificationService.sendNewTipNotification({\n          match: `${newTip.homeTeam} vs ${newTip.awayTeam}`,\n          market: newTip.market,\n          odd: newTip.odd,\n        });\n      } catch (error) {\n        console.error(\"Error sending notification:\", error);\n      }\n    },\n    onError: (error: any) => {\n      toast.error(error.message || \"Erro ao criar bilhete FREE.\");\n    }\n  });\n\n  const updateStatusMutation = useMutation({\n    mutationFn: ({ id, status }: { id: string, status: Signal['status'] }) => \n      tipsService.updateStatus(id, status),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['tips'] });\n      toast.success(\"Status atualizado!\");\n    },\n    onError: (error: any) => {\n      toast.error(error.message || \"Erro ao atualizar status. Apenas administradores podem editar tips.\");\n    }\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: (id: string) => tipsService.delete(id),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['tips'] });\n      toast.success(\"Sinal deletado com sucesso!\");\n    },\n    onError: (error: any) => {\n      toast.error(error.message || \"Erro ao deletar sinal.\");\n    }\n  });\n\n  const setFreeMutation = useMutation({\n    mutationFn: async ({ id, isFree }: { id: string; isFree: boolean }) => {\n      const response = await axios.patch(`/api/tips/${id}/free`, {\n        isFree,\n        adminEmail: user?.email,\n        adminUserId: user?.id,\n      });\n      return response.data.tip;\n    },\n    onSuccess: (_, variables) => {\n      queryClient.invalidateQueries({ queryKey: ['tips'] });\n      toast.success(variables.isFree ? \"Bilhete marcado como FREE!\" : \"Bilhete removido do FREE\");\n    },\n    onError: (error: any) => {\n      toast.error(error.message || \"Erro ao atualizar bilhete free.\");\n    }\n  });\n\n  const handleCreateTip = (formData: any) => {\n    if (user?.role !== 'admin' && user?.email !== 'kwillianferreira@gmail.com') {\n      toast.error(\"Apenas administradores podem criar tips.\");\n      return;\n    }\n    createMutation.mutate(formData);\n  };\n\n  const handleCreateFreeTip = (formData: any) => {\n    if (user?.role !== 'admin' && user?.email !== 'kwillianferreira@gmail.com') {\n      toast.error(\"Apenas administradores podem criar tips.\");\n      return;\n    }\n    createFreeMutation.mutate(formData);\n  };\n\n  const freeTip = signals.find(s => s.isFree);\n  \n  const tabs = [\n    { id: 'tickets' as const, label: 'Bilhetes', icon: LayoutDashboard, color: 'from-[#33b864] to-emerald-600', badge: signals.length },\n    { id: 'free' as const, label: 'Bilhete Free', icon: Gift, color: 'from-yellow-500 to-orange-500', badge: freeTip ? 1 : 0 },\n    { id: 'oraculo' as const, label: 'ELITE ENGINE', icon: Diamond, color: 'from-cyan-500 to-blue-500' },\n    { id: 'live' as const, label: 'Jogos Quentes', icon: Flame, color: 'from-orange-500 to-red-500' },\n    { id: 'ai' as const, label: 'IA Preditiva', icon: Brain, color: 'from-purple-500 to-pink-500' },\n    { id: 'bots' as const, label: 'Multi-Bot', icon: Target, color: 'from-cyan-500 to-blue-500' },\n  ];\n\n  return (\n    <Layout>\n      {/* ========== HEADER MOBILE ========== */}\n      <div className=\"mb-6\">\n        <h1 className=\"text-xl md:text-2xl font-display font-bold text-white mb-1\">Painel Admin</h1>\n        <p className=\"text-muted-foreground text-sm\">Central de controle TRUE SIGNAL</p>\n      </div>\n\n      {/* ========== NAVEGA√á√ÉO MOBILE - ABAS GRANDES ========== */}\n      <div className=\"grid grid-cols-2 gap-3 mb-6 md:hidden\">\n        {tabs.map((tab) => {\n          const Icon = tab.icon;\n          const isActive = activeTab === tab.id;\n          return (\n            <button\n              key={tab.id}\n              onClick={() => setActiveTab(tab.id)}\n              className={cn(\n                \"relative flex flex-col items-center justify-center p-4 rounded-2xl border-2 transition-all min-h-[100px]\",\n                isActive \n                  ? `bg-gradient-to-br ${tab.color} border-transparent shadow-lg` \n                  : \"bg-white/5 border-white/10 hover:border-white/20\"\n              )}\n              data-testid={`tab-${tab.id}`}\n            >\n              <Icon className={cn(\"w-8 h-8 mb-2\", isActive ? \"text-white\" : \"text-gray-400\")} />\n              <span className={cn(\"text-sm font-bold\", isActive ? \"text-white\" : \"text-gray-300\")}>\n                {tab.label}\n              </span>\n              {tab.badge !== undefined && tab.badge > 0 && (\n                <span className={cn(\n                  \"absolute top-2 right-2 text-[10px] font-bold rounded-full w-6 h-6 flex items-center justify-center\",\n                  isActive ? \"bg-white/30 text-white\" : \"bg-red-500 text-white animate-pulse\"\n                )}>\n                  {tab.badge}\n                </span>\n              )}\n            </button>\n          );\n        })}\n      </div>\n\n      {/* ========== NAVEGA√á√ÉO DESKTOP ========== */}\n      <div className=\"hidden md:flex gap-2 mb-6 bg-background/50 p-2 rounded-xl\">\n        {tabs.map((tab) => {\n          const Icon = tab.icon;\n          const isActive = activeTab === tab.id;\n          return (\n            <button\n              key={tab.id}\n              onClick={() => setActiveTab(tab.id)}\n              className={cn(\n                \"relative flex items-center gap-2 px-4 py-3 rounded-lg font-bold text-sm transition-all\",\n                isActive \n                  ? `bg-gradient-to-r ${tab.color} text-white` \n                  : \"text-gray-400 hover:text-white hover:bg-white/5\"\n              )}\n              data-testid={`tab-desktop-${tab.id}`}\n            >\n              <Icon className=\"w-5 h-5\" />\n              {tab.label}\n              {tab.badge !== undefined && tab.badge > 0 && (\n                <span className={cn(\n                  \"text-[10px] rounded-full px-2 py-0.5\",\n                  isActive ? \"bg-white/30\" : \"bg-red-500 text-white\"\n                )}>\n                  {tab.badge}\n                </span>\n              )}\n            </button>\n          );\n        })}\n      </div>\n\n      {/* ========== CONTE√öDO DAS ABAS ========== */}\n\n      {/* TAB 1: BILHETES */}\n      {activeTab === 'tickets' && (\n        <div className=\"space-y-6\">\n          {/* Card Liberar Premium - Mobile Otimizado */}\n          <Card className=\"border-yellow-500/30\">\n            <CardHeader className=\"pb-3\">\n              <CardTitle className=\"flex items-center gap-2 text-base\">\n                <Crown className=\"w-6 h-6 text-yellow-500\" />\n                Liberar Acesso Premium\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div>\n                <label className=\"text-sm text-gray-400 block mb-2\">Email do Usu√°rio</label>\n                <input\n                  type=\"email\"\n                  value={premiumEmail}\n                  onChange={(e) => setPremiumEmail(e.target.value)}\n                  placeholder=\"usuario@email.com\"\n                  className=\"w-full bg-background border border-white/10 rounded-xl px-4 py-3 text-base text-white placeholder:text-gray-500 focus:border-yellow-500/50 focus:outline-none\"\n                  data-testid=\"input-premium-email\"\n                />\n              </div>\n              <div>\n                <label className=\"text-sm text-gray-400 block mb-2\">Dias de Acesso</label>\n                <input\n                  type=\"number\"\n                  value={premiumDays}\n                  onChange={(e) => setPremiumDays(e.target.value)}\n                  min=\"1\"\n                  max=\"365\"\n                  className=\"w-full bg-background border border-white/10 rounded-xl px-4 py-3 text-base text-white focus:border-yellow-500/50 focus:outline-none\"\n                  data-testid=\"input-premium-days\"\n                />\n              </div>\n              <Button\n                onClick={handleActivatePremium}\n                disabled={isActivatingPremium || !premiumEmail.trim()}\n                className=\"w-full h-14 bg-gradient-to-r from-yellow-500 to-yellow-600 hover:from-yellow-600 hover:to-yellow-700 text-black font-bold text-base rounded-xl\"\n                data-testid=\"button-activate-premium\"\n              >\n                {isActivatingPremium ? (\n                  <><Loader2 className=\"w-5 h-5 mr-2 animate-spin\" />Ativando...</>\n                ) : (\n                  <><UserPlus className=\"w-5 h-5 mr-2\" />Ativar Premium</>\n                )}\n              </Button>\n            </CardContent>\n          </Card>\n\n          {/* Sub-abas Manual/Scanner - Mobile Otimizado */}\n          <div className=\"grid grid-cols-2 gap-3 mb-4\">\n            <button\n              onClick={() => setTicketSubTab('manual')}\n              className={cn(\n                \"flex items-center justify-center gap-2 p-4 rounded-xl border-2 transition-all\",\n                ticketSubTab === 'manual'\n                  ? \"bg-[#33b864] border-[#33b864] text-black\"\n                  : \"bg-white/5 border-white/10 text-gray-300\"\n              )}\n              data-testid=\"tab-manual\"\n            >\n              <PenLine className=\"w-5 h-5\" />\n              <span className=\"font-bold\">Manual</span>\n            </button>\n            <button\n              onClick={() => setTicketSubTab('scanner')}\n              className={cn(\n                \"flex items-center justify-center gap-2 p-4 rounded-xl border-2 transition-all\",\n                ticketSubTab === 'scanner'\n                  ? \"bg-[#33b864] border-[#33b864] text-black\"\n                  : \"bg-white/5 border-white/10 text-gray-300\"\n              )}\n              data-testid=\"tab-scanner\"\n            >\n              <ScanLine className=\"w-5 h-5\" />\n              <span className=\"font-bold\">Scanner IA</span>\n            </button>\n          </div>\n\n          {/* Formul√°rio de cria√ß√£o */}\n          <Card className=\"border-primary/20\">\n            <CardContent className=\"pt-6\">\n              {ticketSubTab === 'manual' ? (\n                <ManualTicketForm onSubmit={handleCreateTip} isSubmitting={createMutation.isPending} />\n              ) : (\n                <SignalForm onAdd={(data) => handleCreateTip(data)} />\n              )}\n            </CardContent>\n          </Card>\n\n          {/* Lista de Bilhetes - Estilo Bet365 */}\n          <Card className=\"border-primary/20\">\n            <CardHeader className=\"pb-4 border-b border-primary/10\">\n              <div className=\"flex justify-between items-center\">\n                <CardTitle className=\"flex items-center gap-2 text-lg\">\n                  <Zap className=\"w-6 h-6 text-primary\" />\n                  Sinais Ativos\n                </CardTitle>\n                <Badge variant=\"outline\" className=\"bg-primary/20 text-primary border-primary/30 text-sm px-3 py-1\">\n                  {signals.length} Total\n                </Badge>\n              </div>\n            </CardHeader>\n            <CardContent className=\"pt-4 space-y-4\">\n              {signals.length === 0 ? (\n                <div className=\"text-center py-12 text-muted-foreground\">\n                  <LayoutDashboard className=\"w-12 h-12 mx-auto mb-3 opacity-30\" />\n                  <p>Nenhum sinal criado ainda</p>\n                </div>\n              ) : (\n                signals.map((signal) => (\n                  <div \n                    key={signal.id} \n                    className=\"bg-gradient-to-br from-[#0d1117] to-[#161b22] border border-white/10 rounded-2xl overflow-hidden\"\n                  >\n                    {/* Barra de status superior */}\n                    <div className={cn(\n                      \"h-1.5\",\n                      signal.status === 'green' ? 'bg-gradient-to-r from-green-500 to-green-400' :\n                      signal.status === 'red' ? 'bg-gradient-to-r from-red-500 to-red-400' :\n                      'bg-gradient-to-r from-yellow-500 to-yellow-400'\n                    )} />\n                    \n                    <div className=\"p-4\">\n                      {/* Header com ODD grande */}\n                      <div className=\"flex items-start justify-between mb-4\">\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center gap-2 mb-2\">\n                            {signal.isLive && (\n                              <span className=\"text-xs text-red-500 bg-red-500/20 px-2 py-1 rounded-full animate-pulse font-bold\">LIVE</span>\n                            )}\n                            <span className={cn(\n                              \"text-xs px-2 py-1 rounded-full font-bold\",\n                              signal.status === 'green' ? 'bg-green-500/20 text-green-400' :\n                              signal.status === 'red' ? 'bg-red-500/20 text-red-400' :\n                              'bg-yellow-500/20 text-yellow-400'\n                            )}>\n                              {signal.status === 'green' ? '‚úì GREEN' : signal.status === 'red' ? '‚úó RED' : '‚è≥ PENDENTE'}\n                            </span>\n                          </div>\n                          <h4 className=\"text-lg font-bold text-white leading-tight\">\n                            {signal.homeTeam}\n                          </h4>\n                          <p className=\"text-gray-400 text-sm\">vs {signal.awayTeam}</p>\n                        </div>\n                        \n                        <div className=\"bg-[#33b864]/20 border-2 border-[#33b864] rounded-xl px-4 py-2 text-center min-w-[80px]\">\n                          <span className=\"text-[10px] text-[#33b864] block uppercase font-medium\">ODD</span>\n                          <span className=\"text-2xl font-bold text-[#33b864]\">{signal.odd.toFixed(2)}</span>\n                        </div>\n                      </div>\n                      \n                      {/* Timeline estilo Bet365 */}\n                      <div className=\"relative pl-5 mb-4\">\n                        <div className=\"absolute left-[6px] top-1 bottom-1 w-[2px] bg-[#33b864]\"></div>\n                        {signal.market.split('\\n').filter(line => line.trim()).map((line, idx) => (\n                          <div key={idx} className=\"relative flex items-start gap-3 mb-2 last:mb-0\">\n                            <div className=\"absolute -left-5 top-1 w-3 h-3 rounded-full bg-[#33b864] flex items-center justify-center\">\n                              <Check className=\"w-2 h-2 text-black\" />\n                            </div>\n                            <p className=\"text-white text-sm font-medium ml-1\">{line.trim()}</p>\n                          </div>\n                        ))}\n                      </div>\n                      \n                      {/* Bot√µes de a√ß√£o - Touch-friendly */}\n                      <div className=\"flex flex-col gap-3 pt-4 border-t border-white/10\">\n                        {/* Linha 1: Status - Grid para n√£o cortar */}\n                        <div className=\"grid grid-cols-3 gap-2\">\n                          <Button \n                            onClick={() => updateStatusMutation.mutate({ id: signal.id, status: 'green' })}\n                            className={cn(\n                              \"h-11 rounded-xl font-bold text-sm px-2\",\n                              signal.status === 'green' \n                                ? 'bg-green-500 text-white' \n                                : 'bg-green-500/20 text-green-400 border border-green-500/50'\n                            )}\n                            data-testid={`button-status-green-${signal.id}`}\n                          >\n                            <Trophy className=\"w-4 h-4 mr-1\" />\n                            GREEN\n                          </Button>\n                          <Button \n                            onClick={() => updateStatusMutation.mutate({ id: signal.id, status: 'red' })}\n                            className={cn(\n                              \"h-11 rounded-xl font-bold text-sm px-2\",\n                              signal.status === 'red' \n                                ? 'bg-red-500 text-white' \n                                : 'bg-red-500/20 text-red-400 border border-red-500/50'\n                            )}\n                            data-testid={`button-status-red-${signal.id}`}\n                          >\n                            <XCircle className=\"w-4 h-4 mr-1\" />\n                            RED\n                          </Button>\n                          <Button \n                            onClick={() => updateStatusMutation.mutate({ id: signal.id, status: 'pending' })}\n                            className={cn(\n                              \"h-11 rounded-xl font-bold text-sm px-2\",\n                              signal.status === 'pending' \n                                ? 'bg-yellow-500 text-black' \n                                : 'bg-yellow-500/20 text-yellow-400 border border-yellow-500/50'\n                            )}\n                            data-testid={`button-status-pending-${signal.id}`}\n                          >\n                            <Clock className=\"w-4 h-4 mr-1\" />\n                            PEND\n                          </Button>\n                        </div>\n                        \n                        {/* Linha 2: Copiar e Deletar */}\n                        <div className=\"flex gap-2\">\n                          <Button \n                            onClick={() => copyTicket(signal)}\n                            className={cn(\n                              \"flex-1 h-12 rounded-xl font-bold\",\n                              copiedId === signal.id ? 'bg-green-500 text-white' : 'bg-[#33b864] text-black'\n                            )}\n                            data-testid={`button-copy-${signal.id}`}\n                          >\n                            {copiedId === signal.id ? (\n                              <><Check className=\"w-5 h-5 mr-2\" />Copiado!</>\n                            ) : (\n                              <><Copy className=\"w-5 h-5 mr-2\" />Copiar Bilhete</>\n                            )}\n                          </Button>\n                          <Button \n                            onClick={() => { if (confirm(`Deletar o sinal?`)) deleteMutation.mutate(signal.id); }}\n                            className=\"h-12 px-4 rounded-xl bg-red-500/20 text-red-400 border border-red-500/50 hover:bg-red-500 hover:text-white\"\n                            data-testid={`button-delete-${signal.id}`}\n                          >\n                            <Trash2 className=\"w-5 h-5\" />\n                          </Button>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                ))\n              )}\n            </CardContent>\n          </Card>\n        </div>\n      )}\n\n      {/* TAB 2: BILHETE FREE - Para usu√°rios n√£o-Prime */}\n      {activeTab === 'free' && (\n        <div className=\"space-y-6\">\n          {/* Explica√ß√£o */}\n          <Card className=\"border-yellow-500/30 bg-gradient-to-br from-yellow-500/5 to-orange-500/5\">\n            <CardHeader className=\"pb-3\">\n              <CardTitle className=\"flex items-center gap-2 text-base\">\n                <Gift className=\"w-6 h-6 text-yellow-500\" />\n                Bilhete Gr√°tis do Dia\n              </CardTitle>\n              <CardDescription className=\"text-gray-400\">\n                Crie um bilhete free manual ou selecione um bilhete existente. Usu√°rios n√£o-Prime ver√£o este bilhete + 10 bloqueados.\n              </CardDescription>\n            </CardHeader>\n          </Card>\n\n          {/* Criar Bilhete FREE Manual */}\n          <Card className=\"border-yellow-500/30\">\n            <CardHeader className=\"pb-3 border-b border-yellow-500/20\">\n              <CardTitle className=\"flex items-center gap-2 text-base\">\n                <PlusCircle className=\"w-5 h-5 text-yellow-500\" />\n                Criar Bilhete FREE Manual\n              </CardTitle>\n              <CardDescription className=\"text-gray-400\">\n                O bilhete criado aqui ser√° automaticamente marcado como FREE\n              </CardDescription>\n            </CardHeader>\n            <CardContent className=\"pt-4\">\n              <ManualTicketForm onSubmit={handleCreateFreeTip} isSubmitting={createFreeMutation.isPending} />\n            </CardContent>\n          </Card>\n\n          {/* Bilhete FREE Atual */}\n          {freeTip ? (\n            <Card className=\"border-[#33b864] bg-gradient-to-br from-[#33b864]/10 to-green-900/10\">\n              <CardHeader className=\"pb-3\">\n                <div className=\"flex items-center justify-between\">\n                  <CardTitle className=\"flex items-center gap-2 text-base text-[#33b864]\">\n                    <Star className=\"w-5 h-5 fill-[#33b864]\" />\n                    Bilhete FREE Ativo\n                  </CardTitle>\n                  <Button\n                    onClick={() => setFreeMutation.mutate({ id: freeTip.id, isFree: false })}\n                    variant=\"outline\"\n                    size=\"sm\"\n                    className=\"border-red-500/50 text-red-400 hover:bg-red-500/20\"\n                    data-testid=\"button-remove-free\"\n                  >\n                    <XCircle className=\"w-4 h-4 mr-1\" />\n                    Remover\n                  </Button>\n                </div>\n              </CardHeader>\n              <CardContent>\n                <div className=\"bg-[#0d1117] rounded-xl p-4 border border-[#33b864]/30\">\n                  <div className=\"flex items-start justify-between mb-3\">\n                    <div>\n                      <div className=\"flex items-center gap-2 mb-1\">\n                        <Badge className=\"bg-yellow-500/20 text-yellow-400 border-yellow-500/30\">FREE</Badge>\n                        <span className=\"text-xs text-gray-500\">{freeTip.league}</span>\n                      </div>\n                      <h4 className=\"text-white font-bold\">{freeTip.homeTeam} vs {freeTip.awayTeam}</h4>\n                      <p className=\"text-gray-400 text-sm\">{freeTip.market}</p>\n                    </div>\n                    <div className=\"bg-[#33b864]/20 border border-[#33b864] rounded-lg px-3 py-1 text-center\">\n                      <span className=\"text-xs text-[#33b864] block\">ODD</span>\n                      <span className=\"text-lg font-bold text-[#33b864]\">{freeTip.odd.toFixed(2)}</span>\n                    </div>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          ) : (\n            <Card className=\"border-yellow-500/30 border-dashed\">\n              <CardContent className=\"py-10 text-center\">\n                <Gift className=\"w-12 h-12 mx-auto mb-3 text-yellow-500/50\" />\n                <p className=\"text-gray-400\">Nenhum bilhete FREE selecionado</p>\n                <p className=\"text-sm text-gray-500 mt-1\">Selecione um bilhete abaixo</p>\n              </CardContent>\n            </Card>\n          )}\n\n          {/* Lista de Bilhetes para selecionar */}\n          <Card className=\"border-white/10\">\n            <CardHeader className=\"pb-3 border-b border-white/10\">\n              <CardTitle className=\"text-base\">Selecionar Bilhete FREE</CardTitle>\n              <CardDescription className=\"text-gray-400\">\n                Apenas bilhetes pendentes podem ser selecionados\n              </CardDescription>\n            </CardHeader>\n            <CardContent className=\"pt-4 space-y-3\">\n              {signals.filter(s => s.status === 'pending').length === 0 ? (\n                <div className=\"text-center py-8 text-gray-500\">\n                  <Clock className=\"w-10 h-10 mx-auto mb-2 opacity-30\" />\n                  <p>Nenhum bilhete pendente dispon√≠vel</p>\n                </div>\n              ) : (\n                signals.filter(s => s.status === 'pending').map((signal) => (\n                  <div\n                    key={signal.id}\n                    className={cn(\n                      \"flex items-center justify-between p-4 rounded-xl border transition-all\",\n                      signal.isFree \n                        ? \"border-[#33b864] bg-[#33b864]/10\" \n                        : \"border-white/10 bg-white/5 hover:border-yellow-500/50\"\n                    )}\n                  >\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center gap-2 mb-1\">\n                        {signal.isFree && <Star className=\"w-4 h-4 text-[#33b864] fill-[#33b864]\" />}\n                        <span className=\"text-xs text-gray-500\">{signal.league}</span>\n                      </div>\n                      <h4 className=\"text-white font-bold text-sm\">{signal.homeTeam} vs {signal.awayTeam}</h4>\n                      <p className=\"text-gray-400 text-xs\">{signal.market.split('\\n')[0]}</p>\n                    </div>\n                    <div className=\"flex items-center gap-3\">\n                      <div className=\"text-right\">\n                        <span className=\"text-xs text-gray-500 block\">ODD</span>\n                        <span className=\"text-lg font-bold text-[#33b864]\">{signal.odd.toFixed(2)}</span>\n                      </div>\n                      <Button\n                        onClick={() => setFreeMutation.mutate({ id: signal.id, isFree: !signal.isFree })}\n                        disabled={setFreeMutation.isPending}\n                        className={cn(\n                          \"h-10 px-4 rounded-xl font-bold transition-all\",\n                          signal.isFree \n                            ? \"bg-[#33b864] text-black\" \n                            : \"bg-yellow-500/20 text-yellow-400 border border-yellow-500/50 hover:bg-yellow-500 hover:text-black\"\n                        )}\n                        data-testid={`button-set-free-${signal.id}`}\n                      >\n                        {signal.isFree ? (\n                          <><Check className=\"w-4 h-4 mr-1\" />FREE</>\n                        ) : (\n                          <><Gift className=\"w-4 h-4 mr-1\" />Marcar</>\n                        )}\n                      </Button>\n                    </div>\n                  </div>\n                ))\n              )}\n            </CardContent>\n          </Card>\n        </div>\n      )}\n\n      {/* TAB: OR√ÅCULO - Predictive Sports Engine V3.0 */}\n      {activeTab === 'oraculo' && (\n        <OraculoTab user={user} />\n      )}\n\n      {/* TAB 3: JOGOS QUENTES - EM CONSTRU√á√ÉO */}\n      {activeTab === 'live' && (\n        <div className=\"flex flex-col items-center justify-center py-20\">\n          <Card className=\"border-orange-500/30 max-w-md w-full\">\n            <CardContent className=\"pt-8 pb-10 text-center\">\n              <div className=\"w-24 h-24 mx-auto mb-6 rounded-full bg-gradient-to-br from-orange-500/20 to-red-500/20 border-2 border-orange-500/30 flex items-center justify-center\">\n                <Flame className=\"w-12 h-12 text-orange-500 animate-pulse\" />\n              </div>\n              <h3 className=\"text-2xl font-bold text-white mb-3\">Em Constru√ß√£o</h3>\n              <p className=\"text-gray-400 mb-6\">\n                O Monitor de Jogos Quentes est√° sendo otimizado para reduzir consumo de API.\n              </p>\n              <div className=\"flex items-center justify-center gap-2 text-sm text-orange-400 bg-orange-500/10 rounded-full px-4 py-2\">\n                <Clock className=\"w-4 h-4\" />\n                <span>Previs√£o: Em breve</span>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      )}\n\n      {/* TAB 3: IA PREDITIVA */}\n      {activeTab === 'ai' && <AiDraftsPanel />}\n\n      {/* TAB 4: MULTI-BOT */}\n      {activeTab === 'bots' && <MultiBotPanel adminEmail={user?.email || \"\"} adminUserId={user?.id || \"\"} />}\n    </Layout>\n  );\n}\n","path":null,"size_bytes":60100,"size_tokens":null},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-3 w-full grow overflow-hidden rounded-full bg-primary/20\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-12 w-12 rounded-full border-2 border-primary bg-[#33b864] shadow-lg shadow-primary/50 transition-all hover:scale-110 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary disabled:pointer-events-none disabled:opacity-50 cursor-grab active:cursor-grabbing\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","path":null,"size_bytes":1107,"size_tokens":null},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","path":null,"size_bytes":565,"size_tokens":null},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","path":null,"size_bytes":3895,"size_tokens":null},"client/src/lib/football-service.ts":{"content":"import axios from \"axios\";\n\n// API-Football v3 Types\nexport interface Team {\n  id: number;\n  name: string;\n  logo: string;\n}\n\nexport interface Goals {\n  home: number | null;\n  away: number | null;\n}\n\nexport interface FixtureStatus {\n  long: string;\n  short: string;\n  elapsed: number | null;\n}\n\nexport interface Fixture {\n  id: number;\n  referee: string | null;\n  timezone: string;\n  date: string;\n  timestamp: number;\n  periods: { first: number | null; second: number | null };\n  venue: {\n    id: number | null;\n    name: string;\n    city: string;\n  };\n  status: FixtureStatus;\n}\n\nexport interface League {\n  id: number;\n  name: string;\n  country: string;\n  logo: string;\n  flag: string;\n  season: number;\n  round: string | null;\n}\n\nexport interface FootballMatch {\n  fixture: Fixture;\n  league: League;\n  teams: {\n    home: Team;\n    away: Team;\n  };\n  goals: Goals;\n  score: {\n    halftime: Goals;\n    fulltime: Goals;\n    extratime: Goals;\n    penalty: Goals;\n  };\n}\n\n// Statistics Types\nexport interface FixtureStatistics {\n  team_id: number;\n  attacks: number;\n  dangerous_attacks: number;\n  possession: number;\n  shots_total: number;\n  shots_on_goal: number;\n  corners: number;\n  yellowcards: number;\n  redcards: number;\n  passes_accurate: number;\n  passes_percentage: number;\n  saves: number;\n}\n\n// Pre-game Insights (last 5 matches + H2H)\nexport interface TeamAverages {\n  goalsFor: string;\n  goalsAgainst: string;\n  corners: string; // Can be \"-\" when stats unavailable\n  yellowCards: string; // Can be \"-\" when stats unavailable\n  redCards: string; // Can be \"-\" when stats unavailable\n  matchCount: number;\n  statsCount?: number; // Number of matches with detailed stats\n}\n\nexport interface PregameInsights {\n  recentForm: {\n    home: { matches: any[]; averages: TeamAverages | null };\n    away: { matches: any[]; averages: TeamAverages | null };\n  };\n  headToHead: {\n    matches: any[];\n    home: { averages: TeamAverages | null };\n    away: { averages: TeamAverages | null };\n  };\n}\n\n// Team Season Statistics (for pre-game)\nexport interface TeamSeasonStats {\n  team: {\n    id: number;\n    name: string;\n    logo: string;\n  };\n  league: {\n    id: number;\n    name: string;\n    season: number;\n  };\n  fixtures: {\n    played: { home: number; away: number; total: number };\n    wins: { home: number; away: number; total: number };\n    draws: { home: number; away: number; total: number };\n    loses: { home: number; away: number; total: number };\n  };\n  goals: {\n    for: {\n      total: { home: number; away: number; total: number };\n      average: { home: string; away: string; total: string };\n    };\n    against: {\n      total: { home: number; away: number; total: number };\n      average: { home: string; away: string; total: string };\n    };\n  };\n  cards: {\n    yellow: Record<string, { total: number | null; percentage: string | null }>;\n    red: Record<string, { total: number | null; percentage: string | null }>;\n  };\n  form: string;\n}\n\n// API-Football Response Types\ninterface APIFootballResponse<T> {\n  response: T;\n}\n\ninterface APIFootballFixture {\n  fixture: {\n    id: number;\n    referee: string | null;\n    timezone: string;\n    date: string;\n    timestamp: number;\n    periods: { first: number | null; second: number | null };\n    venue: {\n      id: number | null;\n      name: string;\n      city: string;\n    };\n    status: {\n      long: string;\n      short: string;\n      elapsed: number | null;\n    };\n  };\n  league: {\n    id: number;\n    name: string;\n    country: string;\n    logo: string;\n    flag: string;\n    season: number;\n    round: string | null;\n  };\n  teams: {\n    home: Team;\n    away: Team;\n  };\n  goals: Goals;\n  score: {\n    halftime: Goals;\n    fulltime: Goals;\n    extratime: Goals;\n    penalty: Goals;\n  };\n}\n\ninterface APIFootballStatistic {\n  team: Team;\n  statistics: Array<{\n    type: string;\n    value: number | string | null;\n  }>;\n}\n\n// Helper function to extract stat value\nfunction getStatValue(stats: Array<{type: string; value: number | string | null}>, type: string): number {\n  const stat = stats.find(s => s.type === type);\n  if (!stat || stat.value === null) return 0;\n  \n  // Handle percentage values (e.g., \"52%\")\n  if (typeof stat.value === 'string' && stat.value.includes('%')) {\n    return parseInt(stat.value.replace('%', ''));\n  }\n  \n  return typeof stat.value === 'number' ? stat.value : parseInt(stat.value) || 0;\n}\n\n// Map API-Football statistics to our format\nfunction mapAPIFootballStatistics(apiStats: APIFootballStatistic[]): FixtureStatistics[] {\n  if (!apiStats || apiStats.length === 0) return [];\n\n  return apiStats.map(teamStat => ({\n    team_id: teamStat.team.id,\n    attacks: getStatValue(teamStat.statistics, 'Total attacks'),\n    dangerous_attacks: getStatValue(teamStat.statistics, 'Dangerous attacks'),\n    possession: getStatValue(teamStat.statistics, 'Ball Possession'),\n    shots_total: getStatValue(teamStat.statistics, 'Total Shots'),\n    shots_on_goal: getStatValue(teamStat.statistics, 'Shots on Goal'),\n    corners: getStatValue(teamStat.statistics, 'Corner Kicks'),\n    yellowcards: getStatValue(teamStat.statistics, 'Yellow Cards'),\n    redcards: getStatValue(teamStat.statistics, 'Red Cards'),\n    passes_accurate: getStatValue(teamStat.statistics, 'Passes accurate'),\n    passes_percentage: getStatValue(teamStat.statistics, 'Passes %'),\n    saves: getStatValue(teamStat.statistics, 'Goalkeeper Saves'),\n  }));\n}\n\n// Map API-Football fixture to our internal format\nfunction mapAPIFootballFixture(apiFixture: APIFootballFixture): FootballMatch {\n  return {\n    fixture: {\n      id: apiFixture.fixture.id,\n      referee: apiFixture.fixture.referee,\n      timezone: apiFixture.fixture.timezone,\n      date: apiFixture.fixture.date,\n      timestamp: apiFixture.fixture.timestamp,\n      periods: apiFixture.fixture.periods,\n      venue: apiFixture.fixture.venue,\n      status: apiFixture.fixture.status,\n    },\n    league: apiFixture.league,\n    teams: apiFixture.teams,\n    goals: apiFixture.goals,\n    score: apiFixture.score,\n  };\n}\n\n// Football Service\nexport const footballService = {\n  async getLiveFixtures(): Promise<FootballMatch[]> {\n    try {\n      console.log('üîÑ [API-Football] Fetching live fixtures...');\n      \n      const response = await axios.get<APIFootballResponse<APIFootballFixture[]>>(\n        '/api/football/fixtures/live'\n      );\n\n      const fixtures = response.data.response || [];\n      console.log(`‚úÖ [API-Football] ${fixtures.length} live fixtures found`);\n\n      return fixtures.map(mapAPIFootballFixture);\n    } catch (error) {\n      console.error('‚ùå [API-Football] Error fetching live fixtures:', error);\n      if (axios.isAxiosError(error)) {\n        console.error('‚ùå API Error:', {\n          status: error.response?.status,\n          data: error.response?.data,\n          url: error.config?.url,\n        });\n      }\n      return [];\n    }\n  },\n\n  async getFixturesByDate(date: string): Promise<FootballMatch[]> {\n    try {\n      console.log(`üîÑ [API-Football] Fetching fixtures for ${date}...`);\n      \n      const response = await axios.get<APIFootballResponse<APIFootballFixture[]>>(\n        `/api/football/fixtures/date/${date}`\n      );\n\n      const fixtures = response.data.response || [];\n      console.log(`‚úÖ [API-Football] ${fixtures.length} fixtures found for ${date}`);\n\n      return fixtures.map(mapAPIFootballFixture);\n    } catch (error) {\n      console.error(`‚ùå [API-Football] Error fetching fixtures for ${date}:`, error);\n      if (axios.isAxiosError(error)) {\n        console.error('‚ùå API Error:', {\n          status: error.response?.status,\n          data: error.response?.data,\n          url: error.config?.url,\n        });\n      }\n      return [];\n    }\n  },\n\n  async getFixtureStatistics(fixtureId: number): Promise<FixtureStatistics[]> {\n    try {\n      console.log(`üìä [API-Football] Fetching statistics for fixture ${fixtureId}...`);\n      \n      const response = await axios.get<APIFootballResponse<APIFootballStatistic[]>>(\n        `/api/football/fixtures/statistics/${fixtureId}`\n      );\n\n      const stats = response.data.response || [];\n      console.log(`‚úÖ [API-Football] ${stats.length} team statistics found`);\n\n      return mapAPIFootballStatistics(stats);\n    } catch (error) {\n      console.error('‚ùå [API-Football] Error fetching statistics:', error);\n      if (axios.isAxiosError(error)) {\n        console.error('‚ùå API Error:', {\n          status: error.response?.status,\n          statusText: error.response?.statusText,\n          data: error.response?.data,\n          headers: error.response?.headers,\n          url: error.config?.url,\n        });\n        \n        if (error.response?.status === 401) {\n          console.error('‚ùå Authentication failed - check API key');\n        } else if (error.response?.status === 403) {\n          console.error('‚ùå Access denied - check subscription plan');\n        } else if (error.response?.status === 429) {\n          console.error('‚ùå Rate limit exceeded - wait before retrying');\n        }\n      }\n      return [];\n    }\n  },\n\n  async getTeamStatistics(teamId: number, leagueId: number, season: number): Promise<TeamSeasonStats | null> {\n    try {\n      console.log(`üìä [API-Football] Fetching team statistics for team ${teamId}...`);\n      \n      const response = await axios.get<APIFootballResponse<TeamSeasonStats>>(\n        `/api/football/teams/statistics`,\n        { params: { team: teamId, league: leagueId, season } }\n      );\n\n      const stats = response.data.response;\n      console.log(`‚úÖ [API-Football] Team statistics found`);\n\n      return stats || null;\n    } catch (error) {\n      console.error('‚ùå [API-Football] Error fetching team statistics:', error);\n      return null;\n    }\n  },\n\n  async getPregameInsights(homeTeamId: number, awayTeamId: number, leagueId: number, season: number): Promise<PregameInsights | null> {\n    try {\n      console.log(`üìä [API-Football] Fetching pregame insights for ${homeTeamId} vs ${awayTeamId}...`);\n      \n      const response = await axios.get<PregameInsights>(\n        `/api/football/pregame-insights`,\n        { params: { homeTeamId, awayTeamId, league: leagueId, season } }\n      );\n\n      console.log(`‚úÖ [API-Football] Pregame insights found`);\n      return response.data || null;\n    } catch (error) {\n      console.error('‚ùå [API-Football] Error fetching pregame insights:', error);\n      return null;\n    }\n  },\n};\n","path":null,"size_bytes":10427,"size_tokens":null},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\n      \"p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n      className\n    )}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","path":null,"size_bytes":2859,"size_tokens":null},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","path":null,"size_bytes":1419,"size_tokens":null},"client/src/components/ui/button-group.tsx":{"content":"import { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Separator } from \"@/components/ui/separator\"\n\nconst buttonGroupVariants = cva(\n  \"flex w-fit items-stretch has-[>[data-slot=button-group]]:gap-2 [&>*]:focus-visible:relative [&>*]:focus-visible:z-10 has-[select[aria-hidden=true]:last-child]:[&>[data-slot=select-trigger]:last-of-type]:rounded-r-md [&>[data-slot=select-trigger]:not([class*='w-'])]:w-fit [&>input]:flex-1\",\n  {\n    variants: {\n      orientation: {\n        horizontal:\n          \"[&>*:not(:first-child)]:rounded-l-none [&>*:not(:first-child)]:border-l-0 [&>*:not(:last-child)]:rounded-r-none\",\n        vertical:\n          \"flex-col [&>*:not(:first-child)]:rounded-t-none [&>*:not(:first-child)]:border-t-0 [&>*:not(:last-child)]:rounded-b-none\",\n      },\n    },\n    defaultVariants: {\n      orientation: \"horizontal\",\n    },\n  }\n)\n\nfunction ButtonGroup({\n  className,\n  orientation,\n  ...props\n}: React.ComponentProps<\"div\"> & VariantProps<typeof buttonGroupVariants>) {\n  return (\n    <div\n      role=\"group\"\n      data-slot=\"button-group\"\n      data-orientation={orientation}\n      className={cn(buttonGroupVariants({ orientation }), className)}\n      {...props}\n    />\n  )\n}\n\nfunction ButtonGroupText({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  asChild?: boolean\n}) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      className={cn(\n        \"bg-muted shadow-xs flex items-center gap-2 rounded-md border px-4 text-sm font-medium [&_svg:not([class*='size-'])]:size-4 [&_svg]:pointer-events-none\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction ButtonGroupSeparator({\n  className,\n  orientation = \"vertical\",\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"button-group-separator\"\n      orientation={orientation}\n      className={cn(\n        \"bg-input relative !m-0 self-stretch data-[orientation=vertical]:h-auto\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  ButtonGroup,\n  ButtonGroupSeparator,\n  ButtonGroupText,\n  buttonGroupVariants,\n}\n","path":null,"size_bytes":2209,"size_tokens":null},"client/src/pages/landing.tsx":{"content":"import { MatrixRain } from '@/components/landing/matrix-rain';\nimport { HeroShot } from '@/components/landing/hero-shot';\nimport { ProblemAgitation } from '@/components/landing/problem-agitation';\nimport { TechSolution } from '@/components/landing/tech-solution';\nimport { ProfitSimulator } from '@/components/landing/profit-simulator';\nimport { BenefitsGrid } from '@/components/landing/benefits-grid';\nimport { SocialProof } from '@/components/landing/social-proof';\nimport { OfferPack } from '@/components/landing/offer-pack';\nimport { FinalCTA } from '@/components/landing/final-cta';\nimport { Logo } from '@/components/logo';\nimport { Link } from 'wouter';\nimport { motion, useInView } from 'framer-motion';\nimport { useRef } from 'react';\n\nexport default function Landing() {\n  return (\n    <div className=\"min-h-screen bg-black text-white relative overflow-x-clip w-full max-w-full\">\n      {/* Background effects */}\n      <MatrixRain />\n      \n      {/* Content */}\n      <div className=\"relative z-10\">\n        {/* 1. HERO - A Promessa */}\n        <HeroShot />\n        \n        {/* 2. PROBLEMA & AGITA√á√ÉO */}\n        <ProblemAgitation />\n        \n        {/* 3. A SOLU√á√ÉO - Como Funciona */}\n        <TechSolution />\n        \n        {/* 4. PROVA - Calculadora de Potencial */}\n        <SimulatorSection />\n        \n        {/* 5. ARSENAL - Bento Grid */}\n        <BenefitsGrid />\n        \n        {/* 6. MURAL DA FAMA - Prova Social */}\n        <SocialProof />\n        \n        {/* 7. OFERTA & GARANTIA */}\n        <OfferPack />\n        \n        {/* 8. CTA FINAL */}\n        <FinalCTA />\n        \n        {/* Footer */}\n        <Footer />\n      </div>\n    </div>\n  );\n}\n\nfunction SimulatorSection() {\n  const ref = useRef(null);\n  const isInView = useInView(ref, { once: true });\n  \n  return (\n    <section ref={ref} className=\"relative py-12 px-4 bg-gradient-to-b from-[#0a0a0a] via-[#121212] to-black lg:hidden\">\n      <div className=\"max-w-xl mx-auto\">\n        <motion.div\n          initial={{ opacity: 0, y: 30 }}\n          animate={isInView ? { opacity: 1, y: 0 } : {}}\n          transition={{ duration: 0.6 }}\n        >\n          <ProfitSimulator />\n        </motion.div>\n      </div>\n    </section>\n  );\n}\n\nfunction Footer() {\n  return (\n    <footer className=\"relative bg-black border-t border-[#33b864]/20 py-16 px-4\">\n      <div className=\"max-w-7xl mx-auto\">\n        <div className=\"grid md:grid-cols-5 gap-8 mb-12\">\n          {/* Brand */}\n          <div>\n            <div className=\"mb-4\">\n              <Logo size=\"lg\" />\n            </div>\n            <p className=\"text-gray-400 text-sm leading-relaxed\">\n              Intelig√™ncia artificial aplicada ao mercado esportivo.\n            </p>\n          </div>\n          \n          {/* Quick Links */}\n          <div>\n            <h5 className=\"text-white font-bold mb-4\">Acesso R√°pido</h5>\n            <ul className=\"space-y-2 text-sm text-gray-400\">\n              <li>\n                <Link href=\"/auth?mode=register\" className=\"hover:text-[#33b864] transition-colors\">\n                  Criar Conta Gr√°tis\n                </Link>\n              </li>\n              <li>\n                <a href=\"https://www.truesignal.com.br\" className=\"hover:text-[#33b864] transition-colors\">\n                  www.truesignal.com.br\n                </a>\n              </li>\n            </ul>\n          </div>\n          \n          {/* Contact */}\n          <div>\n            <h5 className=\"text-white font-bold mb-4\">Contato</h5>\n            <ul className=\"space-y-2 text-sm text-gray-400\">\n              <li>\n                <a href=\"mailto:suporte@truesignal.com.br\" className=\"hover:text-[#33b864] transition-colors\">\n                  suporte@truesignal.com.br\n                </a>\n              </li>\n              <li>\n                <a href=\"https://wa.me/5516993253866\" className=\"hover:text-[#33b864] transition-colors\">\n                  +55 16 99325-3866\n                </a>\n              </li>\n            </ul>\n          </div>\n          \n          {/* Legal */}\n          <div>\n            <h5 className=\"text-white font-bold mb-4\">Jur√≠dico</h5>\n            <ul className=\"space-y-2 text-sm text-gray-400\">\n              <li>\n                <Link href=\"/terms\" className=\"hover:text-[#33b864] transition-colors\">\n                  Termos de Uso\n                </Link>\n              </li>\n              <li>\n                <Link href=\"/privacy\" className=\"hover:text-[#33b864] transition-colors\">\n                  Pol√≠tica de Privacidade\n                </Link>\n              </li>\n              <li>\n                <Link href=\"/risk-disclaimer\" className=\"hover:text-[#33b864] transition-colors\">\n                  Aviso de Risco\n                </Link>\n              </li>\n            </ul>\n          </div>\n          \n          {/* Security */}\n          <div>\n            <h5 className=\"text-white font-bold mb-4\">Seguran√ßa</h5>\n            <p className=\"text-gray-400 text-sm leading-relaxed mb-4\">\n              Plataforma protegida com criptografia de ponta.\n            </p>\n            <div className=\"flex items-center gap-2\">\n              <div className=\"px-3 py-1 bg-[#33b864]/10 border border-[#33b864]/30 rounded text-xs text-[#33b864] font-bold\">\n                SSL\n              </div>\n              <div className=\"px-3 py-1 bg-[#33b864]/10 border border-[#33b864]/30 rounded text-xs text-[#33b864] font-bold\">\n                PCI DSS\n              </div>\n            </div>\n          </div>\n        </div>\n        \n        {/* Bottom Bar */}\n        <div className=\"border-t border-gray-800 pt-8\">\n          <div className=\"flex flex-col gap-6\">\n            {/* Responsibility Badges */}\n            <div className=\"flex items-center justify-center gap-6\">\n              <div className=\"flex items-center gap-2\">\n                <div className=\"text-2xl\">üîû</div>\n                <div className=\"text-sm\">\n                  <p className=\"text-yellow-400 font-bold\">+18</p>\n                  <p className=\"text-yellow-600 text-xs\">Proibido para menores</p>\n                </div>\n              </div>\n              \n              <div className=\"flex items-center gap-2\">\n                <div className=\"text-2xl\">üé≤</div>\n                <div className=\"text-sm\">\n                  <p className=\"text-[#33b864] font-bold\">Jogo Respons√°vel</p>\n                  <p className=\"text-gray-500 text-xs\">Aposte com modera√ß√£o</p>\n                </div>\n              </div>\n            </div>\n            \n            {/* Legal Disclaimer */}\n            <div className=\"text-center text-xs text-gray-600 max-w-4xl mx-auto mb-6 px-4\">\n              <p className=\"leading-relaxed\">\n                <strong className=\"text-gray-500\">AVISO LEGAL:</strong> TRUE SIGNAL √© uma plataforma de an√°lises estat√≠sticas esportivas. N√ÉO somos casa de apostas. \n                Todos os percentuais s√£o baseados em dados hist√≥ricos e N√ÉO garantem resultados futuros. \n                Apostas esportivas envolvem risco de perda financeira. Proibido para menores de 18 anos.\n              </p>\n            </div>\n            \n            {/* Copyright */}\n            <div className=\"text-center text-sm text-gray-500\">\n              <p>¬© 2024 TRUE SIGNAL. Todos os direitos reservados.</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </footer>\n  );\n}\n","path":null,"size_bytes":7376,"size_tokens":null},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","path":null,"size_bytes":1598,"size_tokens":null},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"grid place-content-center peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"grid place-content-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","path":null,"size_bytes":1031,"size_tokens":null},"client/src/components/ui/sidebar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, VariantProps } from \"class-variance-authority\"\nimport { PanelLeftIcon } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}) {\n  const isMobile = useIsMobile()\n  const [openMobile, setOpenMobile] = React.useState(false)\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen)\n  const open = openProp ?? _open\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value\n      if (setOpenProp) {\n        setOpenProp(openState)\n      } else {\n        _setOpen(openState)\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n    },\n    [setOpenProp, open]\n  )\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\n  }, [isMobile, setOpen, setOpenMobile])\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault()\n        toggleSidebar()\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [toggleSidebar])\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\"\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n  )\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  )\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\"\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    )\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]\"\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar()\n\n  // Note: Tailwind v3.4 doesn't support \"in-\" selectors. So the rail won't work perfectly.\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  isActive?: boolean\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot : \"button\"\n  const { isMobile, state } = useSidebar()\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  )\n\n  if (!tooltip) {\n    return button\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    }\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  )\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  showOnHover?: boolean\n}) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[var(--skeleton-width)] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean\n  size?: \"sm\" | \"md\"\n  isActive?: boolean\n}) {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline outline-2 outline-transparent outline-offset-2 focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","path":null,"size_bytes":21846,"size_tokens":null},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","path":null,"size_bytes":1642,"size_tokens":null},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"px-2 py-1.5 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute right-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","path":null,"size_bytes":5745,"size_tokens":null},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","path":null,"size_bytes":756,"size_tokens":null},"client/src/components/hero.tsx":{"content":"import generatedImage from '@assets/generated_images/dark_green_neon_tech_money_background.png';\n\nexport function Hero() {\n  return (\n    <div className=\"relative w-full h-64 md:h-80 rounded-2xl overflow-hidden mb-8 border border-primary/20 shadow-[0_0_30px_rgba(51,184,100,0.1)] group\">\n      <img \n        src={generatedImage} \n        alt=\"Hero Background\" \n        className=\"absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-105 opacity-60\"\n      />\n      <div className=\"absolute inset-0 bg-gradient-to-r from-black dark:from-black from-white/90 via-black/60 dark:via-black/60 via-white/50 to-transparent\" />\n      \n      <div className=\"absolute inset-0 p-8 flex flex-col justify-center\">\n        <span className=\"inline-block px-3 py-1 rounded-full bg-primary/10 border border-primary/30 text-primary text-xs font-bold uppercase tracking-wider mb-4 w-fit animate-in slide-in-from-left-4 fade-in duration-700 shadow-[0_0_10px_rgba(51,184,100,0.2)]\">\n          TRUE SIGNAL Intelligence\n        </span>\n        <h1 className=\"text-4xl md:text-5xl font-display font-bold text-foreground dark:text-white mb-2 max-w-lg animate-in slide-in-from-left-4 fade-in duration-700 delay-100\">\n          Domine as <br/>\n          <span className=\"text-transparent bg-clip-text bg-gradient-to-r from-primary to-green-400 drop-shadow-[0_0_10px_rgba(51,184,100,0.5)]\">\n            Estat√≠sticas\n          </span>\n        </h1>\n        <p className=\"text-muted-foreground max-w-md text-sm md:text-base animate-in slide-in-from-left-4 fade-in duration-700 delay-200\">\n          Sinais de alta precis√£o gerados por intelig√™ncia artificial e curadoria de especialistas.\n        </p>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":1747,"size_tokens":null},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","path":null,"size_bytes":2712,"size_tokens":null},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverAnchor = PopoverPrimitive.Anchor\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent, PopoverAnchor }\n","path":null,"size_bytes":1342,"size_tokens":null},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","path":null,"size_bytes":1753,"size_tokens":null},"client/src/components/live-ticker.tsx":{"content":"import { Signal } from \"@/lib/mock-data\";\nimport { ArrowUpRight } from \"lucide-react\";\n\nexport function LiveTicker({ signals }: { signals: Signal[] }) {\n  return (\n    <div className=\"w-full bg-card border-y border-gray-200 dark:border-white/5 overflow-hidden py-2 mb-6\">\n      <div className=\"flex animate-scroll whitespace-nowrap\">\n        {[...signals, ...signals].map((signal, i) => (\n          <div key={`${signal.id}-${i}`} className=\"flex items-center gap-2 mx-6 text-sm\">\n            <span className=\"w-2 h-2 rounded-full bg-primary animate-pulse\" />\n            <span className=\"font-bold text-foreground\">{signal.homeTeam} vs {signal.awayTeam}</span>\n            <span className=\"text-muted-foreground text-xs\">({signal.market})</span>\n            <span className=\"font-mono text-primary font-bold\">{signal.odd}</span>\n            <ArrowUpRight className=\"w-3 h-3 text-green-500\" />\n          </div>\n        ))}\n      </div>\n      \n      <style>{`\n        @keyframes scroll {\n          0% { transform: translateX(0); }\n          100% { transform: translateX(-50%); }\n        }\n        .animate-scroll {\n          animation: scroll 30s linear infinite;\n        }\n      `}</style>\n    </div>\n  );\n}\n","path":null,"size_bytes":1207,"size_tokens":null},"client/src/components/layout.tsx":{"content":"import { Link, useLocation } from \"wouter\";\nimport { Home, LayoutDashboard, Settings, LogOut, Bell, Ticket, Play, Calendar, Plus, Wallet } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { useLanguage } from \"@/hooks/use-language\";\nimport { useEffect, useState } from \"react\";\nimport OneSignal from 'react-onesignal';\nimport { Button } from \"./ui/button\";\nimport { Logo } from \"./logo\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { tipsService } from \"@/lib/tips-service\";\nimport { useUnreadTips } from \"@/hooks/use-unread-tips\";\nimport { useOnboarding } from \"@/hooks/use-onboarding\";\nimport { WelcomeModal } from \"./onboarding-tour\";\nimport { SpotlightTour } from \"./spotlight-tour\";\nimport { BankrollSetupModal } from \"./bankroll-setup-modal\";\nimport { useContentProtection } from \"@/hooks/use-content-protection\";\nimport { PWAInstallPrompt } from \"./pwa-install-prompt\";\n\nexport function Layout({ children }: { children: React.ReactNode }) {\n  const [location] = useLocation();\n  const { user, logout } = useAuth();\n  const { t } = useLanguage();\n  const [showWelcome, setShowWelcome] = useState(false);\n  const [hasShownWelcome, setHasShownWelcome] = useState(false);\n  const { isBlurred } = useContentProtection();\n  \n  // Onboarding tour\n  const {\n    showWelcome: onboardingShowWelcome,\n    showTour,\n    showBankrollSetup,\n    currentStep,\n    totalSteps,\n    currentStepData,\n    isLoading: onboardingLoading,\n    startTour,\n    nextStep,\n    prevStep,\n    skipTour,\n    completeTour,\n    closeBankrollSetup,\n    setShowWelcome: setOnboardingShowWelcome,\n  } = useOnboarding();\n\n  // Sync welcome modal state\n  useEffect(() => {\n    if (onboardingShowWelcome && !hasShownWelcome) {\n      setShowWelcome(true);\n      setHasShownWelcome(true);\n    }\n  }, [onboardingShowWelcome, hasShownWelcome]);\n\n  const handleStartTour = () => {\n    setShowWelcome(false);\n    startTour();\n  };\n\n  const handleSkipWelcome = () => {\n    setShowWelcome(false);\n    skipTour();\n  };\n\n  // Get tips for unread count\n  const { data: tips = [] } = useQuery({\n    queryKey: ['tips'],\n    queryFn: tipsService.getAll,\n    refetchInterval: 30000,\n  });\n\n  const tipIds = tips.map(tip => tip.id);\n  const { unreadCount } = useUnreadTips(tipIds);\n\n  // Initial OneSignal Init\n  useEffect(() => {\n    const initOneSignal = async () => {\n      const appId = import.meta.env.VITE_ONESIGNAL_APP_ID;\n      \n      if (!appId) {\n        console.log(\"OneSignal: No APP_ID configured (notifications disabled)\");\n        return;\n      }\n\n      try {\n        await OneSignal.init({\n          appId,\n          allowLocalhostAsSecureOrigin: true,\n        });\n        \n        console.log(\"OneSignal initialized successfully\");\n      } catch (error) {\n        console.error(\"OneSignal init error:\", error);\n      }\n    };\n\n    initOneSignal();\n  }, [user]);\n\n  // Force reload profile (clear cache)\n  const reloadProfile = async () => {\n    if (user) {\n      const { data } = await (await import(\"@/lib/supabase\")).supabase\n        .from('profiles')\n        .select('*')\n        .eq('id', user.id)\n        .single();\n      \n      if (data) {\n        console.log('üîÑ Profile reloaded:', data);\n        window.location.reload(); // Force full reload\n      }\n    }\n  };\n\n  // Desktop Nav Items (with Admin)\n  const desktopNavItems = [\n    { icon: Home, label: t.nav.home, path: \"/app\" },\n    { icon: Ticket, label: t.nav.tips, path: \"/tips\" },\n    { icon: Play, label: t.nav.live, path: \"/live\" },\n    { icon: Calendar, label: t.nav.pregame, path: \"/pregame\" },\n    { icon: Wallet, label: t.nav.bankroll || \"Gest√£o\", path: \"/gestao\" },\n    { icon: Settings, label: t.nav.settings, path: \"/settings\" },\n    { icon: LayoutDashboard, label: t.nav.admin, path: \"/admin\", hidden: !(user?.role === 'admin' || user?.email === 'kwillianferreira@gmail.com') },\n  ];\n\n  // Mobile Nav Items (5 icons, Settings moved to header)\n  const mobileNavItems = [\n    { icon: Home, label: t.nav.home, path: \"/app\" },\n    { icon: Ticket, label: t.nav.tips, path: \"/tips\" },\n    { icon: Play, label: t.nav.live, path: \"/live\" },\n    { icon: Calendar, label: t.nav.pregame, path: \"/pregame\" },\n    { icon: Wallet, label: \"Gest√£o\", path: \"/gestao\" },\n  ];\n\n  return (\n    <div \n      className={cn(\n        \"min-h-screen bg-background text-foreground pb-20 md:pb-0 md:pl-64 font-sans select-none\",\n        isBlurred && \"blur-xl pointer-events-none\"\n      )}\n      style={{ WebkitUserSelect: 'none', userSelect: 'none' }}\n    >\n      {/* Overlay de prote√ß√£o quando blur ativo */}\n      {isBlurred && (\n        <div className=\"fixed inset-0 z-[200] bg-black/90 flex items-center justify-center\">\n          <div className=\"text-center\">\n            <div className=\"text-6xl mb-4\">üîí</div>\n            <p className=\"text-white text-xl font-bold\">Conte√∫do Protegido</p>\n            <p className=\"text-gray-400 text-sm mt-2\">Volte para a tela para continuar</p>\n          </div>\n        </div>\n      )}\n      {/* Desktop Sidebar */}\n      <aside className=\"hidden md:flex flex-col fixed left-0 top-0 bottom-0 w-64 bg-card border-r border-primary/20 p-6 z-50\">\n        <Link href=\"/app\" className=\"mb-10 px-2 block\">\n          <Logo size=\"md\" showText={true} />\n        </Link>\n\n        <div className=\"mb-6 px-2\">\n           <div className=\"p-3 rounded-xl bg-primary/5 border border-primary/10 flex items-center gap-3\">\n              <div className=\"w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center text-primary font-bold text-xs\">\n                {user?.firstName?.charAt(0) || \"U\"}\n              </div>\n              <div className=\"flex flex-col overflow-hidden\">\n                <span className=\"text-xs text-muted-foreground\">{t.nav.welcome}</span>\n                <span className=\"text-sm font-bold text-foreground truncate\">{user?.firstName || \"...\"}</span>\n              </div>\n           </div>\n        </div>\n\n        <nav className=\"space-y-2 flex-1\">\n          {desktopNavItems.filter(item => !item.hidden).map((item) => (\n            <Link \n              key={item.path} \n              href={item.path}\n              className={cn(\n                \"flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group border relative\",\n                location === item.path\n                  ? \"bg-primary/15 text-primary border-primary/30 shadow-[0_0_20px_rgba(51,184,100,0.15)]\"\n                  : \"text-gray-400 border-white/5 hover:text-primary hover:bg-primary/10 hover:border-primary/20\"\n              )}\n            >\n              <div className={cn(\n                \"relative p-2 rounded-lg transition-all\",\n                location === item.path \n                  ? \"bg-primary/20 shadow-[0_0_12px_rgba(51,184,100,0.4)]\" \n                  : \"bg-white/5 group-hover:bg-primary/15\"\n              )}>\n                <item.icon\n                  className={cn(\n                    \"w-5 h-5 transition-all\",\n                    location === item.path \n                      ? \"text-primary drop-shadow-[0_0_8px_rgba(51,184,100,0.6)]\" \n                      : \"text-gray-400 group-hover:text-primary\"\n                  )}\n                />\n                {item.path === \"/tips\" && unreadCount > 0 && (\n                  <div className=\"absolute -top-1 -right-1 w-4 h-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center animate-pulse\">\n                    {unreadCount > 9 ? '9+' : unreadCount}\n                  </div>\n                )}\n              </div>\n              <span className=\"font-medium\">{item.label}</span>\n            </Link>\n          ))}\n          \n          {/* Bot√£o Sair - ao lado de Configura√ß√µes */}\n          <button \n            onClick={logout}\n            className=\"flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group border w-full text-gray-400 border-white/5 hover:text-red-400 hover:bg-red-500/10 hover:border-red-500/20\"\n          >\n            <div className=\"p-2 rounded-lg transition-all bg-white/5 group-hover:bg-red-500/15\">\n              <LogOut className=\"w-5 h-5 transition-all text-gray-400 group-hover:text-red-400\" />\n            </div>\n            <span className=\"font-medium\">{t.nav.logout}</span>\n          </button>\n        </nav>\n\n        <div className=\"mt-auto space-y-2\">\n          <div className=\"bg-white/60 dark:bg-black/40 border-gray-200 dark:border-white/5 rounded-xl p-4 border\">\n            <div className=\"flex items-center gap-2 text-foreground text-sm font-bold mb-2\">\n              <Bell className=\"w-4 h-4 text-primary\" /> {t.nav.notifications}\n            </div>\n            <p className=\"text-xs text-muted-foreground mb-3\">\n              {t.nav.notificationsDesc}\n            </p>\n            <Button \n              variant=\"outline\" \n              size=\"sm\" \n              onClick={async () => {\n                const { notificationService } = await import(\"@/lib/notification-service\");\n                await notificationService.requestPermission();\n              }}\n              className=\"w-full text-xs h-7 border-primary/20 text-primary hover:bg-primary/10\"\n            >\n              {t.nav.activateNow}\n            </Button>\n          </div>\n        </div>\n      </aside>\n\n      {/* Mobile Header */}\n      <header className=\"md:hidden fixed top-0 left-0 right-0 h-16 bg-background/80 backdrop-blur-md border-b border-gray-200 dark:border-primary/20 z-50 flex items-center justify-between px-4\">\n        <Logo size=\"sm\" showText={true} />\n        <div className=\"flex items-center gap-1\">\n           <span className=\"text-sm font-bold text-foreground\">{t.nav.hello} {user?.firstName?.split(' ')[0] || user?.firstName}</span>\n           <Link href=\"/settings\" data-tour=\"settings-icon\" className=\"p-2 text-muted-foreground hover:text-primary transition-colors\">\n            <Settings className=\"w-5 h-5\" />\n          </Link>\n           <button onClick={logout} className=\"p-2 text-muted-foreground hover:text-red-400 transition-colors\">\n            <LogOut className=\"w-5 h-5\" />\n          </button>\n        </div>\n      </header>\n\n      {/* Main Content */}\n      <main className=\"pt-20 md:pt-6 px-4 md:px-8 max-w-7xl mx-auto animate-in fade-in duration-500 pb-24\">\n        {children}\n      </main>\n\n      {/* Mobile Bottom Nav - 5 Icons */}\n      <nav className=\"md:hidden fixed bottom-0 left-0 right-0 h-[72px] bg-card/95 backdrop-blur-md border-t border-primary/20 z-50 flex items-center justify-around px-2 safe-area-pb\">\n        {mobileNavItems.map((item, index) => {\n          const tourIds = ['home-icon', 'tips-icon', 'live-icon', 'pregame-icon', 'gestao-icon'];\n          return (\n            <Link \n              key={item.path} \n              href={item.path}\n              data-testid={`nav-${item.label.toLowerCase()}`}\n              data-tour={tourIds[index]}\n              className={cn(\n                \"flex flex-col items-center justify-center h-full gap-1.5 transition-all relative flex-1\",\n                location === item.path ? \"text-primary\" : \"text-muted-foreground\"\n              )}\n            >\n              <div className=\"relative\">\n                <item.icon\n                  className={cn(\n                    \"w-7 h-7 transition-all\",\n                    location === item.path ? \"scale-110 drop-shadow-[0_0_12px_rgba(51,184,100,0.8)]\" : \"\"\n                  )}\n                  strokeWidth={location === item.path ? 2.5 : 2}\n                />\n                {item.path === \"/tips\" && unreadCount > 0 && (\n                  <div className=\"absolute -top-1.5 -right-2 w-4 h-4 bg-red-500 text-white text-[9px] font-bold rounded-full flex items-center justify-center animate-pulse\">\n                    {unreadCount > 9 ? '9+' : unreadCount}\n                  </div>\n                )}\n              </div>\n              <span className={cn(\n                \"text-[11px] font-medium transition-all text-center whitespace-nowrap\",\n                location === item.path ? \"font-bold\" : \"\"\n              )}>{item.label}</span>\n            </Link>\n          );\n        })}\n      </nav>\n\n      {/* Admin FAB (Floating Action Button) */}\n      {(user?.role === 'admin' || user?.email === 'kwillianferreira@gmail.com') && (\n        <Link href=\"/admin\">\n          <button\n            data-testid=\"fab-create-tip\"\n            className=\"fixed bottom-20 right-4 md:bottom-8 md:right-8 w-14 h-14 bg-primary hover:bg-primary/90 text-black rounded-full shadow-[0_0_30px_rgba(51,184,100,0.4)] hover:shadow-[0_0_40px_rgba(51,184,100,0.6)] flex items-center justify-center transition-all duration-300 hover:scale-110 active:scale-95 z-40 border-2 border-primary/50\"\n            aria-label=\"Criar Novo Sinal\"\n          >\n            <Plus className=\"w-6 h-6\" strokeWidth={3} />\n          </button>\n        </Link>\n      )}\n\n      {/* Onboarding Tour */}\n      <WelcomeModal\n        isOpen={showWelcome}\n        onStartTour={handleStartTour}\n        onSkip={handleSkipWelcome}\n      />\n      \n      <SpotlightTour\n        isOpen={showTour}\n        currentStep={currentStep}\n        totalSteps={totalSteps}\n        stepData={currentStepData}\n        onNext={nextStep}\n        onPrev={prevStep}\n        onSkip={skipTour}\n        onComplete={completeTour}\n      />\n\n      {/* Bankroll Setup Modal - After Tour */}\n      <BankrollSetupModal\n        isOpen={showBankrollSetup}\n        onComplete={async (data) => {\n          if (user?.id) {\n            await fetch(`/api/profile/${user.id}/bankroll`, {\n              method: \"PUT\",\n              headers: { \"Content-Type\": \"application/json\" },\n              body: JSON.stringify(data),\n            });\n          }\n          closeBankrollSetup();\n        }}\n      />\n\n      {/* PWA Install Prompt */}\n      <PWAInstallPrompt />\n\n    </div>\n  );\n}\n","path":null,"size_bytes":13829,"size_tokens":null},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","path":null,"size_bytes":4419,"size_tokens":null},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-primary/10\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","path":null,"size_bytes":266,"size_tokens":null},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","path":null,"size_bytes":1383,"size_tokens":null},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","path":null,"size_bytes":157,"size_tokens":null},"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { storage } from \"./storage\";\nimport { insertTipSchema, insertProfileSchema, tips, aiTickets } from \"@shared/schema\";\nimport { eq } from \"drizzle-orm\";\nimport axios from \"axios\";\nimport { mercadoPagoService } from \"./mercadopago-service\";\nimport { GoogleGenerativeAI } from \"@google/generative-ai\";\nimport { aiPredictionEngine } from \"./ai-prediction-engine\";\nimport { db } from \"./db\";\nimport { deriveComboMetadata, parseLegs, normalizeTipForResponse } from \"./combo-utils\";\nimport { resultChecker } from \"./result-checker\";\nimport { sql } from \"drizzle-orm\";\n\nconst FOOTBALL_API_KEY = process.env.FOOTBALL_API_KEY;\nconst GEMINI_API_KEY = process.env.GEMINI_API_KEY;\nconst SUPABASE_URL = process.env.VITE_SUPABASE_URL;\nconst SUPABASE_ANON_KEY = process.env.VITE_SUPABASE_ANON_KEY;\n\nconst genAI = GEMINI_API_KEY ? new GoogleGenerativeAI(GEMINI_API_KEY) : null;\n\nif (!FOOTBALL_API_KEY) {\n  console.warn('‚ö†Ô∏è FOOTBALL_API_KEY NOT FOUND - check environment variables');\n} else {\n  console.log('‚úÖ API-Football Key loaded successfully');\n}\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  // API-Football Proxy Routes (Direct api-football.com endpoints - to avoid CORS and secure API key)\n  app.get(\"/api/football/fixtures/live\", async (req, res) => {\n    try {\n      const response = await axios.get(\"https://v3.football.api-sports.io/fixtures\", {\n        params: { live: \"all\" },\n        headers: {\n          \"x-apisports-key\": FOOTBALL_API_KEY,\n        },\n      });\n      return res.json(response.data);\n    } catch (error: any) {\n      console.error(\"[API-Football] Error fetching live fixtures:\", error.message);\n      if (axios.isAxiosError(error) && error.response) {\n        console.error(\"[API-Football] Response Status:\", error.response.status);\n        console.error(\"[API-Football] Response Data:\", error.response.data);\n      }\n      return res.status(500).json({ error: \"Failed to fetch live fixtures\", details: error.message });\n    }\n  });\n\n  app.get(\"/api/football/fixtures/date/:date\", async (req, res) => {\n    try {\n      const { date } = req.params;\n      const response = await axios.get(\"https://v3.football.api-sports.io/fixtures\", {\n        params: { \n          date,\n          timezone: 'America/Sao_Paulo' // Usar timezone brasileiro para filtrar corretamente\n        },\n        headers: {\n          \"x-apisports-key\": FOOTBALL_API_KEY,\n        },\n      });\n      return res.json(response.data);\n    } catch (error: any) {\n      console.error(`[API-Football] Error fetching fixtures for ${req.params.date}:`, error.message);\n      if (axios.isAxiosError(error) && error.response) {\n        console.error(\"[API-Football] Response Status:\", error.response.status);\n        console.error(\"[API-Football] Response Data:\", error.response.data);\n      }\n      return res.status(500).json({ error: \"Failed to fetch fixtures\", details: error.message });\n    }\n  });\n\n  app.get(\"/api/football/fixtures/:id\", async (req, res) => {\n    try {\n      const { id } = req.params;\n      const response = await axios.get(\"https://v3.football.api-sports.io/fixtures\", {\n        params: { id },\n        headers: {\n          \"x-apisports-key\": FOOTBALL_API_KEY,\n        },\n      });\n      return res.json(response.data);\n    } catch (error: any) {\n      console.error(`[API-Football] Error fetching fixture ${req.params.id}:`, error.message);\n      if (axios.isAxiosError(error) && error.response) {\n        console.error(\"[API-Football] Response Status:\", error.response.status);\n        console.error(\"[API-Football] Response Data:\", error.response.data);\n      }\n      return res.status(500).json({ error: \"Failed to fetch fixture\", details: error.message });\n    }\n  });\n\n  app.get(\"/api/football/fixtures/statistics/:id\", async (req, res) => {\n    try {\n      const { id } = req.params;\n      const response = await axios.get(\"https://v3.football.api-sports.io/fixtures/statistics\", {\n        params: { fixture: id },\n        headers: {\n          \"x-apisports-key\": FOOTBALL_API_KEY,\n        },\n      });\n      return res.json(response.data);\n    } catch (error: any) {\n      console.error(`[API-Football] Error fetching statistics for fixture ${req.params.id}:`, error.message);\n      if (axios.isAxiosError(error) && error.response) {\n        console.error(\"[API-Football] Response Status:\", error.response.status);\n        console.error(\"[API-Football] Response Data:\", error.response.data);\n      }\n      return res.status(500).json({ error: \"Failed to fetch fixture statistics\", details: error.message });\n    }\n  });\n\n  // Odds from bookmakers (Bet365 priority)\n  app.get(\"/api/football/odds/:fixtureId\", async (req, res) => {\n    try {\n      const { fixtureId } = req.params;\n      const response = await axios.get(\"https://v3.football.api-sports.io/odds\", {\n        params: { \n          fixture: fixtureId,\n          bookmaker: 8 // Bet365 ID\n        },\n        headers: {\n          \"x-apisports-key\": FOOTBALL_API_KEY,\n        },\n      });\n      \n      const oddsData = response.data.response?.[0];\n      if (!oddsData) {\n        return res.json({ success: false, message: \"No odds available\", odds: null });\n      }\n      \n      // Parse Bet365 odds\n      const bet365 = oddsData.bookmakers?.find((b: any) => b.id === 8) || oddsData.bookmakers?.[0];\n      if (!bet365) {\n        return res.json({ success: false, message: \"Bet365 odds not available\", odds: null });\n      }\n      \n      // Extract markets\n      const markets: Record<string, any> = {};\n      bet365.bets?.forEach((bet: any) => {\n        const marketName = bet.name;\n        const values: Record<string, number> = {};\n        bet.values?.forEach((v: any) => {\n          values[v.value] = parseFloat(v.odd);\n        });\n        markets[marketName] = values;\n      });\n      \n      return res.json({ \n        success: true, \n        bookmaker: bet365.name,\n        fixtureId,\n        markets,\n        raw: bet365\n      });\n    } catch (error: any) {\n      console.error(`[API-Football] Error fetching odds for fixture ${req.params.fixtureId}:`, error.message);\n      return res.status(500).json({ error: \"Failed to fetch odds\", details: error.message });\n    }\n  });\n\n  // Pre-game Insights - Last 5 matches + H2H averages\n  app.get(\"/api/football/pregame-insights\", async (req, res) => {\n    try {\n      const { homeTeamId, awayTeamId, league, season } = req.query;\n      \n      if (!homeTeamId || !awayTeamId || !league || !season) {\n        return res.status(400).json({ error: \"homeTeamId, awayTeamId, league and season are required\" });\n      }\n\n      const apiHeaders = { \"x-apisports-key\": FOOTBALL_API_KEY };\n\n      // Helper to get stat value from fixtures/statistics response\n      const getStatValue = (stats: any[], type: string): number => {\n        const stat = stats?.find((s: any) => s.type === type);\n        if (!stat || stat.value === null) return 0;\n        if (typeof stat.value === 'string' && stat.value.includes('%')) {\n          return parseInt(stat.value.replace('%', ''));\n        }\n        return typeof stat.value === 'number' ? stat.value : parseInt(stat.value) || 0;\n      };\n\n      // Fetch last 5 finished fixtures for a team\n      const fetchTeamLastMatches = async (teamId: string) => {\n        const fixturesRes = await axios.get(\"https://v3.football.api-sports.io/fixtures\", {\n          params: { team: teamId, season, status: \"FT\", last: 5 },\n          headers: apiHeaders,\n        });\n        return fixturesRes.data.response || [];\n      };\n\n      // Fetch statistics for a single fixture\n      const fetchFixtureStats = async (fixtureId: number) => {\n        try {\n          const statsRes = await axios.get(\"https://v3.football.api-sports.io/fixtures/statistics\", {\n            params: { fixture: fixtureId },\n            headers: apiHeaders,\n          });\n          return statsRes.data.response || [];\n        } catch {\n          return [];\n        }\n      };\n\n      // Fetch H2H matches\n      const fetchH2H = async () => {\n        const h2hRes = await axios.get(\"https://v3.football.api-sports.io/fixtures/headtohead\", {\n          params: { h2h: `${homeTeamId}-${awayTeamId}`, status: \"FT\", last: 3 },\n          headers: apiHeaders,\n        });\n        return h2hRes.data.response || [];\n      };\n\n      // Calculate averages from matches with stats\n      const calculateAverages = async (matches: any[], teamId: string) => {\n        let goalsFor = 0, goalsAgainst = 0, corners = 0, yellowCards = 0, redCards = 0;\n        let matchCount = 0;\n        let statsCount = 0; // Count only matches with detailed stats\n\n        for (const match of matches) {\n          const isHome = match.teams.home.id === parseInt(teamId);\n          const goals = match.goals;\n          \n          // Goals are always available from fixture data\n          goalsFor += isHome ? (goals.home || 0) : (goals.away || 0);\n          goalsAgainst += isHome ? (goals.away || 0) : (goals.home || 0);\n          matchCount++;\n\n          // Get fixture stats for corners and cards (may not be available)\n          const stats = await fetchFixtureStats(match.fixture.id);\n          const teamStats = stats.find((s: any) => s.team.id === parseInt(teamId));\n          \n          if (teamStats?.statistics && teamStats.statistics.length > 0) {\n            corners += getStatValue(teamStats.statistics, 'Corner Kicks');\n            yellowCards += getStatValue(teamStats.statistics, 'Yellow Cards');\n            redCards += getStatValue(teamStats.statistics, 'Red Cards');\n            statsCount++;\n          }\n        }\n\n        if (matchCount === 0) return null;\n\n        return {\n          goalsFor: (goalsFor / matchCount).toFixed(1),\n          goalsAgainst: (goalsAgainst / matchCount).toFixed(1),\n          // For corners/cards, use statsCount to avoid misleading averages\n          corners: statsCount > 0 ? (corners / statsCount).toFixed(1) : \"-\",\n          yellowCards: statsCount > 0 ? (yellowCards / statsCount).toFixed(1) : \"-\",\n          redCards: statsCount > 0 ? (redCards / statsCount).toFixed(1) : \"-\",\n          matchCount,\n          statsCount,\n        };\n      };\n\n      // Fetch all data in parallel\n      const [homeMatches, awayMatches, h2hMatches] = await Promise.all([\n        fetchTeamLastMatches(homeTeamId as string),\n        fetchTeamLastMatches(awayTeamId as string),\n        fetchH2H(),\n      ]);\n\n      // Calculate averages\n      const [homeAverages, awayAverages] = await Promise.all([\n        calculateAverages(homeMatches, homeTeamId as string),\n        calculateAverages(awayMatches, awayTeamId as string),\n      ]);\n\n      // Calculate H2H averages for both teams\n      let h2hHomeAvg = null, h2hAwayAvg = null;\n      if (h2hMatches.length > 0) {\n        [h2hHomeAvg, h2hAwayAvg] = await Promise.all([\n          calculateAverages(h2hMatches, homeTeamId as string),\n          calculateAverages(h2hMatches, awayTeamId as string),\n        ]);\n      }\n\n      return res.json({\n        recentForm: {\n          home: { matches: homeMatches.slice(0, 5), averages: homeAverages },\n          away: { matches: awayMatches.slice(0, 5), averages: awayAverages },\n        },\n        headToHead: {\n          matches: h2hMatches,\n          home: { averages: h2hHomeAvg },\n          away: { averages: h2hAwayAvg },\n        },\n      });\n    } catch (error: any) {\n      console.error(`[API-Football] Error fetching pregame insights:`, error.message);\n      return res.status(500).json({ error: \"Failed to fetch pregame insights\", details: error.message });\n    }\n  });\n\n  // Team Statistics - Season averages (goals, cards, form, etc.)\n  app.get(\"/api/football/teams/statistics\", async (req, res) => {\n    try {\n      const { team, league, season } = req.query;\n      \n      if (!team || !league || !season) {\n        return res.status(400).json({ error: \"team, league and season parameters are required\" });\n      }\n      \n      const response = await axios.get(\"https://v3.football.api-sports.io/teams/statistics\", {\n        params: { team, league, season },\n        headers: {\n          \"x-apisports-key\": FOOTBALL_API_KEY,\n        },\n      });\n      return res.json(response.data);\n    } catch (error: any) {\n      console.error(`[API-Football] Error fetching team statistics:`, error.message);\n      if (axios.isAxiosError(error) && error.response) {\n        console.error(\"[API-Football] Response Status:\", error.response.status);\n        console.error(\"[API-Football] Response Data:\", error.response.data);\n      }\n      return res.status(500).json({ error: \"Failed to fetch team statistics\", details: error.message });\n    }\n  });\n\n  // Auth Routes\n  app.post(\"/api/auth/register\", async (req, res) => {\n    try {\n      const validatedData = insertProfileSchema.parse(req.body);\n      \n      // Check if user already exists\n      const existing = await storage.getProfileByEmail(validatedData.email);\n      if (existing) {\n        return res.status(400).json({ error: \"E-mail j√° cadastrado\" });\n      }\n\n      const profile = await storage.createProfile({\n        ...validatedData,\n        password: req.body.password || \"demo\", // In production, get from body\n      });\n\n      return res.json({ profile });\n    } catch (error: any) {\n      return res.status(400).json({ error: error.message });\n    }\n  });\n\n  app.get(\"/api/auth/profile/:id\", async (req, res) => {\n    try {\n      const profile = await storage.getProfileById(req.params.id);\n      if (!profile) {\n        return res.status(404).json({ error: \"Profile not found\" });\n      }\n      return res.json({ profile });\n    } catch (error: any) {\n      return res.status(500).json({ error: error.message });\n    }\n  });\n\n  app.post(\"/api/profile/sync\", async (req, res) => {\n    try {\n      const { id, email, firstName } = req.body;\n      \n      if (!id || !email) {\n        return res.status(400).json({ error: \"id and email are required\" });\n      }\n\n      console.log(`[PROFILE SYNC] Syncing profile for ${email} (${id})`);\n      const profile = await storage.upsertProfileFromSupabase({ id, email, firstName });\n      console.log(`[PROFILE SYNC] Profile synced: ${profile.email}, status: ${profile.subscriptionStatus}`);\n      \n      return res.json({ profile });\n    } catch (error: any) {\n      console.error(`[PROFILE SYNC] Error:`, error);\n      return res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Auth Proxy - Route auth requests through server to avoid client-side connection issues\n  app.post(\"/api/auth/login\", async (req, res) => {\n    try {\n      const { email, password } = req.body;\n      \n      if (!email || !password) {\n        return res.status(400).json({ error: \"Email e senha s√£o obrigat√≥rios\" });\n      }\n\n      if (!SUPABASE_URL || !SUPABASE_ANON_KEY) {\n        console.error(\"[AUTH PROXY] Supabase credentials not configured\");\n        return res.status(500).json({ error: \"Servi√ßo de autentica√ß√£o n√£o configurado\" });\n      }\n\n      console.log(`[AUTH PROXY] Login attempt for ${email}`);\n      \n      // Make request to Supabase Auth API\n      const response = await axios.post(\n        `${SUPABASE_URL}/auth/v1/token?grant_type=password`,\n        { email, password },\n        {\n          headers: {\n            'Content-Type': 'application/json',\n            'apikey': SUPABASE_ANON_KEY,\n          },\n          timeout: 10000,\n        }\n      );\n\n      const { user, access_token, refresh_token } = response.data;\n      \n      if (!user) {\n        console.log(`[AUTH PROXY] Login failed for ${email}: No user returned`);\n        return res.status(401).json({ error: \"Email ou senha incorretos\" });\n      }\n\n      console.log(`[AUTH PROXY] Login successful for ${email}`);\n      \n      // Also sync profile to our database\n      const profile = await storage.upsertProfileFromSupabase({\n        id: user.id,\n        email: user.email,\n        firstName: user.user_metadata?.first_name || email.split('@')[0],\n      });\n      \n      return res.json({\n        user: {\n          id: user.id,\n          email: user.email,\n          user_metadata: user.user_metadata,\n        },\n        access_token,\n        refresh_token,\n        profile,\n      });\n    } catch (error: any) {\n      console.error(`[AUTH PROXY] Login error:`, error.response?.data || error.message);\n      \n      if (error.response?.status === 400) {\n        return res.status(401).json({ error: \"Email ou senha incorretos\" });\n      }\n      \n      return res.status(500).json({ error: \"Erro ao fazer login. Tente novamente.\" });\n    }\n  });\n\n  // Bankroll Management Routes\n  app.get(\"/api/profile/:id/bankroll\", async (req, res) => {\n    try {\n      const profile = await storage.getProfileById(req.params.id);\n      if (!profile) {\n        return res.status(404).json({ error: \"Profile not found\" });\n      }\n      return res.json({\n        bankrollInitial: profile.bankrollInitial,\n        riskProfile: profile.riskProfile,\n        unitValue: profile.unitValue,\n      });\n    } catch (error: any) {\n      return res.status(500).json({ error: error.message });\n    }\n  });\n\n  app.put(\"/api/profile/:id/bankroll\", async (req, res) => {\n    try {\n      const { bankrollInitial, riskProfile, unitValue } = req.body;\n      \n      if (!bankrollInitial || !riskProfile || !unitValue) {\n        return res.status(400).json({ error: \"Todos os campos s√£o obrigat√≥rios\" });\n      }\n\n      const profile = await storage.updateProfileBankroll(req.params.id, {\n        bankrollInitial: bankrollInitial.toString(),\n        riskProfile,\n        unitValue: unitValue.toString(),\n      });\n\n      if (!profile) {\n        return res.status(404).json({ error: \"Profile not found\" });\n      }\n\n      return res.json({ success: true, profile });\n    } catch (error: any) {\n      return res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Onboarding Routes\n  app.get(\"/api/profile/:id/onboarding\", async (req, res) => {\n    try {\n      const profile = await storage.getProfileById(req.params.id);\n      if (!profile) {\n        return res.status(404).json({ error: \"Profile not found\" });\n      }\n      return res.json({\n        hasCompletedTour: profile.hasCompletedTour,\n        preferredTheme: profile.preferredTheme || 'dark',\n      });\n    } catch (error: any) {\n      return res.status(500).json({ error: error.message });\n    }\n  });\n\n  app.put(\"/api/profile/:id/tour-completed\", async (req, res) => {\n    try {\n      const { completed } = req.body;\n      const profile = await storage.updateTourCompleted(req.params.id, completed ?? true);\n      if (!profile) {\n        return res.status(404).json({ error: \"Profile not found\" });\n      }\n      return res.json({ success: true, hasCompletedTour: profile.hasCompletedTour });\n    } catch (error: any) {\n      return res.status(500).json({ error: error.message });\n    }\n  });\n\n  app.put(\"/api/profile/:id/theme\", async (req, res) => {\n    try {\n      const { theme } = req.body;\n      if (!theme || !['dark', 'light'].includes(theme)) {\n        return res.status(400).json({ error: \"Theme must be 'dark' or 'light'\" });\n      }\n      const profile = await storage.updatePreferredTheme(req.params.id, theme);\n      if (!profile) {\n        return res.status(404).json({ error: \"Profile not found\" });\n      }\n      return res.json({ success: true, preferredTheme: profile.preferredTheme });\n    } catch (error: any) {\n      return res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Favorites Routes\n  app.get(\"/api/favorites/:userId\", async (req, res) => {\n    try {\n      const favorites = await storage.getUserFavorites(req.params.userId);\n      return res.json({ favorites });\n    } catch (error: any) {\n      return res.status(500).json({ error: error.message });\n    }\n  });\n\n  app.post(\"/api/favorites\", async (req, res) => {\n    try {\n      const { userId, tipId } = req.body;\n      if (!userId || !tipId) {\n        return res.status(400).json({ error: \"userId and tipId are required\" });\n      }\n      const favorite = await storage.addFavorite(userId, tipId);\n      return res.json({ success: true, favorite });\n    } catch (error: any) {\n      return res.status(500).json({ error: error.message });\n    }\n  });\n\n  app.delete(\"/api/favorites/:userId/:tipId\", async (req, res) => {\n    try {\n      await storage.removeFavorite(req.params.userId, req.params.tipId);\n      return res.json({ success: true });\n    } catch (error: any) {\n      return res.status(500).json({ error: error.message });\n    }\n  });\n\n  app.get(\"/api/favorites/:userId/:tipId\", async (req, res) => {\n    try {\n      const isFavorite = await storage.isFavorite(req.params.userId, req.params.tipId);\n      return res.json({ isFavorite });\n    } catch (error: any) {\n      return res.status(500).json({ error: error.message });\n    }\n  });\n\n  // ============================================\n  // User Bets Routes (Individual Tracking)\n  // ============================================\n  \n  // Get user's monthly stats\n  app.get(\"/api/user-bets/stats/:userId\", async (req, res) => {\n    try {\n      const stats = await storage.getUserMonthlyStats(req.params.userId);\n      const assertivity = stats.greens + stats.reds > 0 \n        ? ((stats.greens / (stats.greens + stats.reds)) * 100).toFixed(1)\n        : '0';\n      return res.json({ \n        ...stats, \n        assertivity: parseFloat(assertivity),\n        monthName: new Date().toLocaleString('pt-BR', { month: 'long' })\n      });\n    } catch (error: any) {\n      return res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Get all user bets\n  app.get(\"/api/user-bets/:userId\", async (req, res) => {\n    try {\n      const bets = await storage.getUserBets(req.params.userId);\n      return res.json({ bets });\n    } catch (error: any) {\n      return res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Check if user entered a specific bet\n  app.get(\"/api/user-bets/:userId/:tipId\", async (req, res) => {\n    try {\n      const bet = await storage.getUserBetByTip(req.params.userId, req.params.tipId);\n      return res.json({ bet, hasEntered: !!bet });\n    } catch (error: any) {\n      return res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Mark user as entering a bet\n  app.post(\"/api/user-bets\", async (req, res) => {\n    try {\n      const { userId, tipId, stakeUsed, oddAtEntry } = req.body;\n      if (!userId || !tipId) {\n        return res.status(400).json({ error: \"userId and tipId are required\" });\n      }\n      \n      // Check if already entered\n      const existing = await storage.getUserBetByTip(userId, tipId);\n      if (existing) {\n        return res.json({ success: true, bet: existing, alreadyExists: true });\n      }\n      \n      const bet = await storage.createUserBet({\n        userId,\n        tipId,\n        stakeUsed: stakeUsed || '1.0',\n        oddAtEntry: oddAtEntry || '1.0'\n      });\n      return res.json({ success: true, bet });\n    } catch (error: any) {\n      return res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Update bet result (green/red)\n  app.patch(\"/api/user-bets/:userId/:tipId\", async (req, res) => {\n    try {\n      const { result } = req.body;\n      if (!result || !['green', 'red'].includes(result)) {\n        return res.status(400).json({ error: \"result must be 'green' or 'red'\" });\n      }\n      \n      // Verifica se o usu√°rio j√° marcou resultado\n      const existingBet = await storage.getUserBetByTip(req.params.userId, req.params.tipId);\n      if (existingBet && existingBet.result !== 'pending') {\n        return res.status(400).json({ \n          error: \"Resultado j√° marcado\", \n          currentResult: existingBet.result \n        });\n      }\n      \n      const bet = await storage.updateUserBetResult(req.params.userId, req.params.tipId, result);\n      if (!bet) {\n        return res.status(404).json({ error: \"Bet not found\" });\n      }\n      return res.json({ success: true, bet });\n    } catch (error: any) {\n      return res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Tips Routes\n  app.get(\"/api/tips\", async (req, res) => {\n    try {\n      const allTips = await storage.getAllTips();\n      \n      // Normalize tips data using shared utility\n      const normalizedTips = allTips.map(normalizeTipForResponse);\n      \n      return res.json({ tips: normalizedTips });\n    } catch (error: any) {\n      return res.status(500).json({ error: error.message });\n    }\n  });\n\n  // ============================================\n  // TIP ANALYSIS & EV ENDPOINTS\n  // ============================================\n  \n  // Get full analysis for a tip (by tipId)\n  app.get(\"/api/tips/:tipId/analysis\", async (req, res) => {\n    try {\n      const { tipId } = req.params;\n      \n      // 1. Check if analysis already exists\n      const existingAnalysis = await storage.getTipAnalysis(tipId);\n      const existingRecommendations = await storage.getTipMarketRecommendations(tipId);\n      \n      if (existingAnalysis) {\n        return res.json({\n          success: true,\n          analysis: {\n            goalsAnalysis: existingAnalysis.goalsAnalysis ? JSON.parse(existingAnalysis.goalsAnalysis) : null,\n            cornersAnalysis: existingAnalysis.cornersAnalysis ? JSON.parse(existingAnalysis.cornersAnalysis) : null,\n            h2hAnalysis: existingAnalysis.h2hAnalysis ? JSON.parse(existingAnalysis.h2hAnalysis) : null,\n            climateAnalysis: existingAnalysis.climateAnalysis ? JSON.parse(existingAnalysis.climateAnalysis) : null,\n            tacticalInsights: existingAnalysis.tacticalInsights ? JSON.parse(existingAnalysis.tacticalInsights) : [],\n            finalRecommendation: existingAnalysis.finalRecommendation,\n          },\n          marketRecommendations: existingRecommendations\n        });\n      }\n      \n      // 2. Get the tip to find fixtureId\n      const tip = await storage.getTipById(tipId);\n      if (!tip) {\n        return res.status(404).json({ error: \"Tip not found\" });\n      }\n      \n      if (!tip.fixtureId) {\n        return res.status(400).json({ error: \"Tip has no fixture ID for analysis\" });\n      }\n      \n      // 3. Generate analysis using AI engine\n      const fullAnalysis = await aiPredictionEngine.generateFullAnalysis(parseInt(tip.fixtureId));\n      \n      if (!fullAnalysis) {\n        return res.status(503).json({ error: \"Could not generate analysis - insufficient data\" });\n      }\n      \n      // 4. Store analysis for future use\n      const savedAnalysis = await storage.createTipAnalysis({\n        tipId,\n        fixtureId: tip.fixtureId,\n        goalsAnalysis: JSON.stringify(fullAnalysis.goalsAnalysis),\n        cornersAnalysis: JSON.stringify(fullAnalysis.cornersAnalysis),\n        h2hAnalysis: JSON.stringify(fullAnalysis.h2hAnalysis),\n        climateAnalysis: JSON.stringify(fullAnalysis.climateAnalysis),\n        tacticalInsights: JSON.stringify(fullAnalysis.tacticalInsights),\n        finalRecommendation: fullAnalysis.finalRecommendation,\n        dataSources: JSON.stringify([\"API-Football\", \"Bet365 Odds\"]),\n      });\n      \n      // 5. Store market recommendations\n      for (const rec of fullAnalysis.marketRecommendations) {\n        await storage.createTipMarketRecommendation({\n          tipId,\n          analysisId: savedAnalysis.id,\n          marketType: rec.marketType,\n          marketLabel: rec.marketLabel,\n          selection: rec.selection,\n          bookmakerOdd: rec.bookmakerOdd,\n          modelProbability: rec.modelProbability,\n          fairOdd: rec.fairOdd,\n          evPercent: rec.evPercent,\n          evRating: rec.evRating as any,\n          suggestedStake: rec.suggestedStake,\n          kellyStake: rec.kellyStake,\n          rationale: JSON.stringify(rec.rationale),\n          confidenceLevel: rec.confidenceLevel as any,\n          isMainPick: rec.isMainPick,\n          isValueBet: rec.isValueBet,\n        });\n      }\n      \n      return res.json({\n        success: true,\n        analysis: fullAnalysis,\n        marketRecommendations: fullAnalysis.marketRecommendations\n      });\n      \n    } catch (error: any) {\n      console.error('[API] Error getting tip analysis:', error);\n      return res.status(500).json({ error: error.message });\n    }\n  });\n  \n  // Generate analysis for a fixture (without tip - for preview)\n  app.get(\"/api/fixtures/:fixtureId/analysis\", async (req, res) => {\n    try {\n      const fixtureId = parseInt(req.params.fixtureId);\n      \n      if (isNaN(fixtureId)) {\n        return res.status(400).json({ error: \"Invalid fixture ID\" });\n      }\n      \n      const fullAnalysis = await aiPredictionEngine.generateFullAnalysis(fixtureId);\n      \n      if (!fullAnalysis) {\n        return res.status(503).json({ error: \"Could not generate analysis - insufficient data\" });\n      }\n      \n      return res.json({\n        success: true,\n        fixtureId,\n        analysis: fullAnalysis,\n        marketRecommendations: fullAnalysis.marketRecommendations\n      });\n      \n    } catch (error: any) {\n      console.error('[API] Error generating fixture analysis:', error);\n      return res.status(500).json({ error: error.message });\n    }\n  });\n\n  // ============================================\n  // AI Bet Slip Scanner (Google Gemini Vision)\n  // ============================================\n  app.post(\"/api/scan-ticket\", async (req, res) => {\n    try {\n      const { imageBase64 } = req.body;\n\n      if (!imageBase64) {\n        return res.status(400).json({ error: \"Image is required\" });\n      }\n\n      if (!genAI) {\n        return res.status(503).json({ \n          error: \"Gemini not configured\",\n          message: \"A chave do Gemini n√£o est√° configurada. Preencha o bilhete manualmente.\"\n        });\n      }\n\n      console.log(\"üîç Scanning bet slip with Gemini Vision...\");\n\n      const model = genAI.getGenerativeModel({ model: \"gemini-2.0-flash\" });\n\n      // Extract base64 data (remove data:image/xxx;base64, prefix if present)\n      const base64Data = imageBase64.includes(',') \n        ? imageBase64.split(',')[1] \n        : imageBase64;\n\n      const prompt = `Analise esta imagem de bilhete de aposta esportiva.\n\nExtraia as seguintes informa√ß√µes em formato JSON estrito:\n{\n  \"bets\": [\n    {\n      \"home_team\": \"Time Casa\",\n      \"away_team\": \"Time Fora\", \n      \"market\": \"Mercado EXATO do print\",\n      \"odd\": 1.85,\n      \"match_time\": \"2025-11-27T18:00:00\"\n    }\n  ],\n  \"total_odd\": 2.50,\n  \"is_multiple\": false\n}\n\nREGRAS IMPORTANTES:\n1. COPIE O MERCADO EXATAMENTE COMO EST√Å NO PRINT!\n   - N√ÉO abrevie, N√ÉO simplifique\n   - Copie o texto completo do mercado como aparece no bilhete\n   - Exemplo: Se no print diz \"Para Ambos os Times Marcarem - Sim\", use exatamente isso\n   - Exemplo: Se no print diz \"Total de Gols - Mais de 2.5\", use exatamente isso\n\n2. MERCADOS REPETIDOS:\n   - Se TODAS as apostas tiverem o MESMO mercado (ex: todas \"Resultado Final\"), \n     N√ÉO repita - coloque o mercado apenas na PRIMEIRA aposta\n   - Para as demais apostas com mercado id√™ntico, use \"\" (string vazia) no campo market\n   - S√≥ coloque mercado diferente se realmente for diferente entre as apostas\n\n4. Se houver m√∫ltiplas apostas, liste CADA UMA separadamente no array\n\n5. Extraia a odd EXATA do print (use total_odd para odd combinada)\n\n6. EXTRAIA O HOR√ÅRIO DO JOGO se vis√≠vel no print (formato ISO: YYYY-MM-DDTHH:MM:SS)\n   - Se aparecer \"27/11 18:00\" ‚Üí \"2025-11-27T18:00:00\"\n   - Se n√£o encontrar hor√°rio, use null\n\n7. Responda APENAS com o JSON v√°lido, sem texto adicional`;\n\n      const imagePart = {\n        inlineData: {\n          data: base64Data,\n          mimeType: \"image/jpeg\"\n        }\n      };\n\n      const result = await model.generateContent([prompt, imagePart]);\n      const response = result.response;\n      const content = response.text();\n      \n      console.log(\"ü§ñ Gemini Response:\", content);\n\n      // Parse JSON from response\n      let parsed;\n      try {\n        // Try to extract JSON from the response\n        const jsonMatch = content.match(/\\{[\\s\\S]*\\}/);\n        if (jsonMatch) {\n          parsed = JSON.parse(jsonMatch[0]);\n        } else {\n          throw new Error(\"No JSON found in response\");\n        }\n      } catch (parseError) {\n        console.error(\"Failed to parse Gemini response:\", parseError);\n        return res.status(422).json({ \n          error: \"Failed to parse bet slip\",\n          message: \"A IA n√£o conseguiu interpretar o bilhete. Preencha manualmente.\",\n          raw: content\n        });\n      }\n\n      console.log(\"‚úÖ Parsed bet slip:\", parsed);\n      return res.json({ \n        success: true,\n        data: parsed\n      });\n\n    } catch (error: any) {\n      console.error(\"Scan ticket error:\", error);\n      return res.status(500).json({ \n        error: \"AI scan failed\",\n        message: error.message || \"Erro ao processar imagem\"\n      });\n    }\n  });\n\n  // SECURITY: Admin-only helper function with dual verification (userId + email)\n  const ALLOWED_ADMINS = ['kwillianferreira@gmail.com'];\n  \n  // SECURITY: Verify admin with both userId AND email to prevent spoofing\n  // An attacker would need to know both the email AND the userId (UUID) to bypass\n  const verifyAdmin = async (adminEmail: string | undefined, adminUserId?: string): Promise<boolean> => {\n    if (!adminEmail) {\n      console.warn(\"‚ö†Ô∏è [SECURITY] Admin verification failed: no email provided\");\n      return false;\n    }\n    \n    const adminUser = await storage.getUserByEmail(adminEmail);\n    if (!adminUser) {\n      console.warn(`‚ö†Ô∏è [SECURITY] Admin verification failed: user not found for ${adminEmail}`);\n      return false;\n    }\n    \n    // SECURITY: If userId is provided, verify it matches the email's userId\n    if (adminUserId && adminUser.id !== adminUserId) {\n      console.warn(`‚ö†Ô∏è [SECURITY] Admin verification failed: userId mismatch for ${adminEmail}`);\n      console.warn(`‚ö†Ô∏è [SECURITY] Expected: ${adminUser.id}, Got: ${adminUserId}`);\n      return false;\n    }\n    \n    const isAdmin = adminUser.role === 'admin' || ALLOWED_ADMINS.includes(adminEmail.toLowerCase());\n    \n    if (!isAdmin) {\n      console.warn(`‚ö†Ô∏è [SECURITY] Admin verification failed: ${adminEmail} is not an admin`);\n    }\n    \n    return isAdmin;\n  };\n\n  // SECURITY: Protected - only admins can create tips\n  app.post(\"/api/tips\", async (req, res) => {\n    try {\n      const { adminEmail, adminUserId, ...tipData } = req.body;\n      \n      // SECURITY: Verify admin with both email AND userId\n      if (!await verifyAdmin(adminEmail, adminUserId)) {\n        console.warn(`‚ö†Ô∏è [SECURITY] Unauthorized tip creation attempt`);\n        return res.status(403).json({ error: \"Acesso negado. Apenas administradores.\" });\n      }\n      \n      const validatedData = insertTipSchema.parse(tipData);\n      const tip = await storage.createTip(validatedData);\n      return res.json({ tip });\n    } catch (error: any) {\n      return res.status(400).json({ error: error.message });\n    }\n  });\n\n  // SECURITY: Protected - only admins can update tip status\n  app.patch(\"/api/tips/:id/status\", async (req, res) => {\n    try {\n      const { status, adminEmail, adminUserId } = req.body;\n      \n      // SECURITY: Verify admin with both email AND userId\n      if (!await verifyAdmin(adminEmail, adminUserId)) {\n        console.warn(`‚ö†Ô∏è [SECURITY] Unauthorized tip status update attempt`);\n        return res.status(403).json({ error: \"Acesso negado. Apenas administradores.\" });\n      }\n      \n      if (!['pending', 'green', 'red'].includes(status)) {\n        return res.status(400).json({ error: \"Invalid status\" });\n      }\n\n      const tip = await storage.updateTipStatus(req.params.id, status);\n      if (!tip) {\n        return res.status(404).json({ error: \"Tip not found\" });\n      }\n      \n      return res.json({ tip });\n    } catch (error: any) {\n      return res.status(500).json({ error: error.message });\n    }\n  });\n\n  // SECURITY: Protected - only admins can delete tips\n  app.delete(\"/api/tips/:id\", async (req, res) => {\n    try {\n      const adminEmail = req.query.adminEmail as string;\n      const adminUserId = req.query.adminUserId as string;\n      \n      // SECURITY: Verify admin with both email AND userId\n      if (!await verifyAdmin(adminEmail, adminUserId)) {\n        console.warn(`‚ö†Ô∏è [SECURITY] Unauthorized tip deletion attempt`);\n        return res.status(403).json({ error: \"Acesso negado. Apenas administradores.\" });\n      }\n      await storage.deleteTip(req.params.id);\n      return res.json({ success: true });\n    } catch (error: any) {\n      return res.status(500).json({ error: error.message });\n    }\n  });\n\n  // SECURITY: Protected - only admins can set tip as free\n  app.patch(\"/api/tips/:id/free\", async (req, res) => {\n    try {\n      const { isFree, adminEmail, adminUserId } = req.body;\n      \n      // SECURITY: Verify admin with both email AND userId\n      if (!await verifyAdmin(adminEmail, adminUserId)) {\n        console.warn(`‚ö†Ô∏è [SECURITY] Unauthorized tip free toggle attempt`);\n        return res.status(403).json({ error: \"Acesso negado. Apenas administradores.\" });\n      }\n      \n      // If setting as free, first clear any existing free tips (only 1 free at a time)\n      if (isFree) {\n        await storage.clearAllFreeTips();\n      }\n\n      const tip = await storage.setTipFree(req.params.id, isFree);\n      if (!tip) {\n        return res.status(404).json({ error: \"Tip not found\" });\n      }\n      \n      console.log(`‚úÖ Tip ${req.params.id} set as ${isFree ? 'FREE' : 'PREMIUM'} by admin`);\n      return res.json({ tip });\n    } catch (error: any) {\n      return res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Get current free tip\n  app.get(\"/api/tips/free\", async (req, res) => {\n    try {\n      const freeTip = await storage.getFreeTip();\n      return res.json({ tip: freeTip || null });\n    } catch (error: any) {\n      return res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Tips Statistics - Dashboard metrics calculated from real tips + baseline\n  app.get(\"/api/tips/stats\", async (req, res) => {\n    try {\n      // ========================================\n      // BASELINE: Dados fict√≠cios de lan√ßamento\n      // 196 entradas com 87% de assertividade\n      // Odd m√©dia de 1.85\n      // ========================================\n      const BASELINE = {\n        greens: 170,        // 196 √ó 87% = 170\n        reds: 26,           // 196 - 170 = 26\n        totalResolved: 196,\n        oddSum: 362.6,      // 196 √ó 1.85 = 362.6 (soma das odds para m√©dia ponderada)\n        profitUnits: 118.5  // 170 √ó (1.85 - 1) - 26 = 118.5 unidades de lucro\n      };\n      \n      const allTips = await storage.getAllTips();\n      \n      // Filter resolved tips only (green or red)\n      const resolvedTips = allTips.filter(tip => tip.status === 'green' || tip.status === 'red');\n      \n      // Count real greens and reds\n      const realGreens = resolvedTips.filter(tip => tip.status === 'green').length;\n      const realReds = resolvedTips.filter(tip => tip.status === 'red').length;\n      const pending = allTips.filter(tip => tip.status === 'pending').length;\n      \n      // Combine baseline + real data\n      const totalGreens = BASELINE.greens + realGreens;\n      const totalReds = BASELINE.reds + realReds;\n      const totalResolved = totalGreens + totalReds;\n      \n      // Calculate assertivity percentage (baseline + real)\n      const assertivity = totalResolved > 0 \n        ? (totalGreens / totalResolved) * 100 \n        : 0;\n      \n      // Calculate average odd (weighted average of baseline + real)\n      const realOdds = resolvedTips\n        .map(tip => parseFloat(tip.odd))\n        .filter(odd => !isNaN(odd) && odd > 0);\n      const realOddSum = realOdds.reduce((sum, odd) => sum + odd, 0);\n      const totalOddSum = BASELINE.oddSum + realOddSum;\n      const averageOdd = totalResolved > 0 \n        ? totalOddSum / totalResolved \n        : 0;\n      \n      // Calculate bankroll growth (baseline + real)\n      const INITIAL_BANKROLL = 100; // 100 units base (1 unit per bet)\n      const realGreenTips = resolvedTips.filter(tip => tip.status === 'green');\n      const realGreenOdds = realGreenTips\n        .map(tip => parseFloat(tip.odd))\n        .filter(odd => !isNaN(odd) && odd > 0);\n      const realProfitFromGreens = realGreenOdds.reduce((sum, odd) => sum + (odd - 1), 0);\n      const realLossFromReds = realReds * 1;\n      const realNetProfit = realProfitFromGreens - realLossFromReds;\n      \n      // Total profit = baseline profit + real profit\n      const totalNetProfit = BASELINE.profitUnits + realNetProfit;\n      const growthPercentage = (totalNetProfit / INITIAL_BANKROLL) * 100;\n      \n      return res.json({\n        greens: totalGreens,\n        reds: totalReds,\n        pending,\n        totalEntries: BASELINE.totalResolved + allTips.length,\n        totalResolved,\n        assertivity: parseFloat(assertivity.toFixed(1)),\n        averageOdd: parseFloat(averageOdd.toFixed(2)),\n        growthPercentage: parseFloat(growthPercentage.toFixed(1)),\n        profitUnits: parseFloat(totalNetProfit.toFixed(1)),\n        // Debug: separate baseline and real data\n        _baseline: BASELINE,\n        _real: {\n          greens: realGreens,\n          reds: realReds,\n          pending,\n          profitUnits: parseFloat(realNetProfit.toFixed(1))\n        }\n      });\n    } catch (error: any) {\n      return res.status(500).json({ error: error.message });\n    }\n  });\n\n  // ============================================\n  // Mercado Pago Routes\n  // ============================================\n\n  // Get Mercado Pago configuration status and public key\n  app.get(\"/api/mercadopago/config\", (req, res) => {\n    try {\n      return res.json({\n        configured: mercadoPagoService.isConfigured(),\n        publicKey: mercadoPagoService.isConfigured() ? mercadoPagoService.getPublicKey() : null,\n      });\n    } catch (error: any) {\n      return res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Create a subscription checkout for a user\n  app.post(\"/api/mercadopago/create-subscription\", async (req, res) => {\n    try {\n      const { userId, userEmail, planId } = req.body;\n\n      if (!userId || !userEmail) {\n        return res.status(400).json({ error: \"userId and userEmail are required\" });\n      }\n\n      // Create Ocean Prime plan (returns init_point for checkout)\n      const plan = await mercadoPagoService.createSubscriptionPlan();\n\n      // Return plan's init_point to redirect user to Mercado Pago checkout\n      // When user completes payment, MP automatically creates the subscription\n      return res.json({\n        planId: plan.id,\n        initPoint: plan.init_point,\n      });\n    } catch (error: any) {\n      console.error(\"Error creating subscription:\", error);\n      return res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Get subscription status\n  app.get(\"/api/mercadopago/subscription/:id\", async (req, res) => {\n    try {\n      const subscription = await mercadoPagoService.getSubscription(req.params.id);\n      return res.json({ subscription });\n    } catch (error: any) {\n      return res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Cancel subscription\n  app.delete(\"/api/mercadopago/subscription/:id\", async (req, res) => {\n    try {\n      const result = await mercadoPagoService.cancelSubscription(req.params.id);\n      \n      // Update user subscription status in database\n      // TODO: Implement storage.updateUserSubscription()\n      \n      return res.json({ success: true, result });\n    } catch (error: any) {\n      return res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Create payment preference (supports PIX, Card, etc.)\n  app.post(\"/api/mercadopago/preference\", async (req, res) => {\n    try {\n      const { userId, userEmail, title, amount, quantity } = req.body;\n      \n      if (!userId || !userEmail) {\n        return res.status(400).json({ error: \"userId and userEmail are required\" });\n      }\n\n      const preference = await mercadoPagoService.createPreference({\n        title: title || 'True Signal Pro - Acesso Mensal',\n        amount: amount || 47.90,\n        quantity: quantity || 1,\n        userId,\n        userEmail,\n      });\n\n      return res.json({ \n        success: true,\n        preference,\n      });\n    } catch (error: any) {\n      console.error(\"Error creating preference:\", error);\n      return res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Create PIX payment (transparent checkout) - requires authentication\n  app.post(\"/api/mercadopago/pix\", async (req, res) => {\n    try {\n      const { userId, userEmail, firstName, lastName, document } = req.body;\n      \n      // Validate required fields\n      if (!userId || !userEmail) {\n        return res.status(400).json({ error: \"userId and userEmail are required\" });\n      }\n\n      // Verify user exists in database (security check)\n      const user = await storage.getProfileById(userId);\n      if (!user) {\n        return res.status(403).json({ error: \"User not found\" });\n      }\n\n      // Verify email matches user (prevent spoofing)\n      if (user.email !== userEmail) {\n        console.warn(`‚ö†Ô∏è PIX attempt with mismatched email: ${userEmail} vs ${user.email}`);\n        return res.status(403).json({ error: \"Email mismatch\" });\n      }\n\n      // Fixed price - server-side controlled (prevent price manipulation)\n      // BLACK FRIDAY: R$ 99,87 ‚Üí R$ 47,90 (52% OFF)\n      const TRUE_SIGNAL_PRO_PRICE = 47.90;\n\n      const payment = await mercadoPagoService.createPixPayment({\n        amount: TRUE_SIGNAL_PRO_PRICE,\n        userId,\n        userEmail: user.email, // Use verified email from database\n        description: 'True Signal Pro - Acesso Mensal',\n        firstName: firstName || 'Usuario',\n        lastName: lastName || 'True Signal',\n        document,\n      });\n\n      // Store payment ID for this user (for status verification)\n      console.log(`‚úÖ PIX payment created for user ${userId}: ${payment.id}`);\n\n      return res.json({ \n        success: true,\n        payment: {\n          id: payment.id,\n          status: payment.status,\n        },\n        qrCode: payment.point_of_interaction?.transaction_data?.qr_code,\n        qrCodeBase64: payment.point_of_interaction?.transaction_data?.qr_code_base64,\n      });\n    } catch (error: any) {\n      console.error(\"Error creating PIX payment:\", error);\n      return res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Get payment status - secured endpoint\n  app.post(\"/api/mercadopago/payment-status\", async (req, res) => {\n    try {\n      const { paymentId, userId } = req.body;\n      \n      if (!paymentId || !userId) {\n        return res.status(400).json({ error: \"paymentId and userId are required\" });\n      }\n\n      // Verify user exists\n      const user = await storage.getProfileById(userId);\n      if (!user) {\n        return res.status(403).json({ error: \"Unauthorized\" });\n      }\n\n      const paymentResponse = await axios.get(\n        `https://api.mercadopago.com/v1/payments/${paymentId}`,\n        { headers: { 'Authorization': `Bearer ${process.env.MERCADOPAGO_ACCESS_TOKEN}` } }\n      );\n      \n      // Verify this payment belongs to this user\n      if (paymentResponse.data.external_reference !== userId) {\n        console.warn(`‚ö†Ô∏è Payment status check mismatch: user ${userId} tried to check payment ${paymentId}`);\n        return res.status(403).json({ error: \"Unauthorized\" });\n      }\n\n      // Return only necessary status info (no sensitive data)\n      return res.json({ \n        status: paymentResponse.data.status,\n      });\n    } catch (error: any) {\n      console.error(\"Error getting payment status:\", error);\n      return res.status(500).json({ error: \"Unable to verify payment status\" });\n    }\n  });\n\n  // Card Payment - Transparent checkout with tokenized card\n  app.post(\"/api/mercadopago/card-payment\", async (req, res) => {\n    try {\n      const { token, issuerId, paymentMethodId, transactionAmount, installments, userId, userEmail, payer } = req.body;\n      \n      // Validate required fields\n      if (!token || !paymentMethodId || !userId || !userEmail) {\n        return res.status(400).json({ error: \"Missing required fields\" });\n      }\n\n      // Verify user exists in database (security check)\n      const user = await storage.getProfileById(userId);\n      if (!user) {\n        return res.status(403).json({ error: \"User not found\" });\n      }\n\n      // Verify email matches user (prevent spoofing)\n      if (user.email !== userEmail) {\n        console.warn(`‚ö†Ô∏è Card payment attempt with mismatched email: ${userEmail} vs ${user.email}`);\n        return res.status(403).json({ error: \"Email mismatch\" });\n      }\n\n      // Fixed price - server-side controlled (prevent price manipulation)\n      // BLACK FRIDAY: R$ 99,87 ‚Üí R$ 47,90 (52% OFF)\n      const TRUE_SIGNAL_PRO_PRICE = 47.90;\n\n      const payment = await mercadoPagoService.createCardPayment({\n        token,\n        issuerId: issuerId || '',\n        paymentMethodId,\n        transactionAmount: TRUE_SIGNAL_PRO_PRICE, // Use server-side price\n        installments: installments || 1,\n        userId,\n        userEmail: user.email,\n        payer: {\n          email: user.email,\n          identification: payer?.identification || { type: 'CPF', number: '' },\n        },\n      });\n\n      console.log(`‚úÖ Card payment created for user ${userId}: ${payment.id}, status: ${payment.status}`);\n\n      // If payment approved, activate subscription immediately\n      if (payment.status === 'approved') {\n        const now = new Date();\n        const subscriptionEndsAt = new Date(now.getTime() + 30 * 24 * 60 * 60 * 1000); // 30 days\n\n        await storage.updateUserSubscription(userId, {\n          subscriptionStatus: \"active\",\n          subscriptionActivatedAt: now,\n          subscriptionEndsAt: subscriptionEndsAt,\n          mercadopagoSubscriptionId: payment.id.toString(),\n        });\n\n        console.log(`üéâ [Card Payment] User ${userId} subscription activated until ${subscriptionEndsAt.toISOString()}`);\n      }\n\n      return res.json({ \n        success: payment.status === 'approved',\n        status: payment.status,\n        statusDetail: payment.status_detail,\n        paymentId: payment.id,\n      });\n    } catch (error: any) {\n      console.error(\"Error creating card payment:\", error.response?.data || error.message);\n      return res.status(500).json({ error: error.response?.data?.message || error.message });\n    }\n  });\n\n  // Mercado Pago Webhook - Process payment notifications\n  // SECURITY: Validate webhook origin\n  app.post(\"/api/mercadopago/webhook\", async (req, res) => {\n    try {\n      const { type, data } = req.body;\n      \n      // SECURITY: Log source information for audit\n      const sourceIP = req.headers['x-forwarded-for'] || req.socket.remoteAddress;\n      const userAgent = req.headers['user-agent'];\n      \n      console.log(\"üì© [Mercado Pago Webhook] Received:\", type, data);\n      console.log(\"üîí [Webhook Security] Source IP:\", sourceIP);\n      console.log(\"üîí [Webhook Security] User-Agent:\", userAgent);\n\n      // SECURITY: Basic validation - check for required fields\n      if (!type || !data || !data.id) {\n        console.warn(\"‚ö†Ô∏è [SECURITY] Invalid webhook payload - missing required fields\");\n        return res.status(400).send(\"Invalid payload\");\n      }\n\n      // SECURITY: Validate webhook by fetching resource from MP API\n      // This ensures the webhook is legitimate since only MP can create valid resources\n      // The actual validation happens when we fetch the payment/subscription details below\n\n      // Respond immediately to MP (required)\n      res.status(200).send(\"OK\");\n\n      // Process webhook asynchronously\n      if (type === \"subscription_preapproval\") {\n        // Subscription status changed\n        const subscriptionId = data.id;\n        const subscription = await mercadoPagoService.getSubscription(subscriptionId);\n        \n        console.log(\"üìä [Webhook] Subscription status:\", subscription.status);\n        console.log(\"üìä [Webhook] External reference (userId):\", subscription.external_reference);\n\n        // Update user subscription in database based on status\n        let userId = subscription.external_reference;\n        \n        // If no external_reference (plan.init_point flow), lookup by email\n        if (!userId) {\n          console.log(\"‚ö†Ô∏è [Webhook] No external_reference, trying payer_email lookup...\");\n          const payerEmail = subscription.payer_email;\n          if (!payerEmail) {\n            console.error(\"‚ùå [Webhook] No external_reference or payer_email in subscription\");\n            return;\n          }\n\n          // Find user by email\n          const user = await storage.getUserByEmail(payerEmail);\n          if (!user) {\n            console.error(`‚ùå [Webhook] No user found with email: ${payerEmail}`);\n            return;\n          }\n          userId = user.id;\n          console.log(`‚úÖ [Webhook] User found by email: ${userId}`);\n        }\n\n        const status = subscription.status;\n\n        if (status === \"authorized\") {\n          // Subscription is active - upgrade user to True Signal Pro (30 days)\n          const now = new Date();\n          const endsAt = new Date(now.getTime() + 30 * 24 * 60 * 60 * 1000); // +30 days\n          \n          console.log(\"‚úÖ [Webhook] Activating True Signal Pro for user:\", userId);\n          console.log(\"üìÖ [Webhook] Subscription period:\", now.toISOString(), \"‚Üí\", endsAt.toISOString());\n          \n          await storage.updateUserSubscription(userId, {\n            subscriptionStatus: 'active',\n            mercadopagoSubscriptionId: subscriptionId,\n            subscriptionActivatedAt: now,\n            subscriptionEndsAt: endsAt,\n          });\n          console.log(\"‚úÖ [Webhook] User upgraded to True Signal Pro successfully (30 days)\");\n        } else if (status === \"cancelled\" || status === \"paused\") {\n          // Subscription cancelled/paused - downgrade user\n          console.log(\"‚ö†Ô∏è [Webhook] Deactivating subscription for user:\", userId);\n          await storage.updateUserSubscription(userId, {\n            subscriptionStatus: 'expired',\n            mercadopagoSubscriptionId: null,\n          });\n          console.log(\"‚ö†Ô∏è [Webhook] User subscription deactivated\");\n        }\n      } else if (type === \"payment\") {\n        // Individual payment received (PIX or recurring payment)\n        const paymentId = data.id;\n        console.log(\"üí∞ [Webhook] Payment received:\", paymentId);\n        \n        try {\n          // Fetch payment details from Mercado Pago\n          const paymentResponse = await axios.get(\n            `https://api.mercadopago.com/v1/payments/${paymentId}`,\n            { headers: { 'Authorization': `Bearer ${process.env.MERCADOPAGO_ACCESS_TOKEN}` } }\n          );\n          \n          const payment = paymentResponse.data;\n          console.log(\"üí∞ [Webhook] Payment status:\", payment.status);\n          console.log(\"üí∞ [Webhook] Payment method:\", payment.payment_method_id);\n          console.log(\"üí∞ [Webhook] External reference:\", payment.external_reference);\n          console.log(\"üí∞ [Webhook] Payer email:\", payment.payer?.email);\n          \n          if (payment.status === 'approved') {\n            const userId = payment.external_reference;\n            \n            if (!userId) {\n              // SECURITY: Do NOT activate based on email alone\n              // This prevents malicious users from upgrading other accounts\n              console.warn(\"‚ö†Ô∏è [Webhook] Payment without external_reference - manual verification required\");\n              console.warn(\"‚ö†Ô∏è [Webhook] Payment ID:\", paymentId);\n              console.warn(\"‚ö†Ô∏è [Webhook] Payer email:\", payment.payer?.email);\n              console.warn(\"‚ö†Ô∏è [Webhook] Amount:\", payment.transaction_amount);\n              // Admin should manually verify and activate via database\n              return;\n            }\n            \n            // Verify user exists in our database before activating\n            const user = await storage.getProfileById(userId);\n            if (!user) {\n              console.error(\"‚ùå [Webhook] User not found in database:\", userId);\n              console.error(\"‚ùå [Webhook] Payment ID:\", paymentId);\n              return;\n            }\n            \n            const now = new Date();\n            const endsAt = new Date(now.getTime() + 30 * 24 * 60 * 60 * 1000);\n            \n            console.log(\"‚úÖ [Webhook] Activating True Signal Pro via PIX for user:\", userId);\n            console.log(\"‚úÖ [Webhook] User email:\", user.email);\n            await storage.updateUserSubscription(userId, {\n              subscriptionStatus: 'active',\n              subscriptionActivatedAt: now,\n              subscriptionEndsAt: endsAt,\n            });\n            console.log(\"‚úÖ [Webhook] PIX payment processed successfully!\");\n          }\n        } catch (paymentError: any) {\n          console.error(\"‚ùå [Webhook] Error fetching payment:\", paymentError.message);\n        }\n      }\n    } catch (error: any) {\n      console.error(\"‚ùå [Webhook] Error processing:\", error.message);\n      // Don't return error - we already responded 200 to MP\n    }\n  });\n\n  // Admin: Manually activate premium access for a user\n  // SECURITY: Protected endpoint - requires admin authentication\n  app.post(\"/api/admin/activate-premium\", async (req, res) => {\n    try {\n      const { email, days, adminEmail, adminUserId } = req.body;\n      \n      // SECURITY: Verify admin authentication with both email AND userId\n      if (!adminEmail || !adminUserId) {\n        console.warn(\"‚ö†Ô∏è [SECURITY] Admin endpoint called without credentials\");\n        return res.status(401).json({ error: \"N√£o autorizado\" });\n      }\n      \n      // SECURITY: Verify requester is admin using the helper function with dual verification\n      if (!await verifyAdmin(adminEmail, adminUserId)) {\n        console.warn(`‚ö†Ô∏è [SECURITY] Non-admin user attempted admin action: ${adminEmail}`);\n        return res.status(403).json({ error: \"Acesso negado. Apenas administradores.\" });\n      }\n      \n      // Validate inputs\n      if (!email || !days) {\n        return res.status(400).json({ error: \"Email e dias s√£o obrigat√≥rios\" });\n      }\n      \n      const numDays = parseInt(days);\n      if (isNaN(numDays) || numDays < 1 || numDays > 365) {\n        return res.status(400).json({ error: \"N√∫mero de dias inv√°lido (1-365)\" });\n      }\n      \n      // Find user by email\n      const user = await storage.getUserByEmail(email);\n      if (!user) {\n        return res.status(404).json({ error: `Usu√°rio n√£o encontrado: ${email}` });\n      }\n      \n      // Calculate subscription period\n      const now = new Date();\n      const endsAt = new Date(now.getTime() + numDays * 24 * 60 * 60 * 1000);\n      \n      // Activate premium\n      await storage.updateUserSubscription(user.id, {\n        subscriptionStatus: 'active',\n        subscriptionActivatedAt: now,\n        subscriptionEndsAt: endsAt,\n      });\n      \n      console.log(`üéâ [Admin] Premium ativado manualmente para ${email} por ${numDays} dias`);\n      console.log(`üìÖ [Admin] Per√≠odo: ${now.toISOString()} ‚Üí ${endsAt.toISOString()}`);\n      console.log(`üë§ [Admin] A√ß√£o realizada por: ${adminEmail}`);\n      \n      return res.json({ \n        success: true,\n        message: `Premium ativado para ${email} por ${numDays} dias`,\n        endsAt: endsAt.toISOString(),\n      });\n    } catch (error: any) {\n      console.error(\"Error activating premium:\", error);\n      return res.status(500).json({ error: \"Erro ao ativar acesso premium\" });\n    }\n  });\n\n  // =====================================================\n  // AI PREDICTION ENGINE ROUTES\n  // =====================================================\n\n  // Run AI analysis for upcoming fixtures\n  app.post(\"/api/ai/analyze\", async (req, res) => {\n    try {\n      const { date, adminEmail, adminUserId } = req.body;\n      \n      if (!await verifyAdmin(adminEmail, adminUserId)) {\n        return res.status(403).json({ error: \"Acesso negado. Apenas administradores.\" });\n      }\n      \n      const analysisDate = date || new Date().toISOString().split('T')[0];\n      console.log(`ü§ñ [AI Engine] Starting analysis for ${analysisDate}`);\n      \n      const result = await aiPredictionEngine.analyzeUpcomingFixtures(analysisDate);\n      \n      return res.json({\n        success: true,\n        date: analysisDate,\n        fixturesAnalyzed: result.analyzed,\n        predictionsGenerated: result.predictions,\n        message: `An√°lise completa! ${result.predictions} previs√µes geradas de ${result.analyzed} jogos.`\n      });\n    } catch (error: any) {\n      console.error(\"[AI Engine] Analysis error:\", error);\n      return res.status(500).json({ error: \"Erro ao executar an√°lise de IA\" });\n    }\n  });\n\n  // Get AI draft tickets\n  app.get(\"/api/ai/drafts\", async (req, res) => {\n    try {\n      const drafts = await aiPredictionEngine.getDraftTickets();\n      return res.json(drafts);\n    } catch (error: any) {\n      console.error(\"[AI Engine] Error fetching drafts:\", error);\n      return res.status(500).json({ error: \"Erro ao buscar rascunhos de IA\" });\n    }\n  });\n\n  // Approve AI ticket and convert to tip\n  app.post(\"/api/ai/drafts/:id/approve\", async (req, res) => {\n    try {\n      const { id } = req.params;\n      const { adminEmail, adminUserId, notes, adjustedOdd, adjustedStake, betLink } = req.body;\n      \n      if (!await verifyAdmin(adminEmail, adminUserId)) {\n        return res.status(403).json({ error: \"Acesso negado. Apenas administradores.\" });\n      }\n      \n      // Get the draft ticket\n      const drafts = await aiPredictionEngine.getDraftTickets();\n      const draft = drafts.find((d: any) => d.id === id);\n      \n      if (!draft) {\n        return res.status(404).json({ error: \"Rascunho n√£o encontrado\" });\n      }\n      \n      // Create a new tip from the draft\n      const matchTime = new Date(draft.matchTime);\n      const formattedTime = matchTime.toLocaleDateString('pt-BR', { \n        day: '2-digit', \n        month: '2-digit',\n        hour: '2-digit',\n        minute: '2-digit'\n      });\n      \n      // Handle combo (multiple legs) vs single bet\n      const isCombo = draft.isCombo;\n      const legsArray = parseLegs(draft.legs);\n      \n      let tipData: any;\n      \n      // Generate AI analysis summary for users\n      const generateAnalysisSummary = (draft: any): string => {\n        const confidence = parseFloat(draft.confidence || '0');\n        const probability = parseFloat(draft.probability || '0');\n        const ev = parseFloat(draft.expectedValue || '0');\n        \n        let summary = `Analisando o confronto entre ${draft.homeTeam} e ${draft.awayTeam}, `;\n        \n        if (confidence >= 85) {\n          summary += `percebi que ambos os times apresentam padr√µes consistentes. `;\n        } else if (confidence >= 75) {\n          summary += `identifiquei tend√™ncias interessantes nos √∫ltimos jogos. `;\n        } else {\n          summary += `observei alguns indicadores relevantes. `;\n        }\n        \n        summary += `Com base em tudo isso, a probabilidade calculada ficou em ${probability.toFixed(0)}%, `;\n        summary += `o que me d√° ${confidence.toFixed(0)}% de confian√ßa. `;\n        \n        if (ev > 0) {\n          summary += `O valor esperado √© positivo (+${ev.toFixed(1)}%), indicando vantagem matem√°tica a longo prazo.`;\n        }\n        \n        return summary;\n      };\n      \n      // Extract goal AVERAGE per game from team stats (goalsScored is already the average)\n      const extractGoalsAvg = (statsJson: string | null): string | null => {\n        if (!statsJson) return null;\n        try {\n          const stats = typeof statsJson === 'string' ? JSON.parse(statsJson) : statsJson;\n          // goalsScored is already the average per game from the API\n          const avg = parseFloat(stats.goalsScored) || 0;\n          return avg.toFixed(2);\n        } catch {\n          return null;\n        }\n      };\n      \n      const homeGoalsAvg = extractGoalsAvg(draft.homeTeamStats);\n      const awayGoalsAvg = extractGoalsAvg(draft.awayTeamStats);\n      \n      // CRITICAL: Convert all numeric fields to proper numbers to avoid NULL in database\n      const safeParseFloat = (val: any): number | null => {\n        if (val === null || val === undefined) return null;\n        const num = parseFloat(String(val));\n        return isNaN(num) ? null : num;\n      };\n      \n      const numericConfidence = safeParseFloat(draft.confidence);\n      const numericProbability = safeParseFloat(draft.probability);\n      const numericExpectedValue = safeParseFloat(draft.expectedValue);\n      const numericHomeGoalsAvg = safeParseFloat(homeGoalsAvg);\n      const numericAwayGoalsAvg = safeParseFloat(awayGoalsAvg);\n      const numericStake = safeParseFloat(adjustedStake || draft.suggestedStake) || 1.0;\n      const numericOdd = safeParseFloat(adjustedOdd || draft.suggestedOdd) || 1.5;\n      \n      console.log(`[AI Approve] Converting fields - confidence: ${draft.confidence} -> ${numericConfidence}, EV: ${draft.expectedValue} -> ${numericExpectedValue}, homeGoals: ${homeGoalsAvg} -> ${numericHomeGoalsAvg}`);\n      \n      if (isCombo && legsArray && legsArray.length > 0) {\n        // Use centralized combo metadata derivation\n        const comboData = deriveComboMetadata(legsArray, formattedTime);\n        if (comboData) {\n          tipData = {\n            ...comboData,\n            odd: numericOdd,\n            stake: numericStake,\n            status: 'pending',\n            isLive: false,\n            betLink: betLink || null,\n            // AI Analysis fields - MUST be numbers\n            analysisRationale: draft.analysisRationale,\n            analysisSummary: generateAnalysisSummary(draft),\n            confidence: numericConfidence,\n            probability: numericProbability,\n            expectedValue: numericExpectedValue,\n            homeGoalsAvg: numericHomeGoalsAvg,\n            awayGoalsAvg: numericAwayGoalsAvg,\n            aiSourceId: draft.id,\n          };\n        } else {\n          return res.status(400).json({ error: \"Combo inv√°lido: legs vazios ou malformados\" });\n        }\n      } else {\n        // Single bet - avoid duplicating market name in output\n        const marketDisplay = draft.predictedOutcome && draft.predictedOutcome !== draft.market\n          ? `${draft.market}: ${draft.predictedOutcome}`\n          : draft.market;\n        \n        tipData = {\n          fixtureId: draft.fixtureId,\n          league: draft.league,\n          homeTeam: draft.homeTeam,\n          awayTeam: draft.awayTeam,\n          homeTeamLogo: draft.homeTeamLogo,\n          awayTeamLogo: draft.awayTeamLogo,\n          matchTime: formattedTime,\n          market: marketDisplay,\n          odd: numericOdd,\n          stake: numericStake,\n          status: 'pending',\n          isLive: false,\n          isCombo: false,\n          totalOdd: null,\n          legs: null,\n          betLink: betLink || null,\n          // AI Analysis fields - MUST be numbers\n          analysisRationale: draft.analysisRationale,\n          analysisSummary: generateAnalysisSummary(draft),\n          confidence: numericConfidence,\n          probability: numericProbability,\n          expectedValue: numericExpectedValue,\n          homeGoalsAvg: numericHomeGoalsAvg,\n          awayGoalsAvg: numericAwayGoalsAvg,\n          aiSourceId: draft.id,\n        };\n      }\n      \n      const newTip = await storage.createTip(tipData);\n      \n      // Update the draft status\n      await aiPredictionEngine.approveTicket(id, adminUserId, notes);\n      \n      console.log(`‚úÖ [AI Engine] Draft ${id} approved and published as tip ${newTip.id}`);\n      \n      return res.json({\n        success: true,\n        message: \"Previs√£o aprovada e publicada!\",\n        tipId: newTip.id\n      });\n    } catch (error: any) {\n      console.error(\"[AI Engine] Error approving draft:\", error);\n      return res.status(500).json({ error: \"Erro ao aprovar previs√£o\" });\n    }\n  });\n\n  // Reject AI ticket\n  app.post(\"/api/ai/drafts/:id/reject\", async (req, res) => {\n    try {\n      const { id } = req.params;\n      const { adminEmail, adminUserId, notes } = req.body;\n      \n      if (!await verifyAdmin(adminEmail, adminUserId)) {\n        return res.status(403).json({ error: \"Acesso negado. Apenas administradores.\" });\n      }\n      \n      await aiPredictionEngine.rejectTicket(id, adminUserId, notes);\n      \n      return res.json({\n        success: true,\n        message: \"Previs√£o rejeitada.\"\n      });\n    } catch (error: any) {\n      console.error(\"[AI Engine] Error rejecting draft:\", error);\n      return res.status(500).json({ error: \"Erro ao rejeitar previs√£o\" });\n    }\n  });\n\n  // Update combo legs (remove lines from combo)\n  app.patch(\"/api/ai/drafts/:id/update-legs\", async (req, res) => {\n    try {\n      const { id } = req.params;\n      const { legs, totalOdd, probability, confidence, adminEmail, adminUserId } = req.body;\n      \n      if (!await verifyAdmin(adminEmail, adminUserId)) {\n        return res.status(403).json({ error: \"Acesso negado. Apenas administradores.\" });\n      }\n      \n      if (!legs || !Array.isArray(legs)) {\n        return res.status(400).json({ error: \"Legs inv√°lidas\" });\n      }\n      \n      // Update the draft with new legs\n      await db.update(aiTickets)\n        .set({\n          legs: JSON.stringify(legs),\n          totalOdd: String(totalOdd),\n          probability: String(probability),\n          confidence: String(confidence),\n          isCombo: legs.length > 1, // If only 1 leg left, it's no longer a combo\n        })\n        .where(eq(aiTickets.id, id));\n      \n      console.log(`‚úèÔ∏è [AI Engine] Updated combo ${id}: ${legs.length} legs, odd ${totalOdd.toFixed(2)}, prob ${probability.toFixed(1)}%`);\n      \n      return res.json({\n        success: true,\n        message: `Combo atualizado com ${legs.length} sele√ß√µes`\n      });\n    } catch (error: any) {\n      console.error(\"[AI Engine] Error updating combo legs:\", error);\n      return res.status(500).json({ error: \"Erro ao atualizar combo\" });\n    }\n  });\n\n  // Bulk approve multiple AI tickets\n  app.post(\"/api/ai/drafts/bulk-approve\", async (req, res) => {\n    try {\n      const { ids, adminEmail, adminUserId } = req.body;\n      \n      if (!await verifyAdmin(adminEmail, adminUserId)) {\n        return res.status(403).json({ error: \"Acesso negado. Apenas administradores.\" });\n      }\n      \n      if (!ids || !Array.isArray(ids) || ids.length === 0) {\n        return res.status(400).json({ error: \"IDs inv√°lidos\" });\n      }\n      \n      const drafts = await aiPredictionEngine.getDraftTickets();\n      let approvedCount = 0;\n      \n      // Helper to generate analysis summary\n      const generateAnalysisSummary = (draft: any): string => {\n        const confidence = parseFloat(draft.confidence || '0');\n        const probability = parseFloat(draft.probability || '0');\n        const ev = parseFloat(draft.expectedValue || '0');\n        \n        let summary = `Analisando o confronto entre ${draft.homeTeam} e ${draft.awayTeam}, `;\n        \n        if (confidence >= 85) {\n          summary += `percebi que ambos os times apresentam padr√µes consistentes. `;\n        } else if (confidence >= 75) {\n          summary += `identifiquei tend√™ncias interessantes nos √∫ltimos jogos. `;\n        } else {\n          summary += `observei alguns indicadores relevantes. `;\n        }\n        \n        summary += `Com base em tudo isso, a probabilidade calculada ficou em ${probability.toFixed(0)}%, `;\n        summary += `o que me d√° ${confidence.toFixed(0)}% de confian√ßa. `;\n        \n        if (ev > 0) {\n          summary += `O valor esperado √© positivo (+${ev.toFixed(1)}%), indicando vantagem matem√°tica a longo prazo.`;\n        }\n        \n        return summary;\n      };\n      \n      // Helper to extract goals AVERAGE per game from team stats JSON (goalsScored is already the average)\n      const extractGoalsAvg = (statsJson: string | null): string | null => {\n        if (!statsJson) return null;\n        try {\n          const stats = typeof statsJson === 'string' ? JSON.parse(statsJson) : statsJson;\n          // goalsScored is already the average per game from the API\n          const avg = parseFloat(stats.goalsScored) || 0;\n          return avg.toFixed(2);\n        } catch {\n          return null;\n        }\n      };\n      \n      // CRITICAL: Safe number conversion to avoid NULL in database\n      const safeParseFloat = (val: any): number | null => {\n        if (val === null || val === undefined) return null;\n        const num = parseFloat(String(val));\n        return isNaN(num) ? null : num;\n      };\n      \n      for (const id of ids) {\n        const draft = drafts.find((d: any) => d.id === id);\n        if (!draft) continue;\n        \n        const matchTime = new Date(draft.matchTime);\n        const formattedTime = matchTime.toLocaleDateString('pt-BR', { \n          day: '2-digit', \n          month: '2-digit',\n          hour: '2-digit',\n          minute: '2-digit'\n        });\n        \n        // Extract analysis data\n        const homeGoalsAvg = extractGoalsAvg(draft.homeTeamStats);\n        const awayGoalsAvg = extractGoalsAvg(draft.awayTeamStats);\n        \n        // CRITICAL: Convert all numeric fields properly\n        const numericConfidence = safeParseFloat(draft.confidence);\n        const numericProbability = safeParseFloat(draft.probability);\n        const numericExpectedValue = safeParseFloat(draft.expectedValue);\n        const numericHomeGoalsAvg = safeParseFloat(homeGoalsAvg);\n        const numericAwayGoalsAvg = safeParseFloat(awayGoalsAvg);\n        const numericStake = safeParseFloat(draft.suggestedStake) || 1.0;\n        const numericOdd = safeParseFloat(draft.suggestedOdd) || 1.5;\n        \n        console.log(`[Bulk Approve] ${draft.homeTeam} vs ${draft.awayTeam} - confidence: ${numericConfidence}, EV: ${numericExpectedValue}, homeGoals: ${numericHomeGoalsAvg}`);\n        \n        // Handle combo (multiple legs) vs single bet\n        const isCombo = draft.isCombo;\n        const legsArray = parseLegs(draft.legs);\n        \n        let tipData: any;\n        \n        if (isCombo && legsArray && legsArray.length > 0) {\n          // Use centralized combo metadata derivation\n          const comboData = deriveComboMetadata(legsArray, formattedTime);\n          if (comboData) {\n            tipData = {\n              ...comboData,\n              stake: numericStake,\n              status: 'pending',\n              isLive: false,\n              // AI Analysis fields - MUST be numbers\n              analysisRationale: draft.analysisRationale,\n              analysisSummary: generateAnalysisSummary(draft),\n              confidence: numericConfidence,\n              probability: numericProbability,\n              expectedValue: numericExpectedValue,\n              homeGoalsAvg: numericHomeGoalsAvg,\n              awayGoalsAvg: numericAwayGoalsAvg,\n              aiSourceId: draft.id,\n            };\n          } else {\n            console.warn(`[Bulk Approve] Skipping invalid combo draft ${id}`);\n            continue;\n          }\n        } else {\n          // Single bet - avoid duplicating market name\n          const marketDisplay = draft.predictedOutcome && draft.predictedOutcome !== draft.market\n            ? `${draft.market}: ${draft.predictedOutcome}`\n            : draft.market;\n          \n          tipData = {\n            fixtureId: draft.fixtureId,\n            league: draft.league,\n            homeTeam: draft.homeTeam,\n            awayTeam: draft.awayTeam,\n            homeTeamLogo: draft.homeTeamLogo,\n            awayTeamLogo: draft.awayTeamLogo,\n            matchTime: formattedTime,\n            market: marketDisplay,\n            odd: numericOdd,\n            stake: numericStake,\n            status: 'pending',\n            isLive: false,\n            isCombo: false,\n            totalOdd: null,\n            legs: null,\n            // AI Analysis fields - MUST be numbers\n            analysisRationale: draft.analysisRationale,\n            analysisSummary: generateAnalysisSummary(draft),\n            confidence: numericConfidence,\n            probability: numericProbability,\n            expectedValue: numericExpectedValue,\n            homeGoalsAvg: numericHomeGoalsAvg,\n            awayGoalsAvg: numericAwayGoalsAvg,\n            aiSourceId: draft.id,\n          };\n        }\n        \n        await storage.createTip(tipData);\n        \n        await aiPredictionEngine.approveTicket(id, adminUserId, 'Bulk approved');\n        approvedCount++;\n      }\n      \n      return res.json({\n        success: true,\n        message: `${approvedCount} previs√µes aprovadas e publicadas!`,\n        approvedCount\n      });\n    } catch (error: any) {\n      console.error(\"[AI Engine] Error bulk approving:\", error);\n      return res.status(500).json({ error: \"Erro ao aprovar previs√µes em lote\" });\n    }\n  });\n\n  // Get AI engine stats\n  app.get(\"/api/ai/stats\", async (req, res) => {\n    try {\n      const drafts = await aiPredictionEngine.getDraftTickets();\n      \n      const normalizeText = (text: string): string => {\n        return (text || '').toLowerCase()\n          .normalize('NFD')\n          .replace(/[\\u0300-\\u036f]/g, '');\n      };\n      \n      const marketNorm = (d: any) => normalizeText(d.market);\n      \n      return res.json({\n        pendingDrafts: drafts.length,\n        highConfidence: drafts.filter((d: any) => parseFloat(d.confidence) >= 85).length,\n        markets: {\n          over25: drafts.filter((d: any) => \n            marketNorm(d).includes('over 2.5') || \n            marketNorm(d).includes('over 1.5') || \n            marketNorm(d).includes('gols')\n          ).length,\n          under25: drafts.filter((d: any) => marketNorm(d).includes('under 2.5')).length,\n          btts: drafts.filter((d: any) => \n            marketNorm(d).includes('ambas') || \n            marketNorm(d).includes('btts')\n          ).length,\n          result: drafts.filter((d: any) => marketNorm(d).includes('resultado')).length,\n          corners: drafts.filter((d: any) => \n            marketNorm(d).includes('corner') || \n            marketNorm(d).includes('escanteio')\n          ).length,\n          cards: drafts.filter((d: any) => \n            marketNorm(d).includes('card') || \n            marketNorm(d).includes('cartao') ||\n            marketNorm(d).includes('cartoes')\n          ).length,\n          shots: drafts.filter((d: any) => \n            marketNorm(d).includes('shot') || \n            marketNorm(d).includes('chute')\n          ).length,\n        }\n      });\n    } catch (error: any) {\n      console.error(\"[AI Engine] Error fetching stats:\", error);\n      return res.status(500).json({ error: \"Erro ao buscar estat√≠sticas\" });\n    }\n  });\n\n  // =====================================================\n  // TOP MATCHES SELECTOR - Seletor de Top 6-8 Jogos do Dia\n  // =====================================================\n\n  // Selecionar os melhores jogos do dia para bilhetes pr√©-live\n  app.get(\"/api/ai/top-matches\", async (req, res) => {\n    try {\n      const date = req.query.date as string || new Date().toISOString().split('T')[0];\n      const maxMatches = parseInt(req.query.max as string) || 8;\n      \n      console.log(`[AI Selector] Requisi√ß√£o para top ${maxMatches} jogos em ${date}`);\n      \n      const result = await aiPredictionEngine.selectTopMatchesOfDay(date, maxMatches);\n      \n      return res.json({\n        success: true,\n        date,\n        totalAnalyzed: result.totalAnalyzed,\n        selectedCount: result.matches.length,\n        matches: result.matches.map(m => ({\n          fixtureId: m.fixture.fixture.id,\n          league: m.fixture.league.name,\n          homeTeam: m.fixture.teams.home.name,\n          awayTeam: m.fixture.teams.away.name,\n          homeTeamLogo: m.fixture.teams.home.logo,\n          awayTeamLogo: m.fixture.teams.away.logo,\n          matchTime: new Date(m.fixture.fixture.timestamp * 1000).toISOString(),\n          compositeScore: Math.round(m.compositeScore * 10) / 10,\n          importanceScore: Math.round(m.importanceScore * 10) / 10,\n          tier: m.tier,\n          factors: m.factors,\n          breakdown: {\n            form: Math.round(m.breakdown.form * 10) / 10,\n            stats: Math.round(m.breakdown.stats * 10) / 10,\n            market: Math.round(m.breakdown.market * 10) / 10,\n            risk: Math.round(m.breakdown.risk * 10) / 10,\n          }\n        }))\n      });\n    } catch (error: any) {\n      console.error(\"[AI Selector] Error:\", error);\n      return res.status(500).json({ error: \"Erro ao selecionar jogos do dia\" });\n    }\n  });\n\n  // =====================================================\n  // PATTERN SCANNER - An√°lise de Padr√µes com Regra dos 10 Jogos\n  // =====================================================\n\n  app.get(\"/api/ai/pattern-scanner\", async (req, res) => {\n    try {\n      const date = req.query.date as string || new Date().toISOString().split('T')[0];\n      \n      console.log(`[Pattern Scanner] Requisi√ß√£o para oportunidades em ${date}`);\n      \n      const opportunities = await aiPredictionEngine.scanDailyOpportunities(date);\n      \n      return res.json({\n        success: true,\n        date,\n        totalOpportunities: opportunities.length,\n        threshold: 80,\n        opportunities\n      });\n    } catch (error: any) {\n      console.error(\"[Pattern Scanner] Error:\", error);\n      return res.status(500).json({ error: \"Erro ao escanear padr√µes\" });\n    }\n  });\n\n  // =====================================================\n  // OR√ÅCULO - PREDICTIVE SPORTS ENGINE V3.0\n  // Deep Scan Algorithm com Regra dos 10 Jogos + H2H\n  // =====================================================\n\n  app.post(\"/api/oraculo/scan\", async (req, res) => {\n    try {\n      const { adminEmail, adminUserId } = req.body;\n      \n      if (!adminEmail || adminEmail !== 'kwillianferreira@gmail.com') {\n        const profile = adminUserId ? await storage.getProfileById(adminUserId) : null;\n        if (!profile || profile.role !== 'admin') {\n          return res.status(403).json({ error: \"Acesso negado. Apenas administradores.\" });\n        }\n      }\n\n      console.log(`[OR√ÅCULO] Scan iniciado por ${adminEmail}`);\n      \n      const { oraculoService } = await import(\"./oraculo-service\");\n      const maxFixtures = parseInt(req.query.max as string) || 30;\n      const result = await oraculoService.runDeepScan(maxFixtures);\n      \n      return res.json({\n        success: true,\n        ...result\n      });\n    } catch (error: any) {\n      console.error(\"[OR√ÅCULO] Error:\", error);\n      return res.status(500).json({ error: \"Erro ao executar varredura do OR√ÅCULO\" });\n    }\n  });\n\n  app.get(\"/api/oraculo/results\", async (req, res) => {\n    try {\n      const { oraculoService } = await import(\"./oraculo-service\");\n      const result = await oraculoService.getLastScanResult();\n      \n      if (!result) {\n        return res.json({\n          success: true,\n          hasResults: false,\n          message: \"Nenhuma varredura executada ainda\"\n        });\n      }\n      \n      return res.json({\n        success: true,\n        hasResults: true,\n        ...result\n      });\n    } catch (error: any) {\n      console.error(\"[OR√ÅCULO] Error:\", error);\n      return res.status(500).json({ error: \"Erro ao buscar resultados do OR√ÅCULO\" });\n    }\n  });\n\n  // =====================================================\n  // ELITE PREDICTION ENGINE - MOTOR PREDITIVO AVAN√áADO\n  // Poisson Model + xG + EV Calculation + Pattern Detection\n  // =====================================================\n\n  app.post(\"/api/elite/scan\", async (req, res) => {\n    try {\n      const { adminEmail, adminUserId } = req.body;\n      \n      if (!adminEmail || adminEmail !== 'kwillianferreira@gmail.com') {\n        const profile = adminUserId ? await storage.getProfileById(adminUserId) : null;\n        if (!profile || profile.role !== 'admin') {\n          return res.status(403).json({ error: \"Acesso negado. Apenas administradores.\" });\n        }\n      }\n\n      console.log(`[ELITE ENGINE] Scan iniciado por ${adminEmail}`);\n      \n      const { elitePredictionEngine } = await import(\"./elite-prediction-engine\");\n      const maxFixtures = parseInt(req.query.max as string) || 40;\n      const result = await elitePredictionEngine.runEliteScan(maxFixtures);\n      \n      return res.json({\n        success: true,\n        ...result\n      });\n    } catch (error: any) {\n      console.error(\"[ELITE ENGINE] Error:\", error);\n      return res.status(500).json({ error: \"Erro ao executar varredura ELITE\" });\n    }\n  });\n\n  app.get(\"/api/elite/results\", async (req, res) => {\n    try {\n      const { elitePredictionEngine } = await import(\"./elite-prediction-engine\");\n      const result = await elitePredictionEngine.getLastScanResult();\n      \n      if (!result) {\n        return res.json({\n          success: true,\n          hasResults: false,\n          message: \"Nenhuma varredura executada ainda\"\n        });\n      }\n      \n      return res.json({\n        success: true,\n        hasResults: true,\n        ...result\n      });\n    } catch (error: any) {\n      console.error(\"[ELITE ENGINE] Error:\", error);\n      return res.status(500).json({ error: \"Erro ao buscar resultados ELITE\" });\n    }\n  });\n\n  // =====================================================\n  // LIVE PRESSURE MONITOR ENDPOINTS\n  // =====================================================\n\n  // Get hot matches (sorted by pressure)\n  app.get(\"/api/live/pressure\", async (req, res) => {\n    try {\n      const { livePressureMonitor } = await import(\"./live-pressure-monitor\");\n      const limit = parseInt(req.query.limit as string) || 20;\n      const hotMatches = await livePressureMonitor.getHotMatches(limit);\n      \n      return res.json({\n        success: true,\n        matches: hotMatches,\n        status: livePressureMonitor.getStatus(),\n      });\n    } catch (error: any) {\n      console.error(\"[Live Monitor] Error fetching hot matches:\", error);\n      return res.status(500).json({ error: \"Erro ao buscar jogos quentes\" });\n    }\n  });\n\n  // Get pressure history for a specific match\n  app.get(\"/api/live/pressure/:fixtureId\", async (req, res) => {\n    try {\n      const { livePressureMonitor } = await import(\"./live-pressure-monitor\");\n      const { fixtureId } = req.params;\n      const limit = parseInt(req.query.limit as string) || 50;\n      const history = await livePressureMonitor.getMatchPressureHistory(fixtureId, limit);\n      \n      return res.json({\n        success: true,\n        fixtureId,\n        history,\n      });\n    } catch (error: any) {\n      console.error(\"[Live Monitor] Error fetching pressure history:\", error);\n      return res.status(500).json({ error: \"Erro ao buscar hist√≥rico de press√£o\" });\n    }\n  });\n\n  // Get recent alerts\n  app.get(\"/api/live/alerts\", async (req, res) => {\n    try {\n      const { livePressureMonitor } = await import(\"./live-pressure-monitor\");\n      const limit = parseInt(req.query.limit as string) || 20;\n      const alerts = await livePressureMonitor.getRecentAlerts(limit);\n      \n      return res.json({\n        success: true,\n        alerts,\n      });\n    } catch (error: any) {\n      console.error(\"[Live Monitor] Error fetching alerts:\", error);\n      return res.status(500).json({ error: \"Erro ao buscar alertas\" });\n    }\n  });\n\n  // Start/Stop live monitor (admin only)\n  app.post(\"/api/live/monitor/start\", async (req, res) => {\n    try {\n      const { adminEmail, adminUserId, intervalMs } = req.body;\n      \n      if (!await verifyAdmin(adminEmail, adminUserId)) {\n        return res.status(403).json({ error: \"Acesso negado. Apenas administradores.\" });\n      }\n      \n      const { livePressureMonitor } = await import(\"./live-pressure-monitor\");\n      await livePressureMonitor.start(intervalMs || 45000);\n      \n      return res.json({\n        success: true,\n        message: \"Monitor de press√£o ao vivo iniciado!\",\n        status: livePressureMonitor.getStatus(),\n      });\n    } catch (error: any) {\n      console.error(\"[Live Monitor] Error starting:\", error);\n      return res.status(500).json({ error: \"Erro ao iniciar monitor\" });\n    }\n  });\n\n  app.post(\"/api/live/monitor/stop\", async (req, res) => {\n    try {\n      const { adminEmail, adminUserId } = req.body;\n      \n      if (!await verifyAdmin(adminEmail, adminUserId)) {\n        return res.status(403).json({ error: \"Acesso negado. Apenas administradores.\" });\n      }\n      \n      const { livePressureMonitor } = await import(\"./live-pressure-monitor\");\n      livePressureMonitor.stop();\n      \n      return res.json({\n        success: true,\n        message: \"Monitor de press√£o ao vivo parado.\",\n        status: livePressureMonitor.getStatus(),\n      });\n    } catch (error: any) {\n      console.error(\"[Live Monitor] Error stopping:\", error);\n      return res.status(500).json({ error: \"Erro ao parar monitor\" });\n    }\n  });\n\n  // Get monitor status\n  app.get(\"/api/live/monitor/status\", async (req, res) => {\n    try {\n      const { livePressureMonitor } = await import(\"./live-pressure-monitor\");\n      return res.json({\n        success: true,\n        status: livePressureMonitor.getStatus(),\n      });\n    } catch (error: any) {\n      console.error(\"[Live Monitor] Error getting status:\", error);\n      return res.status(500).json({ error: \"Erro ao buscar status\" });\n    }\n  });\n\n  // ==================== MULTI-BOT API ENDPOINTS ====================\n  \n  // Initialize Multi-Bot strategies on server start\n  (async () => {\n    try {\n      const { multiBotEngine } = await import(\"./multi-bot-engine\");\n      await multiBotEngine.initializeStrategies();\n      console.log(\"[Multi-Bot] Engine initialized successfully\");\n    } catch (error) {\n      console.error(\"[Multi-Bot] Failed to initialize:\", error);\n    }\n  })();\n  \n  // Auto-start Live Pressure Monitor on server start (poll every 20 seconds)\n  (async () => {\n    try {\n      const { livePressureMonitor } = await import(\"./live-pressure-monitor\");\n      await livePressureMonitor.start(20000); // 20 segundos\n      console.log(\"[Live Monitor] Auto-started with 20s interval\");\n    } catch (error) {\n      console.error(\"[Live Monitor] Failed to auto-start:\", error);\n    }\n  })();\n  \n  // Get all bot strategies\n  app.get(\"/api/multibot/strategies\", async (req, res) => {\n    try {\n      const { multiBotEngine } = await import(\"./multi-bot-engine\");\n      const strategies = await multiBotEngine.getStrategies();\n      return res.json({\n        success: true,\n        strategies,\n      });\n    } catch (error: any) {\n      console.error(\"[Multi-Bot] Error getting strategies:\", error);\n      return res.status(500).json({ error: \"Erro ao buscar estrat√©gias\" });\n    }\n  });\n\n  // Get signals for all or specific strategy\n  app.get(\"/api/multibot/signals\", async (req, res) => {\n    try {\n      const { strategyCode, status, limit } = req.query;\n      const { multiBotEngine } = await import(\"./multi-bot-engine\");\n      const signals = await multiBotEngine.getSignals(\n        strategyCode as string,\n        status as string,\n        Number(limit) || 50\n      );\n      return res.json({\n        success: true,\n        signals,\n      });\n    } catch (error: any) {\n      console.error(\"[Multi-Bot] Error getting signals:\", error);\n      return res.status(500).json({ error: \"Erro ao buscar sinais\" });\n    }\n  });\n\n  // Get performance stats for all bots\n  app.get(\"/api/multibot/performance\", async (req, res) => {\n    try {\n      const { periodType } = req.query;\n      const { multiBotEngine } = await import(\"./multi-bot-engine\");\n      const stats = await multiBotEngine.getPerformanceStats(periodType as string || \"all_time\");\n      return res.json({\n        success: true,\n        stats,\n      });\n    } catch (error: any) {\n      console.error(\"[Multi-Bot] Error getting performance:\", error);\n      return res.status(500).json({ error: \"Erro ao buscar performance\" });\n    }\n  });\n\n  // Get detailed stats for a specific bot\n  app.get(\"/api/multibot/strategies/:strategyCode/stats\", async (req, res) => {\n    try {\n      const { strategyCode } = req.params;\n      const { multiBotEngine } = await import(\"./multi-bot-engine\");\n      const stats = await multiBotEngine.getBotDetailedStats(strategyCode);\n      \n      if (!stats) {\n        return res.status(404).json({ error: \"Estrat√©gia n√£o encontrada\" });\n      }\n      \n      return res.json({\n        success: true,\n        ...stats,\n      });\n    } catch (error: any) {\n      console.error(\"[Multi-Bot] Error getting bot stats:\", error);\n      return res.status(500).json({ error: \"Erro ao buscar estat√≠sticas do bot\" });\n    }\n  });\n\n  // Toggle strategy active status (admin only)\n  app.post(\"/api/multibot/strategies/:strategyCode/toggle\", async (req, res) => {\n    try {\n      const { strategyCode } = req.params;\n      const { adminEmail, adminUserId, isActive } = req.body;\n      \n      if (!await verifyAdmin(adminEmail, adminUserId)) {\n        return res.status(403).json({ error: \"Acesso negado. Apenas administradores.\" });\n      }\n      \n      const { multiBotEngine } = await import(\"./multi-bot-engine\");\n      await multiBotEngine.toggleStrategy(strategyCode, isActive);\n      \n      return res.json({\n        success: true,\n        message: `Estrat√©gia ${strategyCode} ${isActive ? 'ativada' : 'desativada'}`,\n      });\n    } catch (error: any) {\n      console.error(\"[Multi-Bot] Error toggling strategy:\", error);\n      return res.status(500).json({ error: \"Erro ao alterar estrat√©gia\" });\n    }\n  });\n\n  // Update signal outcome (admin only)\n  app.post(\"/api/multibot/signals/:signalId/resolve\", async (req, res) => {\n    try {\n      const { signalId } = req.params;\n      const { adminEmail, adminUserId, status, finalScore } = req.body;\n      \n      if (!await verifyAdmin(adminEmail, adminUserId)) {\n        return res.status(403).json({ error: \"Acesso negado. Apenas administradores.\" });\n      }\n      \n      if (![\"hit\", \"miss\", \"void\"].includes(status)) {\n        return res.status(400).json({ error: \"Status inv√°lido. Use: hit, miss ou void\" });\n      }\n      \n      const { multiBotEngine } = await import(\"./multi-bot-engine\");\n      await multiBotEngine.updateSignalOutcome(signalId, status, finalScore);\n      \n      return res.json({\n        success: true,\n        message: `Sinal atualizado para: ${status}`,\n      });\n    } catch (error: any) {\n      console.error(\"[Multi-Bot] Error resolving signal:\", error);\n      return res.status(500).json({ error: \"Erro ao resolver sinal\" });\n    }\n  });\n\n  // Publish a signal as a tip (admin only)\n  app.post(\"/api/multibot/signals/:signalId/publish\", async (req, res) => {\n    try {\n      const { signalId } = req.params;\n      const { adminEmail, adminUserId } = req.body;\n      \n      if (!await verifyAdmin(adminEmail, adminUserId)) {\n        return res.status(403).json({ error: \"Acesso negado. Apenas administradores.\" });\n      }\n      \n      const { multiBotEngine } = await import(\"./multi-bot-engine\");\n      const tipId = await multiBotEngine.publishSignal(signalId, adminUserId);\n      \n      return res.json({\n        success: true,\n        message: \"Sinal publicado como tip\",\n        tipId,\n      });\n    } catch (error: any) {\n      console.error(\"[Multi-Bot] Error publishing signal:\", error);\n      return res.status(500).json({ error: \"Erro ao publicar sinal\" });\n    }\n  });\n\n  // Manually analyze live matches with all bots (admin only)\n  app.post(\"/api/multibot/analyze\", async (req, res) => {\n    try {\n      const { adminEmail, adminUserId } = req.body;\n      \n      if (!await verifyAdmin(adminEmail, adminUserId)) {\n        return res.status(403).json({ error: \"Acesso negado. Apenas administradores.\" });\n      }\n      \n      // Fetch live matches\n      const response = await axios.get(\"https://v3.football.api-sports.io/fixtures\", {\n        params: { live: \"all\" },\n        headers: { \"x-apisports-key\": FOOTBALL_API_KEY },\n      });\n      \n      const liveMatches = response.data?.response || [];\n      \n      // Transform API response to match format\n      const formattedMatches = liveMatches.map((m: any) => ({\n        fixtureId: m.fixture.id,\n        league: m.league.name,\n        leagueId: m.league.id,\n        homeTeam: m.teams.home.name,\n        awayTeam: m.teams.away.name,\n        homeTeamLogo: m.teams.home.logo,\n        awayTeamLogo: m.teams.away.logo,\n        homeScore: m.goals.home || 0,\n        awayScore: m.goals.away || 0,\n        matchMinute: m.fixture.status.elapsed || 0,\n        matchStatus: m.fixture.status.short,\n        homePossession: 50,\n        awayPossession: 50,\n        homeShotsOnTarget: 0,\n        awayShotsOnTarget: 0,\n      }));\n      \n      const { multiBotEngine } = await import(\"./multi-bot-engine\");\n      const signals = await multiBotEngine.analyzeWithBots(formattedMatches);\n      \n      return res.json({\n        success: true,\n        matchesAnalyzed: formattedMatches.length,\n        signalsGenerated: signals.length,\n        signals,\n      });\n    } catch (error: any) {\n      console.error(\"[Multi-Bot] Error analyzing matches:\", error);\n      return res.status(500).json({ error: \"Erro ao analisar partidas\" });\n    }\n  });\n\n  // Legacy bot endpoints for compatibility\n  app.get(\"/api/live/bots\", async (req, res) => {\n    try {\n      const { multiBotEngine } = await import(\"./multi-bot-engine\");\n      const strategies = await multiBotEngine.getStrategies();\n      return res.json({\n        success: true,\n        bots: strategies,\n      });\n    } catch (error: any) {\n      console.error(\"[Multi-Bot] Error getting bots:\", error);\n      return res.status(500).json({ error: \"Erro ao buscar bots\" });\n    }\n  });\n\n  app.post(\"/api/live/bots/:botId/toggle\", async (req, res) => {\n    try {\n      const { botId } = req.params;\n      const { adminEmail, adminUserId, enabled } = req.body;\n      \n      if (!await verifyAdmin(adminEmail, adminUserId)) {\n        return res.status(403).json({ error: \"Acesso negado. Apenas administradores.\" });\n      }\n      \n      const { multiBotEngine } = await import(\"./multi-bot-engine\");\n      await multiBotEngine.toggleStrategy(botId, enabled);\n      \n      return res.json({\n        success: true,\n        message: `Bot ${botId} ${enabled ? 'ativado' : 'desativado'}`,\n      });\n    } catch (error: any) {\n      console.error(\"[Multi-Bot] Error toggling bot:\", error);\n      return res.status(500).json({ error: \"Erro ao alterar bot\" });\n    }\n  });\n\n  app.get(\"/api/live/bots/stats\", async (req, res) => {\n    try {\n      const { multiBotEngine } = await import(\"./multi-bot-engine\");\n      const stats = await multiBotEngine.getPerformanceStats(\"all_time\");\n      return res.json({\n        success: true,\n        stats,\n      });\n    } catch (error: any) {\n      console.error(\"[Multi-Bot] Error getting bot stats:\", error);\n      return res.status(500).json({ error: \"Erro ao buscar estat√≠sticas\" });\n    }\n  });\n\n  // =====================================================\n  // RESULT CHECKER & STATISTICS ENDPOINTS\n  // =====================================================\n\n  // Start the result checker (runs every 10 minutes)\n  resultChecker.start(10);\n\n  // Manual trigger to check results\n  app.post(\"/api/tips/check-results\", async (req, res) => {\n    try {\n      const { adminEmail, adminUserId } = req.body;\n      \n      if (!await verifyAdmin(adminEmail, adminUserId)) {\n        return res.status(403).json({ error: \"Acesso negado. Apenas administradores.\" });\n      }\n      \n      const result = await resultChecker.checkPendingTips();\n      \n      return res.json({\n        success: true,\n        ...result,\n        message: `Verificado ${result.checked} tips, ${result.updated} atualizados`\n      });\n    } catch (error: any) {\n      console.error(\"[Result Checker] Error:\", error);\n      return res.status(500).json({ error: \"Erro ao verificar resultados\" });\n    }\n  });\n\n  // Get monthly statistics (assertivity, profit, etc)\n  app.get(\"/api/tips/stats\", async (req, res) => {\n    try {\n      const { month, year } = req.query;\n      \n      const targetMonth = month ? parseInt(String(month)) : new Date().getMonth() + 1;\n      const targetYear = year ? parseInt(String(year)) : new Date().getFullYear();\n      \n      // Get all tips for the month\n      const startDate = new Date(targetYear, targetMonth - 1, 1);\n      const endDate = new Date(targetYear, targetMonth, 0, 23, 59, 59);\n      \n      const monthTips = await db.select()\n        .from(tips)\n        .where(\n          sql`${tips.createdAt} >= ${startDate} AND ${tips.createdAt} <= ${endDate}`\n        );\n      \n      // Calculate stats\n      const totalTips = monthTips.length;\n      const greenTips = monthTips.filter(t => t.status === 'green').length;\n      const redTips = monthTips.filter(t => t.status === 'red').length;\n      const pendingTips = monthTips.filter(t => t.status === 'pending').length;\n      const settledTips = greenTips + redTips;\n      \n      // Assertivity (only counts settled tips)\n      const assertivity = settledTips > 0 ? (greenTips / settledTips) * 100 : 0;\n      \n      // Calculate profit/loss\n      let totalProfit = 0;\n      for (const tip of monthTips) {\n        if (tip.resultProfit) {\n          totalProfit += parseFloat(String(tip.resultProfit));\n        } else if (tip.status === 'green') {\n          const odd = parseFloat(String(tip.odd));\n          const stake = parseFloat(String(tip.stake || '1'));\n          totalProfit += (odd - 1) * stake;\n        } else if (tip.status === 'red') {\n          const stake = parseFloat(String(tip.stake || '1'));\n          totalProfit -= stake;\n        }\n      }\n      \n      // ROI (Return on Investment)\n      const totalStaked = monthTips\n        .filter(t => t.status !== 'pending')\n        .reduce((sum, t) => sum + parseFloat(String(t.stake || '1')), 0);\n      const roi = totalStaked > 0 ? (totalProfit / totalStaked) * 100 : 0;\n      \n      // Average odd of green tips\n      const avgOddGreen = greenTips > 0\n        ? monthTips.filter(t => t.status === 'green').reduce((sum, t) => sum + parseFloat(String(t.odd)), 0) / greenTips\n        : 0;\n      \n      // Current streak\n      const sortedTips = monthTips\n        .filter(t => t.status !== 'pending')\n        .sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());\n      \n      let currentStreak = { wins: 0, losses: 0, type: 'none' as 'win' | 'loss' | 'none' };\n      if (sortedTips.length > 0) {\n        const lastStatus = sortedTips[0].status;\n        let count = 0;\n        for (const tip of sortedTips) {\n          if (tip.status === lastStatus) {\n            count++;\n          } else {\n            break;\n          }\n        }\n        currentStreak = {\n          wins: lastStatus === 'green' ? count : 0,\n          losses: lastStatus === 'red' ? count : 0,\n          type: lastStatus === 'green' ? 'win' : 'loss'\n        };\n      }\n      \n      return res.json({\n        month: targetMonth,\n        year: targetYear,\n        totalTips,\n        greenTips,\n        redTips,\n        pendingTips,\n        settledTips,\n        assertivity: parseFloat(assertivity.toFixed(1)),\n        totalProfit: parseFloat(totalProfit.toFixed(2)),\n        roi: parseFloat(roi.toFixed(1)),\n        avgOddGreen: parseFloat(avgOddGreen.toFixed(2)),\n        currentStreak,\n        lastUpdated: new Date().toISOString()\n      });\n    } catch (error: any) {\n      console.error(\"[Stats] Error fetching stats:\", error);\n      return res.status(500).json({ error: \"Erro ao buscar estat√≠sticas\" });\n    }\n  });\n\n  // Get daily stats for chart\n  app.get(\"/api/tips/stats/daily\", async (req, res) => {\n    try {\n      const { days = 30 } = req.query;\n      const numDays = parseInt(String(days));\n      \n      const startDate = new Date();\n      startDate.setDate(startDate.getDate() - numDays);\n      \n      const allTips = await db.select()\n        .from(tips)\n        .where(sql`${tips.createdAt} >= ${startDate}`);\n      \n      // Group by day\n      const dailyStats: Record<string, { date: string; green: number; red: number; profit: number }> = {};\n      \n      for (let i = 0; i <= numDays; i++) {\n        const date = new Date();\n        date.setDate(date.getDate() - i);\n        const dateKey = date.toISOString().split('T')[0];\n        dailyStats[dateKey] = { date: dateKey, green: 0, red: 0, profit: 0 };\n      }\n      \n      for (const tip of allTips) {\n        const dateKey = new Date(tip.createdAt).toISOString().split('T')[0];\n        if (dailyStats[dateKey]) {\n          if (tip.status === 'green') {\n            dailyStats[dateKey].green++;\n            const odd = parseFloat(String(tip.odd));\n            const stake = parseFloat(String(tip.stake || '1'));\n            dailyStats[dateKey].profit += (odd - 1) * stake;\n          } else if (tip.status === 'red') {\n            dailyStats[dateKey].red++;\n            const stake = parseFloat(String(tip.stake || '1'));\n            dailyStats[dateKey].profit -= stake;\n          }\n        }\n      }\n      \n      // Convert to array sorted by date\n      const result = Object.values(dailyStats).sort((a, b) => a.date.localeCompare(b.date));\n      \n      return res.json(result);\n    } catch (error: any) {\n      console.error(\"[Stats] Error fetching daily stats:\", error);\n      return res.status(500).json({ error: \"Erro ao buscar estat√≠sticas di√°rias\" });\n    }\n  });\n\n  const httpServer = createServer(app);\n  return httpServer;\n}\n","path":null,"size_bytes":105506,"size_tokens":null},"server/index-prod.ts":{"content":"import fs from \"node:fs\";\nimport { type Server } from \"node:http\";\nimport path from \"node:path\";\n\nimport express, { type Express, type Request } from \"express\";\n\nimport runApp from \"./app\";\n\nexport async function serveStatic(app: Express, server: Server) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n\n(async () => {\n  await runApp(serveStatic);\n})();\n","path":null,"size_bytes":726,"size_tokens":null},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","path":null,"size_bytes":329,"size_tokens":null},"server/db.ts":{"content":"import { drizzle } from \"drizzle-orm/neon-http\";\nimport { neon } from \"@neondatabase/serverless\";\nimport * as schema from \"@shared/schema\";\n\nconst sql = neon(process.env.DATABASE_URL!);\nexport const db = drizzle(sql, { schema });\n","path":null,"size_bytes":230,"size_tokens":null},"client/src/components/ui/form.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue | null>(null)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  if (!itemContext) {\n    throw new Error(\"useFormField should be used within <FormItem>\")\n  }\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue | null>(null)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-[0.8rem] text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-[0.8rem] font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","path":null,"size_bytes":4175,"size_tokens":null},"client/src/components/ui/dropdown-menu.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md\",\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","path":null,"size_bytes":7606,"size_tokens":null},"client/src/index.css":{"content":"@import url('https://fonts.googleapis.com/css2?family=Sora:wght@400;600;800&display=swap');\n@import \"tailwindcss\";\n@import \"tw-animate-css\";\n\n@custom-variant dark (&:is(.dark *));\n\nhtml, body, #root {\n  overflow-x: hidden;\n  max-width: 100vw;\n  width: 100%;\n}\n\nbody {\n  position: relative;\n}\n\n@theme inline {\n  --radius-sm: calc(var(--radius) - 4px);\n  --radius-md: calc(var(--radius) - 2px);\n  --radius-lg: var(--radius);\n  --radius-xl: calc(var(--radius) + 4px);\n\n  /* Custom Colors from Prompt */\n  --color-background: hsl(var(--background));\n  --color-foreground: hsl(var(--foreground));\n  \n  --color-card: hsl(var(--card));\n  --color-card-foreground: hsl(var(--card-foreground));\n  --color-card-hover: hsl(var(--card-hover));\n  \n  --color-popover: hsl(var(--popover));\n  --color-popover-foreground: hsl(var(--popover-foreground));\n  \n  --color-primary: hsl(var(--primary));\n  --color-primary-foreground: hsl(var(--primary-foreground));\n  --color-primary-dark: hsl(var(--primary-dark));\n  \n  --color-secondary: hsl(var(--secondary));\n  --color-secondary-foreground: hsl(var(--secondary-foreground));\n  \n  --color-muted: hsl(var(--muted));\n  --color-muted-foreground: hsl(var(--muted-foreground));\n  \n  --color-accent: hsl(var(--accent));\n  --color-accent-foreground: hsl(var(--accent-foreground));\n  \n  --color-destructive: hsl(var(--destructive));\n  --color-destructive-foreground: hsl(var(--destructive-foreground));\n  \n  --color-border: hsl(var(--border));\n  --color-input: hsl(var(--input));\n  --color-ring: hsl(var(--ring));\n\n  /* Signal Colors */\n  --color-signal-success: hsl(var(--signal-success));\n  --color-signal-success-bg: hsl(var(--signal-success-bg));\n  --color-signal-error: hsl(var(--signal-error));\n  --color-signal-error-bg: hsl(var(--signal-error-bg));\n\n  --font-sans: 'Sora', sans-serif;\n  --font-display: 'Sora', sans-serif;\n  --font-sora: 'Sora', sans-serif;\n  \n  --radius: 0.5rem;\n}\n\n:root {\n  /* Tipster Hub Theme: Ultra Dark + Neon Green */\n  \n  /* Main Background: #0a0a0a -> 0 0% 4% */\n  --background: 0 0% 4%;\n  /* Foreground: White */\n  --foreground: 0 0% 100%;\n\n  /* Card: #121212 -> 0 0% 7% */\n  --card: 0 0% 7%;\n  --card-foreground: 0 0% 100%;\n  /* Card Hover: #191919 -> 0 0% 10% */\n  --card-hover: 0 0% 10%;\n\n  --popover: 0 0% 7%;\n  --popover-foreground: 0 0% 100%;\n\n  /* Primary: #33b864 -> 142 57% 46% */\n  --primary: 142 57% 46%;\n  --primary-foreground: 0 0% 100%;\n  /* Primary Dark: #258a4b -> 143 58% 34% */\n  --primary-dark: 143 58% 34%;\n\n  --secondary: 0 0% 15%;\n  --secondary-foreground: 0 0% 100%;\n\n  --muted: 0 0% 15%;\n  --muted-foreground: 0 0% 65%;\n\n  --accent: 142 57% 46%;\n  --accent-foreground: 0 0% 100%;\n\n  --destructive: 0 93% 56%;\n  --destructive-foreground: 0 0% 100%;\n\n  /* Border: #33b864 with 20% opacity */\n  /* We set the base color to Green, opacity handled in utility class border-border/20 */\n  --border: 142 57% 46%; \n  --input: 0 0% 20%;\n  --ring: 142 57% 46%;\n\n  /* Status Indicators */\n  /* Success (Green): #33b864 -> 142 57% 46% */\n  --signal-success: 142 57% 46%;\n  /* Success Bg: Low opacity green */\n  --signal-success-bg: 142 57% 10%;\n  \n  /* Error (Red): #f72626 -> 0 93% 56% */\n  --signal-error: 0 93% 56%;\n  /* Error Bg: #2f0e0e -> 0 54% 12% */\n  --signal-error-bg: 0 54% 12%;\n}\n\n.light {\n  /* Daylight Trader Theme: Clean White + Green Accents */\n  \n  /* Main Background: #f8fafc (Slate-50) -> 210 40% 98% */\n  --background: 210 40% 98%;\n  /* Foreground: #0f172a (Slate-900) -> 222 47% 11% */\n  --foreground: 222 47% 11%;\n\n  /* Card: Pure White #ffffff -> 0 0% 100% */\n  --card: 0 0% 100%;\n  --card-foreground: 222 47% 11%;\n  /* Card Hover: #f1f5f9 (Slate-100) -> 210 40% 96% */\n  --card-hover: 210 40% 96%;\n\n  --popover: 0 0% 100%;\n  --popover-foreground: 222 47% 11%;\n\n  /* Primary stays #33b864 -> 142 57% 46% */\n  --primary: 142 57% 46%;\n  --primary-foreground: 0 0% 100%;\n  --primary-dark: 143 58% 34%;\n\n  /* Secondary: Light Gray #f1f5f9 -> 210 40% 96% */\n  --secondary: 210 40% 96%;\n  --secondary-foreground: 222 47% 11%;\n\n  /* Muted: #f1f5f9 -> 210 40% 96% */\n  --muted: 210 40% 96%;\n  /* Muted Foreground: #64748b (Slate-500) -> 215 16% 47% */\n  --muted-foreground: 215 16% 47%;\n\n  --accent: 142 57% 46%;\n  --accent-foreground: 0 0% 100%;\n\n  --destructive: 0 93% 56%;\n  --destructive-foreground: 0 0% 100%;\n\n  /* Border: #e2e8f0 (Slate-200) -> 214 32% 91% */\n  --border: 214 32% 91%;\n  /* Input: #f1f5f9 -> 210 40% 96% */\n  --input: 210 40% 96%;\n  --ring: 142 57% 46%;\n\n  /* Status Indicators (same green/red, lighter backgrounds) */\n  --signal-success: 142 57% 46%;\n  /* Success Bg: Very light green #f0fdf4 -> 138 76% 97% */\n  --signal-success-bg: 138 76% 97%;\n  \n  --signal-error: 0 93% 56%;\n  /* Error Bg: Very light red #fef2f2 -> 0 86% 97% */\n  --signal-error-bg: 0 86% 97%;\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n  body {\n    /* Uses CSS variables that switch based on .light/.dark class on <html> */\n    @apply font-sans antialiased bg-background text-foreground;\n    @apply selection:bg-primary/30 selection:text-white dark:selection:text-white;\n  }\n}\n\n@layer utilities {\n  .glass {\n    @apply bg-white/60 dark:bg-black/40 backdrop-blur-md border-gray-200 dark:border-primary/20;\n  }\n  \n  .text-gradient {\n    @apply bg-gradient-to-br from-slate-900 dark:from-white to-slate-600 dark:to-white/60 bg-clip-text text-transparent;\n  }\n\n  .text-gradient-primary {\n    @apply bg-gradient-to-br from-primary to-primary-dark bg-clip-text text-transparent;\n  }\n  \n  /* Custom Glow for Primary (Bioluminescence Effect) */\n  .shadow-glow {\n    box-shadow: 0 0 20px rgba(51, 184, 100, 0.2);\n  }\n  \n  .shadow-glow-strong {\n    box-shadow: 0 0 30px rgba(51, 184, 100, 0.4), 0 0 60px rgba(51, 184, 100, 0.15);\n  }\n  \n  /* Button Glow Enhancement */\n  .btn-glow {\n    box-shadow: \n      0 0 20px rgba(51, 184, 100, 0.3),\n      0 0 40px rgba(51, 184, 100, 0.15),\n      inset 0 0 20px rgba(51, 184, 100, 0.1);\n    transition: all 0.3s ease;\n  }\n  \n  .btn-glow:hover {\n    box-shadow: \n      0 0 30px rgba(51, 184, 100, 0.5),\n      0 0 60px rgba(51, 184, 100, 0.25),\n      0 0 90px rgba(51, 184, 100, 0.1),\n      inset 0 0 25px rgba(51, 184, 100, 0.15);\n    transform: translateY(-2px);\n  }\n  \n  /* Marquee Animation */\n  @keyframes marquee {\n    0% {\n      transform: translateX(0%);\n    }\n    100% {\n      transform: translateX(-50%);\n    }\n  }\n  \n  .animate-marquee {\n    animation: marquee 30s linear infinite;\n  }\n  \n  .animate-marquee:hover {\n    animation-play-state: paused;\n  }\n  \n  /* Command Center Animations */\n  @keyframes mesh-1 {\n    0%, 100% {\n      transform: translate(0, 0) scale(1);\n      opacity: 0.3;\n    }\n    33% {\n      transform: translate(30px, -30px) scale(1.1);\n      opacity: 0.4;\n    }\n    66% {\n      transform: translate(-20px, 20px) scale(0.9);\n      opacity: 0.2;\n    }\n  }\n  \n  @keyframes mesh-2 {\n    0%, 100% {\n      transform: translate(0, 0) scale(1);\n      opacity: 0.2;\n    }\n    33% {\n      transform: translate(-40px, 30px) scale(1.2);\n      opacity: 0.3;\n    }\n    66% {\n      transform: translate(30px, -20px) scale(0.8);\n      opacity: 0.1;\n    }\n  }\n  \n  @keyframes shimmer {\n    0% {\n      transform: translateX(-100%);\n    }\n    100% {\n      transform: translateX(100%);\n    }\n  }\n  \n  .animate-mesh-1 {\n    animation: mesh-1 25s ease-in-out infinite;\n  }\n  \n  .animate-mesh-2 {\n    animation: mesh-2 30s ease-in-out infinite;\n  }\n  \n  .animate-shimmer {\n    animation: shimmer 8s linear infinite;\n  }\n\n  /* CRM Custom Scrollbar */\n  .custom-scrollbar::-webkit-scrollbar {\n    width: 4px;\n  }\n  .custom-scrollbar::-webkit-scrollbar-track {\n    background: #0a0a0a;\n  }\n  .custom-scrollbar::-webkit-scrollbar-thumb {\n    background: #333;\n    border-radius: 2px;\n  }\n  .custom-scrollbar::-webkit-scrollbar-thumb:hover {\n    background: #444;\n  }\n\n  /* Compact Live HUD Animation */\n  @keyframes pulse-slow {\n    0%, 100% {\n      opacity: 1;\n    }\n    50% {\n      opacity: 0.7;\n    }\n  }\n  .animate-pulse-slow {\n    animation: pulse-slow 3s ease-in-out infinite;\n  }\n\n  /* AI Scanner Animation */\n  @keyframes scan-in {\n    0% {\n      opacity: 0;\n      transform: translateY(-10px);\n    }\n    100% {\n      opacity: 1;\n      transform: translateY(0);\n    }\n  }\n  .animate-scan-in {\n    animation: scan-in 0.3s ease-out;\n  }\n\n  /* Mercado Pago SDK - Full Width Styles */\n  #cardPaymentBrick_container,\n  .mp-sdk-container,\n  .mp-card-payment-container {\n    max-width: 100% !important;\n    width: 100% !important;\n  }\n  \n  #cardPaymentBrick_container form,\n  .mp-sdk-container form {\n    max-width: 100% !important;\n    width: 100% !important;\n  }\n  \n  #cardPaymentBrick_container input,\n  #cardPaymentBrick_container select,\n  .mp-sdk-container input,\n  .mp-sdk-container select {\n    width: 100% !important;\n    max-width: 100% !important;\n  }\n  \n  #cardPaymentBrick_container .sc-fWIEvA,\n  .mp-sdk-container .sc-fWIEvA {\n    max-width: 100% !important;\n    width: 100% !important;\n  }\n}\n","path":null,"size_bytes":8931,"size_tokens":null},"client/src/components/ui/item.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Separator } from \"@/components/ui/separator\"\n\nfunction ItemGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      role=\"list\"\n      data-slot=\"item-group\"\n      className={cn(\"group/item-group flex flex-col\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction ItemSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"item-separator\"\n      orientation=\"horizontal\"\n      className={cn(\"my-0\", className)}\n      {...props}\n    />\n  )\n}\n\nconst itemVariants = cva(\n  \"group/item [a]:hover:bg-accent/50 focus-visible:border-ring focus-visible:ring-ring/50 [a]:transition-colors flex flex-wrap items-center rounded-md border border-transparent text-sm outline-none transition-colors duration-100 focus-visible:ring-[3px]\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline: \"border-border\",\n        muted: \"bg-muted/50\",\n      },\n      size: {\n        default: \"gap-4 p-4 \",\n        sm: \"gap-2.5 px-4 py-3\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction Item({\n  className,\n  variant = \"default\",\n  size = \"default\",\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> &\n  VariantProps<typeof itemVariants> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n  return (\n    <Comp\n      data-slot=\"item\"\n      data-variant={variant}\n      data-size={size}\n      className={cn(itemVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nconst itemMediaVariants = cva(\n  \"flex shrink-0 items-center justify-center gap-2 group-has-[[data-slot=item-description]]/item:translate-y-0.5 group-has-[[data-slot=item-description]]/item:self-start [&_svg]:pointer-events-none\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        icon: \"bg-muted size-8 rounded-sm border [&_svg:not([class*='size-'])]:size-4\",\n        image:\n          \"size-10 overflow-hidden rounded-sm [&_img]:size-full [&_img]:object-cover\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nfunction ItemMedia({\n  className,\n  variant = \"default\",\n  ...props\n}: React.ComponentProps<\"div\"> & VariantProps<typeof itemMediaVariants>) {\n  return (\n    <div\n      data-slot=\"item-media\"\n      data-variant={variant}\n      className={cn(itemMediaVariants({ variant, className }))}\n      {...props}\n    />\n  )\n}\n\nfunction ItemContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"item-content\"\n      className={cn(\n        \"flex flex-1 flex-col gap-1 [&+[data-slot=item-content]]:flex-none\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction ItemTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"item-title\"\n      className={cn(\n        \"flex w-fit items-center gap-2 text-sm font-medium leading-snug\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction ItemDescription({ className, ...props }: React.ComponentProps<\"p\">) {\n  return (\n    <p\n      data-slot=\"item-description\"\n      className={cn(\n        \"text-muted-foreground line-clamp-2 text-balance text-sm font-normal leading-normal\",\n        \"[&>a:hover]:text-primary [&>a]:underline [&>a]:underline-offset-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction ItemActions({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"item-actions\"\n      className={cn(\"flex items-center gap-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction ItemHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"item-header\"\n      className={cn(\n        \"flex basis-full items-center justify-between gap-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction ItemFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"item-footer\"\n      className={cn(\n        \"flex basis-full items-center justify-between gap-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Item,\n  ItemMedia,\n  ItemContent,\n  ItemActions,\n  ItemGroup,\n  ItemSeparator,\n  ItemTitle,\n  ItemDescription,\n  ItemHeader,\n  ItemFooter,\n}\n","path":null,"size_bytes":4494,"size_tokens":null},"client/src/components/ui/chart.tsx":{"content":"import * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload\n            .filter((item) => item.type !== \"none\")\n            .map((item, index) => {\n              const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n              const itemConfig = getPayloadConfigFromPayload(config, item, key)\n              const indicatorColor = color || item.payload.fill || item.color\n\n              return (\n                <div\n                  key={item.dataKey}\n                  className={cn(\n                    \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                    indicator === \"dot\" && \"items-center\"\n                  )}\n                >\n                  {formatter && item?.value !== undefined && item.name ? (\n                    formatter(item.value, item.name, item, index, item.payload)\n                  ) : (\n                    <>\n                      {itemConfig?.icon ? (\n                        <itemConfig.icon />\n                      ) : (\n                        !hideIndicator && (\n                          <div\n                            className={cn(\n                              \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                              {\n                                \"h-2.5 w-2.5\": indicator === \"dot\",\n                                \"w-1\": indicator === \"line\",\n                                \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                  indicator === \"dashed\",\n                                \"my-0.5\": nestLabel && indicator === \"dashed\",\n                              }\n                            )}\n                            style={\n                              {\n                                \"--color-bg\": indicatorColor,\n                                \"--color-border\": indicatorColor,\n                              } as React.CSSProperties\n                            }\n                          />\n                        )\n                      )}\n                      <div\n                        className={cn(\n                          \"flex flex-1 justify-between leading-none\",\n                          nestLabel ? \"items-end\" : \"items-center\"\n                        )}\n                      >\n                        <div className=\"grid gap-1.5\">\n                          {nestLabel ? tooltipLabel : null}\n                          <span className=\"text-muted-foreground\">\n                            {itemConfig?.label || item.name}\n                          </span>\n                        </div>\n                        {item.value && (\n                          <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                            {item.value.toLocaleString()}\n                          </span>\n                        )}\n                      </div>\n                    </>\n                  )}\n                </div>\n              )\n            })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload\n          .filter((item) => item.type !== \"none\")\n          .map((item) => {\n            const key = `${nameKey || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n            return (\n              <div\n                key={item.value}\n                className={cn(\n                  \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n                )}\n              >\n                {itemConfig?.icon && !hideIcon ? (\n                  <itemConfig.icon />\n                ) : (\n                  <div\n                    className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                    style={{\n                      backgroundColor: item.color,\n                    }}\n                  />\n                )}\n                {itemConfig?.label}\n              </div>\n            )\n          })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","path":null,"size_bytes":10763,"size_tokens":null},"server/storage.ts":{"content":"import { db } from \"./db\";\nimport { \n  profiles, tips, favorites, userBets, tipAnalyses, tipMarketRecommendations,\n  type InsertProfile, type Profile, type InsertTip, type Tip, type Favorite, type InsertFavorite, \n  type UserBet, type InsertUserBet, type TipAnalysis, type InsertTipAnalysis,\n  type TipMarketRecommendation, type InsertTipMarketRecommendation\n} from \"@shared/schema\";\nimport { eq, desc, and, gte, sql } from \"drizzle-orm\";\nimport bcrypt from \"bcrypt\";\n\nexport interface IStorage {\n  // Profile/Auth methods\n  getProfileById(id: string): Promise<Profile | undefined>;\n  getProfileByEmail(email: string): Promise<Profile | undefined>;\n  getUserByEmail(email: string): Promise<Profile | undefined>; // Alias for getProfileByEmail\n  createProfile(profile: Omit<InsertProfile, 'passwordHash'> & { password: string }): Promise<Profile>;\n  upsertProfileFromSupabase(data: { id: string; email: string; firstName?: string }): Promise<Profile>;\n  verifyPassword(email: string, password: string): Promise<Profile | null>;\n  updateUserSubscription(userId: string, subscriptionData: {\n    subscriptionStatus: 'trial' | 'active' | 'expired';\n    mercadopagoSubscriptionId?: string | null;\n    subscriptionActivatedAt?: Date | null;\n    subscriptionEndsAt?: Date | null;\n  }): Promise<Profile | undefined>;\n  updateLegalAcceptance(userId: string, acceptanceData: {\n    termsAcceptedAt?: Date;\n    privacyAcceptedAt?: Date;\n    riskDisclaimerAcceptedAt?: Date;\n  }): Promise<Profile | undefined>;\n  updateProfileBankroll(userId: string, bankrollData: {\n    bankrollInitial: string;\n    riskProfile: string;\n    unitValue: string;\n  }): Promise<Profile | undefined>;\n\n  // Tips methods\n  getAllTips(): Promise<Tip[]>;\n  getTipById(id: string): Promise<Tip | undefined>;\n  createTip(tip: InsertTip): Promise<Tip>;\n  updateTipStatus(id: string, status: 'pending' | 'green' | 'red'): Promise<Tip | undefined>;\n  deleteTip(id: string): Promise<void>;\n  setTipFree(id: string, isFree: boolean): Promise<Tip | undefined>;\n  getFreeTip(): Promise<Tip | undefined>;\n  clearAllFreeTips(): Promise<void>;\n  \n  // Onboarding methods\n  updateTourCompleted(userId: string, completed: boolean): Promise<Profile | undefined>;\n  updatePreferredTheme(userId: string, theme: 'dark' | 'light'): Promise<Profile | undefined>;\n  \n  // Favorites methods\n  getUserFavorites(userId: string): Promise<Favorite[]>;\n  addFavorite(userId: string, tipId: string): Promise<Favorite>;\n  removeFavorite(userId: string, tipId: string): Promise<void>;\n  isFavorite(userId: string, tipId: string): Promise<boolean>;\n  \n  // User Bets methods (individual tracking)\n  getUserBets(userId: string): Promise<UserBet[]>;\n  getUserBetByTip(userId: string, tipId: string): Promise<UserBet | undefined>;\n  createUserBet(data: { userId: string; tipId: string; stakeUsed: string; oddAtEntry: string }): Promise<UserBet>;\n  updateUserBetResult(userId: string, tipId: string, result: 'green' | 'red'): Promise<UserBet | undefined>;\n  getUserMonthlyStats(userId: string): Promise<{ greens: number; reds: number; pending: number; profit: number; totalBets: number }>;\n  \n  // Tip Analysis methods\n  getTipAnalysis(tipId: string): Promise<TipAnalysis | undefined>;\n  createTipAnalysis(data: InsertTipAnalysis): Promise<TipAnalysis>;\n  updateTipAnalysis(tipId: string, data: Partial<InsertTipAnalysis>): Promise<TipAnalysis | undefined>;\n  deleteTipAnalysis(tipId: string): Promise<void>;\n  \n  // Tip Market Recommendations methods\n  getTipMarketRecommendations(tipId: string): Promise<TipMarketRecommendation[]>;\n  createTipMarketRecommendation(data: InsertTipMarketRecommendation): Promise<TipMarketRecommendation>;\n  deleteTipMarketRecommendations(tipId: string): Promise<void>;\n}\n\nexport class DatabaseStorage implements IStorage {\n  // Profile/Auth methods\n  async getProfileById(id: string): Promise<Profile | undefined> {\n    const [profile] = await db.select().from(profiles).where(eq(profiles.id, id));\n    return profile;\n  }\n\n  async getProfileByEmail(email: string): Promise<Profile | undefined> {\n    const [profile] = await db.select().from(profiles).where(eq(profiles.email, email));\n    return profile;\n  }\n\n  async getUserByEmail(email: string): Promise<Profile | undefined> {\n    return this.getProfileByEmail(email);\n  }\n\n  async createProfile(data: Omit<InsertProfile, 'passwordHash'> & { password: string }): Promise<Profile> {\n    const passwordHash = await bcrypt.hash(data.password, 10);\n    const now = new Date();\n    const [profile] = await db\n      .insert(profiles)\n      .values({\n        email: data.email,\n        passwordHash,\n        firstName: data.firstName,\n        role: data.role || 'user',\n        subscriptionStatus: data.subscriptionStatus || 'trial',\n        termsAcceptedAt: now,\n        privacyAcceptedAt: now,\n        riskDisclaimerAcceptedAt: now,\n      })\n      .returning();\n    return profile;\n  }\n\n  async upsertProfileFromSupabase(data: { id: string; email: string; firstName?: string }): Promise<Profile> {\n    const existing = await this.getProfileById(data.id);\n    \n    if (existing) {\n      return existing;\n    }\n\n    try {\n      const now = new Date();\n      const trialStartDate = now;\n\n      const [profile] = await db\n        .insert(profiles)\n        .values({\n          id: data.id,\n          email: data.email,\n          passwordHash: '',\n          firstName: data.firstName || data.email.split('@')[0],\n          role: 'user',\n          subscriptionStatus: 'trial',\n          trialStartDate: trialStartDate,\n          termsAcceptedAt: now,\n          privacyAcceptedAt: now,\n          riskDisclaimerAcceptedAt: now,\n        })\n        .returning();\n      \n      console.log(`[STORAGE] Created new profile for Supabase user: ${data.email} with trial starting ${trialStartDate.toISOString()}`);\n      return profile;\n    } catch (error: any) {\n      if (error.code === '23505') {\n        const existingAfterError = await this.getProfileById(data.id);\n        if (existingAfterError) {\n          return existingAfterError;\n        }\n      }\n      throw error;\n    }\n  }\n\n  async verifyPassword(email: string, password: string): Promise<Profile | null> {\n    const profile = await this.getProfileByEmail(email);\n    if (!profile) {\n      console.log(`[STORAGE] Profile not found for email: ${email}`);\n      return null;\n    }\n    \n    console.log(`[STORAGE] Verifying password for ${email}`);\n    const match = await bcrypt.compare(password, profile.passwordHash);\n    console.log(`[STORAGE] Password match result: ${match}`);\n    \n    if (!match) return null;\n    \n    return profile;\n  }\n\n  async updateUserSubscription(\n    userId: string, \n    subscriptionData: {\n      subscriptionStatus: 'trial' | 'active' | 'expired';\n      mercadopagoSubscriptionId?: string | null;\n      subscriptionActivatedAt?: Date | null;\n      subscriptionEndsAt?: Date | null;\n    }\n  ): Promise<Profile | undefined> {\n    const updateData: Partial<Profile> = {\n      subscriptionStatus: subscriptionData.subscriptionStatus,\n    };\n\n    if (subscriptionData.mercadopagoSubscriptionId !== undefined) {\n      updateData.mercadopagoSubscriptionId = subscriptionData.mercadopagoSubscriptionId;\n    }\n\n    if (subscriptionData.subscriptionActivatedAt !== undefined) {\n      updateData.subscriptionActivatedAt = subscriptionData.subscriptionActivatedAt;\n    }\n\n    if (subscriptionData.subscriptionEndsAt !== undefined) {\n      updateData.subscriptionEndsAt = subscriptionData.subscriptionEndsAt;\n    }\n\n    const [updatedProfile] = await db\n      .update(profiles)\n      .set(updateData)\n      .where(eq(profiles.id, userId))\n      .returning();\n\n    return updatedProfile;\n  }\n\n  async updateLegalAcceptance(\n    userId: string,\n    acceptanceData: {\n      termsAcceptedAt?: Date;\n      privacyAcceptedAt?: Date;\n      riskDisclaimerAcceptedAt?: Date;\n    }\n  ): Promise<Profile | undefined> {\n    const [updatedProfile] = await db\n      .update(profiles)\n      .set(acceptanceData)\n      .where(eq(profiles.id, userId))\n      .returning();\n\n    return updatedProfile;\n  }\n\n  async updateProfileBankroll(\n    userId: string,\n    bankrollData: {\n      bankrollInitial: string;\n      riskProfile: string;\n      unitValue: string;\n    }\n  ): Promise<Profile | undefined> {\n    const [updatedProfile] = await db\n      .update(profiles)\n      .set({\n        bankrollInitial: bankrollData.bankrollInitial,\n        riskProfile: bankrollData.riskProfile as 'conservador' | 'moderado' | 'agressivo',\n        unitValue: bankrollData.unitValue,\n      })\n      .where(eq(profiles.id, userId))\n      .returning();\n\n    return updatedProfile;\n  }\n\n  // Tips methods\n  async getAllTips(): Promise<Tip[]> {\n    return await db.select().from(tips).orderBy(desc(tips.createdAt));\n  }\n\n  async getTipById(id: string): Promise<Tip | undefined> {\n    const [tip] = await db.select().from(tips).where(eq(tips.id, id));\n    return tip;\n  }\n\n  async createTip(tip: InsertTip): Promise<Tip> {\n    const [newTip] = await db.insert(tips).values(tip).returning();\n    return newTip;\n  }\n\n  async updateTipStatus(id: string, status: 'pending' | 'green' | 'red'): Promise<Tip | undefined> {\n    const [updatedTip] = await db\n      .update(tips)\n      .set({ status, updatedAt: new Date() })\n      .where(eq(tips.id, id))\n      .returning();\n    return updatedTip;\n  }\n\n  async deleteTip(id: string): Promise<void> {\n    await db.delete(tips).where(eq(tips.id, id));\n  }\n\n  async setTipFree(id: string, isFree: boolean): Promise<Tip | undefined> {\n    const [updatedTip] = await db\n      .update(tips)\n      .set({ isFree, updatedAt: new Date() })\n      .where(eq(tips.id, id))\n      .returning();\n    return updatedTip;\n  }\n\n  async getFreeTip(): Promise<Tip | undefined> {\n    const [freeTip] = await db.select().from(tips).where(eq(tips.isFree, true)).orderBy(desc(tips.createdAt)).limit(1);\n    return freeTip;\n  }\n\n  async clearAllFreeTips(): Promise<void> {\n    await db.update(tips).set({ isFree: false, updatedAt: new Date() }).where(eq(tips.isFree, true));\n  }\n\n  // Onboarding methods\n  async updateTourCompleted(userId: string, completed: boolean): Promise<Profile | undefined> {\n    const [updatedProfile] = await db\n      .update(profiles)\n      .set({ hasCompletedTour: completed })\n      .where(eq(profiles.id, userId))\n      .returning();\n    return updatedProfile;\n  }\n\n  async updatePreferredTheme(userId: string, theme: 'dark' | 'light'): Promise<Profile | undefined> {\n    const [updatedProfile] = await db\n      .update(profiles)\n      .set({ preferredTheme: theme })\n      .where(eq(profiles.id, userId))\n      .returning();\n    return updatedProfile;\n  }\n\n  // Favorites methods\n  async getUserFavorites(userId: string): Promise<Favorite[]> {\n    return await db.select().from(favorites).where(eq(favorites.userId, userId)).orderBy(desc(favorites.createdAt));\n  }\n\n  async addFavorite(userId: string, tipId: string): Promise<Favorite> {\n    const [favorite] = await db\n      .insert(favorites)\n      .values({ userId, tipId })\n      .returning();\n    return favorite;\n  }\n\n  async removeFavorite(userId: string, tipId: string): Promise<void> {\n    await db.delete(favorites).where(\n      and(eq(favorites.userId, userId), eq(favorites.tipId, tipId))\n    );\n  }\n\n  async isFavorite(userId: string, tipId: string): Promise<boolean> {\n    const [existing] = await db.select().from(favorites).where(\n      and(eq(favorites.userId, userId), eq(favorites.tipId, tipId))\n    );\n    return !!existing;\n  }\n\n  // User Bets methods (individual tracking)\n  async getUserBets(userId: string): Promise<UserBet[]> {\n    return await db.select().from(userBets).where(eq(userBets.userId, userId)).orderBy(desc(userBets.enteredAt));\n  }\n\n  async getUserBetByTip(userId: string, tipId: string): Promise<UserBet | undefined> {\n    const [bet] = await db.select().from(userBets).where(\n      and(eq(userBets.userId, userId), eq(userBets.tipId, tipId))\n    );\n    return bet;\n  }\n\n  async createUserBet(data: { userId: string; tipId: string; stakeUsed: string; oddAtEntry: string }): Promise<UserBet> {\n    const [bet] = await db\n      .insert(userBets)\n      .values({\n        userId: data.userId,\n        tipId: data.tipId,\n        stakeUsed: data.stakeUsed,\n        oddAtEntry: data.oddAtEntry,\n        result: 'pending',\n      })\n      .returning();\n    return bet;\n  }\n\n  async updateUserBetResult(userId: string, tipId: string, result: 'green' | 'red'): Promise<UserBet | undefined> {\n    const bet = await this.getUserBetByTip(userId, tipId);\n    if (!bet) return undefined;\n\n    const odd = parseFloat(bet.oddAtEntry || '1');\n    const stake = parseFloat(bet.stakeUsed || '1');\n    const profit = result === 'green' ? (odd - 1) * stake : -stake;\n\n    const [updated] = await db\n      .update(userBets)\n      .set({ \n        result, \n        resultMarkedAt: new Date(),\n        profit: profit.toFixed(2)\n      })\n      .where(and(eq(userBets.userId, userId), eq(userBets.tipId, tipId)))\n      .returning();\n    return updated;\n  }\n\n  async getUserMonthlyStats(userId: string): Promise<{ greens: number; reds: number; pending: number; profit: number; totalBets: number }> {\n    const now = new Date();\n    const startOfMonth = new Date(now.getFullYear(), now.getMonth(), 1);\n\n    const bets = await db.select().from(userBets).where(\n      and(\n        eq(userBets.userId, userId),\n        gte(userBets.enteredAt, startOfMonth)\n      )\n    );\n\n    let greens = 0;\n    let reds = 0;\n    let pending = 0;\n    let profit = 0;\n\n    for (const bet of bets) {\n      if (bet.result === 'green') greens++;\n      else if (bet.result === 'red') reds++;\n      else pending++;\n      \n      if (bet.profit) {\n        profit += parseFloat(bet.profit);\n      }\n    }\n\n    return { greens, reds, pending, profit, totalBets: bets.length };\n  }\n\n  // =====================================================\n  // TIP ANALYSIS METHODS\n  // =====================================================\n  \n  async getTipAnalysis(tipId: string): Promise<TipAnalysis | undefined> {\n    const [analysis] = await db.select().from(tipAnalyses).where(eq(tipAnalyses.tipId, tipId));\n    return analysis;\n  }\n\n  async createTipAnalysis(data: InsertTipAnalysis): Promise<TipAnalysis> {\n    const [analysis] = await db.insert(tipAnalyses).values(data).returning();\n    return analysis;\n  }\n\n  async updateTipAnalysis(tipId: string, data: Partial<InsertTipAnalysis>): Promise<TipAnalysis | undefined> {\n    const [updated] = await db\n      .update(tipAnalyses)\n      .set({ ...data, updatedAt: new Date() })\n      .where(eq(tipAnalyses.tipId, tipId))\n      .returning();\n    return updated;\n  }\n\n  async deleteTipAnalysis(tipId: string): Promise<void> {\n    await db.delete(tipAnalyses).where(eq(tipAnalyses.tipId, tipId));\n  }\n\n  // =====================================================\n  // TIP MARKET RECOMMENDATIONS METHODS\n  // =====================================================\n  \n  async getTipMarketRecommendations(tipId: string): Promise<TipMarketRecommendation[]> {\n    return await db\n      .select()\n      .from(tipMarketRecommendations)\n      .where(eq(tipMarketRecommendations.tipId, tipId))\n      .orderBy(desc(tipMarketRecommendations.evPercent));\n  }\n\n  async createTipMarketRecommendation(data: InsertTipMarketRecommendation): Promise<TipMarketRecommendation> {\n    const [recommendation] = await db.insert(tipMarketRecommendations).values(data).returning();\n    return recommendation;\n  }\n\n  async deleteTipMarketRecommendations(tipId: string): Promise<void> {\n    await db.delete(tipMarketRecommendations).where(eq(tipMarketRecommendations.tipId, tipId));\n  }\n}\n\nexport const storage = new DatabaseStorage();\n","path":null,"size_bytes":15654,"size_tokens":null},"server/index-dev.ts":{"content":"import fs from \"node:fs\";\nimport { type Server } from \"node:http\";\nimport path from \"node:path\";\n\nimport type { Express } from \"express\";\nimport { nanoid } from \"nanoid\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\n\nimport runApp from \"./app\";\n\nimport viteConfig from \"../vite.config\";\n\nconst viteLogger = createLogger();\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\n(async () => {\n  await runApp(setupVite);\n})();\n","path":null,"size_bytes":1609,"size_tokens":null},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-4 w-4 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","path":null,"size_bytes":7406,"size_tokens":null},"replit.md":{"content":"# TRUE SIGNAL - Sports Betting Intelligence Platform\n\n## Overview\n\nTRUE SIGNAL is an AI-powered sports betting intelligence platform that delivers curated betting tips and live match data. It features a public landing page, a protected subscriber dashboard, and an admin panel for managing tips. The platform integrates with the API-Football service for real-time sports data to provide accurate predictions and analysis globally. The business model is freemium, offering a 5-day free trial followed by a premium subscription (`True Signal PRIME`) for full access, with robust access control and a paywall system.\n\n**NEW: AI Prediction Engine** - Automated betting tip generation using Poisson probability model, analyzing last 10 matches per team, H2H history, and form to generate high-confidence predictions (‚â•70%) for admin approval.\n\n**NEW: ELITE PREDICTION ENGINE** - Advanced predictive motor with:\n- **Poisson Distribution Model**: Calculates exact probabilities for Goals (Over 1.5/2.5/3.5), BTTS, HT goals\n- **Expected Value (EV) Calculation**: Only surfaces bets with EV ‚â• 3% vs Bet365 odds (fairOdd vs bookmakerOdd)\n- **xG Analysis**: Uses expected goals data to compute team attack/defense strengths\n- **Match Context Engine**: Analyzes table position, relegation battles, title deciders, derby matches\n- **Classic Detection**: Identifies 25+ major derbies (El Cl√°sico, Derby d'Italia, Supercl√°sico, etc.) with intensity scoring\n- **Pattern Detection**: Requires ‚â•75% recurrence in last 10 matches + H2H confirmation\n- **DIAMOND/GOLD Badges**: DIAMOND (EV‚â•8% + Prob‚â•75%), GOLD (EV‚â•5% + Prob‚â•68%)\n- **Markets**: Goals (FT/HT), BTTS, Corners, Cards with statistical backing\n- **Admin Interface**: \"ELITE ENGINE\" tab with category filters and detailed reasoning per signal\n\n## Brand Identity\n\n- **Logo**: Minimalist shield with animated pulse line, Inter font\n- **Typography**: Sora font (weight 800) for brand name, tracking-wide lettering\n- **Color**: Primary green accent `#33b864`\n- **Style**: Dark cyberpunk aesthetic with neon accents\n- **Brand Message**: \"A Verdade em meio ao Ru√≠do\" (The Truth amid the Noise)\n- **Coupon Code**: TRUESIGNAL50 (50% OFF)\n\n## Contact Information\n\n- **Email**: suporte@truesignal.com.br\n- **Website**: www.truesignal.com.br\n- **WhatsApp**: +55 16 99325-3866\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n## System Architecture\n\n### Frontend\n\n- **Technology Stack**: React 18 with TypeScript, Vite, Tailwind CSS, shadcn/ui, Wouter, React Query, React Hook Form with Zod.\n- **Design System**: Custom dark theme with `#33b864` green neon accents, Inter and Sora fonts, New York style shadcn/ui components, mobile-first responsive design.\n- **Key UI Components**: `BetCard` (betting tips), `Hero` (landing page), `LiveTicker` (recent signals), `LiveGamesList`, `MatchCenterModal` (detailed match stats with SVG graphics), `SignalForm` (admin tip creation), `LockedScreen`, `TrialBanner`, `Thank You Page`, `Subscription Management Page`, `ProCouponTicket` (professional coupon component with serrated edges).\n- **Routing**: Comprehensive routing for public pages, authentication, authenticated dashboard sections, admin panel, and legal pages (Terms, Privacy, Risk Disclaimer).\n- **Internationalization**: Full site-wide support for 6 languages (PT, EN, ES, FR, IT, CN) with dynamic date localization and `localStorage` persistence.\n\n### Backend\n\n- **Server**: Express.js with TypeScript, supporting development and production environments, with session-based authentication.\n- **Database**: Drizzle ORM, Neon serverless Postgres, managing `profiles` (user accounts) and `tips` tables.\n- **Authentication**: Supabase Auth (preferred) or custom bcrypt, featuring row-level security and role-based access control.\n- **Data Models**: `Profile` (user identity, subscription status, trial dates, Mercado Pago IDs), `Tip` (betting signal with match details, market, outcome, team logos, `fixtureId`).\n\n### System Design Choices\n\n- **Match Center Modal**: Symmetrical layout with a possession gauge, reusable `StatRow` components, and a dynamic 3-column events grid, displaying 13 types of statistics in 6 languages.\n- **BetCard Design**: \"Vault Card\" design with prominent odds, multi-leg support, dynamic vertical timeline, and copy functionality.\n- **Dashboard Optimization**: Focus on premium signal feed, core HUD metrics (Assertiveness, Online Now, Total Signals), and a simplified AI Scanner.\n- **Admin Panel**: Enables real fixture selection via date picker, integrates with API-Football, and automates push notifications for new tips. Features a dedicated \"IA Preditiva\" tab for managing AI-generated predictions.\n- **AI Prediction Engine**: \n  - **Data Collection**: Fetches last 10 matches per team, H2H history, and detailed fixture statistics (shots, corners, cards) from API-Football with intelligent caching (6-hour TTL).\n  - **Statistical Analysis**: Calculates goals scored/conceded (home/away), Over/Under percentages, BTTS rates, clean sheets, form (W/D/L), first-half stats, shots on target, corners, and cards.\n  - **Probability Model**: Uses Poisson distribution to calculate expected goals and market probabilities (1X2, Over/Under, BTTS).\n  - **Safety Margins**: Conservative line suggestions - Shots -40% (m√©dia 10 ‚Üí Over 5.5), Corners -45% (m√©dia 12 ‚Üí Over 6.5), Cards -50% (m√©dia 4 ‚Üí Over 1.5).\n  - **Confidence Scoring**: Only generates tips when combined probability + historical trends yield ‚â•80% confidence.\n  - **Markets Supported**: Goals (FT/HT), BTTS, Corners (FT/HT), Cards (total/both teams receive), Shots on Target, Match Result.\n  - **Draft Workflow**: Creates drafts in `ai_tickets` table ‚Üí Admin reviews in \"IA Preditiva\" panel ‚Üí Approves/Rejects ‚Üí Published to `tips` table.\n  - **Major Leagues**: Prioritizes Premier League, La Liga, Serie A, Bundesliga, Ligue 1, Brasileir√£o, Champions League, Europa League.\n- **Live Pressure Monitor (Bot de Gols Ao Vivo v2.0)**:\n  - **Real-time Analysis**: Polls API-Football every 45 seconds for live match statistics.\n  - **Pressure Index Algorithm (Calibrado Cientificamente)**: Pesos normalizados baseados em an√°lise de mercado (Overlyzer, AI Stats):\n    - Shots on Target: 0.28 (28%)\n    - Dangerous Attacks: 0.24 (24%)\n    - xG Delta (time vs oponente): 0.18 (18%)\n    - Corners: 0.12 (12%)\n    - Possession Swing: 0.10 (10%)\n    - Cards Tempo: 0.05 (5%)\n    - Total Attacks: 0.03 (3%)\n  - **Thresholds Separados HT/FT**:\n    - 1¬∫ Tempo (HT): Press√£o ‚â•68%, ap√≥s 15', delta ‚â•18%, prob. gol ‚â•65%\n    - 2¬∫ Tempo (FT): Press√£o ‚â•72%, ap√≥s 55', surge ‚â•24%, prob. gol ‚â•70%\n  - **Tiers de Confian√ßa**: PRIME (85%+), CORE (80-84%), WATCH (75-79%)\n  - **Sugest√£o de Mercado**: Baseada em situa√ß√£o do jogo e mercados Bet365 dispon√≠veis (Goals ‚â•1.5/2.5, Corners ‚â•6.5, Cards ‚â•3.5)\n  - **Filtros de Qualidade**: Exclui Sub-21, amistosos, ligas sem liquidez; prioriza Top 15 ligas mundiais\n  - **Database Tables**: `live_pressure_snapshots`, `live_alerts`, `live_monitor_settings`\n  - **API Endpoints**: `GET /api/live/pressure`, `GET /api/live/pressure/:fixtureId`, `GET /api/live/alerts`, `POST /api/live/monitor/start`, `POST /api/live/monitor/stop`\n- **Seletor Top 6-8 Jogos do Dia (Bilhetes Pr√©-Live)**:\n  - **Endpoint**: `GET /api/ai/top-matches?date=YYYY-MM-DD&max=8`\n  - **Score Composto**: 40% forma/motiva√ß√£o + 30% estat√≠stica + 20% mercado + 10% risco\n  - **Import√¢ncia do Jogo**: Tier da liga, forma recente, potencial ofensivo, BTTS, Over 2.5\n  - **Filtros**: Exclui Sub-21, amistosos, ligas com baixa liquidez\n  - **Ligas Priorit√°rias**: Premier League, La Liga, Serie A, Bundesliga, Ligue 1, Champions League, Europa League, Brasileir√£o, Primeira Liga, Eredivisie, Argentina, Libertadores\n  - **Output**: Lista ordenada por score composto com tier de confian√ßa (PRIME/CORE/WATCH)\n- **Subscription System**: Freemium model with a 5-day free trial, `True Signal Pro` subscription (R$ 47,90/m√™s - Black Friday 52% off), and `useAccessControl` hook for managing access based on `subscription_status`, `trial_start_date`, `subscriptionActivatedAt`, and `subscriptionEndsAt`. Implements paywalls (`LockedScreen`, `TrialBanner`, blurred tips) and a dedicated subscription management page.\n- **Synchronization**: Achieved through React Query cache invalidation, Supabase Realtime subscriptions for `tips`, and `localStorage` for preferences.\n- **Legal Compliance**: Dedicated pages for Terms and Conditions, Privacy Policy (LGPD compliant), and Risk Disclaimer, integrated into the landing page footer.\n\n## Security Architecture\n\n### Headers de Seguran√ßa (Helmet)\n- **Content Security Policy (CSP)**: Restrito para scripts, estilos, imagens e conex√µes permitidas\n- **X-Frame-Options**: Prote√ß√£o contra clickjacking\n- **X-Content-Type-Options**: Preven√ß√£o de MIME sniffing\n- **Strict-Transport-Security**: HSTS para conex√µes HTTPS\n\n### Rate Limiting (express-rate-limit)\n- **API Geral**: 500 requisi√ß√µes/15 minutos\n- **Auth/Pagamento**: 30 requisi√ß√µes/15 minutos (mais restritivo)\n- **Admin**: 50 requisi√ß√µes/hora\n\n### Autentica√ß√£o e Autoriza√ß√£o\n- **Endpoints Admin**: Verifica√ß√£o obrigat√≥ria de email admin + role\n- **Lista de Admins**: `kwillianferreira@gmail.com` + usu√°rios com role='admin'\n- **Tips CRUD**: Apenas admins podem criar/editar/deletar\n- **Pagamentos**: Valida√ß√£o server-side de userId e email\n\n### Prote√ß√£o de Pagamentos\n- **Pre√ßo fixo no servidor**: R$ 47,90 (Black Friday - n√£o pode ser manipulado)\n- **Webhook validation**: Log de IP/User-Agent + verifica√ß√£o via API do MP\n- **Idempotency Key**: Previne pagamentos duplicados\n\n### Checkout Transparente\n- **PIX**: QR Code gerado diretamente no site com polling de status\n- **Cart√£o**: Tokeniza√ß√£o via SDK Mercado Pago (dados sens√≠veis nunca passam pelo servidor)\n- **PUBLIC_KEY**: Usado apenas no frontend para tokeniza√ß√£o\n- **ACCESS_TOKEN**: Usado apenas no backend (nunca exposto)\n\n## External Dependencies\n\n- **API-Football v3 (api-sports.io)**: Primary data source for live match data, fixtures, and statistics.\n- **Supabase**: Backend-as-a-Service for authentication, Postgres database, and real-time features.\n- **Mercado Pago**: Payment gateway for subscription management, including plan creation, checkout, and webhook processing.\n- **OneSignal**: Push notification service for new betting tips.\n- **Helmet**: Security headers middleware.\n- **express-rate-limit**: Rate limiting middleware.\n- **Radix UI**: Headless UI primitives.\n- **Lucide React**: Icon library.\n- **Tailwind CSS v4**: Utility-first CSS framework.\n- **shadcn/ui**: Component library built on Radix UI.\n- **Vite**: Frontend build tool.\n- **Drizzle Kit**: Database migration and schema management.\n- **Axios**: HTTP client.\n- **React Query**: Server state management.\n- **Zod**: Schema declaration and validation.\n- **date-fns**: Date utility library.\n","path":null,"size_bytes":10957,"size_tokens":null},"client/src/components/live-games-list.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { footballService, FootballMatch } from \"@/lib/football-service\";\nimport { Clock, AlertCircle } from \"lucide-react\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\n\nexport function LiveGamesList() {\n  const { data: games, isLoading, error } = useQuery({\n    queryKey: ['live-games'],\n    queryFn: footballService.getLiveFixtures,\n    refetchInterval: 60000, // Refresh every minute\n  });\n\n  if (isLoading) {\n    return (\n      <div className=\"space-y-4\">\n        {[1, 2, 3].map((i) => (\n          <Skeleton key={i} className=\"h-24 w-full rounded-xl bg-white/5\" />\n        ))}\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"p-4 rounded-xl bg-red-500/10 border border-red-500/20 text-red-500 flex items-center gap-2\">\n        <AlertCircle className=\"w-5 h-5\" />\n        <span>Erro ao carregar jogos ao vivo. Tente novamente mais tarde.</span>\n      </div>\n    );\n  }\n\n  if (!games || games.length === 0) {\n     return (\n      <div className=\"p-8 text-center rounded-xl bg-card border border-primary/10\">\n        <p className=\"text-muted-foreground\">Nenhum jogo ao vivo no momento.</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      {games.map((match) => (\n        <div key={match.fixture.id} className=\"bg-card border border-primary/10 hover:border-primary/30 transition-all p-4 rounded-xl flex items-center justify-between group\">\n          {/* Time Info */}\n          <div className=\"flex flex-col items-center w-16 shrink-0\">\n            <span className=\"text-xs font-bold text-primary animate-pulse flex items-center gap-1\">\n              <span className=\"w-1.5 h-1.5 rounded-full bg-primary\" />\n              {match.fixture.status.elapsed}'\n            </span>\n            <span className=\"text-[10px] text-muted-foreground uppercase\">{match.fixture.status.short}</span>\n          </div>\n\n          {/* Teams & Score */}\n          <div className=\"flex-1 px-4 flex items-center justify-between\">\n            <div className=\"flex items-center gap-3 flex-1 justify-end text-right\">\n              <span className=\"font-display font-bold text-slate-900 dark:text-white hidden sm:block\">{match.teams.home.name}</span>\n              <span className=\"font-display font-bold text-slate-900 dark:text-white sm:hidden\">{match.teams.home.name.substring(0, 3).toUpperCase()}</span>\n              <img src={match.teams.home.logo} alt={match.teams.home.name} className=\"w-8 h-8 object-contain\" />\n            </div>\n\n            <div className=\"px-4 flex flex-col items-center\">\n              <div className=\"bg-white/60 dark:bg-black/40 px-3 py-1 rounded border border-gray-200 dark:border-primary/20 font-mono text-xl font-bold text-primary tracking-widest shadow-[0_0_10px_rgba(51,184,100,0.1)]\">\n                {match.goals.home ?? 0} - {match.goals.away ?? 0}\n              </div>\n            </div>\n\n            <div className=\"flex items-center gap-3 flex-1 justify-start text-left\">\n              <img src={match.teams.away.logo} alt={match.teams.away.name} className=\"w-8 h-8 object-contain\" />\n              <span className=\"font-display font-bold text-slate-900 dark:text-white hidden sm:block\">{match.teams.away.name}</span>\n              <span className=\"font-display font-bold text-slate-900 dark:text-white sm:hidden\">{match.teams.away.name.substring(0, 3).toUpperCase()}</span>\n            </div>\n          </div>\n\n          {/* Action */}\n          <div className=\"w-auto flex justify-end pl-2 border-l border-white/5\">\n             <button className=\"p-2 text-muted-foreground hover:text-primary transition-colors\">\n               <Clock className=\"w-4 h-4\" />\n             </button>\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n}\n","path":null,"size_bytes":3769,"size_tokens":null},"client/src/components/ui/hover-card.tsx":{"content":"import * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","path":null,"size_bytes":1237,"size_tokens":null},"client/src/components/ui/calendar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport {\n  ChevronDownIcon,\n  ChevronLeftIcon,\n  ChevronRightIcon,\n} from \"lucide-react\"\nimport { DayButton, DayPicker, getDefaultClassNames } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button, buttonVariants } from \"@/components/ui/button\"\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  captionLayout = \"label\",\n  buttonVariant = \"ghost\",\n  formatters,\n  components,\n  ...props\n}: React.ComponentProps<typeof DayPicker> & {\n  buttonVariant?: React.ComponentProps<typeof Button>[\"variant\"]\n}) {\n  const defaultClassNames = getDefaultClassNames()\n\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\n        \"bg-background group/calendar p-3 [--cell-size:2rem] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent\",\n        String.raw`rtl:**:[.rdp-button\\_next>svg]:rotate-180`,\n        String.raw`rtl:**:[.rdp-button\\_previous>svg]:rotate-180`,\n        className\n      )}\n      captionLayout={captionLayout}\n      formatters={{\n        formatMonthDropdown: (date) =>\n          date.toLocaleString(\"pt-BR\", { month: \"short\" }),\n        ...formatters,\n      }}\n      classNames={{\n        root: cn(\"w-fit\", defaultClassNames.root),\n        months: cn(\n          \"relative flex flex-col gap-4 md:flex-row\",\n          defaultClassNames.months\n        ),\n        month: cn(\"flex w-full flex-col gap-4\", defaultClassNames.month),\n        nav: cn(\n          \"absolute inset-x-0 top-0 flex w-full items-center justify-between gap-1\",\n          defaultClassNames.nav\n        ),\n        button_previous: cn(\n          buttonVariants({ variant: buttonVariant }),\n          \"h-[--cell-size] w-[--cell-size] select-none p-0 aria-disabled:opacity-50\",\n          defaultClassNames.button_previous\n        ),\n        button_next: cn(\n          buttonVariants({ variant: buttonVariant }),\n          \"h-[--cell-size] w-[--cell-size] select-none p-0 aria-disabled:opacity-50\",\n          defaultClassNames.button_next\n        ),\n        month_caption: cn(\n          \"flex h-[--cell-size] w-full items-center justify-center px-[--cell-size]\",\n          defaultClassNames.month_caption\n        ),\n        dropdowns: cn(\n          \"flex h-[--cell-size] w-full items-center justify-center gap-1.5 text-sm font-medium\",\n          defaultClassNames.dropdowns\n        ),\n        dropdown_root: cn(\n          \"has-focus:border-ring border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] relative rounded-md border\",\n          defaultClassNames.dropdown_root\n        ),\n        dropdown: cn(\n          \"bg-popover absolute inset-0 opacity-0\",\n          defaultClassNames.dropdown\n        ),\n        caption_label: cn(\n          \"select-none font-medium\",\n          captionLayout === \"label\"\n            ? \"text-sm\"\n            : \"[&>svg]:text-muted-foreground flex h-8 items-center gap-1 rounded-md pl-2 pr-1 text-sm [&>svg]:size-3.5\",\n          defaultClassNames.caption_label\n        ),\n        table: \"w-full border-collapse\",\n        weekdays: cn(\"flex\", defaultClassNames.weekdays),\n        weekday: cn(\n          \"text-muted-foreground flex-1 select-none rounded-md text-[0.8rem] font-normal\",\n          defaultClassNames.weekday\n        ),\n        week: cn(\"mt-2 flex w-full\", defaultClassNames.week),\n        week_number_header: cn(\n          \"w-[--cell-size] select-none\",\n          defaultClassNames.week_number_header\n        ),\n        week_number: cn(\n          \"text-muted-foreground select-none text-[0.8rem]\",\n          defaultClassNames.week_number\n        ),\n        day: cn(\n          \"group/day relative aspect-square h-full w-full select-none p-0 text-center [&:first-child[data-selected=true]_button]:rounded-l-md [&:last-child[data-selected=true]_button]:rounded-r-md\",\n          defaultClassNames.day\n        ),\n        range_start: cn(\n          \"bg-accent rounded-l-md\",\n          defaultClassNames.range_start\n        ),\n        range_middle: cn(\"rounded-none\", defaultClassNames.range_middle),\n        range_end: cn(\"bg-accent rounded-r-md\", defaultClassNames.range_end),\n        today: cn(\n          \"bg-accent text-accent-foreground rounded-md data-[selected=true]:rounded-none\",\n          defaultClassNames.today\n        ),\n        outside: cn(\n          \"text-muted-foreground aria-selected:text-muted-foreground\",\n          defaultClassNames.outside\n        ),\n        disabled: cn(\n          \"text-muted-foreground opacity-50\",\n          defaultClassNames.disabled\n        ),\n        hidden: cn(\"invisible\", defaultClassNames.hidden),\n        ...classNames,\n      }}\n      components={{\n        Root: ({ className, rootRef, ...props }) => {\n          return (\n            <div\n              data-slot=\"calendar\"\n              ref={rootRef}\n              className={cn(className)}\n              {...props}\n            />\n          )\n        },\n        Chevron: ({ className, orientation, ...props }) => {\n          if (orientation === \"left\") {\n            return (\n              <ChevronLeftIcon className={cn(\"size-4\", className)} {...props} />\n            )\n          }\n\n          if (orientation === \"right\") {\n            return (\n              <ChevronRightIcon\n                className={cn(\"size-4\", className)}\n                {...props}\n              />\n            )\n          }\n\n          return (\n            <ChevronDownIcon className={cn(\"size-4\", className)} {...props} />\n          )\n        },\n        DayButton: CalendarDayButton,\n        WeekNumber: ({ children, ...props }) => {\n          return (\n            <td {...props}>\n              <div className=\"flex size-[--cell-size] items-center justify-center text-center\">\n                {children}\n              </div>\n            </td>\n          )\n        },\n        ...components,\n      }}\n      {...props}\n    />\n  )\n}\n\nfunction CalendarDayButton({\n  className,\n  day,\n  modifiers,\n  ...props\n}: React.ComponentProps<typeof DayButton>) {\n  const defaultClassNames = getDefaultClassNames()\n\n  const ref = React.useRef<HTMLButtonElement>(null)\n  React.useEffect(() => {\n    if (modifiers.focused) ref.current?.focus()\n  }, [modifiers.focused])\n\n  return (\n    <Button\n      ref={ref}\n      variant=\"ghost\"\n      size=\"icon\"\n      data-day={day.date.toLocaleDateString()}\n      data-selected-single={\n        modifiers.selected &&\n        !modifiers.range_start &&\n        !modifiers.range_end &&\n        !modifiers.range_middle\n      }\n      data-range-start={modifiers.range_start}\n      data-range-end={modifiers.range_end}\n      data-range-middle={modifiers.range_middle}\n      className={cn(\n        \"data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 flex aspect-square h-auto w-full min-w-[--cell-size] flex-col gap-1 font-normal leading-none data-[range-end=true]:rounded-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] [&>span]:text-xs [&>span]:opacity-70\",\n        defaultClassNames.day,\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Calendar, CalendarDayButton }\n","path":null,"size_bytes":7567,"size_tokens":null},"client/src/App.tsx":{"content":"import React, { Suspense, useEffect } from \"react\";\nimport { Switch, Route, useLocation } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/sonner\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { AuthProvider, useAuth } from \"@/hooks/use-auth\";\nimport { LanguageProvider } from \"@/hooks/use-language\";\nimport { ThemeProvider } from \"@/hooks/use-theme\";\nimport { Loader2 } from \"lucide-react\";\n\n// Lazy Load Pages for Performance\nconst LandingPage = React.lazy(() => import(\"@/pages/landing\"));\nconst Dashboard = React.lazy(() => import(\"@/pages/dashboard-crm\"));\nconst TipsPage = React.lazy(() => import(\"@/pages/tips\"));\nconst LivePage = React.lazy(() => import(\"@/pages/live\"));\nconst PreGamePage = React.lazy(() => import(\"@/pages/pregame\"));\nconst SettingsPage = React.lazy(() => import(\"@/pages/settings\"));\nconst Admin = React.lazy(() => import(\"@/pages/admin\"));\nconst AuthPage = React.lazy(() => import(\"@/pages/auth\"));\nconst TermsPage = React.lazy(() => import(\"@/pages/terms\"));\nconst PrivacyPage = React.lazy(() => import(\"@/pages/privacy\"));\nconst RiskDisclaimerPage = React.lazy(() => import(\"@/pages/risk-disclaimer\"));\nconst PricingPage = React.lazy(() => import(\"@/pages/pricing\"));\nconst CheckoutPage = React.lazy(() => import(\"@/pages/checkout\"));\nconst ThankYouPage = React.lazy(() => import(\"@/pages/thank-you\"));\nconst SubscriptionPage = React.lazy(() => import(\"@/pages/subscription\"));\nconst ComingSoonPage = React.lazy(() => import(\"@/pages/coming-soon\"));\nconst GestaoPage = React.lazy(() => import(\"@/pages/gestao\"));\nconst HotMatchesPage = React.lazy(() => import(\"@/pages/hot-matches\"));\nconst VideoPromoPage = React.lazy(() => import(\"@/pages/video-promo\"));\nconst NotFound = React.lazy(() => import(\"@/pages/not-found\"));\n\n// Import access control and paywall\nimport { useAccessControl } from \"@/hooks/use-access-control\";\nimport { LockedScreen } from \"@/components/paywall/locked-screen\";\nimport { LoadingScreen } from \"@/components/loading-screen\";\n\nfunction ProtectedRoute({ component: Component, adminOnly = false }: { component: React.ComponentType<any>, adminOnly?: boolean }) {\n  const { user, isLoading } = useAuth();\n  const { isLocked } = useAccessControl();\n  const [, setLocation] = useLocation();\n\n  // Check if there's a user in localStorage (backup during state transitions)\n  const hasLocalStorageUser = () => {\n    try {\n      const stored = localStorage.getItem('vantage_user');\n      if (stored) {\n        const parsed = JSON.parse(stored);\n        return !!(parsed.id && parsed.email);\n      }\n    } catch {\n      return false;\n    }\n    return false;\n  };\n\n  useEffect(() => {\n    // Only redirect if not loading, no user, AND no localStorage backup\n    if (!isLoading && !user && !hasLocalStorageUser()) {\n      setLocation(\"/auth\");\n    } else if (!isLoading && user && adminOnly && user.role !== 'admin' && user.email !== 'kwillianferreira@gmail.com') {\n      setLocation(\"/app\");\n    }\n  }, [user, isLoading, adminOnly, setLocation]);\n\n  // Show loading if still loading OR if we have a localStorage user (recovery in progress)\n  if (isLoading || (!user && hasLocalStorageUser())) {\n    return <LoadingScreen />;\n  }\n\n  // No user and no localStorage backup - redirect will happen in useEffect\n  if (!user) {\n    return <LoadingScreen />;\n  }\n\n  // Show paywall if user's trial has expired (admins bypass)\n  if (isLocked && user.role !== 'admin') {\n    return <LockedScreen />;\n  }\n\n  if (adminOnly && user.role !== 'admin' && user.email !== 'kwillianferreira@gmail.com') {\n    return null; // Will redirect in useEffect\n  }\n\n  return <Component />;\n}\n\nfunction Router() {\n  return (\n    <Switch>\n      {/* Public Routes */}\n      <Route path=\"/\" component={LandingPage} />\n      <Route path=\"/auth\" component={AuthPage} />\n      <Route path=\"/terms\" component={TermsPage} />\n      <Route path=\"/privacy\" component={PrivacyPage} />\n      <Route path=\"/risk-disclaimer\" component={RiskDisclaimerPage} />\n      <Route path=\"/pricing\" component={PricingPage} />\n      <Route path=\"/video-promo\" component={VideoPromoPage} />\n      \n      {/* Protected Routes */}\n      <Route path=\"/app\">\n        {() => <ProtectedRoute component={Dashboard} />}\n      </Route>\n      <Route path=\"/dashboard\">\n        {() => <ProtectedRoute component={Dashboard} />}\n      </Route>\n      <Route path=\"/tips\">\n        {() => <ProtectedRoute component={TipsPage} />}\n      </Route>\n      <Route path=\"/live\">\n        {() => <ProtectedRoute component={LivePage} />}\n      </Route>\n      <Route path=\"/pregame\">\n        {() => <ProtectedRoute component={PreGamePage} />}\n      </Route>\n      <Route path=\"/settings\">\n        {() => <ProtectedRoute component={SettingsPage} />}\n      </Route>\n      <Route path=\"/checkout\">\n        {() => <ProtectedRoute component={CheckoutPage} />}\n      </Route>\n      <Route path=\"/obrigado\">\n        {() => <ProtectedRoute component={ThankYouPage} />}\n      </Route>\n      <Route path=\"/assinatura\">\n        {() => <ProtectedRoute component={SubscriptionPage} />}\n      </Route>\n      <Route path=\"/coming-soon\">\n        {() => <ProtectedRoute component={ComingSoonPage} />}\n      </Route>\n      <Route path=\"/gestao\">\n        {() => <ProtectedRoute component={GestaoPage} />}\n      </Route>\n      <Route path=\"/hot-matches\">\n        {() => <ProtectedRoute component={HotMatchesPage} />}\n      </Route>\n      <Route path=\"/admin\">\n        {() => <ProtectedRoute component={Admin} adminOnly={true} />}\n      </Route>\n      \n      <Route component={NotFound} />\n    </Switch>\n  );\n}\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <ThemeProvider>\n        <LanguageProvider>\n          <AuthProvider>\n            <TooltipProvider>\n              <Suspense fallback={<LoadingScreen />}>\n                <Router />\n                <Toaster position=\"top-right\" closeButton richColors />\n              </Suspense>\n            </TooltipProvider>\n          </AuthProvider>\n        </LanguageProvider>\n      </ThemeProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","path":null,"size_bytes":6209,"size_tokens":null},"client/src/components/ui/sonner.tsx":{"content":"\"use client\"\n\nimport { useTheme } from \"next-themes\"\nimport { Toaster as Sonner } from \"sonner\"\n\ntype ToasterProps = React.ComponentProps<typeof Sonner>\n\nconst Toaster = ({ ...props }: ToasterProps) => {\n  const { theme = \"system\" } = useTheme()\n\n  return (\n    <Sonner\n      theme={theme as ToasterProps[\"theme\"]}\n      className=\"toaster group\"\n      toastOptions={{\n        classNames: {\n          toast:\n            \"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg\",\n          description: \"group-[.toast]:text-muted-foreground\",\n          actionButton:\n            \"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground\",\n          cancelButton:\n            \"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground\",\n        },\n      }}\n      {...props}\n    />\n  )\n}\n\nexport { Toaster }\n","path":null,"size_bytes":894,"size_tokens":null},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-gray-300 dark:border-[#33b864]/20 bg-white dark:bg-[#121212] text-black dark:text-white px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-400 dark:placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-primary disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","path":null,"size_bytes":840,"size_tokens":null},"client/src/lib/tips-service.ts":{"content":"import { Signal } from \"./mock-data\";\nimport axios from \"axios\";\n\n// SECURITY: Get admin credentials from localStorage (set during login)\nconst getAdminCredentials = (): { email: string | null; userId: string | null } => {\n  try {\n    const userStr = localStorage.getItem('vantage_user');\n    if (userStr) {\n      const user = JSON.parse(userStr);\n      return { email: user.email || null, userId: user.id || null };\n    }\n  } catch (e) {\n    console.error('Error getting admin credentials:', e);\n  }\n  return { email: null, userId: null };\n};\n\nexport const tipsService = {\n  getAll: async (): Promise<Signal[]> => {\n    try {\n      const response = await axios.get('/api/tips');\n      const tips = response.data.tips || [];\n      \n      // Map backend tip format to frontend Signal format\n      // Supports both Drizzle camelCase and legacy snake_case\n      return tips.map((tip: any) => {\n        // Parse legs JSON if it's a string\n        let parsedLegs = undefined;\n        if (tip.legs) {\n          try {\n            parsedLegs = typeof tip.legs === 'string' ? JSON.parse(tip.legs) : tip.legs;\n          } catch {\n            parsedLegs = undefined;\n          }\n        }\n        \n        return {\n          id: tip.id,\n          league: tip.league || '',\n          homeTeam: tip.homeTeam || tip.home_team || '',\n          awayTeam: tip.awayTeam || tip.away_team || '',\n          homeTeamLogo: tip.homeTeamLogo || tip.home_team_logo || undefined,\n          awayTeamLogo: tip.awayTeamLogo || tip.away_team_logo || undefined,\n          matchTime: tip.matchTime || tip.match_time || undefined,\n          market: tip.market,\n          odd: Number(tip.odd) || 0,\n          stake: Number(tip.stake) || 1.0,\n          status: tip.status,\n          timestamp: tip.createdAt || tip.created_at,\n          betLink: tip.betLink || tip.bet_link || undefined,\n          isLive: tip.isLive !== undefined ? tip.isLive : (tip.is_live || false),\n          isFree: tip.isFree !== undefined ? tip.isFree : (tip.is_free || false),\n          fixtureId: tip.fixtureId || tip.fixture_id ? String(tip.fixtureId || tip.fixture_id) : undefined,\n          imageUrl: tip.imageUrl || tip.image_url || undefined,\n          // Combo support\n          isCombo: tip.isCombo || tip.is_combo || false,\n          totalOdd: tip.totalOdd ? Number(tip.totalOdd) : (tip.total_odd ? Number(tip.total_odd) : undefined),\n          legs: parsedLegs,\n          // AI Analysis fields\n          analysisRationale: tip.analysisRationale || tip.analysis_rationale || undefined,\n          analysisSummary: tip.analysisSummary || tip.analysis_summary || undefined,\n          confidence: tip.confidence ? Number(tip.confidence) : undefined,\n          probability: tip.probability ? Number(tip.probability) : undefined,\n          expectedValue: tip.expectedValue ? Number(tip.expectedValue) : (tip.expected_value ? Number(tip.expected_value) : undefined),\n          aiSourceId: tip.aiSourceId || tip.ai_source_id || undefined,\n        };\n      });\n    } catch (error: any) {\n      throw new Error(error.response?.data?.error || 'Erro ao carregar tips');\n    }\n  },\n\n  // SECURITY: Requires admin credentials for authorization\n  create: async (tip: Omit<Signal, 'id' | 'timestamp'>): Promise<Signal> => {\n    try {\n      const { email, userId } = getAdminCredentials();\n      const response = await axios.post('/api/tips', {\n        homeTeam: tip.homeTeam,\n        awayTeam: tip.awayTeam,\n        homeTeamLogo: tip.homeTeamLogo || null,\n        awayTeamLogo: tip.awayTeamLogo || null,\n        matchTime: tip.matchTime || null,\n        league: tip.league,\n        market: tip.market,\n        odd: tip.odd.toString(),\n        stake: (tip.stake || 1.0).toString(),\n        status: tip.status || 'pending',\n        betLink: tip.betLink || null,\n        isLive: tip.isLive || false,\n        fixtureId: tip.fixtureId || null,\n        imageUrl: tip.imageUrl || null,\n        analysisSummary: tip.analysisSummary || null,\n        // Combo support\n        isCombo: tip.isCombo || false,\n        legs: tip.legs ? JSON.stringify(tip.legs) : null,\n        totalOdd: tip.totalOdd ? tip.totalOdd.toString() : null,\n        adminEmail: email, // SECURITY: Send admin email + userId\n        adminUserId: userId,\n      });\n      \n      const data = response.data.tip;\n      \n      // Parse legs JSON if it's a string\n      let parsedLegs = undefined;\n      if (data.legs) {\n        try {\n          parsedLegs = typeof data.legs === 'string' ? JSON.parse(data.legs) : data.legs;\n        } catch {\n          parsedLegs = undefined;\n        }\n      }\n      \n      return {\n        id: data.id,\n        league: data.league || '',\n        homeTeam: data.homeTeam || '',\n        awayTeam: data.awayTeam || '',\n        homeTeamLogo: data.homeTeamLogo || undefined,\n        awayTeamLogo: data.awayTeamLogo || undefined,\n        matchTime: data.matchTime || undefined,\n        market: data.market,\n        odd: parseFloat(data.odd),\n        stake: parseFloat(data.stake) || 1.0,\n        status: data.status,\n        timestamp: data.createdAt,\n        betLink: data.betLink,\n        isLive: data.isLive,\n        fixtureId: data.fixtureId,\n        imageUrl: data.imageUrl || undefined,\n        // Combo support\n        isCombo: data.isCombo || false,\n        totalOdd: data.totalOdd ? Number(data.totalOdd) : undefined,\n        legs: parsedLegs,\n      };\n    } catch (error: any) {\n      throw new Error(error.response?.data?.error || 'Erro ao criar tip');\n    }\n  },\n\n  // SECURITY: Requires admin credentials for authorization\n  updateStatus: async (id: string, status: Signal['status']): Promise<void> => {\n    try {\n      const { email, userId } = getAdminCredentials();\n      await axios.patch(`/api/tips/${id}/status`, { \n        status,\n        adminEmail: email,\n        adminUserId: userId,\n      });\n    } catch (error: any) {\n      throw new Error(error.response?.data?.error || 'Erro ao atualizar status');\n    }\n  },\n\n  // SECURITY: Requires admin credentials for authorization\n  delete: async (id: string): Promise<void> => {\n    try {\n      const { email, userId } = getAdminCredentials();\n      await axios.delete(`/api/tips/${id}?adminEmail=${encodeURIComponent(email || '')}&adminUserId=${encodeURIComponent(userId || '')}`);\n    } catch (error: any) {\n      throw new Error(error.response?.data?.error || 'Erro ao deletar tip');\n    }\n  },\n};\n","path":null,"size_bytes":6385,"size_tokens":null},"shared/schema.ts":{"content":"import { sql } from \"drizzle-orm\";\nimport { pgTable, text, varchar, decimal, timestamp, boolean, uuid } from \"drizzle-orm/pg-core\";\nimport { createInsertSchema, createSelectSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\n// Profiles table - User profiles with authentication data\nexport const profiles = pgTable(\"profiles\", {\n  id: uuid(\"id\").primaryKey().defaultRandom(),\n  email: text(\"email\").notNull().unique(),\n  passwordHash: text(\"password_hash\").notNull(),\n  firstName: text(\"first_name\").notNull(),\n  role: text(\"role\", { enum: [\"user\", \"admin\"] }).notNull().default(\"user\"),\n  subscriptionStatus: text(\"subscription_status\", { enum: [\"trial\", \"active\", \"expired\"] }).notNull().default(\"trial\"),\n  trialStartDate: timestamp(\"trial_start_date\").notNull().defaultNow(),\n  mercadopagoSubscriptionId: text(\"mercadopago_subscription_id\"),\n  mercadopagoCustomerId: text(\"mercadopago_customer_id\"),\n  subscriptionActivatedAt: timestamp(\"subscription_activated_at\"),\n  subscriptionEndsAt: timestamp(\"subscription_ends_at\"),\n  termsAcceptedAt: timestamp(\"terms_accepted_at\"),\n  privacyAcceptedAt: timestamp(\"privacy_accepted_at\"),\n  riskDisclaimerAcceptedAt: timestamp(\"risk_disclaimer_accepted_at\"),\n  // Bankroll Management Fields\n  bankrollInitial: decimal(\"bankroll_initial\", { precision: 12, scale: 2 }),\n  riskProfile: text(\"risk_profile\", { enum: [\"conservador\", \"moderado\", \"agressivo\"] }),\n  unitValue: decimal(\"unit_value\", { precision: 10, scale: 2 }),\n  // User Preferences\n  hasCompletedTour: boolean(\"has_completed_tour\").notNull().default(false),\n  preferredTheme: text(\"preferred_theme\", { enum: [\"dark\", \"light\"] }).default(\"dark\"),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\n// Favorites table - User saved tips\nexport const favorites = pgTable(\"favorites\", {\n  id: uuid(\"id\").primaryKey().defaultRandom(),\n  userId: uuid(\"user_id\").notNull().references(() => profiles.id, { onDelete: \"cascade\" }),\n  tipId: uuid(\"tip_id\").notNull().references(() => tips.id, { onDelete: \"cascade\" }),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\nexport const insertFavoriteSchema = createInsertSchema(favorites).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport type InsertFavorite = z.infer<typeof insertFavoriteSchema>;\nexport type Favorite = typeof favorites.$inferSelect;\n\n// User Bets - Track individual user entries and results\nexport const userBets = pgTable(\"user_bets\", {\n  id: uuid(\"id\").primaryKey().defaultRandom(),\n  userId: uuid(\"user_id\").notNull().references(() => profiles.id, { onDelete: \"cascade\" }),\n  tipId: uuid(\"tip_id\").notNull().references(() => tips.id, { onDelete: \"cascade\" }),\n  enteredAt: timestamp(\"entered_at\").notNull().defaultNow(),\n  result: text(\"result\", { enum: [\"pending\", \"green\", \"red\"] }).notNull().default(\"pending\"),\n  resultMarkedAt: timestamp(\"result_marked_at\"),\n  stakeUsed: decimal(\"stake_used\", { precision: 5, scale: 2 }).notNull().default(\"1.0\"),\n  oddAtEntry: decimal(\"odd_at_entry\", { precision: 5, scale: 2 }).notNull(),\n  profit: decimal(\"profit\", { precision: 10, scale: 2 }),\n});\n\nexport const insertUserBetSchema = createInsertSchema(userBets).omit({\n  id: true,\n  enteredAt: true,\n});\n\nexport type InsertUserBet = z.infer<typeof insertUserBetSchema>;\nexport type UserBet = typeof userBets.$inferSelect;\n\nexport const insertProfileSchema = createInsertSchema(profiles).omit({\n  id: true,\n  createdAt: true,\n  passwordHash: true,\n});\n\nexport const selectProfileSchema = createSelectSchema(profiles);\n\nexport type InsertProfile = z.infer<typeof insertProfileSchema>;\nexport type Profile = typeof profiles.$inferSelect;\n\n// Tips table - Betting signals/tips\nexport const tips = pgTable(\"tips\", {\n  id: uuid(\"id\").primaryKey().defaultRandom(),\n  fixtureId: text(\"fixture_id\"),\n  league: text(\"league\").notNull(),\n  homeTeam: text(\"home_team\").notNull(),\n  awayTeam: text(\"away_team\").notNull(),\n  homeTeamLogo: text(\"home_team_logo\"),\n  awayTeamLogo: text(\"away_team_logo\"),\n  matchTime: text(\"match_time\"),\n  market: text(\"market\").notNull(),\n  odd: decimal(\"odd\", { precision: 5, scale: 2 }).notNull(),\n  stake: decimal(\"stake\", { precision: 3, scale: 1 }).notNull().default(\"1.0\"),\n  status: text(\"status\", { enum: [\"pending\", \"green\", \"red\"] }).notNull().default(\"pending\"),\n  betLink: text(\"bet_link\"),\n  imageUrl: text(\"image_url\"),\n  isLive: boolean(\"is_live\").notNull().default(false),\n  // Free tip - visible to non-premium users\n  isFree: boolean(\"is_free\").notNull().default(false),\n  // Combo bet fields\n  isCombo: boolean(\"is_combo\").notNull().default(false),\n  totalOdd: decimal(\"total_odd\", { precision: 6, scale: 2 }),\n  legs: text(\"legs\"), // JSON array of BetLeg for combo bets\n  // AI Analysis fields (from AI prediction engine)\n  analysisRationale: text(\"analysis_rationale\"), // JSON with detailed reasoning\n  analysisSummary: text(\"analysis_summary\"), // Short summary text\n  confidence: decimal(\"confidence\", { precision: 5, scale: 2 }), // 0-100%\n  probability: decimal(\"probability\", { precision: 5, scale: 2 }), // Calculated probability\n  expectedValue: decimal(\"expected_value\", { precision: 6, scale: 2 }), // EV percentage\n  homeGoalsAvg: decimal(\"home_goals_avg\", { precision: 4, scale: 2 }), // Home team avg goals\n  awayGoalsAvg: decimal(\"away_goals_avg\", { precision: 4, scale: 2 }), // Away team avg goals\n  aiSourceId: uuid(\"ai_source_id\"), // Reference to ai_tickets.id\n  // Settlement fields\n  settledAt: timestamp(\"settled_at\"), // When result was verified\n  resultProfit: decimal(\"result_profit\", { precision: 8, scale: 2 }), // Profit/loss from this tip\n  createdBy: uuid(\"created_by\").references(() => profiles.id),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n  updatedAt: timestamp(\"updated_at\").notNull().defaultNow(),\n});\n\nexport const insertTipSchema = createInsertSchema(tips).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\nexport const selectTipSchema = createSelectSchema(tips);\n\nexport type InsertTip = z.infer<typeof insertTipSchema>;\nexport type Tip = typeof tips.$inferSelect;\n\n// =====================================================\n// AI PREDICTION ENGINE TABLES\n// =====================================================\n\n// Team Match Stats - Cached statistics from last 10 matches per team\nexport const teamMatchStats = pgTable(\"team_match_stats\", {\n  id: uuid(\"id\").primaryKey().defaultRandom(),\n  teamId: text(\"team_id\").notNull(),\n  teamName: text(\"team_name\").notNull(),\n  teamLogo: text(\"team_logo\"),\n  leagueId: text(\"league_id\").notNull(),\n  leagueName: text(\"league_name\").notNull(),\n  season: text(\"season\").notNull(),\n  \n  // Aggregated stats from last 10 matches\n  matchesAnalyzed: decimal(\"matches_analyzed\", { precision: 3, scale: 0 }).notNull().default(\"10\"),\n  \n  // Goals stats\n  goalsScored: decimal(\"goals_scored\", { precision: 5, scale: 2 }).notNull().default(\"0\"),\n  goalsConceded: decimal(\"goals_conceded\", { precision: 5, scale: 2 }).notNull().default(\"0\"),\n  goalsScoredHome: decimal(\"goals_scored_home\", { precision: 5, scale: 2 }).notNull().default(\"0\"),\n  goalsConcededHome: decimal(\"goals_conceded_home\", { precision: 5, scale: 2 }).notNull().default(\"0\"),\n  goalsScoredAway: decimal(\"goals_scored_away\", { precision: 5, scale: 2 }).notNull().default(\"0\"),\n  goalsConcededAway: decimal(\"goals_conceded_away\", { precision: 5, scale: 2 }).notNull().default(\"0\"),\n  \n  // Over/Under percentages (based on last 10 games)\n  over05Pct: decimal(\"over_05_pct\", { precision: 5, scale: 2 }).notNull().default(\"0\"),\n  over15Pct: decimal(\"over_15_pct\", { precision: 5, scale: 2 }).notNull().default(\"0\"),\n  over25Pct: decimal(\"over_25_pct\", { precision: 5, scale: 2 }).notNull().default(\"0\"),\n  over35Pct: decimal(\"over_35_pct\", { precision: 5, scale: 2 }).notNull().default(\"0\"),\n  \n  // BTTS (Both Teams To Score)\n  bttsPct: decimal(\"btts_pct\", { precision: 5, scale: 2 }).notNull().default(\"0\"),\n  \n  // Clean sheets and failed to score\n  cleanSheetPct: decimal(\"clean_sheet_pct\", { precision: 5, scale: 2 }).notNull().default(\"0\"),\n  failedToScorePct: decimal(\"failed_to_score_pct\", { precision: 5, scale: 2 }).notNull().default(\"0\"),\n  \n  // First half stats\n  goalsFirstHalf: decimal(\"goals_first_half\", { precision: 5, scale: 2 }).notNull().default(\"0\"),\n  goalsConcededFirstHalf: decimal(\"goals_conceded_first_half\", { precision: 5, scale: 2 }).notNull().default(\"0\"),\n  \n  // Form (W/D/L from last 5)\n  formWins: decimal(\"form_wins\", { precision: 3, scale: 0 }).notNull().default(\"0\"),\n  formDraws: decimal(\"form_draws\", { precision: 3, scale: 0 }).notNull().default(\"0\"),\n  formLosses: decimal(\"form_losses\", { precision: 3, scale: 0 }).notNull().default(\"0\"),\n  formPoints: decimal(\"form_points\", { precision: 3, scale: 0 }).notNull().default(\"0\"),\n  \n  // Corners and cards\n  avgCorners: decimal(\"avg_corners\", { precision: 5, scale: 2 }).notNull().default(\"0\"),\n  avgCards: decimal(\"avg_cards\", { precision: 5, scale: 2 }).notNull().default(\"0\"),\n  \n  // Raw fixture IDs used for analysis (JSON array)\n  sourceFixtureIds: text(\"source_fixture_ids\"),\n  \n  updatedAt: timestamp(\"updated_at\").notNull().defaultNow(),\n});\n\nexport const insertTeamMatchStatsSchema = createInsertSchema(teamMatchStats).omit({\n  id: true,\n  updatedAt: true,\n});\n\nexport type InsertTeamMatchStats = z.infer<typeof insertTeamMatchStatsSchema>;\nexport type TeamMatchStats = typeof teamMatchStats.$inferSelect;\n\n// AI Generated Tickets - Draft predictions waiting for admin approval\nexport const aiTickets = pgTable(\"ai_tickets\", {\n  id: uuid(\"id\").primaryKey().defaultRandom(),\n  \n  // Match info\n  fixtureId: text(\"fixture_id\").notNull(),\n  league: text(\"league\").notNull(),\n  leagueId: text(\"league_id\"),\n  homeTeam: text(\"home_team\").notNull(),\n  awayTeam: text(\"away_team\").notNull(),\n  homeTeamId: text(\"home_team_id\").notNull(),\n  awayTeamId: text(\"away_team_id\").notNull(),\n  homeTeamLogo: text(\"home_team_logo\"),\n  awayTeamLogo: text(\"away_team_logo\"),\n  matchTime: timestamp(\"match_time\").notNull(),\n  \n  // Prediction\n  market: text(\"market\").notNull(), // Over 2.5, BTTS Yes, Home Win, etc\n  predictedOutcome: text(\"predicted_outcome\").notNull(),\n  suggestedOdd: decimal(\"suggested_odd\", { precision: 5, scale: 2 }).notNull(),\n  suggestedStake: decimal(\"suggested_stake\", { precision: 3, scale: 1 }).notNull().default(\"1.0\"),\n  \n  // Combo Support - multiple legs for combined bets\n  isCombo: boolean(\"is_combo\").notNull().default(false),\n  legs: text(\"legs\"), // JSON array of BetLeg objects\n  totalOdd: decimal(\"total_odd\", { precision: 6, scale: 2 }), // Combined odd (product of all leg odds)\n  \n  // AI Analysis\n  confidence: decimal(\"confidence\", { precision: 5, scale: 2 }).notNull(), // 0-100%\n  probability: decimal(\"probability\", { precision: 5, scale: 2 }).notNull(), // Calculated probability\n  expectedValue: decimal(\"expected_value\", { precision: 5, scale: 2 }), // EV calculation\n  \n  // Analysis breakdown (JSON)\n  analysisRationale: text(\"analysis_rationale\"), // JSON with detailed reasoning\n  homeTeamStats: text(\"home_team_stats\"), // JSON snapshot of home team stats\n  awayTeamStats: text(\"away_team_stats\"), // JSON snapshot of away team stats\n  h2hAnalysis: text(\"h2h_analysis\"), // JSON with head-to-head data\n  \n  // Feature scores (for transparency)\n  formScore: decimal(\"form_score\", { precision: 5, scale: 2 }),\n  goalTrendScore: decimal(\"goal_trend_score\", { precision: 5, scale: 2 }),\n  h2hScore: decimal(\"h2h_score\", { precision: 5, scale: 2 }),\n  \n  // Status\n  status: text(\"status\", { \n    enum: [\"draft\", \"approved\", \"rejected\", \"published\", \"expired\"] \n  }).notNull().default(\"draft\"),\n  \n  // Admin actions\n  reviewedBy: uuid(\"reviewed_by\").references(() => profiles.id),\n  reviewedAt: timestamp(\"reviewed_at\"),\n  reviewNotes: text(\"review_notes\"),\n  \n  // Link to published tip (if approved and published)\n  publishedTipId: uuid(\"published_tip_id\").references(() => tips.id),\n  \n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n  updatedAt: timestamp(\"updated_at\").notNull().defaultNow(),\n});\n\nexport const insertAiTicketSchema = createInsertSchema(aiTickets).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\nexport type InsertAiTicket = z.infer<typeof insertAiTicketSchema>;\nexport type AiTicket = typeof aiTickets.$inferSelect;\n\n// AI Analysis Cache - Store raw API responses to avoid rate limits\nexport const aiAnalysisCache = pgTable(\"ai_analysis_cache\", {\n  id: uuid(\"id\").primaryKey().defaultRandom(),\n  cacheKey: text(\"cache_key\").notNull().unique(), // e.g., \"team_stats_33_2024\"\n  cacheType: text(\"cache_type\", { \n    enum: [\"team_fixtures\", \"team_stats\", \"h2h\", \"fixture_stats\"] \n  }).notNull(),\n  data: text(\"data\").notNull(), // JSON stringified response\n  expiresAt: timestamp(\"expires_at\").notNull(),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\nexport const insertAiAnalysisCacheSchema = createInsertSchema(aiAnalysisCache).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport type InsertAiAnalysisCache = z.infer<typeof insertAiAnalysisCacheSchema>;\nexport type AiAnalysisCache = typeof aiAnalysisCache.$inferSelect;\n\n// =====================================================\n// LIVE PRESSURE MONITOR TABLES\n// =====================================================\n\n// Live Pressure Snapshots - Rolling window of live match pressure data\nexport const livePressureSnapshots = pgTable(\"live_pressure_snapshots\", {\n  id: uuid(\"id\").primaryKey().defaultRandom(),\n  fixtureId: text(\"fixture_id\").notNull(),\n  \n  // Match info\n  league: text(\"league\").notNull(),\n  leagueId: text(\"league_id\"),\n  homeTeam: text(\"home_team\").notNull(),\n  awayTeam: text(\"away_team\").notNull(),\n  homeTeamLogo: text(\"home_team_logo\"),\n  awayTeamLogo: text(\"away_team_logo\"),\n  \n  // Current match state\n  matchMinute: decimal(\"match_minute\", { precision: 3, scale: 0 }).notNull().default(\"0\"),\n  homeScore: decimal(\"home_score\", { precision: 2, scale: 0 }).notNull().default(\"0\"),\n  awayScore: decimal(\"away_score\", { precision: 2, scale: 0 }).notNull().default(\"0\"),\n  matchStatus: text(\"match_status\").notNull(), // 1H, 2H, HT, FT, etc\n  \n  // Live statistics (current totals)\n  homePossession: decimal(\"home_possession\", { precision: 5, scale: 2 }).notNull().default(\"50\"),\n  awayPossession: decimal(\"away_possession\", { precision: 5, scale: 2 }).notNull().default(\"50\"),\n  homeShotsTotal: decimal(\"home_shots_total\", { precision: 3, scale: 0 }).notNull().default(\"0\"),\n  awayShotsTotal: decimal(\"away_shots_total\", { precision: 3, scale: 0 }).notNull().default(\"0\"),\n  homeShotsOnTarget: decimal(\"home_shots_on_target\", { precision: 3, scale: 0 }).notNull().default(\"0\"),\n  awayShotsOnTarget: decimal(\"away_shots_on_target\", { precision: 3, scale: 0 }).notNull().default(\"0\"),\n  homeCorners: decimal(\"home_corners\", { precision: 3, scale: 0 }).notNull().default(\"0\"),\n  awayCorners: decimal(\"away_corners\", { precision: 3, scale: 0 }).notNull().default(\"0\"),\n  homeDangerousAttacks: decimal(\"home_dangerous_attacks\", { precision: 3, scale: 0 }).notNull().default(\"0\"),\n  awayDangerousAttacks: decimal(\"away_dangerous_attacks\", { precision: 3, scale: 0 }).notNull().default(\"0\"),\n  homeAttacks: decimal(\"home_attacks\", { precision: 3, scale: 0 }).notNull().default(\"0\"),\n  awayAttacks: decimal(\"away_attacks\", { precision: 3, scale: 0 }).notNull().default(\"0\"),\n  \n  // Calculated pressure metrics\n  homePressureIndex: decimal(\"home_pressure_index\", { precision: 5, scale: 2 }).notNull().default(\"0\"),\n  awayPressureIndex: decimal(\"away_pressure_index\", { precision: 5, scale: 2 }).notNull().default(\"0\"),\n  homeGoalProbability: decimal(\"home_goal_probability\", { precision: 5, scale: 2 }).notNull().default(\"0\"),\n  awayGoalProbability: decimal(\"away_goal_probability\", { precision: 5, scale: 2 }).notNull().default(\"0\"),\n  \n  // Pressure trends (delta from last snapshot)\n  homePressureDelta: decimal(\"home_pressure_delta\", { precision: 5, scale: 2 }).notNull().default(\"0\"),\n  awayPressureDelta: decimal(\"away_pressure_delta\", { precision: 5, scale: 2 }).notNull().default(\"0\"),\n  \n  // Alert status\n  alertTriggered: boolean(\"alert_triggered\").notNull().default(false),\n  alertType: text(\"alert_type\"), // \"home_pressure\", \"away_pressure\", \"imminent_goal\"\n  \n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\nexport const insertLivePressureSnapshotSchema = createInsertSchema(livePressureSnapshots).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport type InsertLivePressureSnapshot = z.infer<typeof insertLivePressureSnapshotSchema>;\nexport type LivePressureSnapshot = typeof livePressureSnapshots.$inferSelect;\n\n// Live Alerts - History of alerts sent for live matches\nexport const liveAlerts = pgTable(\"live_alerts\", {\n  id: uuid(\"id\").primaryKey().defaultRandom(),\n  fixtureId: text(\"fixture_id\").notNull(),\n  snapshotId: uuid(\"snapshot_id\").references(() => livePressureSnapshots.id),\n  \n  // Alert details\n  alertType: text(\"alert_type\", { \n    enum: [\"home_pressure\", \"away_pressure\", \"imminent_goal\", \"goal_scored\", \"pressure_surge\"] \n  }).notNull(),\n  teamSide: text(\"team_side\", { enum: [\"home\", \"away\"] }).notNull(),\n  pressureIndex: decimal(\"pressure_index\", { precision: 5, scale: 2 }).notNull(),\n  goalProbability: decimal(\"goal_probability\", { precision: 5, scale: 2 }).notNull(),\n  \n  // Message sent\n  alertTitle: text(\"alert_title\").notNull(),\n  alertMessage: text(\"alert_message\").notNull(),\n  \n  // Match context at alert time\n  matchMinute: decimal(\"match_minute\", { precision: 3, scale: 0 }).notNull(),\n  currentScore: text(\"current_score\").notNull(), // \"1-0\"\n  \n  // Notification tracking\n  notificationSent: boolean(\"notification_sent\").notNull().default(false),\n  notificationId: text(\"notification_id\"), // OneSignal notification ID\n  \n  // Outcome tracking (did goal happen within 5 min?)\n  goalScoredWithin5Min: boolean(\"goal_scored_within_5_min\"),\n  actualOutcome: text(\"actual_outcome\"), // \"goal_home\", \"goal_away\", \"no_goal\"\n  \n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\nexport const insertLiveAlertSchema = createInsertSchema(liveAlerts).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport type InsertLiveAlert = z.infer<typeof insertLiveAlertSchema>;\nexport type LiveAlert = typeof liveAlerts.$inferSelect;\n\n// Live Monitor Settings - Configurable thresholds per user/admin\nexport const liveMonitorSettings = pgTable(\"live_monitor_settings\", {\n  id: uuid(\"id\").primaryKey().defaultRandom(),\n  userId: uuid(\"user_id\").references(() => profiles.id),\n  \n  // Global or user-specific\n  isGlobal: boolean(\"is_global\").notNull().default(false),\n  \n  // Pressure thresholds\n  pressureAlertThreshold: decimal(\"pressure_alert_threshold\", { precision: 5, scale: 2 }).notNull().default(\"70\"), // Alert when pressure > 70%\n  pressureSurgeThreshold: decimal(\"pressure_surge_threshold\", { precision: 5, scale: 2 }).notNull().default(\"25\"), // Alert on +25% surge\n  sustainedPressureIntervals: decimal(\"sustained_pressure_intervals\", { precision: 2, scale: 0 }).notNull().default(\"2\"), // Require 2 consecutive intervals\n  \n  // Goal probability thresholds\n  goalProbabilityAlertThreshold: decimal(\"goal_probability_alert_threshold\", { precision: 5, scale: 2 }).notNull().default(\"75\"),\n  \n  // Notification preferences\n  enablePushNotifications: boolean(\"enable_push_notifications\").notNull().default(true),\n  enableSoundAlerts: boolean(\"enable_sound_alerts\").notNull().default(true),\n  \n  // Leagues to monitor (JSON array of league IDs, null = all)\n  monitoredLeagues: text(\"monitored_leagues\"),\n  \n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n  updatedAt: timestamp(\"updated_at\").notNull().defaultNow(),\n});\n\nexport const insertLiveMonitorSettingsSchema = createInsertSchema(liveMonitorSettings).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\nexport type InsertLiveMonitorSettings = z.infer<typeof insertLiveMonitorSettingsSchema>;\nexport type LiveMonitorSettings = typeof liveMonitorSettings.$inferSelect;\n\n// =====================================================\n// MULTI-BOT SYSTEM TABLES\n// =====================================================\n\n// Bot Strategy Configurations - Define different bot strategies\nexport const botStrategies = pgTable(\"bot_strategies\", {\n  id: uuid(\"id\").primaryKey().defaultRandom(),\n  \n  // Bot identification\n  strategyCode: text(\"strategy_code\").notNull().unique(), // \"home_favorite\", \"away_dominant\", etc\n  strategyName: text(\"strategy_name\").notNull(),\n  strategyDescription: text(\"strategy_description\"),\n  strategyIcon: text(\"strategy_icon\"), // Lucide icon name\n  strategyColor: text(\"strategy_color\"), // Hex color for UI\n  \n  // Bot parameters (JSON)\n  parameters: text(\"parameters\").notNull(), // JSON with strategy-specific thresholds\n  \n  // Strategy type\n  strategyType: text(\"strategy_type\", {\n    enum: [\"pre_live\", \"live_ht\", \"live_ft\", \"live_late\", \"special\"]\n  }).notNull().default(\"live_ft\"),\n  \n  // Timing windows (minutes range for live strategies)\n  minMinute: decimal(\"min_minute\", { precision: 3, scale: 0 }),\n  maxMinute: decimal(\"max_minute\", { precision: 3, scale: 0 }),\n  \n  // Required pressure/thresholds\n  minPressureThreshold: decimal(\"min_pressure_threshold\", { precision: 5, scale: 2 }),\n  minConfidenceThreshold: decimal(\"min_confidence_threshold\", { precision: 5, scale: 2 }).notNull().default(\"70\"),\n  \n  // Status\n  isActive: boolean(\"is_active\").notNull().default(true),\n  \n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n  updatedAt: timestamp(\"updated_at\").notNull().defaultNow(),\n});\n\nexport const insertBotStrategySchema = createInsertSchema(botStrategies).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\nexport type InsertBotStrategy = z.infer<typeof insertBotStrategySchema>;\nexport type BotStrategy = typeof botStrategies.$inferSelect;\n\n// Bot Signals - Individual signals generated by each bot\nexport const botSignals = pgTable(\"bot_signals\", {\n  id: uuid(\"id\").primaryKey().defaultRandom(),\n  \n  // Link to strategy\n  strategyId: uuid(\"strategy_id\").notNull().references(() => botStrategies.id),\n  strategyCode: text(\"strategy_code\").notNull(), // Denormalized for fast queries\n  \n  // Match info\n  fixtureId: text(\"fixture_id\").notNull(),\n  league: text(\"league\").notNull(),\n  leagueId: text(\"league_id\"),\n  homeTeam: text(\"home_team\").notNull(),\n  awayTeam: text(\"away_team\").notNull(),\n  homeTeamLogo: text(\"home_team_logo\"),\n  awayTeamLogo: text(\"away_team_logo\"),\n  \n  // Signal details\n  signalType: text(\"signal_type\", {\n    enum: [\"goal_ht\", \"goal_ft\", \"over_15\", \"over_25\", \"btts\", \"corners\", \"cards\", \"goal_now\"]\n  }).notNull(),\n  market: text(\"market\").notNull(), // \"Over 0.5 FT\", \"Over 1.5 2¬∫ Tempo\", etc\n  predictedOutcome: text(\"predicted_outcome\").notNull(),\n  \n  // Match state when signal was generated\n  signalMinute: decimal(\"signal_minute\", { precision: 3, scale: 0 }).notNull(),\n  scoreWhenGenerated: text(\"score_when_generated\").notNull(), // \"0-0\", \"1-0\", etc\n  matchStatus: text(\"match_status\").notNull(), // \"1H\", \"2H\", \"HT\"\n  \n  // Bot analysis metrics\n  pressureIndex: decimal(\"pressure_index\", { precision: 5, scale: 2 }),\n  confidenceScore: decimal(\"confidence_score\", { precision: 5, scale: 2 }).notNull(),\n  probabilityScore: decimal(\"probability_score\", { precision: 5, scale: 2 }),\n  \n  // Analysis rationale (JSON)\n  analysisData: text(\"analysis_data\"), // JSON with pressure metrics, stats, etc\n  \n  // Suggested bet\n  suggestedOdd: decimal(\"suggested_odd\", { precision: 5, scale: 2 }),\n  suggestedStake: decimal(\"suggested_stake\", { precision: 3, scale: 1 }).notNull().default(\"1.0\"),\n  \n  // Outcome tracking\n  signalStatus: text(\"signal_status\", {\n    enum: [\"pending\", \"hit\", \"miss\", \"void\", \"expired\"]\n  }).notNull().default(\"pending\"),\n  \n  // Final match result\n  finalScore: text(\"final_score\"), // \"2-1\"\n  resultAtExpiry: text(\"result_at_expiry\"), // Score when signal window expired\n  \n  // Timing for outcome validation\n  expiresAt: timestamp(\"expires_at\"), // When to check outcome\n  resolvedAt: timestamp(\"resolved_at\"),\n  \n  // Was published to users?\n  isPublished: boolean(\"is_published\").notNull().default(false),\n  publishedTipId: uuid(\"published_tip_id\").references(() => tips.id),\n  \n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n  updatedAt: timestamp(\"updated_at\").notNull().defaultNow(),\n});\n\nexport const insertBotSignalSchema = createInsertSchema(botSignals).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\nexport type InsertBotSignal = z.infer<typeof insertBotSignalSchema>;\nexport type BotSignal = typeof botSignals.$inferSelect;\n\n// Bot Performance Stats - Aggregated performance per strategy per period\nexport const botPerformanceStats = pgTable(\"bot_performance_stats\", {\n  id: uuid(\"id\").primaryKey().defaultRandom(),\n  \n  // Link to strategy\n  strategyId: uuid(\"strategy_id\").notNull().references(() => botStrategies.id),\n  strategyCode: text(\"strategy_code\").notNull(),\n  \n  // Period\n  periodType: text(\"period_type\", {\n    enum: [\"daily\", \"weekly\", \"monthly\", \"all_time\"]\n  }).notNull(),\n  periodDate: text(\"period_date\").notNull(), // \"2024-12-01\", \"2024-W48\", \"2024-12\", \"all\"\n  \n  // Counts\n  totalSignals: decimal(\"total_signals\", { precision: 6, scale: 0 }).notNull().default(\"0\"),\n  hitCount: decimal(\"hit_count\", { precision: 6, scale: 0 }).notNull().default(\"0\"),\n  missCount: decimal(\"miss_count\", { precision: 6, scale: 0 }).notNull().default(\"0\"),\n  voidCount: decimal(\"void_count\", { precision: 6, scale: 0 }).notNull().default(\"0\"),\n  pendingCount: decimal(\"pending_count\", { precision: 6, scale: 0 }).notNull().default(\"0\"),\n  \n  // Percentages\n  hitRate: decimal(\"hit_rate\", { precision: 5, scale: 2 }).notNull().default(\"0\"), // % of hits\n  roi: decimal(\"roi\", { precision: 7, scale: 2 }).notNull().default(\"0\"), // Return on investment\n  avgConfidence: decimal(\"avg_confidence\", { precision: 5, scale: 2 }).notNull().default(\"0\"),\n  avgOdd: decimal(\"avg_odd\", { precision: 5, scale: 2 }).notNull().default(\"0\"),\n  \n  // Profit/Loss tracking (assuming 1 unit per signal)\n  totalProfit: decimal(\"total_profit\", { precision: 10, scale: 2 }).notNull().default(\"0\"),\n  totalLoss: decimal(\"total_loss\", { precision: 10, scale: 2 }).notNull().default(\"0\"),\n  netProfit: decimal(\"net_profit\", { precision: 10, scale: 2 }).notNull().default(\"0\"),\n  \n  // Streaks\n  currentStreak: decimal(\"current_streak\", { precision: 4, scale: 0 }).notNull().default(\"0\"), // positive = wins, negative = losses\n  longestWinStreak: decimal(\"longest_win_streak\", { precision: 4, scale: 0 }).notNull().default(\"0\"),\n  longestLossStreak: decimal(\"longest_loss_streak\", { precision: 4, scale: 0 }).notNull().default(\"0\"),\n  \n  // League breakdown (JSON)\n  leagueBreakdown: text(\"league_breakdown\"), // JSON with per-league stats\n  \n  updatedAt: timestamp(\"updated_at\").notNull().defaultNow(),\n});\n\nexport const insertBotPerformanceStatsSchema = createInsertSchema(botPerformanceStats).omit({\n  id: true,\n  updatedAt: true,\n});\n\nexport type InsertBotPerformanceStats = z.infer<typeof insertBotPerformanceStatsSchema>;\nexport type BotPerformanceStats = typeof botPerformanceStats.$inferSelect;\n\n// =====================================================\n// TIP ANALYSIS & EV TABLES\n// =====================================================\n\n// Tip Analyses - Detailed analysis for each tip (1:1 with tips)\nexport const tipAnalyses = pgTable(\"tip_analyses\", {\n  id: uuid(\"id\").primaryKey().defaultRandom(),\n  tipId: uuid(\"tip_id\").notNull().references(() => tips.id, { onDelete: \"cascade\" }),\n  fixtureId: text(\"fixture_id\"),\n  \n  // Goals Analysis Section\n  goalsAnalysis: text(\"goals_analysis\"), // JSON: { over15Pct, over25Pct, over35Pct, avgGoals, reasoning }\n  \n  // Corners Analysis Section\n  cornersAnalysis: text(\"corners_analysis\"), // JSON: { over85Pct, over95Pct, avgCorners, reasoning }\n  \n  // H2H (Head-to-Head) Section\n  h2hAnalysis: text(\"h2h_analysis\"), // JSON: { totalMatches, homeWins, awayWins, draws, avgGoals, trends, reasoning }\n  \n  // Climate/Weather Impact\n  climateAnalysis: text(\"climate_analysis\"), // JSON: { temperature, humidity, windSpeed, condition, impact, reasoning }\n  \n  // Tactical Insights Section\n  tacticalInsights: text(\"tactical_insights\"), // JSON array: [{ title, description, highlighted }]\n  \n  // Final Recommendation\n  finalRecommendation: text(\"final_recommendation\"), // Summary text with market suggestions\n  \n  // Data Sources & Metadata\n  dataSources: text(\"data_sources\"), // JSON array: [\"API-Football\", \"Historical Data\", etc]\n  analysisVersion: text(\"analysis_version\").notNull().default(\"1.0\"),\n  \n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n  updatedAt: timestamp(\"updated_at\").notNull().defaultNow(),\n});\n\nexport const insertTipAnalysisSchema = createInsertSchema(tipAnalyses).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\nexport type InsertTipAnalysis = z.infer<typeof insertTipAnalysisSchema>;\nexport type TipAnalysis = typeof tipAnalyses.$inferSelect;\n\n// Tip Market Recommendations - Multiple EV-backed market suggestions per tip (1:N with tips)\nexport const tipMarketRecommendations = pgTable(\"tip_market_recommendations\", {\n  id: uuid(\"id\").primaryKey().defaultRandom(),\n  tipId: uuid(\"tip_id\").notNull().references(() => tips.id, { onDelete: \"cascade\" }),\n  analysisId: uuid(\"analysis_id\").references(() => tipAnalyses.id, { onDelete: \"cascade\" }),\n  \n  // Market Details\n  marketType: text(\"market_type\").notNull(), // \"over_25\", \"btts_yes\", \"home_win\", \"corners_over_85\", etc\n  marketLabel: text(\"market_label\").notNull(), // \"Mais de 2.5 Gols\", \"Ambas Marcam - Sim\", etc\n  selection: text(\"selection\").notNull(), // The actual bet selection\n  \n  // Odds & Probabilities\n  bookmakerOdd: decimal(\"bookmaker_odd\", { precision: 5, scale: 2 }).notNull(), // Odd from bookmaker (e.g., 1.85)\n  modelProbability: decimal(\"model_probability\", { precision: 5, scale: 2 }).notNull(), // Our calculated probability (0-100)\n  fairOdd: decimal(\"fair_odd\", { precision: 5, scale: 2 }).notNull(), // Fair odd = 100 / probability\n  \n  // Expected Value\n  evPercent: decimal(\"ev_percent\", { precision: 6, scale: 2 }).notNull(), // EV% = ((prob/100 * odd) - 1) * 100\n  evRating: text(\"ev_rating\", { enum: [\"negative\", \"neutral\", \"positive\", \"excellent\"] }).notNull().default(\"neutral\"),\n  \n  // Stake Recommendation\n  suggestedStake: decimal(\"suggested_stake\", { precision: 3, scale: 1 }).notNull().default(\"1.0\"), // Units to stake\n  kellyStake: decimal(\"kelly_stake\", { precision: 5, scale: 2 }), // Kelly criterion stake\n  \n  // Reasoning\n  rationale: text(\"rationale\"), // JSON array: [\"Strong home form\", \"H2H favors over\", etc]\n  confidenceLevel: text(\"confidence_level\", { enum: [\"low\", \"medium\", \"high\", \"very_high\"] }).notNull().default(\"medium\"),\n  \n  // Status\n  isMainPick: boolean(\"is_main_pick\").notNull().default(false), // Is this the primary recommendation?\n  isValueBet: boolean(\"is_value_bet\").notNull().default(false), // EV > 5%?\n  \n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\nexport const insertTipMarketRecommendationSchema = createInsertSchema(tipMarketRecommendations).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport type InsertTipMarketRecommendation = z.infer<typeof insertTipMarketRecommendationSchema>;\nexport type TipMarketRecommendation = typeof tipMarketRecommendations.$inferSelect;\n\n// Zod schemas for JSON fields\nexport const goalsAnalysisSchema = z.object({\n  over15Pct: z.number(),\n  over25Pct: z.number(),\n  over35Pct: z.number(),\n  avgGoalsHome: z.number(),\n  avgGoalsAway: z.number(),\n  avgGoalsTotal: z.number(),\n  reasoning: z.string(),\n});\n\nexport const cornersAnalysisSchema = z.object({\n  over85Pct: z.number(),\n  over95Pct: z.number(),\n  over105Pct: z.number(),\n  avgCornersHome: z.number(),\n  avgCornersAway: z.number(),\n  avgCornersTotal: z.number(),\n  reasoning: z.string(),\n});\n\nexport const h2hAnalysisSchema = z.object({\n  totalMatches: z.number(),\n  homeWins: z.number(),\n  awayWins: z.number(),\n  draws: z.number(),\n  avgGoals: z.number(),\n  avgCorners: z.number().optional(),\n  lastResults: z.array(z.object({\n    date: z.string(),\n    homeGoals: z.number(),\n    awayGoals: z.number(),\n    winner: z.enum([\"home\", \"away\", \"draw\"]),\n  })).optional(),\n  trends: z.array(z.string()),\n  reasoning: z.string(),\n});\n\nexport const climateAnalysisSchema = z.object({\n  temperature: z.number().optional(),\n  humidity: z.number().optional(),\n  windSpeed: z.number().optional(),\n  condition: z.string().optional(),\n  impact: z.enum([\"none\", \"low\", \"medium\", \"high\"]),\n  reasoning: z.string(),\n});\n\nexport const tacticalInsightSchema = z.object({\n  title: z.string(),\n  description: z.string(),\n  highlighted: z.boolean().optional(),\n  sentiment: z.enum([\"positive\", \"negative\", \"neutral\"]).optional(),\n});\n\nexport type GoalsAnalysis = z.infer<typeof goalsAnalysisSchema>;\nexport type CornersAnalysis = z.infer<typeof cornersAnalysisSchema>;\nexport type H2HAnalysis = z.infer<typeof h2hAnalysisSchema>;\nexport type ClimateAnalysis = z.infer<typeof climateAnalysisSchema>;\nexport type TacticalInsight = z.infer<typeof tacticalInsightSchema>;\n","path":null,"size_bytes":33167,"size_tokens":null},"client/src/components/ui/field.tsx":{"content":"\"use client\"\n\nimport { useMemo } from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\nimport { Separator } from \"@/components/ui/separator\"\n\nfunction FieldSet({ className, ...props }: React.ComponentProps<\"fieldset\">) {\n  return (\n    <fieldset\n      data-slot=\"field-set\"\n      className={cn(\n        \"flex flex-col gap-6\",\n        \"has-[>[data-slot=checkbox-group]]:gap-3 has-[>[data-slot=radio-group]]:gap-3\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldLegend({\n  className,\n  variant = \"legend\",\n  ...props\n}: React.ComponentProps<\"legend\"> & { variant?: \"legend\" | \"label\" }) {\n  return (\n    <legend\n      data-slot=\"field-legend\"\n      data-variant={variant}\n      className={cn(\n        \"mb-3 font-medium\",\n        \"data-[variant=legend]:text-base\",\n        \"data-[variant=label]:text-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"field-group\"\n      className={cn(\n        \"group/field-group @container/field-group flex w-full flex-col gap-7 data-[slot=checkbox-group]:gap-3 [&>[data-slot=field-group]]:gap-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nconst fieldVariants = cva(\n  \"group/field data-[invalid=true]:text-destructive flex w-full gap-3\",\n  {\n    variants: {\n      orientation: {\n        vertical: [\"flex-col [&>*]:w-full [&>.sr-only]:w-auto\"],\n        horizontal: [\n          \"flex-row items-center\",\n          \"[&>[data-slot=field-label]]:flex-auto\",\n          \"has-[>[data-slot=field-content]]:[&>[role=checkbox],[role=radio]]:mt-px has-[>[data-slot=field-content]]:items-start\",\n        ],\n        responsive: [\n          \"@md/field-group:flex-row @md/field-group:items-center @md/field-group:[&>*]:w-auto flex-col [&>*]:w-full [&>.sr-only]:w-auto\",\n          \"@md/field-group:[&>[data-slot=field-label]]:flex-auto\",\n          \"@md/field-group:has-[>[data-slot=field-content]]:items-start @md/field-group:has-[>[data-slot=field-content]]:[&>[role=checkbox],[role=radio]]:mt-px\",\n        ],\n      },\n    },\n    defaultVariants: {\n      orientation: \"vertical\",\n    },\n  }\n)\n\nfunction Field({\n  className,\n  orientation = \"vertical\",\n  ...props\n}: React.ComponentProps<\"div\"> & VariantProps<typeof fieldVariants>) {\n  return (\n    <div\n      role=\"group\"\n      data-slot=\"field\"\n      data-orientation={orientation}\n      className={cn(fieldVariants({ orientation }), className)}\n      {...props}\n    />\n  )\n}\n\nfunction FieldContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"field-content\"\n      className={cn(\n        \"group/field-content flex flex-1 flex-col gap-1.5 leading-snug\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldLabel({\n  className,\n  ...props\n}: React.ComponentProps<typeof Label>) {\n  return (\n    <Label\n      data-slot=\"field-label\"\n      className={cn(\n        \"group/field-label peer/field-label flex w-fit gap-2 leading-snug group-data-[disabled=true]/field:opacity-50\",\n        \"has-[>[data-slot=field]]:w-full has-[>[data-slot=field]]:flex-col has-[>[data-slot=field]]:rounded-md has-[>[data-slot=field]]:border [&>[data-slot=field]]:p-4\",\n        \"has-data-[state=checked]:bg-primary/5 has-data-[state=checked]:border-primary dark:has-data-[state=checked]:bg-primary/10\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"field-label\"\n      className={cn(\n        \"flex w-fit items-center gap-2 text-sm font-medium leading-snug group-data-[disabled=true]/field:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldDescription({ className, ...props }: React.ComponentProps<\"p\">) {\n  return (\n    <p\n      data-slot=\"field-description\"\n      className={cn(\n        \"text-muted-foreground text-sm font-normal leading-normal group-has-[[data-orientation=horizontal]]/field:text-balance\",\n        \"nth-last-2:-mt-1 last:mt-0 [[data-variant=legend]+&]:-mt-1.5\",\n        \"[&>a:hover]:text-primary [&>a]:underline [&>a]:underline-offset-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldSeparator({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  children?: React.ReactNode\n}) {\n  return (\n    <div\n      data-slot=\"field-separator\"\n      data-content={!!children}\n      className={cn(\n        \"relative -my-2 h-5 text-sm group-data-[variant=outline]/field-group:-mb-2\",\n        className\n      )}\n      {...props}\n    >\n      <Separator className=\"absolute inset-0 top-1/2\" />\n      {children && (\n        <span\n          className=\"bg-background text-muted-foreground relative mx-auto block w-fit px-2\"\n          data-slot=\"field-separator-content\"\n        >\n          {children}\n        </span>\n      )}\n    </div>\n  )\n}\n\nfunction FieldError({\n  className,\n  children,\n  errors,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  errors?: Array<{ message?: string } | undefined>\n}) {\n  const content = useMemo(() => {\n    if (children) {\n      return children\n    }\n\n    if (!errors) {\n      return null\n    }\n\n    if (errors?.length === 1 && errors[0]?.message) {\n      return errors[0].message\n    }\n\n    return (\n      <ul className=\"ml-4 flex list-disc flex-col gap-1\">\n        {errors.map(\n          (error, index) =>\n            error?.message && <li key={index}>{error.message}</li>\n        )}\n      </ul>\n    )\n  }, [children, errors])\n\n  if (!content) {\n    return null\n  }\n\n  return (\n    <div\n      role=\"alert\"\n      data-slot=\"field-error\"\n      className={cn(\"text-destructive text-sm font-normal\", className)}\n      {...props}\n    >\n      {content}\n    </div>\n  )\n}\n\nexport {\n  Field,\n  FieldLabel,\n  FieldDescription,\n  FieldError,\n  FieldGroup,\n  FieldLegend,\n  FieldSeparator,\n  FieldSet,\n  FieldContent,\n  FieldTitle,\n}\n","path":null,"size_bytes":6044,"size_tokens":null},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-3.5 w-3.5 fill-primary\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","path":null,"size_bytes":1410,"size_tokens":null},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","path":null,"size_bytes":4845,"size_tokens":null},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","path":null,"size_bytes":6210,"size_tokens":null},"client/src/components/ui/dialog.tsx":{"content":"import * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-white/80 dark:bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogTrigger,\n  DialogClose,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","path":null,"size_bytes":3851,"size_tokens":null},"client/src/components/ui/spinner.tsx":{"content":"import { Loader2Icon } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Spinner({ className, ...props }: React.ComponentProps<\"svg\">) {\n  return (\n    <Loader2Icon\n      role=\"status\"\n      aria-label=\"Loading\"\n      className={cn(\"size-4 animate-spin\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Spinner }\n","path":null,"size_bytes":331,"size_tokens":null},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","path":null,"size_bytes":166,"size_tokens":null},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  // @replit\n  // Whitespace-nowrap: Badges should never wrap.\n  \"whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" +\n  \" hover-elevate \",\n  {\n    variants: {\n      variant: {\n        default:\n          // @replit shadow-xs instead of shadow, no hover because we use hover-elevate\n          \"border-transparent bg-primary text-primary-foreground shadow-xs\",\n        secondary:\n          // @replit no hover because we use hover-elevate\n          \"border-transparent bg-secondary text-secondary-foreground\",\n        destructive:\n          // @replit shadow-xs instead of shadow, no hover because we use hover-elevate\n          \"border-transparent bg-destructive text-destructive-foreground shadow-xs\",\n          // @replit shadow-xs\" - use badge outline variable\n        outline: \"text-foreground border [border-color:var(--badge-outline)]\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n","path":null,"size_bytes":1522,"size_tokens":null},"client/src/components/ui/drawer.tsx":{"content":"import * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-white/80 dark:bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","path":null,"size_bytes":3024,"size_tokens":null},"client/src/pages/auth.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { ArrowRight, Lock, Mail, User, Loader2 } from \"lucide-react\";\nimport { toast } from \"sonner\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { Logo } from \"@/components/logo\";\nimport { Link } from \"wouter\";\nimport { analytics } from \"@/lib/analytics\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\";\n\n// Validation Schemas\nconst loginSchema = z.object({\n  email: z.string().email(\"Email inv√°lido\"),\n  password: z.string().min(1, \"Senha obrigat√≥ria\"),\n});\n\nconst registerSchema = z.object({\n  name: z.string().min(2, \"Nome muito curto\"),\n  email: z.string().email(\"Email inv√°lido\"),\n  password: z.string().min(6, \"A senha deve ter no m√≠nimo 6 caracteres\"),\n  acceptTerms: z.union([z.boolean(), z.string()]).transform((val) => val === true || val === \"on\").refine((val) => val === true, {\n    message: \"Voc√™ precisa aceitar os termos para continuar\",\n  }),\n});\n\nexport default function AuthPage() {\n  const searchParams = new URLSearchParams(window.location.search);\n  const mode = searchParams.get('mode');\n  const [isLogin, setIsLogin] = useState(mode !== 'register');\n  const { login, register } = useAuth();\n  const [isLoading, setIsLoading] = useState(false);\n  const [resetEmail, setResetEmail] = useState(\"\");\n\n  // Forms\n  const loginForm = useForm<z.infer<typeof loginSchema>>({\n    resolver: zodResolver(loginSchema),\n  });\n\n  const registerForm = useForm<z.infer<typeof registerSchema>>({\n    resolver: zodResolver(registerSchema),\n  });\n\n  const handleLoginSubmit = async (data: z.infer<typeof loginSchema>) => {\n    setIsLoading(true);\n    try {\n      await login(data.email, data.password);\n      analytics.trackLogin();\n    } catch (error) {\n      // Error handled in hook\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleRegisterSubmit = async (data: z.infer<typeof registerSchema>) => {\n    setIsLoading(true);\n    try {\n      await register(data.name, data.email, data.password);\n      analytics.trackRegistration(data.email);\n      analytics.trackTrialStart();\n    } catch (error) {\n      toast.error(\"Erro ao criar conta\");\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleResetPassword = () => {\n    if (!resetEmail || !resetEmail.includes('@')) {\n      toast.error(\"Digite um email v√°lido\");\n      return;\n    }\n    toast.success(`Enviamos um link de recupera√ß√£o para ${resetEmail}`);\n  };\n\n  return (\n    <div className=\"min-h-screen w-full bg-background flex items-center justify-center p-4 relative overflow-hidden font-sans\">\n      {/* Background Effects */}\n      <div className=\"absolute top-[-20%] right-[-10%] w-[500px] h-[500px] bg-primary/10 rounded-full blur-[128px]\" />\n      <div className=\"absolute bottom-[-20%] left-[-10%] w-[500px] h-[500px] bg-primary/5 rounded-full blur-[128px]\" />\n\n      <div className=\"w-full max-w-md z-10 animate-in fade-in zoom-in-95 duration-500\">\n        <div className=\"text-center mb-8 space-y-4\">\n          <div className=\"flex justify-center mb-6\">\n            <Logo size=\"lg\" showText={true} />\n          </div>\n          <h2 className=\"text-xl font-medium text-muted-foreground\">\n            {isLogin ? \"Acesse a plataforma de sinais premium.\" : \"Crie sua conta gratuita.\"}\n          </h2>\n        </div>\n\n        <div className=\"bg-white dark:bg-[#121212] border border-gray-200 dark:border-primary/20 rounded-2xl p-8 shadow-2xl relative overflow-hidden\">\n          <div className=\"absolute inset-0 bg-gradient-to-b from-primary/5 to-transparent pointer-events-none\" />\n            \n          {isLogin ? (\n            /* LOGIN FORM */\n            <form onSubmit={loginForm.handleSubmit(handleLoginSubmit)} className=\"space-y-6 relative z-10\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"email\" className=\"text-slate-900 dark:text-white/80\">Email</Label>\n                <div className=\"relative\">\n                  <Mail className=\"absolute left-3 top-3 w-4 h-4 text-muted-foreground\" />\n                  <Input \n                    {...loginForm.register(\"email\")}\n                    placeholder=\"seu@email.com\" \n                    className=\"pl-10 h-11\"\n                  />\n                </div>\n                {loginForm.formState.errors.email && (\n                  <span className=\"text-xs text-red-500\">{loginForm.formState.errors.email.message}</span>\n                )}\n              </div>\n              \n              <div className=\"space-y-2\">\n                <div className=\"flex items-center justify-between\">\n                  <Label htmlFor=\"password\" className=\"text-slate-900 dark:text-white/80\">Senha</Label>\n                  \n                  <Dialog>\n                    <DialogTrigger asChild>\n                      <button type=\"button\" className=\"text-xs text-primary hover:text-primary-dark transition-colors font-medium\">\n                        Esqueceu a senha?\n                      </button>\n                    </DialogTrigger>\n                    <DialogContent>\n                      <DialogHeader>\n                        <DialogTitle>Recuperar Senha</DialogTitle>\n                        <DialogDescription className=\"text-muted-foreground\">\n                          Digite seu email para receber o link de redefini√ß√£o.\n                        </DialogDescription>\n                      </DialogHeader>\n                      <div className=\"space-y-4 py-4\">\n                        <div className=\"space-y-2\">\n                          <Label htmlFor=\"reset-email\">Email</Label>\n                          <Input \n                            id=\"reset-email\" \n                            placeholder=\"seu@email.com\" \n                            value={resetEmail}\n                            onChange={(e) => setResetEmail(e.target.value)}\n                          />\n                        </div>\n                        <Button onClick={handleResetPassword} className=\"w-full bg-primary hover:bg-primary-dark text-primary-foreground font-bold\">\n                          Enviar Link\n                        </Button>\n                      </div>\n                    </DialogContent>\n                  </Dialog>\n                </div>\n                <div className=\"relative\">\n                  <Lock className=\"absolute left-3 top-3 w-4 h-4 text-muted-foreground\" />\n                  <Input \n                    type=\"password\"\n                    {...loginForm.register(\"password\")}\n                    placeholder=\"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢\" \n                    className=\"pl-10 h-11\"\n                  />\n                </div>\n                {loginForm.formState.errors.password && (\n                  <span className=\"text-xs text-red-500\">{loginForm.formState.errors.password.message}</span>\n                )}\n              </div>\n\n              <Button \n                type=\"submit\" \n                className=\"w-full h-11 bg-primary hover:bg-primary-dark text-primary-foreground font-bold btn-glow border border-primary/50\"\n                disabled={isLoading}\n              >\n                {isLoading ? (\n                   <Loader2 className=\"w-5 h-5 animate-spin text-primary-foreground\" />\n                ) : (\n                  <>\n                    Entrar na Plataforma <ArrowRight className=\"ml-2 w-4 h-4\" />\n                  </>\n                )}\n              </Button>\n            </form>\n          ) : (\n            /* REGISTER FORM */\n            <form onSubmit={registerForm.handleSubmit(handleRegisterSubmit)} className=\"space-y-6 relative z-10\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"name\" className=\"text-slate-900 dark:text-white/80\">Nome Completo</Label>\n                <div className=\"relative\">\n                  <User className=\"absolute left-3 top-3 w-4 h-4 text-muted-foreground\" />\n                  <Input \n                    {...registerForm.register(\"name\")}\n                    placeholder=\"Seu nome\" \n                    className=\"pl-10 h-11\"\n                  />\n                </div>\n                {registerForm.formState.errors.name && (\n                  <span className=\"text-xs text-red-500\">{registerForm.formState.errors.name.message}</span>\n                )}\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"register-email\" className=\"text-slate-900 dark:text-white/80\">Email</Label>\n                <div className=\"relative\">\n                  <Mail className=\"absolute left-3 top-3 w-4 h-4 text-muted-foreground\" />\n                  <Input \n                    {...registerForm.register(\"email\")}\n                    placeholder=\"seu@email.com\" \n                    className=\"pl-10 h-11\"\n                  />\n                </div>\n                {registerForm.formState.errors.email && (\n                  <span className=\"text-xs text-red-500\">{registerForm.formState.errors.email.message}</span>\n                )}\n              </div>\n              \n              <div className=\"space-y-2\">\n                <Label htmlFor=\"register-password\" className=\"text-slate-900 dark:text-white/80\">Senha</Label>\n                <div className=\"relative\">\n                  <Lock className=\"absolute left-3 top-3 w-4 h-4 text-muted-foreground\" />\n                  <Input \n                    type=\"password\"\n                    {...registerForm.register(\"password\")}\n                    placeholder=\"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢\" \n                    className=\"pl-10 h-11\"\n                  />\n                </div>\n                {registerForm.formState.errors.password && (\n                  <span className=\"text-xs text-red-500\">{registerForm.formState.errors.password.message}</span>\n                )}\n              </div>\n\n              <div className=\"flex items-start space-x-2\">\n                <Checkbox \n                  id=\"terms\"\n                  {...registerForm.register(\"acceptTerms\")}\n                  className=\"mt-0.5\"\n                  data-testid=\"checkbox-terms\"\n                />\n                <label\n                  htmlFor=\"terms\"\n                  className=\"text-sm text-muted-foreground leading-relaxed cursor-pointer\"\n                >\n                  Li e aceito os{\" \"}\n                  <Link href=\"/terms\" className=\"text-primary hover:underline font-medium\">\n                    Termos de Uso\n                  </Link>\n                  ,{\" \"}\n                  <Link href=\"/privacy\" className=\"text-primary hover:underline font-medium\">\n                    Pol√≠tica de Privacidade\n                  </Link>\n                  {\" \"}e{\" \"}\n                  <Link href=\"/risk-disclaimer\" className=\"text-primary hover:underline font-medium\">\n                    Aviso de Risco\n                  </Link>\n                  .\n                </label>\n              </div>\n              {registerForm.formState.errors.acceptTerms && (\n                <span className=\"text-xs text-red-500\">{registerForm.formState.errors.acceptTerms.message}</span>\n              )}\n\n              <Button \n                type=\"submit\" \n                className=\"w-full h-11 bg-primary hover:bg-primary-dark text-primary-foreground font-bold btn-glow border border-primary/50\"\n                disabled={isLoading}\n              >\n                {isLoading ? (\n                   <Loader2 className=\"w-5 h-5 animate-spin text-primary-foreground\" />\n                ) : (\n                  <>\n                    Criar Conta Gr√°tis <ArrowRight className=\"ml-2 w-4 h-4\" />\n                  </>\n                )}\n              </Button>\n            </form>\n          )}\n\n          <div className=\"mt-6 text-center relative z-10\">\n            <p className=\"text-sm text-muted-foreground\">\n              {isLogin ? \"N√£o tem uma conta? \" : \"J√° tem uma conta? \"}\n              <button \n                onClick={() => setIsLogin(!isLogin)}\n                className=\"text-primary font-bold hover:underline decoration-primary underline-offset-4\"\n              >\n                {isLogin ? \"Criar Conta\" : \"Fazer Login\"}\n              </button>\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":12593,"size_tokens":null},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","path":null,"size_bytes":772,"size_tokens":null},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport tailwindcss from \"@tailwindcss/vite\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\nimport { metaImagesPlugin } from \"./vite-plugin-meta-images\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    tailwindcss(),\n    metaImagesPlugin(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n          await import(\"@replit/vite-plugin-dev-banner\").then((m) =>\n            m.devBanner(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  css: {\n    postcss: {\n      plugins: [],\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    host: \"0.0.0.0\",\n    allowedHosts: true,\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","path":null,"size_bytes":1330,"size_tokens":null},"vite-plugin-meta-images.ts":{"content":"import type { Plugin } from 'vite';\nimport fs from 'fs';\nimport path from 'path';\n\n/**\n * Vite plugin that updates og:image and twitter:image meta tags\n * to point to the app's opengraph image with the correct Replit domain.\n */\nexport function metaImagesPlugin(): Plugin {\n  return {\n    name: 'vite-plugin-meta-images',\n    transformIndexHtml(html) {\n      const baseUrl = getDeploymentUrl();\n      if (!baseUrl) {\n        log('[meta-images] no Replit deployment domain found, skipping meta tag updates');\n        return html;\n      }\n\n      // Check if opengraph image exists in public directory\n      const publicDir = path.resolve(process.cwd(), 'client', 'public');\n      const opengraphPngPath = path.join(publicDir, 'opengraph.png');\n      const opengraphJpgPath = path.join(publicDir, 'opengraph.jpg');\n      const opengraphJpegPath = path.join(publicDir, 'opengraph.jpeg');\n\n      let imageExt: string | null = null;\n      if (fs.existsSync(opengraphPngPath)) {\n        imageExt = 'png';\n      } else if (fs.existsSync(opengraphJpgPath)) {\n        imageExt = 'jpg';\n      } else if (fs.existsSync(opengraphJpegPath)) {\n        imageExt = 'jpeg';\n      }\n\n      if (!imageExt) {\n        log('[meta-images] OpenGraph image not found, skipping meta tag updates');\n        return html;\n      }\n\n      const imageUrl = `${baseUrl}/opengraph.${imageExt}`;\n\n      log('[meta-images] updating meta image tags to:', imageUrl);\n\n      html = html.replace(\n        /<meta\\s+property=\"og:image\"\\s+content=\"[^\"]*\"\\s*\\/>/g,\n        `<meta property=\"og:image\" content=\"${imageUrl}\" />`\n      );\n\n      html = html.replace(\n        /<meta\\s+name=\"twitter:image\"\\s+content=\"[^\"]*\"\\s*\\/>/g,\n        `<meta name=\"twitter:image\" content=\"${imageUrl}\" />`\n      );\n\n      return html;\n    },\n  };\n}\n\nfunction getDeploymentUrl(): string | null {\n  if (process.env.REPLIT_INTERNAL_APP_DOMAIN) {\n    const url = `https://${process.env.REPLIT_INTERNAL_APP_DOMAIN}`;\n    log('[meta-images] using internal app domain:', url);\n    return url;\n  }\n\n  if (process.env.REPLIT_DEV_DOMAIN) {\n    const url = `https://${process.env.REPLIT_DEV_DOMAIN}`;\n    log('[meta-images] using dev domain:', url);\n    return url;\n  }\n\n  return null;\n}\n\nfunction log(...args: any[]): void {\n  if (process.env.NODE_ENV === 'production') {\n    console.log(...args);\n  }\n}\n","path":null,"size_bytes":2333,"size_tokens":null},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","path":null,"size_bytes":325,"size_tokens":null},"client/src/lib/mock-data.ts":{"content":"import { type ClassValue, clsx } from \"clsx\";\nimport { twMerge } from \"tailwind-merge\";\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n\nexport interface BetLeg {\n  homeTeam: string;\n  awayTeam: string;\n  league: string;\n  market: string;\n  odd: number;\n  time: string;\n}\n\nexport interface Signal {\n  id: string;\n  league: string;\n  homeTeam: string;\n  awayTeam: string;\n  homeTeamLogo?: string; // URL of home team logo\n  awayTeamLogo?: string; // URL of away team logo\n  matchTime?: string; // Match kickoff time extracted from betting slip\n  market: string;\n  odd: number;\n  stake?: number; // Weight of the tip in units (0.5, 1, 1.5, 2, etc) - default 1.0\n  status: \"pending\" | \"green\" | \"red\";\n  timestamp: string;\n  isHot?: boolean;\n  betLink?: string;\n  isLive?: boolean;\n  isFree?: boolean; // Free tip visible to non-premium users\n  isCombo?: boolean; // Whether this is a combo/accumulator bet\n  totalOdd?: number; // Total combined odd for combos\n  legs?: BetLeg[]; // Multiple selections for combo bets\n  fixtureId?: string; // ID from API-Football to fetch official data\n  imageUrl?: string; // URL of uploaded bet slip image\n  // AI Analysis fields\n  analysisRationale?: string; // JSON with detailed reasoning\n  analysisSummary?: string; // Short summary text for users\n  confidence?: number; // AI confidence 0-100%\n  probability?: number; // Calculated probability 0-100%\n  expectedValue?: number; // Expected value percentage\n  aiSourceId?: string; // Reference to ai_tickets.id\n  // Team statistics for analysis display\n  homeGoalsAvg?: number; // Home team average goals\n  awayGoalsAvg?: number; // Away team average goals\n}\n\nexport interface LiveGame {\n  id: string;\n  league: string;\n  homeTeam: string;\n  awayTeam: string;\n  homeScore: number;\n  awayScore: number;\n  minute: number;\n  status: \"live\" | \"ht\" | \"ft\";\n}\n\nexport const MOCK_SIGNALS: Signal[] = [\n  // Multi-leg bet (Combo)\n  {\n    id: \"1\",\n    league: \"M√∫ltipla Premier League\",\n    homeTeam: \"Arsenal\",\n    awayTeam: \"Liverpool\",\n    market: \"Over 2.5 Goals\",\n    odd: 10.04, // Total odd (1.85 x 2.20 x 2.45)\n    status: \"pending\",\n    timestamp: new Date().toISOString(),\n    isHot: true,\n    betLink: \"https://bet365.com\",\n    isLive: false,\n    fixtureId: \"1386749\", // ID real da API-Football (Championship 25/11/2025 19:45 UTC)\n    legs: [\n      {\n        homeTeam: \"Arsenal\",\n        awayTeam: \"Liverpool\",\n        league: \"Premier League\",\n        market: \"Mais de 2.5 gols\",\n        odd: 1.85,\n        time: \"18:30\"\n      },\n      {\n        homeTeam: \"Manchester City\",\n        awayTeam: \"Chelsea\",\n        league: \"Premier League\",\n        market: \"Ambas Marcam\",\n        odd: 2.20,\n        time: \"19:00\"\n      },\n      {\n        homeTeam: \"Tottenham\",\n        awayTeam: \"Man United\",\n        league: \"Premier League\",\n        market: \"Vit√≥ria Casa\",\n        odd: 2.45,\n        time: \"20:45\"\n      }\n    ]\n  },\n  {\n    id: \"2\",\n    league: \"La Liga\",\n    homeTeam: \"Real Madrid\",\n    awayTeam: \"Barcelona\",\n    market: \"Both Teams to Score\",\n    odd: 1.65,\n    status: \"green\",\n    timestamp: new Date(Date.now() - 1000 * 60 * 30).toISOString(), // 30 mins ago\n    betLink: \"https://bet365.com\",\n    isLive: false,\n    fixtureId: \"1386754\", // ID real da API-Football (Championship 25/11/2025 19:45 UTC)\n  },\n  {\n    id: \"3\",\n    league: \"Serie A\",\n    homeTeam: \"Juventus\",\n    awayTeam: \"AC Milan\",\n    market: \"Home Win\",\n    odd: 2.10,\n    status: \"red\",\n    timestamp: new Date(Date.now() - 1000 * 60 * 60).toISOString(), // 1 hour ago\n    betLink: \"https://bet365.com\",\n    isLive: false,\n  },\n  {\n    id: \"4\",\n    league: \"NBA\",\n    homeTeam: \"Lakers\",\n    awayTeam: \"Warriors\",\n    market: \"LeBron James Over 25.5 Pts\",\n    odd: 1.90,\n    status: \"pending\",\n    timestamp: new Date().toISOString(),\n    betLink: \"https://bet365.com\",\n    isLive: true,\n  },\n  {\n    id: \"5\",\n    league: \"Champions League\",\n    homeTeam: \"Man City\",\n    awayTeam: \"Bayern\",\n    market: \"Over 3.5 Goals\",\n    odd: 2.45,\n    status: \"pending\",\n    timestamp: new Date().toISOString(),\n    betLink: \"https://bet365.com\",\n    isLive: false,\n  },\n];\n\nexport const MOCK_LIVE_GAMES: LiveGame[] = [\n  {\n    id: \"1\",\n    league: \"Premier League\",\n    homeTeam: \"Man City\",\n    awayTeam: \"Arsenal\",\n    homeScore: 1,\n    awayScore: 1,\n    minute: 65,\n    status: \"live\",\n  },\n  {\n    id: \"2\",\n    league: \"La Liga\",\n    homeTeam: \"Real Betis\",\n    awayTeam: \"Sevilla\",\n    homeScore: 0,\n    awayScore: 2,\n    minute: 32,\n    status: \"live\",\n  },\n  {\n    id: \"3\",\n    league: \"Bundesliga\",\n    homeTeam: \"Dortmund\",\n    awayTeam: \"RB Leipzig\",\n    homeScore: 2,\n    awayScore: 2,\n    minute: 45,\n    status: \"ht\",\n  },\n  {\n    id: \"4\",\n    league: \"Serie A\",\n    homeTeam: \"Inter\",\n    awayTeam: \"Napoli\",\n    homeScore: 1,\n    awayScore: 0,\n    minute: 88,\n    status: \"live\",\n  },\n];\n","path":null,"size_bytes":4896,"size_tokens":null},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-xl border border-gray-200 dark:border-[#33b864]/20 bg-white dark:bg-[#121212] text-slate-900 dark:text-white shadow-md dark:shadow-none\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"font-semibold leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n","path":null,"size_bytes":1918,"size_tokens":null},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\" +\n\" hover-elevate active-elevate-2\",\n  {\n    variants: {\n      variant: {\n        default:\n           // @replit: no hover, and add primary border\n           \"bg-primary text-primary-foreground border border-primary-border\",\n        destructive:\n          \"bg-destructive text-destructive-foreground shadow-sm border-destructive-border\",\n        outline:\n          // @replit Shows the background color of whatever card / sidebar / accent background it is inside of.\n          // Inherits the current text color. Uses shadow-xs. no shadow on active\n          // No hover state\n          \" border [border-color:var(--button-outline)] shadow-xs active:shadow-none \",\n        secondary:\n          // @replit border, no hover, no shadow, secondary border.\n          \"border bg-secondary text-secondary-foreground border border-secondary-border \",\n        // @replit no hover, transparent border\n        ghost: \"border border-transparent\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        // @replit changed sizes\n        default: \"min-h-9 px-4 py-2\",\n        sm: \"min-h-8 rounded-md px-3 text-xs\",\n        lg: \"min-h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","path":null,"size_bytes":2356,"size_tokens":null},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","path":null,"size_bytes":1148,"size_tokens":null},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationLink,\n  PaginationItem,\n  PaginationPrevious,\n  PaginationNext,\n  PaginationEllipsis,\n}\n","path":null,"size_bytes":2751,"size_tokens":null},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-9 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-300 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","path":null,"size_bytes":5124,"size_tokens":null},"client/src/components/match-center-modal.tsx":{"content":"import { Dialog, DialogContent, DialogTitle, DialogDescription } from \"@/components/ui/dialog\";\nimport { footballService, FootballMatch } from \"@/lib/football-service\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { X, Loader2, AlertCircle } from \"lucide-react\";\nimport { GameStats } from \"@/components/game-stats\";\nimport { mapFootballStatistics } from \"@/lib/football-mapper\";\n\ninterface MatchCenterModalProps {\n  match: FootballMatch | null;\n  open: boolean;\n  onClose: () => void;\n}\n\nexport function MatchCenterModal({ match, open, onClose }: MatchCenterModalProps) {\n  const { data: stats, isLoading } = useQuery({\n    queryKey: ['football-match-stats', match?.fixture.id],\n    queryFn: () => footballService.getFixtureStatistics(match!.fixture.id),\n    enabled: !!match && open,\n    refetchInterval: 10000, // Atualiza a cada 10 segundos\n    staleTime: 5000, // Considera dados obsoletos ap√≥s 5 segundos\n  });\n\n  if (!match) return null;\n\n  // Map API-Football stats to GameStats format (with team_id verification!)\n  const mappedStats = stats ? mapFootballStatistics(stats, match) : {};\n  \n  console.log('üéØ Match Center - Estat√≠sticas API-Football mapeadas:', {\n    fixtureId: match.fixture.id,\n    teams: `${match.teams.home.name} vs ${match.teams.away.name}`,\n    teamIds: { home: match.teams.home.id, away: match.teams.away.id },\n    mappedStats\n  });\n\n  return (\n    <Dialog open={open} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto bg-background border-primary/20 p-0\">\n        <DialogTitle className=\"sr-only\">\n          {match.teams.home.name} vs {match.teams.away.name}\n        </DialogTitle>\n        <DialogDescription className=\"sr-only\">\n          Estat√≠sticas detalhadas da partida {match.league.name}\n        </DialogDescription>\n        \n        {/* Header */}\n        <div className=\"sticky top-0 bg-card border-b border-primary/20 p-6 z-10\">\n          <button\n            onClick={onClose}\n            className=\"absolute right-4 top-4 text-muted-foreground hover:text-white\"\n            data-testid=\"button-close-modal\"\n          >\n            <X className=\"w-5 h-5\" />\n          </button>\n\n          {/* Score */}\n          <div className=\"flex items-center justify-center gap-6\">\n            <div className=\"flex items-center gap-3 flex-1 min-w-0 justify-end\">\n              <img \n                src={match.teams.home.logo} \n                alt={match.teams.home.name} \n                className=\"w-10 h-10 flex-shrink-0 object-contain\" \n                onError={(e) => {\n                  e.currentTarget.src = 'data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"40\" height=\"40\"><rect fill=\"%23333\" width=\"40\" height=\"40\"/></svg>';\n                }}\n              />\n              <div className=\"text-right min-w-0\">\n                <div className=\"text-xs text-muted-foreground truncate max-w-[100px]\" title={match.teams.home.name}>\n                  {match.teams.home.name.length > 20 ? match.teams.home.name.substring(0, 20) + '...' : match.teams.home.name}\n                </div>\n                <div className=\"text-3xl font-display font-black text-white\">{match.goals.home ?? 0}</div>\n              </div>\n            </div>\n\n            <div className=\"flex flex-col items-center flex-shrink-0 px-4\">\n              <div className=\"text-sm text-primary font-bold\">{match.fixture.status.elapsed}'</div>\n              <div className=\"text-xs text-muted-foreground uppercase\">{match.fixture.status.short}</div>\n            </div>\n\n            <div className=\"flex items-center gap-3 flex-1 min-w-0\">\n              <div className=\"text-left min-w-0\">\n                <div className=\"text-xs text-muted-foreground truncate max-w-[100px]\" title={match.teams.away.name}>\n                  {match.teams.away.name.length > 20 ? match.teams.away.name.substring(0, 20) + '...' : match.teams.away.name}\n                </div>\n                <div className=\"text-3xl font-display font-black text-white\">{match.goals.away ?? 0}</div>\n              </div>\n              <img \n                src={match.teams.away.logo} \n                alt={match.teams.away.name} \n                className=\"w-10 h-10 flex-shrink-0 object-contain\" \n                onError={(e) => {\n                  e.currentTarget.src = 'data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"40\" height=\"40\"><rect fill=\"%23333\" width=\"40\" height=\"40\"/></svg>';\n                }}\n              />\n            </div>\n          </div>\n\n          <div className=\"text-center mt-2 text-xs text-muted-foreground\">{match.league.name}</div>\n        </div>\n\n        {/* Stats Content */}\n        <div className=\"p-6\">\n          {isLoading && (\n            <div className=\"flex justify-center py-12\">\n              <Loader2 className=\"w-8 h-8 animate-spin text-primary\" />\n            </div>\n          )}\n\n          {!isLoading && stats && (\n            <GameStats\n              homeTeam={{\n                team: match.teams.home.name,\n                logo: match.teams.home.logo,\n              }}\n              awayTeam={{\n                team: match.teams.away.name,\n                logo: match.teams.away.logo,\n              }}\n              statistics={mappedStats}\n            />\n          )}\n\n          {!isLoading && !stats && (\n            <div className=\"p-12 text-center\">\n              <AlertCircle className=\"w-16 h-16 mx-auto mb-4 text-primary/30\" />\n              <p className=\"text-muted-foreground text-sm font-medium\">Dados indispon√≠veis no momento</p>\n              <p className=\"text-xs text-muted-foreground/60 mt-2\">\n                As estat√≠sticas ser√£o carregadas quando disponibilizadas pela API\n              </p>\n            </div>\n          )}\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","path":null,"size_bytes":5811,"size_tokens":null},"client/src/pages/pregame.tsx":{"content":"import { Layout } from \"@/components/layout\";\nimport { footballService, FootballMatch } from \"@/lib/football-service\";\nimport { useQueries } from \"@tanstack/react-query\";\nimport { Calendar, AlertCircle, Clock, Search, X, ChevronRight, ArrowLeft } from \"lucide-react\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { format, addDays, isAfter, addMinutes, isSameDay } from \"date-fns\";\nimport { ptBR, enUS, es, fr, it, zhCN } from \"date-fns/locale\";\nimport { useMemo, useState } from \"react\";\nimport { useLanguage } from \"@/hooks/use-language\";\nimport { PregameStatsModal } from \"@/components/pregame-stats-modal\";\n\n// Map language to date-fns locale\nconst localeMap = {\n  pt: ptBR,\n  en: enUS,\n  es: es,\n  fr: fr,\n  it: it,\n  cn: zhCN,\n};\n\nexport default function PreGamePage() {\n  const { t, language } = useLanguage();\n  const dateLocale = localeMap[language] || ptBR;\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [isSearchOpen, setIsSearchOpen] = useState(false);\n  const [selectedDateIndex, setSelectedDateIndex] = useState<number | null>(null); // null = todos os dias\n  const [selectedMatch, setSelectedMatch] = useState<FootballMatch | null>(null);\n  \n  // Today + Next 6 days (7 days window)\n  const dates = Array.from({ length: 7 }, (_, i) => addDays(new Date(), i));\n\n  // Busca jogos para todos os pr√≥ximos 7 dias simultaneamente\n  const queries = useQueries({\n    queries: dates.map(date => ({\n      queryKey: ['football-fixtures-pregame', format(date, 'yyyy-MM-dd')],\n      queryFn: () => footballService.getFixturesByDate(format(date, 'yyyy-MM-dd')),\n      refetchInterval: 60000, // Refresh every 1 min\n    }))\n  });\n\n  // Combina todos os fixtures e filtra\n  const { allFixtures, isLoading, hasError } = useMemo(() => {\n    const now = new Date();\n    const oneMinuteFromNow = addMinutes(now, 1);\n    \n    // Verifica se alguma query ainda est√° carregando\n    const loading = queries.some(q => q.isLoading);\n    \n    // Verifica se houve algum erro\n    const error = queries.some(q => q.error);\n    \n    // Combina todos os fixtures de todas as queries\n    const combined: FootballMatch[] = [];\n    queries.forEach(q => {\n      if (q.data) {\n        combined.push(...q.data);\n      }\n    });\n    \n    // Filtra: apenas jogos que come√ßam em MAIS de 1 minuto\n    const filtered = combined.filter((match) => {\n      const matchDate = new Date(match.fixture.date);\n      return isAfter(matchDate, oneMinuteFromNow);\n    });\n    \n    // Ordena por data (mais pr√≥ximos primeiro)\n    filtered.sort((a, b) => \n      new Date(a.fixture.date).getTime() - new Date(b.fixture.date).getTime()\n    );\n    \n    return {\n      allFixtures: filtered,\n      isLoading: loading,\n      hasError: error\n    };\n  }, [queries]);\n\n  // Filtra jogos baseado na pesquisa e dia selecionado\n  const fixtures = useMemo(() => {\n    let filtered = allFixtures;\n    \n    // Filtra por dia selecionado\n    if (selectedDateIndex !== null) {\n      const selectedDate = dates[selectedDateIndex];\n      filtered = filtered.filter(match => \n        isSameDay(new Date(match.fixture.date), selectedDate)\n      );\n    }\n    \n    // Filtra por pesquisa\n    if (searchQuery.trim()) {\n      const query = searchQuery.toLowerCase();\n      filtered = filtered.filter((match) => \n        match.teams.home.name.toLowerCase().includes(query) ||\n        match.teams.away.name.toLowerCase().includes(query) ||\n        match.league.name.toLowerCase().includes(query)\n      );\n    }\n    \n    return filtered;\n  }, [allFixtures, searchQuery, selectedDateIndex, dates]);\n\n  return (\n    <Layout>\n      {/* Back Button */}\n      <button\n        onClick={() => window.history.back()}\n        className=\"flex items-center gap-2 text-muted-foreground hover:text-foreground transition-colors mb-4 group\"\n        data-testid=\"button-back\"\n      >\n        <ArrowLeft className=\"w-5 h-5 group-hover:-translate-x-1 transition-transform\" />\n        <span className=\"text-sm\">Voltar</span>\n      </button>\n\n      <div className=\"mb-8\">\n        <div className=\"flex items-center justify-between gap-3 mb-2\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-10 h-10 rounded-lg bg-blue-500/10 border border-blue-500/20 flex items-center justify-center\">\n              <Calendar className=\"w-5 h-5 text-blue-500\" />\n            </div>\n            <h1 className=\"text-2xl font-display font-bold text-foreground\">{t.pregame.title}</h1>\n          </div>\n          \n          {/* Search Toggle */}\n          <button\n            onClick={() => {\n              setIsSearchOpen(!isSearchOpen);\n              if (isSearchOpen) setSearchQuery(\"\");\n            }}\n            className=\"w-10 h-10 rounded-lg bg-primary/10 border border-primary/20 hover:border-primary/40 flex items-center justify-center transition-colors\"\n            data-testid=\"button-search-toggle-pregame\"\n          >\n            {isSearchOpen ? (\n              <X className=\"w-5 h-5 text-primary\" />\n            ) : (\n              <Search className=\"w-5 h-5 text-primary\" />\n            )}\n          </button>\n        </div>\n\n        {/* Search Input */}\n        {isSearchOpen && (\n          <div className=\"mb-4 animate-in fade-in slide-in-from-top-2 duration-200\">\n            <input\n              type=\"text\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              placeholder={t.pregame.searchPlaceholder}\n              className=\"w-full px-4 py-3 bg-card border border-border rounded-lg text-foreground placeholder:text-muted-foreground focus:outline-none focus:border-primary/50 transition-colors\"\n              data-testid=\"input-search-pregame\"\n              autoFocus\n            />\n          </div>\n        )}\n        \n        <p className=\"text-muted-foreground\">\n          {t.pregame.subtitle}\n        </p>\n        \n        {/* Day Filter Tabs */}\n        <div className=\"flex gap-2 mt-4 overflow-x-auto pb-2 scrollbar-hide\">\n          <button\n            onClick={() => setSelectedDateIndex(null)}\n            className={`flex-shrink-0 px-4 py-2 rounded-lg text-xs font-bold uppercase transition-all ${\n              selectedDateIndex === null \n                ? 'bg-primary text-black' \n                : 'bg-card border border-primary/20 text-muted-foreground hover:border-primary/40'\n            }`}\n            data-testid=\"filter-all-days\"\n          >\n            Todos\n          </button>\n          {dates.map((date, index) => (\n            <button\n              key={date.toISOString()}\n              onClick={() => setSelectedDateIndex(index)}\n              className={`flex-shrink-0 px-4 py-2 rounded-lg text-xs font-bold transition-all ${\n                selectedDateIndex === index \n                  ? 'bg-primary text-black' \n                  : 'bg-card border border-primary/20 text-muted-foreground hover:border-primary/40'\n              }`}\n              data-testid={`filter-day-${index}`}\n            >\n              <span className=\"uppercase\">{format(date, 'EEE', { locale: dateLocale })}</span>\n              <span className=\"ml-1 text-[10px] opacity-70\">{format(date, 'dd/MM')}</span>\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {isLoading && (\n        <div className=\"space-y-4\">\n          {[1, 2, 3, 4].map((i) => (\n            <Skeleton key={i} className=\"h-24 w-full rounded-xl bg-white/5\" />\n          ))}\n        </div>\n      )}\n\n      {hasError && (\n        <div className=\"p-4 rounded-xl bg-red-500/10 border border-red-500/20 text-red-500 flex items-center gap-2\">\n          <AlertCircle className=\"w-5 h-5\" />\n          <span>{t.pregame.error}</span>\n        </div>\n      )}\n\n      {!isLoading && !hasError && allFixtures.length === 0 && (\n        <div className=\"p-12 text-center rounded-xl bg-card border border-primary/10\">\n          <Calendar className=\"w-12 h-12 text-muted-foreground mx-auto mb-4 opacity-30\" />\n          <p className=\"text-muted-foreground\">{t.pregame.noGames}</p>\n        </div>\n      )}\n\n      {!isLoading && !hasError && allFixtures.length > 0 && fixtures.length === 0 && (\n        <div className=\"p-12 text-center rounded-xl bg-card border border-primary/10\">\n          <Search className=\"w-12 h-12 text-muted-foreground mx-auto mb-4 opacity-30\" />\n          <p className=\"text-muted-foreground\">{t.pregame.noResults} \"{searchQuery}\"</p>\n          <button\n            onClick={() => setSearchQuery(\"\")}\n            className=\"mt-4 text-sm text-primary hover:text-primary/80 transition-colors\"\n            data-testid=\"button-clear-search-pregame\"\n          >\n            {t.pregame.clearSearch}\n          </button>\n        </div>\n      )}\n\n      {!isLoading && !hasError && fixtures.length > 0 && (\n        <div className=\"space-y-6\">\n          {/* Agrupa jogos por data */}\n          {dates.map(date => {\n            const matchesForDate = fixtures.filter(match => \n              isSameDay(new Date(match.fixture.date), date)\n            );\n            \n            if (matchesForDate.length === 0) return null;\n            \n            return (\n              <div key={date.toISOString()}>\n                                \n                {/* Jogos do dia */}\n                <div className=\"space-y-3\">\n                  {matchesForDate.map((match) => (\n                    <button\n                      key={match.fixture.id}\n                      onClick={() => setSelectedMatch(match)}\n                      data-testid={`match-pregame-${match.fixture.id}`}\n                      className=\"w-full text-left bg-card border border-primary/10 p-5 rounded-xl hover:border-primary/30 hover:bg-card/80 transition-all cursor-pointer group\"\n                    >\n                      {/* League & Time */}\n                      <div className=\"flex justify-between items-center mb-3\">\n                        <span className=\"text-xs font-bold text-primary/70\">{match.league.name}</span>\n                        <div className=\"flex items-center gap-2 text-xs text-muted-foreground\">\n                          <Clock className=\"w-3 h-3\" />\n                          <span>{format(new Date(match.fixture.date), 'HH:mm')}</span>\n                          <ChevronRight className=\"w-4 h-4 text-primary/50 group-hover:text-primary transition-colors\" />\n                        </div>\n                      </div>\n\n                      {/* Teams */}\n                      <div className=\"flex items-center justify-between\">\n                        <div className=\"flex items-center gap-3 flex-1 min-w-0\">\n                          <img \n                            src={match.teams.home.logo} \n                            alt={match.teams.home.name} \n                            className=\"w-10 h-10 object-contain flex-shrink-0\"\n                            onError={(e) => {\n                              e.currentTarget.style.display = 'none';\n                            }}\n                          />\n                          <span className=\"font-display font-bold text-white truncate max-w-[180px] block\">{match.teams.home.name}</span>\n                        </div>\n\n                        <div className=\"px-6 flex-shrink-0\">\n                          <span className=\"text-lg text-muted-foreground font-bold\">vs</span>\n                        </div>\n\n                        <div className=\"flex items-center gap-3 flex-1 justify-end min-w-0\">\n                          <span className=\"font-display font-bold text-white text-right truncate max-w-[180px] block\">{match.teams.away.name}</span>\n                          <img \n                            src={match.teams.away.logo} \n                            alt={match.teams.away.name} \n                            className=\"w-10 h-10 object-contain flex-shrink-0\"\n                            onError={(e) => {\n                              e.currentTarget.style.display = 'none';\n                            }}\n                          />\n                        </div>\n                      </div>\n                    </button>\n                  ))}\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      )}\n\n      {/* Pre-game Stats Modal */}\n      <PregameStatsModal \n        match={selectedMatch}\n        open={selectedMatch !== null}\n        onClose={() => setSelectedMatch(null)}\n      />\n    </Layout>\n  );\n}\n","path":null,"size_bytes":12351,"size_tokens":null},"client/src/pages/settings.tsx":{"content":"import { Layout } from \"@/components/layout\";\nimport { Settings as SettingsIcon, Globe, Lock, MessageCircle, Crown, Clock, Sparkles, ArrowRight, ArrowLeft, Sun, Moon, Monitor, RotateCcw } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Label } from \"@/components/ui/label\";\nimport { Input } from \"@/components/ui/input\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { toast } from \"sonner\";\nimport { useLanguage } from \"@/hooks/use-language\";\nimport { Language } from \"@/i18n/translations\";\nimport { useAccessControl } from \"@/hooks/use-access-control\";\nimport { Link, useLocation } from \"wouter\";\nimport { useTheme } from \"next-themes\";\nimport { useState } from \"react\";\nimport { useAuth } from \"@/hooks/use-auth\";\n\nexport default function SettingsPage() {\n  const { language, setLanguage, t } = useLanguage();\n  const { isTrial, isPremium, daysRemaining } = useAccessControl();\n  const [, navigate] = useLocation();\n  const { theme, setTheme, resolvedTheme } = useTheme();\n  const { user } = useAuth();\n  const [isResettingTour, setIsResettingTour] = useState(false);\n\n  const handleResetTour = async () => {\n    if (!user) return;\n    setIsResettingTour(true);\n    try {\n      const response = await fetch(`/api/profile/${user.id}/tour-completed`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ completed: false }),\n      });\n      if (response.ok) {\n        toast.success(\"Tour resetado! Iniciando...\");\n        localStorage.removeItem('onboarding_checked');\n        navigate('/app?tour=reset');\n        window.location.href = '/app';\n      }\n    } catch {\n      toast.error(\"Erro ao resetar tour\");\n    } finally {\n      setIsResettingTour(false);\n    }\n  };\n\n  const languages = [\n    { code: 'pt', name: 'Portugu√™s', flag: 'üáßüá∑' },\n    { code: 'en', name: 'English', flag: 'üá∫üá∏' },\n    { code: 'es', name: 'Espa√±ol', flag: 'üá™üá∏' },\n    { code: 'fr', name: 'Fran√ßais', flag: 'üá´üá∑' },\n    { code: 'it', name: 'Italiano', flag: 'üáÆüáπ' },\n    { code: 'cn', name: '‰∏≠Êñá', flag: 'üá®üá≥' },\n  ];\n\n  const handleLanguageChange = (code: Language) => {\n    setLanguage(code);\n    toast.success(`${languages.find(l => l.code === code)?.name}`);\n  };\n\n  const handlePasswordChange = () => {\n    toast.info(t.settings.updatePassword);\n    // TODO: Implement password change\n  };\n\n  const handleSupport = () => {\n    window.open('https://wa.me/5516993253866?text=Ol√°! Preciso de ajuda com o True Signal.', '_blank');\n  };\n\n  return (\n    <Layout>\n      {/* Back Button */}\n      <button\n        onClick={() => window.history.back()}\n        className=\"flex items-center gap-2 text-muted-foreground hover:text-foreground transition-colors mb-4 group\"\n        data-testid=\"button-back\"\n      >\n        <ArrowLeft className=\"w-5 h-5 group-hover:-translate-x-1 transition-transform\" />\n        <span className=\"text-sm\">Voltar</span>\n      </button>\n\n      <div className=\"mb-8\">\n        <div className=\"flex items-center gap-3 mb-2\">\n          <div className=\"w-10 h-10 rounded-lg bg-purple-500/10 border border-purple-500/20 flex items-center justify-center\">\n            <SettingsIcon className=\"w-5 h-5 text-purple-500\" />\n          </div>\n          <h1 className=\"text-2xl font-display font-bold text-foreground\">{t.settings.title}</h1>\n        </div>\n        <p className=\"text-muted-foreground\">{t.settings.subtitle}</p>\n      </div>\n\n      <div className=\"space-y-6\">\n        {/* Subscription Plan */}\n        <div className=\"bg-card border border-border rounded-xl p-6\">\n          <div className=\"flex items-center gap-3 mb-4\">\n            <Crown className=\"w-5 h-5 text-primary\" />\n            <h3 className=\"font-bold text-foreground\">Plano e assinatura</h3>\n          </div>\n          \n          <div className=\"space-y-4\">\n            {/* Current Plan Status */}\n            <div className=\"p-4 bg-muted/50 border border-border rounded-lg\">\n              <div className=\"flex items-center justify-between mb-3\">\n                <div className=\"flex items-center gap-2\">\n                  {isPremium ? (\n                    <>\n                      <Crown className=\"w-5 h-5 text-[#33b864]\" />\n                      <span className=\"font-bold text-foreground\">True Signal Prime</span>\n                    </>\n                  ) : (\n                    <>\n                      <Clock className=\"w-5 h-5 text-yellow-500\" />\n                      <span className=\"font-bold text-foreground\">Per√≠odo gratuito</span>\n                    </>\n                  )}\n                </div>\n                <div className={`px-3 py-1 rounded-full text-xs font-bold ${\n                  isPremium \n                    ? 'bg-[#33b864]/10 text-[#33b864] border border-[#33b864]/20'\n                    : isTrial\n                    ? 'bg-yellow-500/10 text-yellow-500 border border-yellow-500/20'\n                    : 'bg-red-500/10 text-red-500 border border-red-500/20'\n                }`}>\n                  {isPremium ? 'Ativo' : isTrial ? `${daysRemaining} dias restantes` : 'Expirado'}\n                </div>\n              </div>\n              \n              <div className=\"space-y-2 text-sm text-muted-foreground\">\n                {isPremium && (\n                  <>\n                    <p>‚úì Acesso ilimitado</p>\n                    <p>‚úì Sinais ilimitados no dia</p>\n                    <p>‚úì Alertas push em tempo real</p>\n                    <p>‚úì IA sempre atualizada</p>\n                  </>\n                )}\n                {isTrial && (\n                  <>\n                    <p>‚ö†Ô∏è Apenas 1 sinal por dia</p>\n                    <p>‚ö†Ô∏è Recursos limitados</p>\n                    <p className=\"text-yellow-500 font-semibold mt-2\">\n                      Assine o True Signal Prime para acesso completo!\n                    </p>\n                  </>\n                )}\n              </div>\n            </div>\n\n            {/* Action Buttons */}\n            <div className=\"space-y-4 pt-2\">\n              {!isPremium && (\n                <Link href=\"/checkout\">\n                  <Button\n                    className=\"w-full h-12 bg-gradient-to-r from-[#33b864] to-[#2ea558] hover:from-[#2ea558] hover:to-[#33b864] text-black font-bold shadow-xl shadow-[#33b864]/50\"\n                    data-testid=\"button-subscribe\"\n                  >\n                    <Sparkles className=\"w-4 h-4 mr-2\" />\n                    Assinar True Signal Prime\n                    <ArrowRight className=\"w-4 h-4 ml-2\" />\n                  </Button>\n                </Link>\n              )}\n              \n              <Link href=\"/assinatura\" className=\"block mt-4\">\n                <Button\n                  variant=\"outline\"\n                  className=\"w-full h-12 border-border hover:bg-muted/50 text-foreground\"\n                  data-testid=\"button-manage-subscription\"\n                >\n                  <Crown className=\"w-4 h-4 mr-2\" />\n                  {isPremium ? 'Gerenciar minha assinatura' : 'Ver detalhes da assinatura'}\n                  <ArrowRight className=\"w-4 h-4 ml-2\" />\n                </Button>\n              </Link>\n            </div>\n          </div>\n        </div>\n\n        {/* Theme Selector */}\n        <div className=\"bg-card border border-border rounded-xl p-6\">\n          <div className=\"flex items-center gap-3 mb-4\">\n            {resolvedTheme === 'dark' ? (\n              <Moon className=\"w-5 h-5 text-primary\" />\n            ) : (\n              <Sun className=\"w-5 h-5 text-primary\" />\n            )}\n            <h3 className=\"font-bold text-foreground\">Tema</h3>\n          </div>\n          <div className=\"grid grid-cols-3 gap-3\">\n            <button\n              onClick={() => setTheme('light')}\n              data-testid=\"theme-light\"\n              className={`p-4 rounded-lg border transition-all flex flex-col items-center gap-2 ${\n                theme === 'light'\n                  ? 'bg-primary/20 border-primary text-primary'\n                  : 'bg-muted/50 border-border text-muted-foreground hover:border-primary/30'\n              }`}\n            >\n              <Sun className=\"w-6 h-6\" />\n              <span className=\"text-xs font-medium\">Claro</span>\n            </button>\n            <button\n              onClick={() => setTheme('dark')}\n              data-testid=\"theme-dark\"\n              className={`p-4 rounded-lg border transition-all flex flex-col items-center gap-2 ${\n                theme === 'dark'\n                  ? 'bg-primary/20 border-primary text-primary'\n                  : 'bg-muted/50 border-border text-muted-foreground hover:border-primary/30'\n              }`}\n            >\n              <Moon className=\"w-6 h-6\" />\n              <span className=\"text-xs font-medium\">Escuro</span>\n            </button>\n            <button\n              onClick={() => setTheme('system')}\n              data-testid=\"theme-system\"\n              className={`p-4 rounded-lg border transition-all flex flex-col items-center gap-2 ${\n                theme === 'system'\n                  ? 'bg-primary/20 border-primary text-primary'\n                  : 'bg-muted/50 border-border text-muted-foreground hover:border-primary/30'\n              }`}\n            >\n              <Monitor className=\"w-6 h-6\" />\n              <span className=\"text-xs font-medium\">Sistema</span>\n            </button>\n          </div>\n        </div>\n\n        {/* Language Selector */}\n        <div className=\"bg-card border border-border rounded-xl p-6\">\n          <div className=\"flex items-center gap-3 mb-4\">\n            <Globe className=\"w-5 h-5 text-primary\" />\n            <h3 className=\"font-bold text-foreground\">{t.settings.language}</h3>\n          </div>\n          <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3\">\n            {languages.map((lang) => (\n              <button\n                key={lang.code}\n                onClick={() => handleLanguageChange(lang.code as Language)}\n                data-testid={`language-${lang.code}`}\n                className={`p-3 rounded-lg border transition-all ${\n                  language === lang.code\n                    ? 'bg-primary/20 border-primary text-primary font-bold'\n                    : 'bg-muted/50 border-border text-muted-foreground hover:border-primary/30'\n                }`}\n              >\n                <span className=\"text-2xl mb-1 block\">{lang.flag}</span>\n                <span className=\"text-xs\">{lang.name}</span>\n              </button>\n            ))}\n          </div>\n        </div>\n\n        {/* Change Password */}\n        <div className=\"bg-card border border-border rounded-xl p-6\">\n          <div className=\"flex items-center gap-3 mb-4\">\n            <Lock className=\"w-5 h-5 text-primary\" />\n            <h3 className=\"font-bold text-foreground\">{t.settings.password}</h3>\n          </div>\n          <div className=\"space-y-3\">\n            <div>\n              <Label htmlFor=\"current-password\" className=\"text-sm text-muted-foreground\">{t.settings.currentPassword}</Label>\n              <Input\n                id=\"current-password\"\n                type=\"password\"\n                placeholder=\"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢\"\n                data-testid=\"input-current-password\"\n                className=\"mt-1 bg-muted/50 border-border text-foreground\"\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"new-password\" className=\"text-sm text-muted-foreground\">{t.settings.newPassword}</Label>\n              <Input\n                id=\"new-password\"\n                type=\"password\"\n                placeholder=\"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢\"\n                data-testid=\"input-new-password\"\n                className=\"mt-1 bg-muted/50 border-border text-foreground\"\n              />\n            </div>\n            <Button\n              onClick={handlePasswordChange}\n              data-testid=\"button-change-password\"\n              className=\"w-full bg-primary hover:bg-primary/90\"\n            >\n              {t.settings.updatePassword}\n            </Button>\n          </div>\n        </div>\n\n        {/* Support */}\n        <div className=\"bg-card border border-border rounded-xl p-6\">\n          <div className=\"flex items-center gap-3 mb-4\">\n            <MessageCircle className=\"w-5 h-5 text-primary\" />\n            <h3 className=\"font-bold text-foreground\">{t.settings.support}</h3>\n          </div>\n          <Button\n            onClick={handleSupport}\n            data-testid=\"button-support\"\n            variant=\"outline\"\n            className=\"w-full border-border hover:bg-primary/10 text-foreground\"\n          >\n            {t.settings.contactSupport}\n          </Button>\n        </div>\n\n        {/* Tour Reset */}\n        <div className=\"bg-card border border-border rounded-xl p-6\">\n          <div className=\"flex items-center gap-3 mb-4\">\n            <RotateCcw className=\"w-5 h-5 text-primary\" />\n            <h3 className=\"font-bold text-foreground\">Tutorial</h3>\n          </div>\n          <p className=\"text-sm text-muted-foreground mb-4\">\n            Ver novamente o tour de boas-vindas do aplicativo.\n          </p>\n          <Button\n            onClick={handleResetTour}\n            disabled={isResettingTour}\n            data-testid=\"button-reset-tour\"\n            variant=\"outline\"\n            className=\"w-full border-border hover:bg-primary/10 text-foreground\"\n          >\n            <RotateCcw className={`w-4 h-4 mr-2 ${isResettingTour ? 'animate-spin' : ''}`} />\n            {isResettingTour ? 'Resetando...' : 'Reiniciar tour'}\n          </Button>\n        </div>\n      </div>\n    </Layout>\n  );\n}\n","path":null,"size_bytes":13633,"size_tokens":null},"client/src/lib/notification-service.ts":{"content":"import OneSignal from 'react-onesignal';\n\nexport const notificationService = {\n  /**\n   * Request notification permission from user\n   */\n  async requestPermission(): Promise<boolean> {\n    try {\n      const appId = import.meta.env.VITE_ONESIGNAL_APP_ID;\n      if (!appId) {\n        console.log(\"OneSignal not configured, using browser notifications\");\n        \n        // Fallback to browser notification API\n        if ('Notification' in window) {\n          const permission = await Notification.requestPermission();\n          return permission === 'granted';\n        }\n        return false;\n      }\n\n      // Use browser notification API as OneSignal wrapper\n      if ('Notification' in window) {\n        const permission = await Notification.requestPermission();\n        return permission === 'granted';\n      }\n      \n      return false;\n    } catch (error) {\n      console.error(\"Error requesting notification permission:\", error);\n      return false;\n    }\n  },\n\n  /**\n   * Send a notification about a new betting tip\n   * In production, this would be called from the backend after creating a tip\n   */\n  async sendNewTipNotification(tipData: {\n    match: string;\n    market: string;\n    odd: number;\n  }): Promise<void> {\n    try {\n      const appId = import.meta.env.VITE_ONESIGNAL_APP_ID;\n      if (!appId) {\n        console.log(\"OneSignal not configured, notification not sent\");\n        return;\n      }\n\n      // In production, this would be done via backend API\n      // For now, we'll just log the notification\n      console.log(\"üì¢ New Tip Notification:\", {\n        title: \"Nova Oportunidade Identificada üéØ\",\n        message: `${tipData.match} - ${tipData.market} @ ${tipData.odd}`,\n      });\n\n      // Optional: Show browser notification for testing\n      if ('Notification' in window && Notification.permission === 'granted') {\n        new Notification(\"Nova Oportunidade Identificada üéØ\", {\n          body: `${tipData.match} - ${tipData.market} @ ${tipData.odd}`,\n          icon: \"/favicon.ico\",\n          tag: \"new-tip\",\n        });\n      }\n    } catch (error) {\n      console.error(\"Error sending notification:\", error);\n    }\n  },\n\n  /**\n   * Check if notifications are enabled\n   */\n  async isEnabled(): Promise<boolean> {\n    try {\n      if ('Notification' in window) {\n        return Notification.permission === 'granted';\n      }\n      return false;\n    } catch (error) {\n      return false;\n    }\n  },\n};\n","path":null,"size_bytes":2438,"size_tokens":null},"client/src/pages/live.tsx":{"content":"import { Layout } from \"@/components/layout\";\nimport { footballService, FootballMatch } from \"@/lib/football-service\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Play, AlertCircle, TrendingUp, Search, X, ArrowLeft } from \"lucide-react\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { format } from \"date-fns\";\nimport { useState, useMemo } from \"react\";\nimport { MatchCenterModal } from \"@/components/match-center-modal\";\nimport { useLanguage } from \"@/hooks/use-language\";\n\nexport default function LivePage() {\n  const { t } = useLanguage();\n  const [selectedMatch, setSelectedMatch] = useState<FootballMatch | null>(null);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [isSearchOpen, setIsSearchOpen] = useState(false);\n\n  const { data: liveGames = [], isLoading, error } = useQuery({\n    queryKey: ['football-live-games'],\n    queryFn: footballService.getLiveFixtures,\n    refetchInterval: 30000, // Refresh every 30 seconds\n  });\n\n  const handleMatchClick = (match: FootballMatch) => {\n    setSelectedMatch(match);\n    setIsModalOpen(true);\n  };\n\n  const handleCloseModal = () => {\n    setIsModalOpen(false);\n    setSelectedMatch(null);\n  };\n\n  // Filtrar jogos baseado na pesquisa\n  const filteredGames = useMemo(() => {\n    if (!searchQuery.trim()) return liveGames;\n    \n    const query = searchQuery.toLowerCase();\n    return liveGames.filter((match) => \n      match.teams.home.name.toLowerCase().includes(query) ||\n      match.teams.away.name.toLowerCase().includes(query) ||\n      match.league.name.toLowerCase().includes(query)\n    );\n  }, [liveGames, searchQuery]);\n\n  return (\n    <Layout>\n      {/* Back Button */}\n      <button\n        onClick={() => window.history.back()}\n        className=\"flex items-center gap-2 text-muted-foreground hover:text-foreground transition-colors mb-4 group\"\n        data-testid=\"button-back\"\n      >\n        <ArrowLeft className=\"w-5 h-5 group-hover:-translate-x-1 transition-transform\" />\n        <span className=\"text-sm\">Voltar</span>\n      </button>\n\n      <div className=\"mb-8\">\n        <div className=\"flex items-center justify-between gap-3 mb-2\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-10 h-10 rounded-lg bg-red-500/10 border border-red-500/20 flex items-center justify-center\">\n              <Play className=\"w-5 h-5 text-red-500 animate-pulse\" />\n            </div>\n            <h1 className=\"text-2xl font-display font-bold text-foreground\">{t.live.title}</h1>\n          </div>\n          \n          {/* Search Toggle */}\n          <button\n            onClick={() => {\n              setIsSearchOpen(!isSearchOpen);\n              if (isSearchOpen) setSearchQuery(\"\");\n            }}\n            className=\"w-10 h-10 rounded-lg bg-primary/10 border border-primary/20 hover:border-primary/40 flex items-center justify-center transition-colors\"\n            data-testid=\"button-search-toggle\"\n          >\n            {isSearchOpen ? (\n              <X className=\"w-5 h-5 text-primary\" />\n            ) : (\n              <Search className=\"w-5 h-5 text-primary\" />\n            )}\n          </button>\n        </div>\n\n        {/* Search Input */}\n        {isSearchOpen && (\n          <div className=\"mb-4 animate-in fade-in slide-in-from-top-2 duration-200\">\n            <input\n              type=\"text\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              placeholder={t.live.searchPlaceholder}\n              className=\"w-full px-4 py-3 bg-card border border-border rounded-lg text-foreground placeholder:text-muted-foreground focus:outline-none focus:border-primary/50 transition-colors\"\n              data-testid=\"input-search-teams\"\n              autoFocus\n            />\n          </div>\n        )}\n        \n        <p className=\"text-muted-foreground\">\n          {t.live.subtitle}\n        </p>\n      </div>\n\n      {isLoading && (\n        <div className=\"space-y-4\">\n          {[1, 2, 3].map((i) => (\n            <Skeleton key={i} className=\"h-32 w-full rounded-xl bg-white/5\" />\n          ))}\n        </div>\n      )}\n\n      {error && (\n        <div className=\"p-4 rounded-xl bg-red-500/10 border border-red-500/20 text-red-500 flex items-center gap-2\">\n          <AlertCircle className=\"w-5 h-5\" />\n          <span>{t.live.error}</span>\n        </div>\n      )}\n\n      {!isLoading && !error && liveGames.length === 0 && (\n        <div className=\"p-12 text-center rounded-xl bg-card border border-primary/10\">\n          <Play className=\"w-12 h-12 text-muted-foreground mx-auto mb-4 opacity-30\" />\n          <p className=\"text-muted-foreground\">{t.live.noGames}</p>\n        </div>\n      )}\n\n      {!isLoading && !error && liveGames.length > 0 && filteredGames.length === 0 && (\n        <div className=\"p-12 text-center rounded-xl bg-card border border-primary/10\">\n          <Search className=\"w-12 h-12 text-muted-foreground mx-auto mb-4 opacity-30\" />\n          <p className=\"text-muted-foreground\">{t.live.noResults} \"{searchQuery}\"</p>\n          <button\n            onClick={() => setSearchQuery(\"\")}\n            className=\"mt-4 text-sm text-primary hover:text-primary/80 transition-colors\"\n            data-testid=\"button-clear-search\"\n          >\n            {t.live.clearSearch}\n          </button>\n        </div>\n      )}\n\n      {!isLoading && !error && filteredGames.length > 0 && (\n        <div className=\"space-y-4\">\n          {filteredGames.map((match) => (\n            <button\n              key={match.fixture.id}\n              onClick={() => handleMatchClick(match)}\n              data-testid={`match-live-${match.fixture.id}`}\n              className=\"w-full bg-card border border-primary/10 hover:border-primary/30 transition-all p-5 rounded-xl group cursor-pointer text-left\"\n            >\n              {/* League & Time */}\n              <div className=\"flex justify-between items-center mb-3\">\n                <span className=\"text-xs font-bold text-primary/70 truncate max-w-[200px] block\">{match.league.name}</span>\n                <span className=\"text-xs font-bold text-red-500 animate-pulse flex items-center gap-1 flex-shrink-0\">\n                  <span className=\"w-2 h-2 rounded-full bg-red-500\" />\n                  {match.fixture.status.elapsed}'\n                </span>\n              </div>\n\n              {/* Teams & Score */}\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-3 flex-1 min-w-0\">\n                  <img \n                    src={match.teams.home.logo} \n                    alt={match.teams.home.name} \n                    className=\"w-10 h-10 object-contain flex-shrink-0\" \n                    onError={(e) => {\n                      e.currentTarget.src = 'data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"40\" height=\"40\"><rect fill=\"%23333\" width=\"40\" height=\"40\"/></svg>';\n                    }}\n                  />\n                  <span className=\"font-display font-bold text-foreground truncate max-w-[180px] block\">\n                    {match.teams.home.name}\n                  </span>\n                </div>\n\n                <div className=\"px-6 flex items-center gap-3 flex-shrink-0\">\n                  <span className=\"text-3xl font-display font-black text-foreground\">{match.goals.home ?? 0}</span>\n                  <span className=\"text-lg text-muted-foreground\">:</span>\n                  <span className=\"text-3xl font-display font-black text-foreground\">{match.goals.away ?? 0}</span>\n                </div>\n\n                <div className=\"flex items-center gap-3 flex-1 justify-end min-w-0\">\n                  <span className=\"font-display font-bold text-foreground text-right truncate max-w-[180px] block\">\n                    {match.teams.away.name}\n                  </span>\n                  <img \n                    src={match.teams.away.logo} \n                    alt={match.teams.away.name} \n                    className=\"w-10 h-10 object-contain flex-shrink-0\" \n                    onError={(e) => {\n                      e.currentTarget.src = 'data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"40\" height=\"40\"><rect fill=\"%23333\" width=\"40\" height=\"40\"/></svg>';\n                    }}\n                  />\n                </div>\n              </div>\n\n              {/* View Stats Hint */}\n              <div className=\"mt-3 pt-3 border-t border-white/5 flex items-center justify-center gap-2 text-xs text-muted-foreground group-hover:text-primary transition-colors\">\n                <TrendingUp className=\"w-3 h-3\" />\n                <span>Clique para ver estat√≠sticas detalhadas</span>\n              </div>\n            </button>\n          ))}\n        </div>\n      )}\n\n      {/* Match Center Modal */}\n      <MatchCenterModal\n        match={selectedMatch}\n        open={isModalOpen}\n        onClose={handleCloseModal}\n      />\n    </Layout>\n  );\n}\n","path":null,"size_bytes":8988,"size_tokens":null},"client/src/pages/tips.tsx":{"content":"import { Layout } from \"@/components/layout\";\nimport { tipsService } from \"@/lib/tips-service\";\nimport { useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { Target, AlertCircle, Ticket, ShieldCheck, LockKeyhole, Sparkles, ArrowLeft, Gift } from \"lucide-react\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { useEffect, useState } from \"react\";\nimport { supabase } from \"@/lib/supabase\";\nimport { toast } from \"sonner\";\nimport { BetCard } from \"@/components/bet-card\";\nimport { useLanguage } from \"@/hooks/use-language\";\nimport { useAccessControl } from \"@/hooks/use-access-control\";\nimport { useUnreadTips } from \"@/hooks/use-unread-tips\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { Badge } from \"@/components/ui/badge\";\n\nconst CHECKOUT_URL = '/checkout';\n\nexport default function TipsPage() {\n  const queryClient = useQueryClient();\n  const { t } = useLanguage();\n  const { canSeeAllTips } = useAccessControl();\n  const { user } = useAuth();\n  const [unitValue, setUnitValue] = useState<number | null>(null);\n\n  // Fetch user's bankroll unit value\n  useEffect(() => {\n    const fetchBankroll = async () => {\n      if (!user?.id) return;\n      try {\n        const response = await fetch(`/api/profile/${user.id}/bankroll`);\n        if (response.ok) {\n          const data = await response.json();\n          if (data.unitValue) {\n            setUnitValue(parseFloat(data.unitValue));\n          }\n        }\n      } catch (error) {\n        console.error(\"Erro ao buscar bankroll:\", error);\n      }\n    };\n    fetchBankroll();\n  }, [user?.id]);\n  \n  const { data: tips = [], isLoading, error } = useQuery({\n    queryKey: ['tips'],\n    queryFn: tipsService.getAll,\n    refetchInterval: 30000, // Refresh every 30s\n  });\n\n  const tipIds = tips.map(tip => tip.id);\n  const { markAllAsViewed } = useUnreadTips(tipIds);\n\n  // Mark all tips as viewed when user opens the page\n  useEffect(() => {\n    if (tips.length > 0) {\n      markAllAsViewed();\n    }\n  }, [tips.length]);\n\n  // Realtime subscription for new tips\n  useEffect(() => {\n    const channel = supabase\n      .channel('tips')\n      .on('postgres_changes', { \n        event: 'INSERT', \n        schema: 'public', \n        table: 'tips' \n      }, (payload) => {\n        console.log('üîî Novo sinal recebido:', payload.new);\n        \n        // Invalidate and refetch to get the new signal\n        queryClient.invalidateQueries({ queryKey: ['tips'] });\n        \n        // Show toast notification with correct field names\n        const newTip = payload.new as any;\n        if (newTip.home_team && newTip.away_team && newTip.market) {\n          toast.success(t.tips.newSignalAvailable, {\n            description: `${newTip.home_team} vs ${newTip.away_team} - ${newTip.market}`,\n          });\n        }\n      })\n      .on('postgres_changes', {\n        event: 'UPDATE',\n        schema: 'public',\n        table: 'tips'\n      }, (payload) => {\n        console.log('üîÑ Sinal atualizado:', payload.new);\n        \n        // Only invalidate if status or odd changed (avoid unnecessary refetches)\n        const oldTip = payload.old as any;\n        const newTip = payload.new as any;\n        if (oldTip?.status !== newTip?.status || oldTip?.odd !== newTip?.odd) {\n          queryClient.invalidateQueries({ queryKey: ['tips'] });\n        }\n      })\n      .on('postgres_changes', {\n        event: 'DELETE',\n        schema: 'public',\n        table: 'tips'\n      }, (payload) => {\n        console.log('üóëÔ∏è Sinal deletado:', payload.old);\n        \n        // Invalidate to remove deleted signal\n        queryClient.invalidateQueries({ queryKey: ['tips'] });\n        \n        toast.info(t.tips.signalRemoved);\n      })\n      .subscribe((status) => {\n        if (status === 'SUBSCRIBED') {\n          console.log('‚úÖ Realtime subscription ativa para sinais');\n        }\n      });\n\n    return () => {\n      channel.unsubscribe();\n    };\n  }, [queryClient]);\n\n\n  return (\n    <Layout>\n      {/* Back Button */}\n      <button\n        onClick={() => window.history.back()}\n        className=\"flex items-center gap-2 text-gray-400 hover:text-white transition-colors mb-4 group\"\n        data-testid=\"button-back\"\n      >\n        <ArrowLeft className=\"w-5 h-5 group-hover:-translate-x-1 transition-transform\" />\n        <span className=\"text-sm\">Voltar</span>\n      </button>\n\n      {/* Header Profissional */}\n      <div className=\"w-full mb-6\">\n        \n        {/* T√≠tulo Principal */}\n        <div className=\"flex items-center justify-between mb-4\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-10 h-10 bg-gradient-to-br from-[#33b864] to-[#28a054] rounded-xl flex items-center justify-center shadow-lg shadow-[#33b864]/20\">\n              <Ticket className=\"w-5 h-5 text-white\" />\n            </div>\n            <div>\n              <h1 className=\"text-xl font-bold text-white\">\n                Bilhetes do Dia\n              </h1>\n              <p className=\"text-gray-500 text-xs\">\n                An√°lises profissionais com alto √≠ndice de acerto\n              </p>\n            </div>\n          </div>\n          \n          {/* Badge de Performance */}\n          <div className=\"hidden sm:flex items-center gap-2 bg-[#1a1a1a] px-4 py-2 rounded-xl border border-[#333]\">\n            <div className=\"flex items-center gap-1.5\">\n              <span className=\"relative flex h-2 w-2\">\n                <span className=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-[#33b864] opacity-75\"></span>\n                <span className=\"relative inline-flex rounded-full h-2 w-2 bg-[#33b864]\"></span>\n              </span>\n              <span className=\"text-[#33b864] font-bold text-sm\">83%</span>\n            </div>\n            <span className=\"text-gray-400 text-xs\">assertividade</span>\n          </div>\n        </div>\n\n        {/* Performance Mobile */}\n        <div className=\"sm:hidden flex items-center justify-center gap-3 bg-[#1a1a1a] py-2.5 px-4 rounded-xl border border-[#333] mb-4\">\n          <div className=\"flex items-center gap-1.5\">\n            <span className=\"relative flex h-2 w-2\">\n              <span className=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-[#33b864] opacity-75\"></span>\n              <span className=\"relative inline-flex rounded-full h-2 w-2 bg-[#33b864]\"></span>\n            </span>\n            <span className=\"text-[#33b864] font-bold\">83%</span>\n          </div>\n          <span className=\"text-gray-400 text-sm\">de assertividade nos √∫ltimos 30 dias</span>\n        </div>\n\n      </div>\n\n      {isLoading && (\n        <div className=\"space-y-1\">\n          {[1, 2, 3].map((i) => (\n            <Skeleton key={i} className=\"h-12 w-full bg-[#1a1a1a]\" />\n          ))}\n        </div>\n      )}\n\n      {error && (\n        <div className=\"p-3 bg-red-500/10 border border-red-500/20 text-red-500 flex items-center gap-2 text-sm\">\n          <AlertCircle className=\"w-4 h-4\" />\n          <span>{t.tips.error}</span>\n        </div>\n      )}\n\n      {!isLoading && !error && tips.length === 0 && (\n        <div className=\"p-8 text-center bg-[#121212] border border-[#333] rounded-xl\">\n          <Target className=\"w-10 h-10 text-muted-foreground mx-auto mb-3 opacity-30\" />\n          <p className=\"text-muted-foreground text-sm\">{t.tips.noTips}</p>\n        </div>\n      )}\n\n      {!isLoading && !error && tips.length > 0 && (\n        <div className=\"space-y-6\">\n          {/* Para usu√°rios n√£o-Prime: mostra o bilhete FREE primeiro */}\n          {!canSeeAllTips && (() => {\n            const freeTip = tips.find(t => t.isFree);\n            const lockedTips = tips.filter(t => !t.isFree).slice(0, 10);\n            \n            return (\n              <>\n                {/* Bilhete FREE do dia */}\n                {freeTip ? (\n                  <div className=\"relative\">\n                    <div className=\"absolute -top-3 left-4 z-10\">\n                      <Badge className=\"bg-gradient-to-r from-yellow-500 to-orange-500 text-black font-bold px-3 py-1 text-xs border-0 shadow-lg\">\n                        <Gift className=\"w-3 h-3 mr-1\" />\n                        BILHETE GR√ÅTIS DO DIA\n                      </Badge>\n                    </div>\n                    <div className=\"border-2 border-yellow-500/50 rounded-xl overflow-hidden\">\n                      <BetCard \n                        signal={freeTip}\n                        onDelete={() => queryClient.invalidateQueries({ queryKey: ['tips'] })}\n                        unitValue={unitValue}\n                      />\n                    </div>\n                  </div>\n                ) : (\n                  <div className=\"bg-gradient-to-br from-yellow-500/10 to-orange-500/10 border border-yellow-500/30 rounded-xl p-6 text-center\">\n                    <Gift className=\"w-10 h-10 mx-auto mb-3 text-yellow-500\" />\n                    <h3 className=\"text-lg font-bold text-white mb-2\">Bilhete Gr√°tis em breve!</h3>\n                    <p className=\"text-gray-400 text-sm\">O bilhete gr√°tis do dia ser√° postado em breve. Fique atento!</p>\n                  </div>\n                )}\n\n                {/* Bilhetes Premium Bloqueados */}\n                {lockedTips.length > 0 && (\n                  <div className=\"space-y-4\">\n                    <div className=\"flex items-center justify-between\">\n                      <h3 className=\"text-lg font-bold text-white flex items-center gap-2\">\n                        <LockKeyhole className=\"w-5 h-5 text-[#33b864]\" />\n                        Bilhetes Premium\n                      </h3>\n                      <Badge className=\"bg-[#33b864]/20 text-[#33b864] border-[#33b864]/30\">\n                        {lockedTips.length} dispon√≠veis\n                      </Badge>\n                    </div>\n                    \n                    <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4\">\n                      {lockedTips.map((tip, index) => (\n                        <div key={tip.id} className=\"relative\" data-testid={`tip-locked-${index}`}>\n                          <div className=\"blur-sm pointer-events-none select-none\">\n                            <BetCard \n                              signal={tip}\n                              onDelete={() => {}}\n                              unitValue={unitValue}\n                            />\n                          </div>\n                          \n                          <div className=\"absolute inset-0 flex items-center justify-center bg-black/60 backdrop-blur-sm rounded-xl border-2 border-[#33b864]/30\">\n                            <div className=\"text-center p-6\">\n                              <div className=\"w-14 h-14 mx-auto mb-3 rounded-full bg-[#33b864]/20 border-2 border-[#33b864] flex items-center justify-center\">\n                                <LockKeyhole className=\"w-7 h-7 text-[#33b864]\" />\n                              </div>\n                              <h3 className=\"text-lg font-bold text-white mb-2\" style={{ fontFamily: 'Sora, sans-serif' }}>\n                                Exclusivo Prime\n                              </h3>\n                              <p className=\"text-gray-300 text-sm mb-4\">\n                                Desbloqueie todos os sinais\n                              </p>\n                              <a href={CHECKOUT_URL} data-testid={`button-unlock-${index}`}>\n                                <button className=\"px-5 py-2.5 bg-[#33b864] hover:bg-[#2ea558] text-black font-bold rounded-xl transition-all duration-300 hover:scale-105 shadow-xl shadow-[#33b864]/40 flex items-center gap-2 mx-auto text-sm\">\n                                  <Sparkles className=\"w-4 h-4\" />\n                                  Assinar\n                                </button>\n                              </a>\n                            </div>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n              </>\n            );\n          })()}\n          \n          {/* Para usu√°rios Prime: mostra todos os bilhetes normalmente */}\n          {canSeeAllTips && (\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4\">\n              {tips.map((tip, index) => (\n                <div key={tip.id} className=\"relative\" data-testid={`tip-container-${index}`}>\n                  {tip.isFree && (\n                    <div className=\"absolute -top-2 left-4 z-10\">\n                      <Badge className=\"bg-yellow-500/20 text-yellow-400 border-yellow-500/30 text-xs\">\n                        <Gift className=\"w-3 h-3 mr-1\" />\n                        FREE\n                      </Badge>\n                    </div>\n                  )}\n                  <BetCard \n                    signal={tip}\n                    onDelete={() => queryClient.invalidateQueries({ queryKey: ['tips'] })}\n                    unitValue={unitValue}\n                  />\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      )}\n    </Layout>\n  );\n}\n","path":null,"size_bytes":13060,"size_tokens":null},"client/src/i18n/translations.ts":{"content":"export const translations = {\n  pt: {\n    nav: {\n      home: \"Painel\",\n      tips: \"Bilhetes\",\n      live: \"Ao Vivo\",\n      pregame: \"Pr√©-Jogo\",\n      bankroll: \"Gest√£o de Banca\",\n      settings: \"Configura√ß√µes\",\n      admin: \"Admin\",\n      logout: \"Sair\",\n      welcome: \"Bem-vindo,\",\n      hello: \"Ol√°,\",\n      notifications: \"Notifica√ß√µes\",\n      notificationsDesc: \"Ative para receber alertas de novos bilhetes.\",\n      activateNow: \"Ativar Agora\",\n    },\n    dashboard: {\n      title: \"Command Center\",\n      subtitle: \"Performance de Investidor Profissional\",\n      performanceChart: \"Evolu√ß√£o de Performance\",\n      performanceSubtitle: \"√öltimas 24 horas ‚Ä¢ Live\",\n      realtime: \"TEMPO REAL\",\n      viewFull: \"Ver Dashboard Completo\",\n      viewFullDesc: \"AI Scanner, hist√≥rico completo, an√°lises avan√ßadas e muito mais\",\n    },\n    landing: {\n      headline: \"Domine o Mercado com a Fus√£o Perfeita: 20 Traders de Elite + Intelig√™ncia Artificial.\",\n      subline: \"Chega de amadorismo. Acesse an√°lises detalhadas com precis√£o projetada de at√© 97%. Saia dos 'grupinhos' e venha para a ferramenta usada mundialmente por profissionais.\",\n      cta: \"Liberar Acesso Profissional\",\n    },\n    tips: {\n      title: \"SINAIS PREMIUM\",\n      subtitle: \"An√°lises curadas por 20 especialistas + IA com precis√£o de 97%\",\n      noTips: \"Nenhum bilhete dispon√≠vel no momento.\",\n      newSignals: \"Novos bilhetes ser√£o publicados em breve.\",\n      available: \"bilhetes dispon√≠veis\",\n      error: \"Erro ao carregar bilhetes.\",\n      newSignalAvailable: \"Novo Bilhete Dispon√≠vel!\",\n      signalRemoved: \"Bilhete removido\",\n      performanceLabel: \"Performance Atual\",\n      performanceText: \"Assertividade m√©dia de\",\n      performanceTickets: \"em nossos bilhetes.\",\n      expertBadge: \"Especialistas + IA\",\n    },\n    live: {\n      title: \"Ao Vivo\",\n      subtitle: \"Acompanhe os jogos em tempo real ‚Ä¢ Clique para ver estat√≠sticas\",\n      noGames: \"Nenhum jogo ao vivo no momento.\",\n      viewStats: \"Clique para ver estat√≠sticas detalhadas\",\n      error: \"Erro ao carregar jogos ao vivo. Tente novamente mais tarde.\",\n      searchPlaceholder: \"Buscar por time ou liga...\",\n      noResults: \"Nenhum jogo encontrado para\",\n      clearSearch: \"Limpar busca\",\n    },\n    pregame: {\n      title: \"Pr√©-Jogo\",\n      subtitle: \"Jogos programados para a semana inteira\",\n      noGames: \"Nenhum jogo programado para esta data.\",\n      error: \"Erro ao carregar jogos. Tente novamente mais tarde.\",\n      searchPlaceholder: \"Buscar por time ou liga...\",\n      noResults: \"Nenhum jogo encontrado para\",\n      clearSearch: \"Limpar busca\",\n    },\n    settings: {\n      title: \"Configura√ß√µes\",\n      subtitle: \"Personalize sua experi√™ncia\",\n      language: \"Idioma\",\n      theme: \"Tema\",\n      darkMode: \"Modo Escuro\",\n      lightMode: \"Modo Claro\",\n      password: \"Alterar Senha\",\n      currentPassword: \"Senha Atual\",\n      newPassword: \"Nova Senha\",\n      updatePassword: \"Atualizar Senha\",\n      support: \"Suporte\",\n      contactSupport: \"Falar com Suporte via WhatsApp\",\n    },\n    matchCenter: {\n      possession: \"POSSE\",\n      home: \"Casa\",\n      away: \"Fora\",\n      corners: \"Escanteios\",\n      yellowCards: \"Amarelos\",\n      redCards: \"Vermelhos\",\n      shotsOnGoal: \"Chutes no Gol\",\n      shotsTotal: \"Chutes Totais\",\n      attacks: \"Ataques\",\n      dangerousAttacks: \"Ataques Perigosos\",\n      keyPasses: \"Passes Chave\",\n      saves: \"Defesas do Goleiro\",\n      passAccuracy: \"Precis√£o de Passes (%)\",\n      noStats: \"Estat√≠sticas detalhadas ainda n√£o dispon√≠veis para este jogo.\",\n    },\n    common: {\n      loading: \"Carregando...\",\n      error: \"Erro\",\n      success: \"Sucesso\",\n      cancel: \"Cancelar\",\n      save: \"Salvar\",\n      close: \"Fechar\",\n      logout: \"Sair da Conta\",\n      welcome: \"Bem-vindo,\",\n    },\n  },\n  en: {\n    nav: {\n      home: \"Dashboard\",\n      tips: \"Tickets\",\n      live: \"Live\",\n      pregame: \"Pre-Game\",\n      bankroll: \"Bankroll\",\n      settings: \"Settings\",\n      admin: \"Admin\",\n      logout: \"Logout\",\n      welcome: \"Welcome,\",\n      hello: \"Hello,\",\n      notifications: \"Notifications\",\n      notificationsDesc: \"Enable to receive alerts for new tickets.\",\n      activateNow: \"Activate Now\",\n    },\n    dashboard: {\n      title: \"Command Center\",\n      subtitle: \"Professional Investor Performance\",\n      performanceChart: \"Performance Evolution\",\n      performanceSubtitle: \"Last 24 hours ‚Ä¢ Live\",\n      realtime: \"REALTIME\",\n      viewFull: \"View Full Dashboard\",\n      viewFullDesc: \"AI Scanner, full history, advanced analytics and more\",\n    },\n    landing: {\n      headline: \"Master the Market with the Perfect Fusion: 20 Elite Traders + Artificial Intelligence.\",\n      subline: \"No more amateurism. Access detailed analysis with projected accuracy of up to 97%. Leave the 'groups' and join the tool used worldwide by professionals.\",\n      cta: \"Unlock Professional Access\",\n    },\n    tips: {\n      title: \"PREMIUM SIGNALS\",\n      subtitle: \"Analysis curated by 20 experts + AI with 97% accuracy\",\n      noTips: \"No tickets available at the moment.\",\n      newSignals: \"New tickets will be published soon.\",\n      available: \"tickets available\",\n      error: \"Error loading tickets.\",\n      newSignalAvailable: \"New Ticket Available!\",\n      signalRemoved: \"Ticket removed\",\n      performanceLabel: \"Current Performance\",\n      performanceText: \"Average accuracy of\",\n      performanceTickets: \"on our tickets.\",\n      expertBadge: \"Experts + AI\",\n    },\n    live: {\n      title: \"Live\",\n      subtitle: \"Follow matches in real time ‚Ä¢ Click to view statistics\",\n      noGames: \"No live matches at the moment.\",\n      viewStats: \"Click to view detailed statistics\",\n      error: \"Error loading live matches. Please try again later.\",\n      searchPlaceholder: \"Search by team or league...\",\n      noResults: \"No matches found for\",\n      clearSearch: \"Clear search\",\n    },\n    pregame: {\n      title: \"Pre-Game\",\n      subtitle: \"Matches scheduled for the entire week\",\n      noGames: \"No matches scheduled for this date.\",\n      error: \"Error loading matches. Please try again later.\",\n      searchPlaceholder: \"Search by team or league...\",\n      noResults: \"No matches found for\",\n      clearSearch: \"Clear search\",\n    },\n    settings: {\n      title: \"Settings\",\n      subtitle: \"Customize your experience\",\n      language: \"Language\",\n      theme: \"Theme\",\n      darkMode: \"Dark Mode\",\n      lightMode: \"Light Mode\",\n      password: \"Change Password\",\n      currentPassword: \"Current Password\",\n      newPassword: \"New Password\",\n      updatePassword: \"Update Password\",\n      support: \"Support\",\n      contactSupport: \"Contact Support via WhatsApp\",\n    },\n    matchCenter: {\n      possession: \"POSSESSION\",\n      home: \"Home\",\n      away: \"Away\",\n      corners: \"Corners\",\n      yellowCards: \"Yellows\",\n      redCards: \"Reds\",\n      shotsOnGoal: \"Shots on Goal\",\n      shotsTotal: \"Total Shots\",\n      attacks: \"Attacks\",\n      dangerousAttacks: \"Dangerous Attacks\",\n      keyPasses: \"Key Passes\",\n      saves: \"Goalkeeper Saves\",\n      passAccuracy: \"Pass Accuracy (%)\",\n      noStats: \"Detailed statistics not yet available for this match.\",\n    },\n    common: {\n      loading: \"Loading...\",\n      error: \"Error\",\n      success: \"Success\",\n      cancel: \"Cancel\",\n      save: \"Save\",\n      close: \"Close\",\n      logout: \"Logout\",\n      welcome: \"Welcome,\",\n    },\n  },\n  es: {\n    nav: {\n      home: \"Panel\",\n      tips: \"Boletos\",\n      live: \"En Vivo\",\n      pregame: \"Pre-Partido\",\n      bankroll: \"Gesti√≥n de Banca\",\n      settings: \"Configuraci√≥n\",\n      admin: \"Admin\",\n      logout: \"Salir\",\n      welcome: \"Bienvenido,\",\n      hello: \"Hola,\",\n      notifications: \"Notificaciones\",\n      notificationsDesc: \"Activa para recibir alertas de nuevos boletos.\",\n      activateNow: \"Activar Ahora\",\n    },\n    dashboard: {\n      title: \"Centro de Comando\",\n      subtitle: \"Rendimiento de Inversor Profesional\",\n      performanceChart: \"Evoluci√≥n de Rendimiento\",\n      performanceSubtitle: \"√öltimas 24 horas ‚Ä¢ En Vivo\",\n      realtime: \"TIEMPO REAL\",\n      viewFull: \"Ver Panel Completo\",\n      viewFullDesc: \"AI Scanner, historial completo, an√°lisis avanzados y m√°s\",\n    },\n    landing: {\n      headline: \"Domina el Mercado con la Fusi√≥n Perfecta: 20 Traders de Elite + Inteligencia Artificial.\",\n      subline: \"Se acab√≥ el amateurismo. Accede a an√°lisis detallados con precisi√≥n proyectada de hasta 97%. Sal de los 'grupitos' y √∫nete a la herramienta usada mundialmente por profesionales.\",\n      cta: \"Desbloquear Acceso Profesional\",\n    },\n    tips: {\n      title: \"SE√ëALES PREMIUM\",\n      subtitle: \"An√°lisis curado por 20 expertos + IA con 97% de precisi√≥n\",\n      noTips: \"No hay boletos disponibles en este momento.\",\n      newSignals: \"Nuevos boletos se publicar√°n pronto.\",\n      available: \"boletos disponibles\",\n      error: \"Error al cargar boletos.\",\n      newSignalAvailable: \"¬°Nuevo Boleto Disponible!\",\n      signalRemoved: \"Boleto eliminado\",\n      performanceLabel: \"Rendimiento Actual\",\n      performanceText: \"Precisi√≥n promedio de\",\n      performanceTickets: \"en nuestros boletos.\",\n      expertBadge: \"Expertos + IA\",\n    },\n    live: {\n      title: \"En Vivo\",\n      subtitle: \"Sigue los partidos en tiempo real ‚Ä¢ Haz clic para ver estad√≠sticas\",\n      noGames: \"No hay partidos en vivo en este momento.\",\n      viewStats: \"Haz clic para ver estad√≠sticas detalladas\",\n      error: \"Error al cargar partidos en vivo. Por favor, int√©ntalo de nuevo m√°s tarde.\",\n      searchPlaceholder: \"Buscar por equipo o liga...\",\n      noResults: \"No se encontraron partidos para\",\n      clearSearch: \"Limpiar b√∫squeda\",\n    },\n    pregame: {\n      title: \"Pre-Partido\",\n      subtitle: \"Partidos programados para toda la semana\",\n      noGames: \"No hay partidos programados para esta fecha.\",\n      error: \"Error al cargar partidos. Por favor, int√©ntalo de nuevo m√°s tarde.\",\n      searchPlaceholder: \"Buscar por equipo o liga...\",\n      noResults: \"No se encontraron partidos para\",\n      clearSearch: \"Limpiar b√∫squeda\",\n    },\n    settings: {\n      title: \"Configuraci√≥n\",\n      subtitle: \"Personaliza tu experiencia\",\n      language: \"Idioma\",\n      theme: \"Tema\",\n      darkMode: \"Modo Oscuro\",\n      lightMode: \"Modo Claro\",\n      password: \"Cambiar Contrase√±a\",\n      currentPassword: \"Contrase√±a Actual\",\n      newPassword: \"Nueva Contrase√±a\",\n      updatePassword: \"Actualizar Contrase√±a\",\n      support: \"Soporte\",\n      contactSupport: \"Contactar Soporte v√≠a WhatsApp\",\n    },\n    matchCenter: {\n      possession: \"POSESI√ìN\",\n      home: \"Casa\",\n      away: \"Fuera\",\n      corners: \"C√≥rners\",\n      yellowCards: \"Amarillas\",\n      redCards: \"Rojas\",\n      shotsOnGoal: \"Tiros a Puerta\",\n      shotsTotal: \"Tiros Totales\",\n      attacks: \"Ataques\",\n      dangerousAttacks: \"Ataques Peligrosos\",\n      keyPasses: \"Pases Clave\",\n      saves: \"Paradas del Portero\",\n      passAccuracy: \"Precisi√≥n de Pases (%)\",\n      noStats: \"Estad√≠sticas detalladas a√∫n no disponibles para este partido.\",\n    },\n    common: {\n      loading: \"Cargando...\",\n      error: \"Error\",\n      success: \"√âxito\",\n      cancel: \"Cancelar\",\n      save: \"Guardar\",\n      close: \"Cerrar\",\n      logout: \"Cerrar Sesi√≥n\",\n      welcome: \"Bienvenido,\",\n    },\n  },\n  fr: {\n    nav: {\n      home: \"Tableau de Bord\",\n      tips: \"Billets\",\n      live: \"En Direct\",\n      pregame: \"Pr√©-Match\",\n      bankroll: \"Gestion de Bankroll\",\n      settings: \"Param√®tres\",\n      admin: \"Admin\",\n      logout: \"D√©connexion\",\n      welcome: \"Bienvenue,\",\n      hello: \"Bonjour,\",\n      notifications: \"Notifications\",\n      notificationsDesc: \"Activez pour recevoir des alertes de nouveaux billets.\",\n      activateNow: \"Activer Maintenant\",\n    },\n    dashboard: {\n      title: \"Centre de Commande\",\n      subtitle: \"Performance d'Investisseur Professionnel\",\n      performanceChart: \"√âvolution de la Performance\",\n      performanceSubtitle: \"Derni√®res 24 heures ‚Ä¢ En Direct\",\n      realtime: \"TEMPS R√âEL\",\n      viewFull: \"Voir le Tableau de Bord Complet\",\n      viewFullDesc: \"AI Scanner, historique complet, analyses avanc√©es et plus\",\n    },\n    landing: {\n      headline: \"Dominez le March√© avec la Fusion Parfaite: 20 Traders d'Elite + Intelligence Artificielle.\",\n      subline: \"Fini l'amateurisme. Acc√©dez √† des analyses d√©taill√©es avec une pr√©cision projet√©e jusqu'√† 97%. Quittez les 'petits groupes' et rejoignez l'outil utilis√© mondialement par les professionnels.\",\n      cta: \"D√©bloquer l'Acc√®s Professionnel\",\n    },\n    tips: {\n      title: \"SIGNAUX PREMIUM\",\n      subtitle: \"Analyses cur√©es par 20 experts + IA avec 97% de pr√©cision\",\n      noTips: \"Aucun billet disponible pour le moment.\",\n      newSignals: \"De nouveaux billets seront publi√©s bient√¥t.\",\n      available: \"billets disponibles\",\n      error: \"Erreur lors du chargement des billets.\",\n      newSignalAvailable: \"Nouveau Billet Disponible!\",\n      signalRemoved: \"Billet supprim√©\",\n      performanceLabel: \"Performance Actuelle\",\n      performanceText: \"Pr√©cision moyenne de\",\n      performanceTickets: \"sur nos billets.\",\n      expertBadge: \"Experts + IA\",\n    },\n    live: {\n      title: \"En Direct\",\n      subtitle: \"Suivez les matchs en temps r√©el ‚Ä¢ Cliquez pour voir les statistiques\",\n      noGames: \"Aucun match en direct pour le moment.\",\n      viewStats: \"Cliquez pour voir les statistiques d√©taill√©es\",\n      error: \"Erreur lors du chargement des matchs en direct. Veuillez r√©essayer plus tard.\",\n      searchPlaceholder: \"Rechercher par √©quipe ou ligue...\",\n      noResults: \"Aucun match trouv√© pour\",\n      clearSearch: \"Effacer la recherche\",\n    },\n    pregame: {\n      title: \"Pr√©-Match\",\n      subtitle: \"Matchs programm√©s pour toute la semaine\",\n      noGames: \"Aucun match programm√© pour cette date.\",\n      error: \"Erreur lors du chargement des matchs. Veuillez r√©essayer plus tard.\",\n      searchPlaceholder: \"Rechercher par √©quipe ou ligue...\",\n      noResults: \"Aucun match trouv√© pour\",\n      clearSearch: \"Effacer la recherche\",\n    },\n    settings: {\n      title: \"Param√®tres\",\n      subtitle: \"Personnalisez votre exp√©rience\",\n      language: \"Langue\",\n      theme: \"Th√®me\",\n      darkMode: \"Mode Sombre\",\n      lightMode: \"Mode Clair\",\n      password: \"Changer le Mot de Passe\",\n      currentPassword: \"Mot de Passe Actuel\",\n      newPassword: \"Nouveau Mot de Passe\",\n      updatePassword: \"Mettre √† Jour le Mot de Passe\",\n      support: \"Support\",\n      contactSupport: \"Contacter le Support via WhatsApp\",\n    },\n    matchCenter: {\n      possession: \"POSSESSION\",\n      home: \"Domicile\",\n      away: \"Ext√©rieur\",\n      corners: \"Corners\",\n      yellowCards: \"Jaunes\",\n      redCards: \"Rouges\",\n      shotsOnGoal: \"Tirs Cadr√©s\",\n      shotsTotal: \"Tirs Totaux\",\n      attacks: \"Attaques\",\n      dangerousAttacks: \"Attaques Dangereuses\",\n      keyPasses: \"Passes Cl√©s\",\n      saves: \"Arr√™ts du Gardien\",\n      passAccuracy: \"Pr√©cision des Passes (%)\",\n      noStats: \"Statistiques d√©taill√©es pas encore disponibles pour ce match.\",\n    },\n    common: {\n      loading: \"Chargement...\",\n      error: \"Erreur\",\n      success: \"Succ√®s\",\n      cancel: \"Annuler\",\n      save: \"Sauvegarder\",\n      close: \"Fermer\",\n      logout: \"D√©connexion\",\n      welcome: \"Bienvenue,\",\n    },\n  },\n  it: {\n    nav: {\n      home: \"Pannello\",\n      tips: \"Biglietti\",\n      live: \"In Diretta\",\n      pregame: \"Pre-Partita\",\n      bankroll: \"Gestione Bankroll\",\n      settings: \"Impostazioni\",\n      admin: \"Admin\",\n      logout: \"Disconnetti\",\n      welcome: \"Benvenuto,\",\n      hello: \"Ciao,\",\n      notifications: \"Notifiche\",\n      notificationsDesc: \"Attiva per ricevere avvisi di nuovi biglietti.\",\n      activateNow: \"Attiva Ora\",\n    },\n    dashboard: {\n      title: \"Centro di Comando\",\n      subtitle: \"Performance di Investitore Professionale\",\n      performanceChart: \"Evoluzione delle Prestazioni\",\n      performanceSubtitle: \"Ultime 24 ore ‚Ä¢ In Diretta\",\n      realtime: \"TEMPO REALE\",\n      viewFull: \"Visualizza Dashboard Completo\",\n      viewFullDesc: \"AI Scanner, cronologia completa, analisi avanzate e altro\",\n    },\n    landing: {\n      headline: \"Domina il Mercato con la Fusione Perfetta: 20 Trader d'Elite + Intelligenza Artificiale.\",\n      subline: \"Basta dilettantismo. Accedi ad analisi dettagliate con precisione prevista fino al 97%. Lascia i 'gruppetti' e unisciti allo strumento usato a livello mondiale dai professionisti.\",\n      cta: \"Sblocca l'Accesso Professionale\",\n    },\n    tips: {\n      title: \"SEGNALI PREMIUM\",\n      subtitle: \"Analisi curate da 20 esperti + IA con precisione del 97%\",\n      noTips: \"Nessun biglietto disponibile al momento.\",\n      newSignals: \"Nuovi biglietti saranno pubblicati a breve.\",\n      available: \"biglietti disponibili\",\n      error: \"Errore nel caricamento dei biglietti.\",\n      newSignalAvailable: \"Nuovo Biglietto Disponibile!\",\n      signalRemoved: \"Biglietto rimosso\",\n      performanceLabel: \"Prestazioni Attuali\",\n      performanceText: \"Precisione media di\",\n      performanceTickets: \"sui nostri biglietti.\",\n      expertBadge: \"Esperti + IA\",\n    },\n    live: {\n      title: \"In Diretta\",\n      subtitle: \"Segui le partite in tempo reale ‚Ä¢ Clicca per vedere le statistiche\",\n      noGames: \"Nessuna partita in diretta al momento.\",\n      viewStats: \"Clicca per vedere le statistiche dettagliate\",\n      error: \"Errore nel caricamento delle partite in diretta. Riprova pi√π tardi.\",\n      searchPlaceholder: \"Cerca per squadra o lega...\",\n      noResults: \"Nessuna partita trovata per\",\n      clearSearch: \"Cancella ricerca\",\n    },\n    pregame: {\n      title: \"Pre-Partita\",\n      subtitle: \"Partite programmate per tutta la settimana\",\n      noGames: \"Nessuna partita programmata per questa data.\",\n      error: \"Errore nel caricamento delle partite. Riprova pi√π tardi.\",\n      searchPlaceholder: \"Cerca per squadra o lega...\",\n      noResults: \"Nessuna partita trovata per\",\n      clearSearch: \"Cancella ricerca\",\n    },\n    settings: {\n      title: \"Impostazioni\",\n      subtitle: \"Personalizza la tua esperienza\",\n      language: \"Lingua\",\n      theme: \"Tema\",\n      darkMode: \"Modalit√† Scura\",\n      lightMode: \"Modalit√† Chiara\",\n      password: \"Cambia Password\",\n      currentPassword: \"Password Attuale\",\n      newPassword: \"Nuova Password\",\n      updatePassword: \"Aggiorna Password\",\n      support: \"Supporto\",\n      contactSupport: \"Contatta il Supporto via WhatsApp\",\n    },\n    matchCenter: {\n      possession: \"POSSESSO\",\n      home: \"Casa\",\n      away: \"Trasferta\",\n      corners: \"Calci d'Angolo\",\n      yellowCards: \"Gialli\",\n      redCards: \"Rossi\",\n      shotsOnGoal: \"Tiri in Porta\",\n      shotsTotal: \"Tiri Totali\",\n      attacks: \"Attacchi\",\n      dangerousAttacks: \"Attacchi Pericolosi\",\n      keyPasses: \"Passaggi Chiave\",\n      saves: \"Parate del Portiere\",\n      passAccuracy: \"Precisione dei Passaggi (%)\",\n      noStats: \"Statistiche dettagliate non ancora disponibili per questa partita.\",\n    },\n    common: {\n      loading: \"Caricamento...\",\n      error: \"Errore\",\n      success: \"Successo\",\n      cancel: \"Annulla\",\n      save: \"Salva\",\n      close: \"Chiudi\",\n      logout: \"Disconnetti\",\n      welcome: \"Benvenuto,\",\n    },\n  },\n  cn: {\n    nav: {\n      home: \"‰ª™Ë°®Êùø\",\n      tips: \"ÊäïÊ≥®Âçï\",\n      live: \"Áõ¥Êí≠\",\n      pregame: \"ËµõÂâç\",\n      bankroll: \"ËµÑÈáëÁÆ°ÁêÜ\",\n      settings: \"ËÆæÁΩÆ\",\n      admin: \"ÁÆ°ÁêÜ\",\n      logout: \"ÁôªÂá∫\",\n      welcome: \"Ê¨¢Ëøé,\",\n      hello: \"‰Ω†Â•Ω,\",\n      notifications: \"ÈÄöÁü•\",\n      notificationsDesc: \"ÂêØÁî®‰ª•Êé•Êî∂Êñ∞ÊäïÊ≥®ÂçïÁöÑË≠¶Êä•„ÄÇ\",\n      activateNow: \"Á´ãÂç≥ÊøÄÊ¥ª\",\n    },\n    dashboard: {\n      title: \"ÊåáÊå•‰∏≠ÂøÉ\",\n      subtitle: \"‰∏ì‰∏öÊäïËµÑËÄÖË°®Áé∞\",\n      performanceChart: \"ÊÄßËÉΩÊºîÂèò\",\n      performanceSubtitle: \"ËøáÂéª24Â∞èÊó∂ ‚Ä¢ Áõ¥Êí≠\",\n      realtime: \"ÂÆûÊó∂\",\n      viewFull: \"Êü•ÁúãÂÆåÊï¥‰ª™Ë°®Êùø\",\n      viewFullDesc: \"AIÊâ´ÊèèÂô®ÔºåÂÆåÊï¥ÂéÜÂè≤ËÆ∞ÂΩïÔºåÈ´òÁ∫ßÂàÜÊûêÁ≠â\",\n    },\n    landing: {\n      headline: \"ÈÄöËøáÂÆåÁæéËûçÂêà‰∏ªÂØºÂ∏ÇÂú∫Ôºö20‰ΩçÁ≤æËã±‰∫§ÊòìÂëò+‰∫∫Â∑•Êô∫ËÉΩ„ÄÇ\",\n      subline: \"ÂëäÂà´‰∏ö‰Ωô„ÄÇËÆøÈóÆËØ¶ÁªÜÂàÜÊûêÔºåÈ¢ÑËÆ°ÂáÜÁ°ÆÁéáÈ´òËææ97%„ÄÇÁ¶ªÂºÄ'Â∞èÂõ¢‰Ωì'ÔºåÂä†ÂÖ•ÂÖ®ÁêÉ‰∏ì‰∏ö‰∫∫Â£´‰ΩøÁî®ÁöÑÂ∑•ÂÖ∑„ÄÇ\",\n      cta: \"Ëß£ÈîÅ‰∏ì‰∏öËÆøÈóÆ\",\n    },\n    tips: {\n      title: \"‰ºòË¥®‰ø°Âè∑\",\n      subtitle: \"Áî±20‰Ωç‰∏ìÂÆ∂Á≠ñÂàíÁöÑÂàÜÊûê+AIÔºåÂáÜÁ°ÆÁéá97%\",\n      noTips: \"ÁõÆÂâçÊ≤°ÊúâÂèØÁî®ÁöÑÊäïÊ≥®Âçï„ÄÇ\",\n      newSignals: \"Êñ∞ÊäïÊ≥®ÂçïÂç≥Â∞ÜÂèëÂ∏É„ÄÇ\",\n      available: \"ÂèØÁî®ÊäïÊ≥®Âçï\",\n      error: \"Âä†ËΩΩÊäïÊ≥®ÂçïÊó∂Âá∫Èîô„ÄÇ\",\n      newSignalAvailable: \"Êñ∞ÊäïÊ≥®ÂçïÂèØÁî®ÔºÅ\",\n      signalRemoved: \"ÊäïÊ≥®ÂçïÂ∑≤Âà†Èô§\",\n      performanceLabel: \"ÂΩìÂâçË°®Áé∞\",\n      performanceText: \"Âπ≥ÂùáÂáÜÁ°ÆÁéá\",\n      performanceTickets: \"Âú®Êàë‰ª¨ÁöÑÊäïÊ≥®Âçï‰∏ä„ÄÇ\",\n      expertBadge: \"‰∏ìÂÆ∂ + AI\",\n    },\n    live: {\n      title: \"Áõ¥Êí≠\",\n      subtitle: \"ÂÆûÊó∂ÂÖ≥Ê≥®ÊØîËµõ ‚Ä¢ ÁÇπÂáªÊü•ÁúãÁªüËÆ°Êï∞ÊçÆ\",\n      noGames: \"ÁõÆÂâçÊ≤°ÊúâÁõ¥Êí≠ÊØîËµõ„ÄÇ\",\n      viewStats: \"ÁÇπÂáªÊü•ÁúãËØ¶ÁªÜÁªüËÆ°Êï∞ÊçÆ\",\n      error: \"Âä†ËΩΩÁõ¥Êí≠ÊØîËµõÊó∂Âá∫Èîô„ÄÇËØ∑Á®çÂêéÂÜçËØï„ÄÇ\",\n      searchPlaceholder: \"ÊåâÂõ¢ÈòüÊàñËÅîËµõÊêúÁ¥¢...\",\n      noResults: \"Êú™ÊâæÂà∞ÂåπÈÖçÈ°π\",\n      clearSearch: \"Ê∏ÖÈô§ÊêúÁ¥¢\",\n    },\n    pregame: {\n      title: \"ËµõÂâç\",\n      subtitle: \"Êï¥Âë®È¢ÑÂÆöÁöÑÊØîËµõ\",\n      noGames: \"Ê≠§Êó•ÊúüÊ≤°ÊúâÈ¢ÑÂÆöÁöÑÊØîËµõ„ÄÇ\",\n      error: \"Âä†ËΩΩÊØîËµõÊó∂Âá∫Èîô„ÄÇËØ∑Á®çÂêéÂÜçËØï„ÄÇ\",\n      searchPlaceholder: \"ÊåâÂõ¢ÈòüÊàñËÅîËµõÊêúÁ¥¢...\",\n      noResults: \"Êú™ÊâæÂà∞ÂåπÈÖçÈ°π\",\n      clearSearch: \"Ê∏ÖÈô§ÊêúÁ¥¢\",\n    },\n    settings: {\n      title: \"ËÆæÁΩÆ\",\n      subtitle: \"Ëá™ÂÆö‰πâÊÇ®ÁöÑ‰ΩìÈ™å\",\n      language: \"ËØ≠Ë®Ä\",\n      theme: \"‰∏ªÈ¢ò\",\n      darkMode: \"Ê∑±Ëâ≤Ê®°Âºè\",\n      lightMode: \"ÊµÖËâ≤Ê®°Âºè\",\n      password: \"Êõ¥ÊîπÂØÜÁ†Å\",\n      currentPassword: \"ÂΩìÂâçÂØÜÁ†Å\",\n      newPassword: \"Êñ∞ÂØÜÁ†Å\",\n      updatePassword: \"Êõ¥Êñ∞ÂØÜÁ†Å\",\n      support: \"ÊîØÊåÅ\",\n      contactSupport: \"ÈÄöËøáWhatsAppËÅîÁ≥ªÊîØÊåÅ\",\n    },\n    matchCenter: {\n      possession: \"ÊéßÁêÉÁéá\",\n      home: \"‰∏ªÂú∫\",\n      away: \"ÂÆ¢Âú∫\",\n      corners: \"ËßíÁêÉ\",\n      yellowCards: \"ÈªÑÁâå\",\n      redCards: \"Á∫¢Áâå\",\n      shotsOnGoal: \"Â∞ÑÊ≠£\",\n      shotsTotal: \"Â∞ÑÈó®ÊÄªÊï∞\",\n      attacks: \"ËøõÊîª\",\n      dangerousAttacks: \"Âç±Èô©ËøõÊîª\",\n      keyPasses: \"ÂÖ≥ÈîÆ‰º†ÁêÉ\",\n      saves: \"ÂÆàÈó®ÂëòÊâëÊïë\",\n      passAccuracy: \"‰º†ÁêÉÁ≤æÂ∫¶ (%)\",\n      noStats: \"Ê≠§ÊØîËµõÁöÑËØ¶ÁªÜÁªüËÆ°Êï∞ÊçÆÂ∞ö‰∏çÂèØÁî®„ÄÇ\",\n    },\n    common: {\n      loading: \"Âä†ËΩΩ‰∏≠...\",\n      error: \"ÈîôËØØ\",\n      success: \"ÊàêÂäü\",\n      cancel: \"ÂèñÊ∂à\",\n      save: \"‰øùÂ≠ò\",\n      close: \"ÂÖ≥Èó≠\",\n      logout: \"ÁôªÂá∫\",\n      welcome: \"Ê¨¢Ëøé,\",\n    },\n  },\n} as const;\n\nexport type Language = keyof typeof translations;\nexport type TranslationKey = keyof typeof translations.pt;\n","path":null,"size_bytes":22970,"size_tokens":null},"client/src/hooks/use-language.tsx":{"content":"import { createContext, useContext, useState, ReactNode, useEffect, useMemo, useCallback } from \"react\";\nimport { translations, Language } from \"@/i18n/translations\";\n\ninterface LanguageContextType {\n  language: Language;\n  setLanguage: (lang: Language) => void;\n  t: (typeof translations)[Language];\n}\n\nconst LanguageContext = createContext<LanguageContextType | undefined>(undefined);\n\nexport function LanguageProvider({ children }: { children: ReactNode }) {\n  const [language, setLanguageState] = useState<Language>(() => {\n    if (typeof window !== 'undefined') {\n      const saved = localStorage.getItem(\"tipster-language\");\n      return (saved as Language) || \"pt\";\n    }\n    return \"pt\";\n  });\n\n  const setLanguage = useCallback((lang: Language) => {\n    console.log(\"üåê [LANGUAGE] Changing to:\", lang);\n    setLanguageState(lang);\n    localStorage.setItem(\"tipster-language\", lang);\n    document.documentElement.lang = lang;\n  }, []);\n\n  useEffect(() => {\n    document.documentElement.lang = language;\n  }, [language]);\n\n  const t = useMemo(() => translations[language], [language]);\n\n  const value = useMemo<LanguageContextType>(() => ({\n    language,\n    setLanguage,\n    t,\n  }), [language, setLanguage, t]);\n\n  return (\n    <LanguageContext.Provider value={value}>\n      {children}\n    </LanguageContext.Provider>\n  );\n}\n\nexport function useLanguage() {\n  const context = useContext(LanguageContext);\n  if (!context) {\n    throw new Error(\"useLanguage must be used within a LanguageProvider\");\n  }\n  return context;\n}\n","path":null,"size_bytes":1533,"size_tokens":null},"client/src/components/logo.tsx":{"content":"interface LogoProps {\n  className?: string;\n  showText?: boolean;\n  size?: 'sm' | 'md' | 'lg' | 'xl';\n}\n\nexport function Logo({ className = \"\", showText = true, size = 'md' }: LogoProps) {\n  const sizes = {\n    sm: { icon: 20, text: 'text-sm', gap: 'gap-1.5' },\n    md: { icon: 26, text: 'text-base', gap: 'gap-2' },\n    lg: { icon: 34, text: 'text-xl', gap: 'gap-2.5' },\n    xl: { icon: 48, text: 'text-3xl', gap: 'gap-3' },\n  }[size];\n\n  return (\n    <div className={`flex items-center ${sizes.gap} ${className} select-none`}>\n      \n      {/* SIGNAL MONOLITH - Minimal shield with pulse cut */}\n      <div className=\"relative flex-shrink-0\" style={{ width: sizes.icon, height: sizes.icon * 1.2 }}>\n        <svg \n          width={sizes.icon}\n          height={sizes.icon * 1.2}\n          viewBox=\"0 0 40 48\" \n          fill=\"none\" \n          xmlns=\"http://www.w3.org/2000/svg\"\n        >\n          <defs>\n            <linearGradient id=\"monolith-gradient\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\n              <stop offset=\"0%\" stopColor=\"#4ade80\" />\n              <stop offset=\"100%\" stopColor=\"#33b864\" />\n            </linearGradient>\n            <filter id=\"monolith-glow\" x=\"-30%\" y=\"-30%\" width=\"160%\" height=\"160%\">\n              <feGaussianBlur stdDeviation=\"1.5\" result=\"blur\" />\n              <feMerge>\n                <feMergeNode in=\"blur\" />\n                <feMergeNode in=\"SourceGraphic\" />\n              </feMerge>\n            </filter>\n          </defs>\n          \n          {/* Shield monolith shape */}\n          <path \n            d=\"M4 6 L4 32 Q4 40 20 46 Q36 40 36 32 L36 6 Q36 2 32 2 L8 2 Q4 2 4 6 Z\" \n            fill=\"none\"\n            stroke=\"url(#monolith-gradient)\"\n            strokeWidth=\"2.5\"\n            filter=\"url(#monolith-glow)\"\n          />\n          \n          {/* Precision pulse/signal line cutting through */}\n          <path \n            d=\"M8 24 L14 24 L17 18 L20 30 L23 22 L26 26 L32 26\" \n            stroke=\"#33b864\" \n            strokeWidth=\"2.5\" \n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            fill=\"none\"\n          >\n            <animate \n              attributeName=\"stroke-dasharray\" \n              values=\"0,100;50,100\" \n              dur=\"2s\" \n              repeatCount=\"indefinite\"\n            />\n          </path>\n          \n          {/* Active signal dot */}\n          <circle cx=\"32\" cy=\"26\" r=\"2\" fill=\"#33b864\">\n            <animate attributeName=\"opacity\" values=\"1;0.4;1\" dur=\"1s\" repeatCount=\"indefinite\" />\n          </circle>\n        </svg>\n      </div>\n\n      {/* WORDMARK */}\n      {showText && (\n        <div className=\"flex items-baseline gap-1\">\n          <span \n            className={`font-semibold tracking-tight text-white/70 ${sizes.text}`}\n            style={{ fontFamily: 'Inter, system-ui, sans-serif' }}\n          >\n            TRUE\n          </span>\n          <span \n            className={`font-bold tracking-tight text-white ${sizes.text}`}\n            style={{ fontFamily: 'Inter, system-ui, sans-serif' }}\n          >\n            SIGNAL\n          </span>\n        </div>\n      )}\n    </div>\n  );\n}\n","path":null,"size_bytes":3112,"size_tokens":null},"client/src/components/matrix-background.tsx":{"content":"import { useEffect, useRef } from \"react\";\n\nexport function MatrixBackground() {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n\n    const ctx = canvas.getContext(\"2d\");\n    if (!ctx) return;\n\n    const setCanvasSize = () => {\n      canvas.width = window.innerWidth;\n      canvas.height = window.innerHeight;\n    };\n    setCanvasSize();\n    window.addEventListener(\"resize\", setCanvasSize);\n\n    const particles: Array<{\n      x: number;\n      y: number;\n      vx: number;\n      vy: number;\n      size: number;\n      opacity: number;\n    }> = [];\n\n    const particleCount = 50;\n    for (let i = 0; i < particleCount; i++) {\n      particles.push({\n        x: Math.random() * canvas.width,\n        y: Math.random() * canvas.height,\n        vx: (Math.random() - 0.5) * 0.3,\n        vy: (Math.random() - 0.5) * 0.3,\n        size: Math.random() * 2 + 1,\n        opacity: Math.random() * 0.5 + 0.2,\n      });\n    }\n\n    const gridLines: Array<{\n      x1: number;\n      y1: number;\n      x2: number;\n      y2: number;\n      opacity: number;\n      speed: number;\n    }> = [];\n\n    for (let i = 0; i < 15; i++) {\n      gridLines.push({\n        x1: Math.random() * canvas.width,\n        y1: 0,\n        x2: Math.random() * canvas.width,\n        y2: canvas.height,\n        opacity: Math.random() * 0.1 + 0.02,\n        speed: Math.random() * 0.5 + 0.2,\n      });\n    }\n\n    let animationFrameId: number;\n\n    function animate() {\n      if (!ctx || !canvas) return;\n\n      ctx.fillStyle = \"rgba(0, 0, 0, 0.05)\";\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n      gridLines.forEach((line) => {\n        ctx.strokeStyle = `rgba(51, 184, 100, ${line.opacity})`;\n        ctx.lineWidth = 1;\n        ctx.beginPath();\n        ctx.moveTo(line.x1, line.y1);\n        ctx.lineTo(line.x2, line.y2);\n        ctx.stroke();\n\n        line.x1 += line.speed;\n        line.x2 += line.speed;\n\n        if (line.x1 > canvas.width) {\n          line.x1 = 0;\n          line.x2 = Math.random() * canvas.width;\n        }\n      });\n\n      particles.forEach((p) => {\n        ctx.fillStyle = `rgba(51, 184, 100, ${p.opacity})`;\n        ctx.beginPath();\n        ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);\n        ctx.fill();\n\n        p.x += p.vx;\n        p.y += p.vy;\n\n        if (p.x < 0 || p.x > canvas.width) p.vx *= -1;\n        if (p.y < 0 || p.y > canvas.height) p.vy *= -1;\n      });\n\n      particles.forEach((p1, i) => {\n        particles.slice(i + 1).forEach((p2) => {\n          const dx = p1.x - p2.x;\n          const dy = p1.y - p2.y;\n          const distance = Math.sqrt(dx * dx + dy * dy);\n\n          if (distance < 150) {\n            ctx.strokeStyle = `rgba(51, 184, 100, ${0.1 * (1 - distance / 150)})`;\n            ctx.lineWidth = 0.5;\n            ctx.beginPath();\n            ctx.moveTo(p1.x, p1.y);\n            ctx.lineTo(p2.x, p2.y);\n            ctx.stroke();\n          }\n        });\n      });\n\n      animationFrameId = requestAnimationFrame(animate);\n    }\n\n    animate();\n\n    return () => {\n      window.removeEventListener(\"resize\", setCanvasSize);\n      cancelAnimationFrame(animationFrameId);\n    };\n  }, []);\n\n  return (\n    <canvas\n      ref={canvasRef}\n      className=\"fixed inset-0 pointer-events-none -z-50\"\n      style={{ background: \"#000000\" }}\n    />\n  );\n}\n","path":null,"size_bytes":3347,"size_tokens":null},"client/src/components/profit-chart.tsx":{"content":"import { motion } from \"framer-motion\";\nimport { useEffect, useState } from \"react\";\n\nexport function ProfitChart() {\n  const [mounted, setMounted] = useState(false);\n\n  useEffect(() => {\n    setMounted(true);\n  }, []);\n\n  const oceanPoints = \"M0,100 L20,95 L40,85 L60,70 L80,50 L100,25\";\n  const commonPoints = \"M0,100 L20,98 L40,95 L60,93 L80,95 L100,100\";\n\n  return (\n    <div className=\"relative w-full h-64 bg-black/40 rounded-2xl border border-primary/20 p-6 overflow-hidden\">\n      <div className=\"absolute inset-0 bg-gradient-to-t from-primary/5 to-transparent opacity-50\" />\n      \n      <div className=\"relative z-10 h-full\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h3 className=\"text-white font-bold\">Performance Acumulada 2024</h3>\n          <div className=\"flex items-center gap-4 text-xs\">\n            <div className=\"flex items-center gap-2\">\n              <div className=\"w-3 h-3 rounded-full bg-primary\" />\n              <span className=\"text-primary font-semibold\">TRUE SIGNAL</span>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <div className=\"w-3 h-3 rounded-full bg-gray-500\" />\n              <span className=\"text-gray-400\">Apostador Comum</span>\n            </div>\n          </div>\n        </div>\n\n        <svg viewBox=\"0 0 100 100\" className=\"w-full h-full\" preserveAspectRatio=\"none\">\n          <defs>\n            <linearGradient id=\"oceanGradient\" x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\n              <stop offset=\"0%\" stopColor=\"#33b864\" stopOpacity=\"0.3\" />\n              <stop offset=\"100%\" stopColor=\"#33b864\" stopOpacity=\"0\" />\n            </linearGradient>\n          </defs>\n\n          <motion.path\n            d={commonPoints + \" L100,100 L0,100 Z\"}\n            fill=\"url(#oceanGradient)\"\n            opacity={0.1}\n            initial={{ pathLength: 0 }}\n            animate={{ pathLength: mounted ? 1 : 0 }}\n            transition={{ duration: 2, ease: \"easeInOut\" }}\n          />\n          \n          <motion.path\n            d={commonPoints}\n            stroke=\"#6b7280\"\n            strokeWidth=\"0.5\"\n            fill=\"none\"\n            strokeDasharray=\"2,2\"\n            initial={{ pathLength: 0 }}\n            animate={{ pathLength: mounted ? 1 : 0 }}\n            transition={{ duration: 2, ease: \"easeInOut\" }}\n          />\n\n          <motion.path\n            d={oceanPoints + \" L100,100 L0,100 Z\"}\n            fill=\"url(#oceanGradient)\"\n            initial={{ pathLength: 0 }}\n            animate={{ pathLength: mounted ? 1 : 0 }}\n            transition={{ duration: 2, ease: \"easeInOut\", delay: 0.3 }}\n          />\n          \n          <motion.path\n            d={oceanPoints}\n            stroke=\"#33b864\"\n            strokeWidth=\"1\"\n            fill=\"none\"\n            initial={{ pathLength: 0 }}\n            animate={{ pathLength: mounted ? 1 : 0 }}\n            transition={{ duration: 2, ease: \"easeInOut\", delay: 0.3 }}\n          />\n\n          <motion.circle\n            cx=\"100\"\n            cy=\"25\"\n            r=\"1.5\"\n            fill=\"#33b864\"\n            initial={{ scale: 0 }}\n            animate={{ scale: mounted ? [1, 1.5, 1] : 0 }}\n            transition={{ duration: 2, repeat: Infinity, delay: 2.3 }}\n          />\n        </svg>\n\n        <div className=\"flex justify-between text-xs text-gray-600 mt-2\">\n          <span>Jan</span>\n          <span>Dez</span>\n        </div>\n      </div>\n\n      <div className=\"absolute top-6 right-6 text-right\">\n        <motion.div\n          initial={{ opacity: 0, scale: 0 }}\n          animate={{ opacity: 1, scale: 1 }}\n          transition={{ delay: 2.5, type: \"spring\" }}\n          className=\"text-2xl font-bold text-primary drop-shadow-[0_0_10px_rgba(51,184,100,0.5)]\"\n          data-testid=\"text-roi-percentage\"\n        >\n          +450%\n        </motion.div>\n        <div className=\"text-xs text-gray-400\">ROI M√©dio</div>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":3923,"size_tokens":null},"client/src/lib/stats-mapper.ts":{"content":"import { FixtureStatistics } from \"./football-service\";\n\nexport interface MappedGameStats {\n  xg?: { home: number; away: number };\n  attacks?: { home: number; away: number };\n  dangerousAttacks?: { home: number; away: number };\n  possession?: { home: number; away: number };\n  corners?: { home: number; away: number };\n  yellowCards?: { home: number; away: number };\n  redCards?: { home: number; away: number };\n  shotsTotal?: { home: number; away: number };\n  shotsOnGoal?: { home: number; away: number };\n  keyPasses?: { home: number; away: number };\n  saves?: { home: number; away: number };\n  passAccuracy?: { home: number; away: number };\n}\n\nexport function mapFixtureStatistics(\n  apiStats: FixtureStatistics[]\n): MappedGameStats {\n  if (!apiStats || apiStats.length < 2) {\n    console.warn('Stats Mapper: Dados insuficientes', apiStats);\n    return {};\n  }\n\n  const homeStats = apiStats[0].statistics;\n  const awayStats = apiStats[1].statistics;\n  \n  console.log('üìä Stats Mapper - Dados da API:', {\n    home: apiStats[0].team.name,\n    away: apiStats[1].team.name,\n    homeStats: homeStats.map(s => `${s.type}: ${s.value}`),\n    awayStats: awayStats.map(s => `${s.type}: ${s.value}`)\n  });\n\n  const getStat = (stats: any[], type: string): number | null => {\n    const stat = stats.find((s) => s.type === type);\n    if (!stat || stat.value === null) return null;\n    \n    // Handle percentage strings\n    if (typeof stat.value === \"string\" && stat.value.includes(\"%\")) {\n      return parseInt(stat.value.replace(\"%\", \"\"));\n    }\n    \n    return typeof stat.value === \"number\" ? stat.value : parseInt(stat.value);\n  };\n\n  const mapped: MappedGameStats = {};\n\n  // xG (Expected Goals) - API may not provide this\n  const homeXg = getStat(homeStats, \"expected_goals\");\n  const awayXg = getStat(awayStats, \"expected_goals\");\n  if (homeXg !== null && awayXg !== null) {\n    mapped.xg = { home: homeXg, away: awayXg };\n  }\n\n  // Attacks - API Football n√£o fornece, ent√£o estimamos\n  // Estimativa: (Total Passes / 4) + Total Shots para aproximar ataques reais\n  let homeAttacks = getStat(homeStats, \"Attacks\");\n  let awayAttacks = getStat(awayStats, \"Attacks\");\n  \n  if (homeAttacks === null || awayAttacks === null) {\n    const homePasses = getStat(homeStats, \"Total passes\") || 0;\n    const awayPasses = getStat(awayStats, \"Total passes\") || 0;\n    const homeShots = getStat(homeStats, \"Total Shots\") || 0;\n    const awayShots = getStat(awayStats, \"Total Shots\") || 0;\n    \n    // Estimativa realista: passes/4 + shots*3 (jogos costumam ter ~80-150 ataques)\n    homeAttacks = Math.floor(homePasses / 4) + (homeShots * 3);\n    awayAttacks = Math.floor(awayPasses / 4) + (awayShots * 3);\n    \n    console.log('‚ö° Ataques estimados:', { home: homeAttacks, away: awayAttacks });\n  }\n  \n  if ((homeAttacks !== null && homeAttacks > 0) || (awayAttacks !== null && awayAttacks > 0)) {\n    mapped.attacks = { home: homeAttacks || 0, away: awayAttacks || 0 };\n  }\n\n  // Dangerous Attacks - API Football n√£o fornece, ent√£o estimamos  \n  // Estimativa: Shots insidebox + (Total Shots / 2) para aproximar ataques perigosos\n  let homeDangerous = getStat(homeStats, \"Dangerous Attacks\");\n  let awayDangerous = getStat(awayStats, \"Dangerous Attacks\");\n  \n  if (homeDangerous === null || awayDangerous === null) {\n    const homeInside = getStat(homeStats, \"Shots inside box\") || getStat(homeStats, \"Shots insidebox\") || 0;\n    const awayInside = getStat(awayStats, \"Shots inside box\") || getStat(awayStats, \"Shots insidebox\") || 0;\n    const homeShots = getStat(homeStats, \"Total Shots\") || 0;\n    const awayShots = getStat(awayStats, \"Total Shots\") || 0;\n    \n    // Estimativa: insidebox*2 + shots (jogos costumam ter ~30-70 ataques perigosos)\n    homeDangerous = (homeInside * 2) + homeShots;\n    awayDangerous = (awayInside * 2) + awayShots;\n    \n    console.log('üí• Ataques Perigosos estimados:', { home: homeDangerous, away: awayDangerous });\n  }\n  \n  if ((homeDangerous !== null && homeDangerous > 0) || (awayDangerous !== null && awayDangerous > 0)) {\n    mapped.dangerousAttacks = { home: homeDangerous || 0, away: awayDangerous || 0 };\n  }\n\n  // Possession\n  const homePoss = getStat(homeStats, \"Ball Possession\");\n  const awayPoss = getStat(awayStats, \"Ball Possession\");\n  if (homePoss !== null && awayPoss !== null) {\n    mapped.possession = { home: homePoss, away: awayPoss };\n  }\n\n  // Corners\n  const homeCorners = getStat(homeStats, \"Corner Kicks\") || 0;\n  const awayCorners = getStat(awayStats, \"Corner Kicks\") || 0;\n  mapped.corners = { home: homeCorners, away: awayCorners };\n\n  // Yellow Cards\n  const homeYellow = getStat(homeStats, \"Yellow Cards\") || 0;\n  const awayYellow = getStat(awayStats, \"Yellow Cards\") || 0;\n  mapped.yellowCards = { home: homeYellow, away: awayYellow };\n\n  // Red Cards\n  const homeRed = getStat(homeStats, \"Red Cards\") || 0;\n  const awayRed = getStat(awayStats, \"Red Cards\") || 0;\n  mapped.redCards = { home: homeRed, away: awayRed };\n\n  // Total Shots\n  const homeTotal = getStat(homeStats, \"Total Shots\") || 0;\n  const awayTotal = getStat(awayStats, \"Total Shots\") || 0;\n  if (homeTotal > 0 || awayTotal > 0) {\n    mapped.shotsTotal = { home: homeTotal, away: awayTotal };\n  }\n\n  // Shots on Goal\n  const homeOnGoal = getStat(homeStats, \"Shots on Goal\") || 0;\n  const awayOnGoal = getStat(awayStats, \"Shots on Goal\") || 0;\n  if (homeOnGoal > 0 || awayOnGoal > 0) {\n    mapped.shotsOnGoal = { home: homeOnGoal, away: awayOnGoal };\n  }\n\n  // Key Passes - try real field first, fallback to passes/50 proxy\n  let homeKeyPasses = getStat(homeStats, \"Key Passes\");\n  let awayKeyPasses = getStat(awayStats, \"Key Passes\");\n  if (homeKeyPasses === null || awayKeyPasses === null) {\n    const homeAccuratePasses = getStat(homeStats, \"Passes accurate\") || 0;\n    const awayAccuratePasses = getStat(awayStats, \"Passes accurate\") || 0;\n    homeKeyPasses = Math.floor(homeAccuratePasses / 50);\n    awayKeyPasses = Math.floor(awayAccuratePasses / 50);\n  }\n  if ((homeKeyPasses !== null && homeKeyPasses > 0) || (awayKeyPasses !== null && awayKeyPasses > 0)) {\n    mapped.keyPasses = { home: homeKeyPasses || 0, away: awayKeyPasses || 0 };\n  }\n\n  // Goalkeeper Saves\n  const homeSaves = getStat(homeStats, \"Goalkeeper Saves\") || 0;\n  const awaySaves = getStat(awayStats, \"Goalkeeper Saves\") || 0;\n  if (homeSaves > 0 || awaySaves > 0) {\n    mapped.saves = { home: homeSaves, away: awaySaves };\n  }\n\n  // Pass Accuracy\n  const homeAccuracy = getStat(homeStats, \"Passes %\");\n  const awayAccuracy = getStat(awayStats, \"Passes %\");\n  if (homeAccuracy !== null && awayAccuracy !== null) {\n    mapped.passAccuracy = { home: homeAccuracy, away: awayAccuracy };\n  }\n\n  return mapped;\n}\n","path":null,"size_bytes":6708,"size_tokens":null},"client/src/components/dashboard-command-center.tsx":{"content":"import { TrendingUp, Target, Zap } from \"lucide-react\";\nimport { Card } from \"./ui/card\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { kpiService } from \"@/lib/kpi-service\";\nimport { Skeleton } from \"./ui/skeleton\";\n\ninterface KPICardProps {\n  icon: React.ReactNode;\n  label: string;\n  value: string;\n  delta: string;\n  positive?: boolean;\n  isLoading?: boolean;\n}\n\nfunction KPICard({ icon, label, value, delta, positive = true, isLoading = false }: KPICardProps) {\n  if (isLoading) {\n    return (\n      <Card className=\"bg-black/40 backdrop-blur-md border-primary/20 p-6 rounded-2xl\">\n        <div className=\"space-y-4\">\n          <div className=\"flex items-center justify-between\">\n            <Skeleton className=\"w-12 h-12 rounded-xl bg-white/5\" />\n            <Skeleton className=\"w-16 h-6 rounded-full bg-white/5\" />\n          </div>\n          <Skeleton className=\"w-32 h-10 bg-white/5\" />\n          <Skeleton className=\"w-24 h-4 bg-white/5\" />\n        </div>\n      </Card>\n    );\n  }\n\n  return (\n    <div className=\"relative group\">\n      <div className=\"absolute inset-0 bg-gradient-to-br from-primary/20 to-primary/5 rounded-2xl blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-500\" />\n      <Card className=\"relative bg-black/40 backdrop-blur-md border-primary/20 p-6 rounded-2xl hover:border-primary/40 transition-all duration-300 overflow-hidden\">\n        {/* Animated glow border */}\n        <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-primary/10 to-transparent animate-shimmer\" />\n        \n        <div className=\"relative z-10\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <div className=\"w-12 h-12 rounded-xl bg-primary/10 border border-primary/20 flex items-center justify-center backdrop-blur-sm\">\n              {icon}\n            </div>\n            <div className={`text-xs font-bold px-3 py-1 rounded-full ${\n              positive \n                ? 'bg-primary/20 text-primary border border-primary/30' \n                : 'bg-red-500/20 text-red-500 border border-red-500/30'\n            }`}>\n              {delta}\n            </div>\n          </div>\n          \n          <div className=\"space-y-1\">\n            <div className=\"text-4xl font-display font-black text-white tracking-tight drop-shadow-[0_0_20px_rgba(255,255,255,0.3)]\">\n              {value}\n            </div>\n            <div className=\"text-sm text-muted-foreground font-medium uppercase tracking-wider\">\n              {label}\n            </div>\n          </div>\n        </div>\n      </Card>\n    </div>\n  );\n}\n\nexport function DashboardCommandCenter() {\n  // Fetch real KPI data with auto-refresh every 10 seconds\n  const { data: kpis, isLoading } = useQuery({\n    queryKey: ['dashboard-kpis'],\n    queryFn: kpiService.getKPIs,\n    refetchInterval: 10000, // Refresh every 10 seconds\n    staleTime: 5000, // Consider data stale after 5 seconds\n  });\n\n  return (\n    <div className=\"relative mb-8 overflow-hidden rounded-3xl\">\n      {/* Animated gradient mesh background */}\n      <div className=\"absolute inset-0 -z-10\">\n        <div className=\"absolute inset-0 bg-gradient-to-br from-primary/10 via-background to-background opacity-50\" />\n        <div className=\"absolute top-0 left-1/4 w-96 h-96 bg-primary/20 rounded-full blur-[100px] animate-mesh-1\" />\n        <div className=\"absolute bottom-0 right-1/4 w-96 h-96 bg-primary/10 rounded-full blur-[100px] animate-mesh-2\" />\n      </div>\n\n      {/* Glassmorphic container */}\n      <div className=\"relative bg-gradient-to-br from-black/30 to-black/10 backdrop-blur-sm border border-primary/10 rounded-3xl p-8 shadow-[0_8px_32px_rgba(51,184,100,0.1)]\">\n        {/* Header */}\n        <div className=\"mb-8 text-center animate-in fade-in slide-in-from-bottom-4 duration-700\">\n          <div className=\"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-primary/10 border border-primary/30 backdrop-blur-sm mb-4\">\n            <div className=\"w-2 h-2 rounded-full bg-primary animate-pulse shadow-[0_0_10px_#33b864]\" />\n            <span className=\"text-xs font-bold text-primary tracking-wide uppercase\">Sistema Operacional</span>\n          </div>\n          <h2 className=\"text-3xl md:text-4xl font-display font-black text-white tracking-tight mb-2\">\n            Command Center\n          </h2>\n          <p className=\"text-muted-foreground\">Monitoramento em tempo real das suas opera√ß√µes</p>\n        </div>\n\n        {/* KPI Grid */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 animate-in fade-in slide-in-from-bottom-8 duration-700 delay-200\">\n          <KPICard\n            icon={<Target className=\"w-6 h-6 text-primary\" />}\n            label=\"Green Rate\"\n            value={isLoading ? \"-\" : `${kpis?.greenRate?.value ?? 0}%`}\n            delta={isLoading ? \"-\" : `${(kpis?.greenRate?.delta ?? 0) >= 0 ? '+' : ''}${kpis?.greenRate?.delta ?? 0}%`}\n            positive={kpis?.greenRate?.positive ?? true}\n            isLoading={isLoading}\n          />\n          <KPICard\n            icon={<TrendingUp className=\"w-6 h-6 text-primary\" />}\n            label=\"ROI Total\"\n            value={isLoading ? \"-\" : `${(kpis?.roi?.value ?? 0) >= 0 ? '+' : ''}${kpis?.roi?.value ?? 0}%`}\n            delta={isLoading ? \"-\" : `${(kpis?.roi?.delta ?? 0) >= 0 ? '+' : ''}${kpis?.roi?.delta ?? 0}%`}\n            positive={kpis?.roi?.positive ?? true}\n            isLoading={isLoading}\n          />\n          <KPICard\n            icon={<Zap className=\"w-6 h-6 text-primary\" />}\n            label=\"Tips Ativos\"\n            value={isLoading ? \"-\" : (kpis?.activeTips?.value ?? 0).toString()}\n            delta={(kpis?.activeTips?.isLive ?? false) ? \"LIVE\" : \"PENDING\"}\n            positive={true}\n            isLoading={isLoading}\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":5832,"size_tokens":null},"client/src/components/stats-circle.tsx":{"content":"import { motion } from \"framer-motion\";\nimport { useEffect, useState } from \"react\";\n\nexport function StatsCircle() {\n  const [percentage, setPercentage] = useState(0);\n  const [mounted, setMounted] = useState(false);\n\n  useEffect(() => {\n    setMounted(true);\n    let interval: NodeJS.Timeout | null = null;\n    \n    const timer = setTimeout(() => {\n      let current = 0;\n      interval = setInterval(() => {\n        current += 1;\n        setPercentage(current);\n        if (current >= 95) {\n          if (interval) clearInterval(interval);\n        }\n      }, 20);\n    }, 500);\n\n    return () => {\n      clearTimeout(timer);\n      if (interval) clearInterval(interval);\n    };\n  }, []);\n\n  const radius = 80;\n  const circumference = 2 * Math.PI * radius;\n  const offset = circumference - (percentage / 100) * circumference;\n\n  return (\n    <div className=\"relative w-full h-64 bg-black/40 rounded-2xl border border-primary/20 p-6 flex flex-col items-center justify-center overflow-hidden\">\n      <div className=\"absolute inset-0 bg-gradient-to-br from-primary/5 to-transparent opacity-50\" />\n      \n      <div className=\"relative z-10 flex flex-col items-center\">\n        <h3 className=\"text-white font-bold mb-6\">Taxa de Assertividade Atual</h3>\n        \n        <div className=\"relative\">\n          <svg width=\"200\" height=\"200\" className=\"transform -rotate-90\">\n            <circle\n              cx=\"100\"\n              cy=\"100\"\n              r={radius}\n              stroke=\"#1a1a1a\"\n              strokeWidth=\"12\"\n              fill=\"none\"\n            />\n            \n            <motion.circle\n              cx=\"100\"\n              cy=\"100\"\n              r={radius}\n              stroke=\"url(#circleGradient)\"\n              strokeWidth=\"12\"\n              fill=\"none\"\n              strokeLinecap=\"round\"\n              strokeDasharray={circumference}\n              strokeDashoffset={offset}\n              initial={{ strokeDashoffset: circumference }}\n              animate={{ strokeDashoffset: mounted ? offset : circumference }}\n              transition={{ duration: 2, ease: \"easeInOut\" }}\n            />\n\n            <defs>\n              <linearGradient id=\"circleGradient\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\n                <stop offset=\"0%\" stopColor=\"#33b864\" />\n                <stop offset=\"100%\" stopColor=\"#22c55e\" />\n              </linearGradient>\n            </defs>\n          </svg>\n\n          <div className=\"absolute inset-0 flex flex-col items-center justify-center\">\n            <motion.div\n              initial={{ scale: 0 }}\n              animate={{ scale: 1 }}\n              transition={{ delay: 0.5, type: \"spring\", stiffness: 200 }}\n              className=\"text-5xl font-bold text-primary drop-shadow-[0_0_15px_rgba(51,184,100,0.6)]\"\n              data-testid=\"text-accuracy-percentage\"\n            >\n              {percentage}%\n            </motion.div>\n            <div className=\"text-xs text-gray-400 mt-1\">de acerto</div>\n          </div>\n        </div>\n\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 2, duration: 0.5 }}\n          className=\"mt-4 text-xs text-center text-gray-400\"\n        >\n          √öltimos 30 dias ‚Ä¢ 847 tips validadas\n        </motion.div>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":3319,"size_tokens":null},"client/src/components/game-stats.tsx":{"content":"import { Flag, BarChart } from \"lucide-react\";\nimport { Card } from \"./ui/card\";\nimport { useLanguage } from \"@/hooks/use-language\";\n\ninterface TeamStats {\n  team: string;\n  logo?: string;\n}\n\ninterface GameStatsProps {\n  homeTeam: TeamStats;\n  awayTeam: TeamStats;\n  statistics: {\n    xg?: { home: number; away: number };\n    attacks?: { home: number; away: number };\n    dangerousAttacks?: { home: number; away: number };\n    possession?: { home: number; away: number };\n    corners?: { home: number; away: number };\n    yellowCards?: { home: number; away: number };\n    redCards?: { home: number; away: number };\n    shotsTotal?: { home: number; away: number };\n    shotsOnGoal?: { home: number; away: number };\n    keyPasses?: { home: number; away: number };\n    saves?: { home: number; away: number };\n    passAccuracy?: { home: number; away: number };\n  };\n}\n\nconst StatRow = ({ \n  label, \n  homeValue, \n  awayValue \n}: { \n  label: string; \n  homeValue: number; \n  awayValue: number; \n}) => {\n  const total = homeValue + awayValue;\n  if (total === 0) return null;\n  \n  const homePct = total === 0 ? 0 : (homeValue / total) * 100;\n  const awayPct = total === 0 ? 0 : (awayValue / total) * 100;\n\n  return (\n    <div className=\"mb-5 w-full\">\n      {/* Linha de T√≠tulos e Valores */}\n      <div className=\"flex justify-between items-end mb-2 px-1\">\n        <span className=\"text-lg font-display font-bold text-[#33b864]\">{homeValue}</span>\n        <span className=\"text-xs text-gray-400 uppercase font-bold tracking-wider\">{label}</span>\n        <span className=\"text-lg font-display font-bold text-white\">{awayValue}</span>\n      </div>\n\n      {/* As Barras (Visualiza√ß√£o Split) */}\n      <div className=\"flex h-2 w-full bg-gray-800 rounded-full overflow-hidden\">\n        {/* Barra Home (Verde, cresce da esquerda) */}\n        <div \n          style={{ width: `${homePct}%` }} \n          className=\"bg-[#33b864] h-full shadow-[0_0_10px_#33b864] transition-all duration-500\"\n        />\n        {/* Espa√ßo Vazio (Gap) */}\n        <div className=\"w-1 h-full bg-black\" />\n        {/* Barra Away (Cinza, cresce da direita) */}\n        <div \n          style={{ width: `${awayPct}%` }} \n          className=\"bg-gray-500 h-full transition-all duration-500\"\n        />\n      </div>\n    </div>\n  );\n};\n\nexport function GameStats({ homeTeam, awayTeam, statistics }: GameStatsProps) {\n  const { t } = useLanguage();\n  const stats = statistics;\n  \n  const hasAnyStats = Object.keys(stats).length > 0 && Object.values(stats).some(stat => stat !== null && stat !== undefined);\n  \n  if (!hasAnyStats) {\n    return (\n      <Card className=\"bg-[#0a0a0a] border-primary/20 p-12 text-center\">\n        <BarChart className=\"w-12 h-12 text-gray-800 mx-auto mb-4\" />\n        <p className=\"text-gray-400 text-sm font-medium\">\n          {t.matchCenter.noStats}\n        </p>\n      </Card>\n    );\n  }\n\n  const homePossession = stats.possession?.home || 0;\n  const awayPossession = stats.possession?.away || 0;\n\n  return (\n    <Card className=\"bg-[#0a0a0a] border-primary/20 p-6 space-y-6\">\n      {/* 1. C√çRCULO DE POSSE (CENTERED GAUGE) */}\n      {stats.possession && (\n        <div className=\"flex items-center justify-center gap-6 mb-6\">\n          {/* Lado Esquerdo (Home) */}\n          <div className=\"text-right\">\n            <span className=\"text-2xl font-display font-bold text-[#33b864]\">{homePossession}%</span>\n            <p className=\"text-[10px] text-gray-500 uppercase\">{t.matchCenter.home}</p>\n          </div>\n\n          {/* O C√≠rculo (Centro) */}\n          <div className=\"relative w-24 h-24\">\n            <svg viewBox=\"0 0 36 36\" className=\"w-full h-full transform -rotate-90\">\n              {/* Fundo */}\n              <path \n                className=\"text-gray-800\" \n                d=\"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831\" \n                fill=\"none\" \n                stroke=\"currentColor\" \n                strokeWidth=\"3\" \n              />\n              {/* Progresso (Home - Verde) */}\n              <path \n                className=\"text-[#33b864] drop-shadow-[0_0_5px_rgba(51,184,100,0.5)]\" \n                strokeDasharray={`${homePossession}, 100`} \n                d=\"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831\" \n                fill=\"none\" \n                stroke=\"currentColor\" \n                strokeWidth=\"3\" \n              />\n            </svg>\n            <div className=\"absolute inset-0 flex items-center justify-center\">\n              <span className=\"text-[10px] font-bold text-gray-400\">{t.matchCenter.possession}</span>\n            </div>\n          </div>\n\n          {/* Lado Direito (Away) */}\n          <div className=\"text-left\">\n            <span className=\"text-2xl font-display font-bold text-white\">{awayPossession}%</span>\n            <p className=\"text-[10px] text-gray-500 uppercase\">{t.matchCenter.away}</p>\n          </div>\n        </div>\n      )}\n\n      {/* 2. GRID DE EVENTOS (ESCANTEIOS/CART√ïES) */}\n      {(stats.corners || stats.yellowCards || stats.redCards) && (\n        <div className=\"grid grid-cols-3 divide-x divide-white/10 bg-[#121212] rounded-xl p-4 mb-6\">\n          {/* Escanteios */}\n          {stats.corners && (\n            <div className=\"flex flex-col items-center gap-2 px-4\">\n              <Flag className=\"w-5 h-5 text-[#33b864]\" />\n              <div className=\"text-sm font-display font-bold text-white\">\n                {stats.corners.home} - {stats.corners.away}\n              </div>\n              <span className=\"text-[10px] text-gray-500 uppercase font-bold\">{t.matchCenter.corners}</span>\n            </div>\n          )}\n\n          {/* Cart√µes Amarelos */}\n          {stats.yellowCards && (\n            <div className=\"flex flex-col items-center gap-2 px-4\">\n              <div className=\"w-3 h-4 bg-yellow-500 rounded-sm\" />\n              <div className=\"text-sm font-display font-bold text-white\">\n                {stats.yellowCards.home} - {stats.yellowCards.away}\n              </div>\n              <span className=\"text-[10px] text-gray-500 uppercase font-bold\">{t.matchCenter.yellowCards}</span>\n            </div>\n          )}\n\n          {/* Cart√µes Vermelhos */}\n          {stats.redCards && (\n            <div className=\"flex flex-col items-center gap-2 px-4\">\n              <div className=\"w-3 h-4 bg-red-500 rounded-sm\" />\n              <div className=\"text-sm font-display font-bold text-white\">\n                {stats.redCards.home} - {stats.redCards.away}\n              </div>\n              <span className=\"text-[10px] text-gray-500 uppercase font-bold\">{t.matchCenter.redCards}</span>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* 3. BARRAS DE ESTAT√çSTICAS (ALINHAMENTO PERFEITO) */}\n      <div className=\"space-y-4 pt-4\">\n        {/* Chutes no Gol */}\n        {stats.shotsOnGoal && (\n          <StatRow \n            label={t.matchCenter.shotsOnGoal} \n            homeValue={stats.shotsOnGoal.home} \n            awayValue={stats.shotsOnGoal.away} \n          />\n        )}\n\n        {/* Chutes Totais */}\n        {stats.shotsTotal && (\n          <StatRow \n            label={t.matchCenter.shotsTotal} \n            homeValue={stats.shotsTotal.home} \n            awayValue={stats.shotsTotal.away} \n          />\n        )}\n\n        {/* Ataques */}\n        {stats.attacks && (\n          <StatRow \n            label={t.matchCenter.attacks} \n            homeValue={stats.attacks.home} \n            awayValue={stats.attacks.away} \n          />\n        )}\n\n        {/* Ataques Perigosos */}\n        {stats.dangerousAttacks && (\n          <StatRow \n            label={t.matchCenter.dangerousAttacks} \n            homeValue={stats.dangerousAttacks.home} \n            awayValue={stats.dangerousAttacks.away} \n          />\n        )}\n\n        {/* Passes Chave */}\n        {stats.keyPasses && (\n          <StatRow \n            label={t.matchCenter.keyPasses} \n            homeValue={stats.keyPasses.home} \n            awayValue={stats.keyPasses.away} \n          />\n        )}\n\n        {/* Defesas do Goleiro */}\n        {stats.saves && (\n          <StatRow \n            label={t.matchCenter.saves} \n            homeValue={stats.saves.home} \n            awayValue={stats.saves.away} \n          />\n        )}\n\n        {/* Precis√£o de Passes */}\n        {stats.passAccuracy && (\n          <StatRow \n            label={t.matchCenter.passAccuracy} \n            homeValue={stats.passAccuracy.home} \n            awayValue={stats.passAccuracy.away} \n          />\n        )}\n      </div>\n    </Card>\n  );\n}\n","path":null,"size_bytes":8564,"size_tokens":null},"client/src/lib/kpi-service.ts":{"content":"import { supabase } from \"./supabase\";\n\nexport interface KPIData {\n  greenRate: {\n    value: number;\n    delta: number;\n    positive: boolean;\n  };\n  roi: {\n    value: number;\n    delta: number;\n    positive: boolean;\n  };\n  activeTips: {\n    value: number;\n    isLive: boolean;\n  };\n}\n\nexport const kpiService = {\n  getKPIs: async (): Promise<KPIData> => {\n    try {\n      // Fetch all tips\n      const { data: allTips, error } = await supabase\n        .from('tips')\n        .select('*')\n        .order('created_at', { ascending: false });\n\n      if (error) throw error;\n\n      const tips = allTips || [];\n\n      // Calculate Green Rate\n      const finishedTips = tips.filter(t => t.status === 'green' || t.status === 'red');\n      const greenTips = tips.filter(t => t.status === 'green');\n      const greenRate = finishedTips.length > 0 \n        ? (greenTips.length / finishedTips.length) * 100 \n        : 0;\n\n      // Calculate Green Rate for last 30 days (for delta)\n      const thirtyDaysAgo = new Date();\n      thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);\n      const recentTips = tips.filter(t => new Date(t.created_at) > thirtyDaysAgo);\n      const recentFinished = recentTips.filter(t => t.status === 'green' || t.status === 'red');\n      const recentGreen = recentTips.filter(t => t.status === 'green');\n      const previousGreenRate = recentFinished.length > 0\n        ? (recentGreen.length / recentFinished.length) * 100\n        : greenRate;\n      const greenRateDelta = greenRate - previousGreenRate;\n\n      // Calculate ROI (simplified: sum of winning odds minus number of tips)\n      const totalInvested = finishedTips.length; // Assume 1 unit per tip\n      const totalReturn = greenTips.reduce((sum, tip) => {\n        const odd = parseFloat(tip.odd || '0');\n        return sum + odd;\n      }, 0);\n      const roi = totalInvested > 0 \n        ? ((totalReturn - totalInvested) / totalInvested) * 100 \n        : 0;\n\n      // ROI delta (compare last 30 days vs all time)\n      const recentInvested = recentFinished.length;\n      const recentReturn = recentGreen.reduce((sum, tip) => {\n        const odd = parseFloat(tip.odd || '0');\n        return sum + odd;\n      }, 0);\n      const previousROI = recentInvested > 0\n        ? ((recentReturn - recentInvested) / recentInvested) * 100\n        : roi;\n      const roiDelta = roi - previousROI;\n\n      // Count active tips\n      const activeTips = tips.filter(t => t.status === 'pending');\n      const hasLiveTips = activeTips.some(t => t.is_live);\n\n      return {\n        greenRate: {\n          value: Math.round(greenRate * 10) / 10, // Round to 1 decimal\n          delta: Math.round(greenRateDelta * 10) / 10,\n          positive: greenRateDelta >= 0,\n        },\n        roi: {\n          value: Math.round(roi * 10) / 10,\n          delta: Math.round(roiDelta * 10) / 10,\n          positive: roiDelta >= 0,\n        },\n        activeTips: {\n          value: activeTips.length,\n          isLive: hasLiveTips,\n        },\n      };\n    } catch (error) {\n      console.error('Error fetching KPIs:', error);\n      // Return default values on error\n      return {\n        greenRate: { value: 0, delta: 0, positive: true },\n        roi: { value: 0, delta: 0, positive: true },\n        activeTips: { value: 0, isLive: false },\n      };\n    }\n  },\n};\n","path":null,"size_bytes":3307,"size_tokens":null},"client/src/components/sales-toast.tsx":{"content":"import { useEffect, useState, useRef } from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { CheckCircle, TrendingUp, DollarSign } from \"lucide-react\";\n\nconst notifications = [\n  { icon: CheckCircle, text: \"Ricardo (SP) acabou de entrar no plano Pro\", type: \"join\" },\n  { icon: TrendingUp, text: \"Nova Tip confirmada com Odd @ 2.10\", type: \"tip\" },\n  { icon: DollarSign, text: \"Ana (RJ) sacou R$ 1.200,00\", type: \"withdraw\" },\n  { icon: CheckCircle, text: \"Carlos (MG) garantiu +450% ROI este m√™s\", type: \"profit\" },\n  { icon: TrendingUp, text: \"Green confirmado: Liverpool @ 1.85\", type: \"green\" },\n  { icon: DollarSign, text: \"Pedro (RS) lucrou R$ 850,00 hoje\", type: \"withdraw\" },\n];\n\nexport function SalesToast() {\n  const [currentNotification, setCurrentNotification] = useState<typeof notifications[0] | null>(null);\n  const hideTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n\n  useEffect(() => {\n    const showNotification = () => {\n      const randomNotif = notifications[Math.floor(Math.random() * notifications.length)];\n      setCurrentNotification(randomNotif);\n\n      if (hideTimeoutRef.current) {\n        clearTimeout(hideTimeoutRef.current);\n      }\n\n      hideTimeoutRef.current = setTimeout(() => {\n        setCurrentNotification(null);\n      }, 4000);\n    };\n\n    const initialDelay = Math.random() * 10000 + 5000;\n    const initialTimer = setTimeout(showNotification, initialDelay);\n\n    const interval = setInterval(() => {\n      showNotification();\n    }, Math.random() * 20000 + 15000);\n\n    return () => {\n      clearTimeout(initialTimer);\n      clearInterval(interval);\n      if (hideTimeoutRef.current) {\n        clearTimeout(hideTimeoutRef.current);\n      }\n    };\n  }, []);\n\n  return (\n    <AnimatePresence>\n      {currentNotification && (\n        <motion.div\n          initial={{ opacity: 0, x: -100, scale: 0.8 }}\n          animate={{ opacity: 1, x: 0, scale: 1 }}\n          exit={{ opacity: 0, x: -100, scale: 0.8 }}\n          transition={{ type: \"spring\", damping: 20, stiffness: 300 }}\n          className=\"fixed bottom-6 left-6 z-50 pointer-events-none\"\n        >\n          <div className=\"bg-[#0a0a0a]/90 backdrop-blur-xl border border-primary/30 rounded-xl px-4 py-3 flex items-center gap-3 shadow-[0_0_30px_rgba(51,184,100,0.2)] min-w-[280px]\">\n            <div className=\"w-8 h-8 rounded-full bg-primary/20 border border-primary/40 flex items-center justify-center\">\n              <currentNotification.icon className=\"w-4 h-4 text-primary\" />\n            </div>\n            <p className=\"text-sm text-white font-medium\">{currentNotification.text}</p>\n          </div>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n}\n","path":null,"size_bytes":2696,"size_tokens":null},"client/src/lib/football-mapper.ts":{"content":"import { FixtureStatistics, FootballMatch } from \"./football-service\";\n\nexport interface MappedGameStats {\n  xg?: { home: number; away: number };\n  attacks?: { home: number; away: number };\n  dangerousAttacks?: { home: number; away: number };\n  possession?: { home: number; away: number };\n  corners?: { home: number; away: number };\n  yellowCards?: { home: number; away: number };\n  redCards?: { home: number; away: number };\n  shotsTotal?: { home: number; away: number };\n  shotsOnGoal?: { home: number; away: number };\n  keyPasses?: { home: number; away: number };\n  saves?: { home: number; away: number };\n  passAccuracy?: { home: number; away: number };\n}\n\nexport function mapFootballStatistics(\n  stats: FixtureStatistics[],\n  match: FootballMatch\n): MappedGameStats {\n  if (!stats || stats.length < 2) {\n    console.warn('‚ö†Ô∏è API-Football Mapper: Dados insuficientes', stats);\n    return {};\n  }\n\n  // Match stats to teams by team_id (API doesn't guarantee order!)\n  const homeTeamId = match.teams.home.id;\n  const awayTeamId = match.teams.away.id;\n  \n  const homeStats = stats.find(s => s.team_id === homeTeamId);\n  const awayStats = stats.find(s => s.team_id === awayTeamId);\n  \n  if (!homeStats || !awayStats) {\n    console.warn('‚ö†Ô∏è API-Football Mapper: Could not match team IDs', {\n      expectedHome: homeTeamId,\n      expectedAway: awayTeamId,\n      receivedStats: stats.map(s => s.team_id),\n    });\n    return {};\n  }\n\n  console.log('üìä [API-Football] Mapeando estat√≠sticas:', {\n    home: {\n      team_id: homeStats.team_id,\n      attacks: homeStats.attacks,\n      dangerous_attacks: homeStats.dangerous_attacks,\n      possession: homeStats.possession,\n    },\n    away: {\n      team_id: awayStats.team_id,\n      attacks: awayStats.attacks,\n      dangerous_attacks: awayStats.dangerous_attacks,\n      possession: awayStats.possession,\n    },\n  });\n\n  const mapped: MappedGameStats = {};\n\n  // ‚ö° ATAQUES REAIS (n√£o estimados!)\n  if (homeStats.attacks > 0 || awayStats.attacks > 0) {\n    mapped.attacks = {\n      home: homeStats.attacks,\n      away: awayStats.attacks,\n    };\n    console.log('‚ö° Ataques (reais):', mapped.attacks);\n  }\n\n  // üí• ATAQUES PERIGOSOS REAIS (n√£o estimados!)\n  if (homeStats.dangerous_attacks > 0 || awayStats.dangerous_attacks > 0) {\n    mapped.dangerousAttacks = {\n      home: homeStats.dangerous_attacks,\n      away: awayStats.dangerous_attacks,\n    };\n    console.log('üí• Ataques Perigosos (reais):', mapped.dangerousAttacks);\n  }\n\n  // ‚öΩ POSSE DE BOLA\n  if (homeStats.possession > 0 || awayStats.possession > 0) {\n    mapped.possession = {\n      home: homeStats.possession,\n      away: awayStats.possession,\n    };\n  }\n\n  // üö© ESCANTEIOS\n  mapped.corners = {\n    home: homeStats.corners,\n    away: awayStats.corners,\n  };\n\n  // üü® CART√ïES AMARELOS\n  mapped.yellowCards = {\n    home: homeStats.yellowcards,\n    away: awayStats.yellowcards,\n  };\n\n  // üü• CART√ïES VERMELHOS\n  mapped.redCards = {\n    home: homeStats.redcards,\n    away: awayStats.redcards,\n  };\n\n  // üéØ TOTAL DE CHUTES\n  if (homeStats.shots_total > 0 || awayStats.shots_total > 0) {\n    mapped.shotsTotal = {\n      home: homeStats.shots_total,\n      away: awayStats.shots_total,\n    };\n  }\n\n  // ü•Ö CHUTES NO GOL\n  if (homeStats.shots_on_goal > 0 || awayStats.shots_on_goal > 0) {\n    mapped.shotsOnGoal = {\n      home: homeStats.shots_on_goal,\n      away: awayStats.shots_on_goal,\n    };\n  }\n\n  // üîë PASSES CHAVE (estimativa: passes precisos / 50)\n  const homeKeyPasses = Math.floor(homeStats.passes_accurate / 50);\n  const awayKeyPasses = Math.floor(awayStats.passes_accurate / 50);\n  if (homeKeyPasses > 0 || awayKeyPasses > 0) {\n    mapped.keyPasses = {\n      home: homeKeyPasses,\n      away: awayKeyPasses,\n    };\n  }\n\n  // üß§ DEFESAS\n  if (homeStats.saves > 0 || awayStats.saves > 0) {\n    mapped.saves = {\n      home: homeStats.saves,\n      away: awayStats.saves,\n    };\n  }\n\n  // üìà PRECIS√ÉO DE PASSES\n  if (homeStats.passes_percentage > 0 || awayStats.passes_percentage > 0) {\n    mapped.passAccuracy = {\n      home: Math.round(homeStats.passes_percentage),\n      away: Math.round(awayStats.passes_percentage),\n    };\n  }\n\n  console.log('‚úÖ [API-Football] Estat√≠sticas mapeadas:', mapped);\n  return mapped;\n}\n","path":null,"size_bytes":4269,"size_tokens":null},"client/src/components/theme-toggle.tsx":{"content":"import { Moon, Sun } from 'lucide-react';\nimport { useTheme } from '@/hooks/use-theme';\nimport { Button } from '@/components/ui/button';\n\nexport function ThemeToggle() {\n  const { actualTheme, setTheme } = useTheme();\n\n  const toggleTheme = () => {\n    setTheme(actualTheme === 'dark' ? 'light' : 'dark');\n  };\n\n  return (\n    <Button\n      variant=\"ghost\"\n      size=\"icon\"\n      onClick={toggleTheme}\n      className=\"relative w-9 h-9 rounded-lg transition-all duration-300 hover:bg-primary/10\"\n      data-testid=\"theme-toggle\"\n      aria-label={`Switch to ${actualTheme === 'dark' ? 'light' : 'dark'} mode`}\n    >\n      <Sun className=\"h-5 w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0 text-yellow-500\" />\n      <Moon className=\"absolute h-5 w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100 text-primary\" />\n    </Button>\n  );\n}\n","path":null,"size_bytes":870,"size_tokens":null},"client/src/hooks/use-theme.tsx":{"content":"import { ThemeProvider as NextThemesProvider, useTheme as useNextTheme } from 'next-themes';\nimport { ReactNode } from 'react';\n\nexport function ThemeProvider({ children }: { children: ReactNode }) {\n  return (\n    <NextThemesProvider\n      attribute=\"class\"\n      defaultTheme=\"dark\"\n      enableSystem={false}\n      disableTransitionOnChange={false}\n    >\n      {children}\n    </NextThemesProvider>\n  );\n}\n\nexport function useTheme() {\n  return useNextTheme();\n}\n","path":null,"size_bytes":465,"size_tokens":null},"scripts/create-admin-profile.ts":{"content":"import { createClient } from '@supabase/supabase-js';\n\nconst SUPABASE_URL = process.env.VITE_SUPABASE_URL!;\nconst SUPABASE_SERVICE_ROLE_KEY = process.env.SUPABASE_SERVICE_ROLE_KEY || process.env.VITE_SUPABASE_ANON_KEY!;\n\nconst supabase = createClient(SUPABASE_URL, SUPABASE_SERVICE_ROLE_KEY);\n\nasync function createAdminProfile() {\n  console.log('üîç Checking for existing profile...\\n');\n  \n  // First, let's check if we can access Supabase Auth users\n  console.log('Attempting to list auth users...');\n  \n  // Try to insert a profile directly for the email we know\n  const email = 'kwillianferreira@gmail.com';\n  \n  // We need to get the user ID from Supabase Auth\n  // Since we don't have service role key, we'll use the anon key and work with what we have\n  \n  console.log(`üîÑ Creating profile for ${email}...\\n`);\n  \n  // Generate a UUID for the profile (this should match the Supabase Auth user ID)\n  // But since we don't have access to auth.users, we'll create a profile with a known ID\n  \n  // Let's try a different approach: Create the profile with the ID from the auth session\n  // First, sign in to get the user ID\n  const { data: authData, error: authError } = await supabase.auth.signInWithPassword({\n    email: email,\n    password: 'Isabella7D!',\n  });\n\n  if (authError) {\n    console.error('‚ùå Authentication failed:', authError.message);\n    console.log('\\nüí° This is expected if you haven\\'t registered this user in Supabase yet.');\n    console.log('   Please sign up first through the app, then run this script again.');\n    process.exit(1);\n  }\n\n  if (!authData.user) {\n    console.error('‚ùå No user data returned');\n    process.exit(1);\n  }\n\n  console.log('‚úÖ Authentication successful!');\n  console.log(`   User ID: ${authData.user.id}`);\n  console.log(`   Email: ${authData.user.email}\\n`);\n\n  // Now create or update the profile\n  const { data: profileData, error: profileError } = await supabase\n    .from('profiles')\n    .upsert({\n      id: authData.user.id,\n      email: authData.user.email,\n      first_name: authData.user.user_metadata?.first_name || 'Admin',\n      role: 'admin',\n      created_at: new Date().toISOString(),\n    })\n    .select()\n    .single();\n\n  if (profileError) {\n    console.error('‚ùå Error creating profile:', profileError);\n    process.exit(1);\n  }\n\n  console.log('‚úÖ Profile created/updated successfully!');\n  console.log('üìä Profile data:', profileData);\n  console.log('\\nüéâ Done! The user now has admin role in Supabase.');\n  console.log('   Please refresh the app to see the changes.');\n\n  process.exit(0);\n}\n\ncreateAdminProfile();\n","path":null,"size_bytes":2602,"size_tokens":null},"scripts/update-admin-role.ts":{"content":"import { createClient } from '@supabase/supabase-js';\n\nconst SUPABASE_URL = process.env.VITE_SUPABASE_URL!;\nconst SUPABASE_ANON_KEY = process.env.VITE_SUPABASE_ANON_KEY!;\n\nconst supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);\n\nasync function updateAdminRole() {\n  console.log('üîÑ Updating admin role in Supabase...');\n  \n  // Update the role for the admin user\n  const { data, error } = await supabase\n    .from('profiles')\n    .update({ role: 'admin' })\n    .eq('email', 'kwillianferreira@gmail.com')\n    .select();\n\n  if (error) {\n    console.error('‚ùå Error updating role:', error);\n    process.exit(1);\n  }\n\n  console.log('‚úÖ Role updated successfully!');\n  console.log('üìä Updated profile:', data);\n  \n  // Verify the update\n  const { data: verifyData, error: verifyError } = await supabase\n    .from('profiles')\n    .select('*')\n    .eq('email', 'kwillianferreira@gmail.com')\n    .single();\n\n  if (verifyError) {\n    console.error('‚ùå Error verifying update:', verifyError);\n  } else {\n    console.log('‚úÖ Verification:');\n    console.log('  Email:', verifyData.email);\n    console.log('  Name:', verifyData.first_name);\n    console.log('  Role:', verifyData.role);\n  }\n\n  process.exit(0);\n}\n\nupdateAdminRole();\n","path":null,"size_bytes":1236,"size_tokens":null},"scripts/list-profiles.ts":{"content":"import { createClient } from '@supabase/supabase-js';\n\nconst SUPABASE_URL = process.env.VITE_SUPABASE_URL!;\nconst SUPABASE_ANON_KEY = process.env.VITE_SUPABASE_ANON_KEY!;\n\nconst supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);\n\nasync function listProfiles() {\n  console.log('üìã Listing all profiles in Supabase...\\n');\n  \n  const { data, error } = await supabase\n    .from('profiles')\n    .select('*')\n    .order('created_at', { ascending: false });\n\n  if (error) {\n    console.error('‚ùå Error fetching profiles:', error);\n    process.exit(1);\n  }\n\n  if (!data || data.length === 0) {\n    console.log('‚ö†Ô∏è No profiles found in Supabase database');\n    process.exit(0);\n  }\n\n  console.log(`‚úÖ Found ${data.length} profile(s):\\n`);\n  \n  data.forEach((profile, index) => {\n    console.log(`Profile #${index + 1}:`);\n    console.log(`  ID: ${profile.id}`);\n    console.log(`  Email: ${profile.email}`);\n    console.log(`  Name: ${profile.first_name}`);\n    console.log(`  Role: ${profile.role}`);\n    console.log(`  Created: ${profile.created_at}`);\n    console.log('');\n  });\n\n  process.exit(0);\n}\n\nlistProfiles();\n","path":null,"size_bytes":1128,"size_tokens":null},"client/src/hooks/use-crm-dashboard-data.ts":{"content":"import { useState, useEffect } from 'react';\nimport { useQuery } from '@tanstack/react-query';\nimport { tipsService } from '@/lib/tips-service';\n\nexport interface Signal {\n  id: string;\n  matchName: string;\n  league: string;\n  leagueShort: string;\n  market: string;\n  odd: number;\n  status: 'pending' | 'processing' | 'green' | 'red';\n  timestamp: Date;\n  units: number;\n  time: string;\n}\n\nexport interface CRMStats {\n  assertivity: number;\n  totalUnits: number;\n  roi: number;\n  currentStreak: { wins: number; losses: number };\n  todayResult: number;\n  monthResult: number;\n  unitsHistory: { time: string; units: number }[];\n  activityDays: { date: string; count: number; intensity: number }[];\n  activeSignals: Signal[];\n  recentSignals: Signal[];\n  systemStatus: {\n    scanning: boolean;\n    gamesAnalyzed: number;\n    lastSync: Date;\n  };\n}\n\nconst INITIAL_UNITS = 100;\nconst WIN_UNITS = 0.95;\nconst LOSS_UNITS = 1;\nconst WIN_LOSS_RATIO = 20;\n\nconst LEAGUES = [\n  { name: 'Premier League', short: 'ENG' },\n  { name: 'La Liga', short: 'ESP' },\n  { name: 'Serie A', short: 'ITA' },\n  { name: 'Bundesliga', short: 'GER' },\n  { name: 'Ligue 1', short: 'FRA' },\n  { name: 'Champions League', short: 'UCL' },\n  { name: 'Brasileir√£o', short: 'BRA' },\n];\n\nconst TEAMS = {\n  'ENG': ['Man City', 'Arsenal', 'Liverpool', 'Chelsea', 'Spurs', 'Man Utd'],\n  'ESP': ['Real Madrid', 'Barcelona', 'Atletico', 'Sevilla', 'Betis', 'Valencia'],\n  'ITA': ['Inter', 'Milan', 'Juventus', 'Napoli', 'Roma', 'Lazio'],\n  'GER': ['Bayern', 'Dortmund', 'RB Leipzig', 'Leverkusen', 'Frankfurt', 'Union'],\n  'FRA': ['PSG', 'Marseille', 'Monaco', 'Lyon', 'Lille', 'Nice'],\n  'UCL': ['Barcelona', 'Real Madrid', 'Bayern', 'Man City', 'PSG', 'Liverpool'],\n  'BRA': ['Flamengo', 'Palmeiras', 'S√£o Paulo', 'Corinthians', 'Atletico-MG', 'Inter'],\n};\n\nconst MARKETS = ['O0.5 HT', 'O1.5 FT', 'BTTS', 'Home Win', 'DNB', 'O2.5 FT', 'AH -0.5'];\n\nfunction generateMatch(short: string): string {\n  const teams = TEAMS[short as keyof typeof TEAMS] || TEAMS['ENG'];\n  const home = teams[Math.floor(Math.random() * teams.length)];\n  let away = teams[Math.floor(Math.random() * teams.length)];\n  while (away === home) away = teams[Math.floor(Math.random() * teams.length)];\n  return `${home} vs ${away}`;\n}\n\nfunction generateSignals(count: number): Signal[] {\n  const signals: Signal[] = [];\n  const now = new Date();\n  \n  // Generate in newest-first order (most recent at index 0)\n  for (let i = 0; i < count; i++) {\n    const signalIndex = count - i;\n    const isRed = signalIndex % (WIN_LOSS_RATIO + 1) === 0 && signalIndex > 1;\n    const status = i < 4 ? 'pending' : isRed ? 'red' : 'green';\n    const units = isRed ? -LOSS_UNITS : WIN_UNITS;\n    \n    const league = LEAGUES[Math.floor(Math.random() * LEAGUES.length)];\n    const market = MARKETS[Math.floor(Math.random() * MARKETS.length)];\n    const odd = (1.5 + Math.random() * 1.5).toFixed(2);\n    const timestamp = new Date(now.getTime() - i * 20 * 60 * 1000);\n    \n    signals.push({\n      id: `sig-${signalIndex}`,\n      matchName: generateMatch(league.short),\n      league: league.name,\n      leagueShort: league.short,\n      market,\n      odd: parseFloat(odd),\n      status,\n      timestamp,\n      units,\n      time: timestamp.toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' }),\n    });\n  }\n  \n  return signals;\n}\n\nexport function useCRMDashboardData(): CRMStats {\n  const [signals, setSignals] = useState<Signal[]>([]);\n  const [totalUnits, setTotalUnits] = useState(INITIAL_UNITS);\n  \n  const { data: realTips = [] } = useQuery({\n    queryKey: ['tips'],\n    queryFn: tipsService.getAll,\n  });\n\n  useEffect(() => {\n    const historical = generateSignals(120);\n    setSignals(historical);\n    const accumulatedUnits = historical.reduce((sum, sig) => sum + sig.units, 0);\n    setTotalUnits(INITIAL_UNITS + accumulatedUnits);\n  }, []);\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setSignals((prev) => {\n        const newIndex = prev.length + 121;\n        const isRed = newIndex % (WIN_LOSS_RATIO + 1) === 0;\n        const status = isRed ? 'red' : 'green';\n        const units = isRed ? -LOSS_UNITS : WIN_UNITS;\n        \n        const league = LEAGUES[Math.floor(Math.random() * LEAGUES.length)];\n        const market = MARKETS[Math.floor(Math.random() * MARKETS.length)];\n        const odd = (1.5 + Math.random() * 1.5).toFixed(2);\n        const timestamp = new Date();\n        \n        const newSignal: Signal = {\n          id: `sig-${newIndex}`,\n          matchName: generateMatch(league.short),\n          league: league.name,\n          leagueShort: league.short,\n          market,\n          odd: parseFloat(odd),\n          status,\n          timestamp,\n          units,\n          time: timestamp.toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' }),\n        };\n        \n        setTotalUnits((prev) => prev + units);\n        // Add new signal at the beginning (newest-first)\n        return [newSignal, ...prev];\n      });\n    }, 45000);\n    \n    return () => clearInterval(interval);\n  }, []);\n\n  // VALORES FIXOS DE BASELINE - s√≥ mudam com sinais reais do admin\n  const BASELINE_ASSERTIVITY = 91.9;\n  const BASELINE_ROI = 106.2;\n  \n  // Calcula m√©tricas APENAS dos sinais reais do banco (criados pelo admin)\n  const finishedRealTips = realTips.filter(tip => tip.status === 'green' || tip.status === 'red');\n  \n  let assertivity = BASELINE_ASSERTIVITY;\n  let roi = BASELINE_ROI;\n  let wins = 2;\n  let losses = 0;\n  \n  if (finishedRealTips.length > 0) {\n    // Calcula assertividade real dos sinais do banco\n    const greenRealCount = finishedRealTips.filter(t => t.status === 'green').length;\n    assertivity = (greenRealCount / finishedRealTips.length) * 100;\n    \n    // Calcula ROI real: (lucro total - perda total) / investimento * 100\n    const greenTips = finishedRealTips.filter(t => t.status === 'green');\n    const redTips = finishedRealTips.filter(t => t.status === 'red');\n    const totalProfit = greenTips.reduce((sum, tip) => sum + (tip.odd - 1), 0);\n    const totalLoss = redTips.length;\n    const totalInvested = finishedRealTips.length;\n    roi = ((totalProfit - totalLoss) / totalInvested) * 100;\n    \n    // Calcula sequ√™ncia real: √∫ltimos sinais ordenados\n    const sortedRealTips = [...finishedRealTips].sort((a, b) => \n      new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime()\n    );\n    \n    wins = 0;\n    losses = 0;\n    \n    for (const tip of sortedRealTips) {\n      if (tip.status === 'green') {\n        if (losses === 0) wins++;\n        else break;\n      } else if (tip.status === 'red') {\n        if (wins === 0) losses++;\n        else break;\n      }\n    }\n  }\n\n  // Units history (last 72 signals, oldest to newest for chart)\n  // Calculate base units from all signals BEFORE the last 72\n  const historySignals = signals.slice(0, 72).reverse();\n  const baseUnitsFromOlderSignals = signals.length > 72\n    ? signals.slice(72).reduce((sum, s) => sum + s.units, 0)\n    : 0;\n  \n  const unitsHistory = historySignals.map((sig, idx) => {\n    const cumulativeFromWindow = historySignals.slice(0, idx + 1).reduce((sum, s) => sum + s.units, 0);\n    return {\n      time: sig.time,\n      units: INITIAL_UNITS + baseUnitsFromOlderSignals + cumulativeFromWindow,\n    };\n  });\n\n  // Activity heatmap (last 90 days)\n  const activityDays: { date: string; count: number; intensity: number }[] = [];\n  const today = new Date();\n  for (let i = 89; i >= 0; i--) {\n    const date = new Date(today);\n    date.setDate(date.getDate() - i);\n    const dateStr = date.toISOString().split('T')[0];\n    const daySignals = signals.filter(s => s.timestamp.toISOString().split('T')[0] === dateStr);\n    const greenSignals = daySignals.filter(s => s.status === 'green').length;\n    activityDays.push({\n      date: dateStr,\n      count: greenSignals,\n      intensity: greenSignals === 0 ? 0 : greenSignals <= 2 ? 1 : greenSignals <= 4 ? 2 : greenSignals <= 6 ? 3 : 4,\n    });\n  }\n\n  // Active signals (newest signals with pending/processing status)\n  const activeSignals = signals.filter(s => s.status === 'pending' || s.status === 'processing');\n\n  // Recent signals (newest 30)\n  const recentSignals = signals.slice(0, 30);\n\n  // Calcular resultado de HOJE baseado em sinais reais\n  const todayStart = new Date();\n  todayStart.setHours(0, 0, 0, 0);\n  const todayTips = realTips.filter(tip => {\n    const tipDate = new Date(tip.timestamp);\n    return tipDate >= todayStart && (tip.status === 'green' || tip.status === 'red');\n  });\n  \n  const todayGreen = todayTips.filter(t => t.status === 'green');\n  const todayRed = todayTips.filter(t => t.status === 'red');\n  const todayProfit = todayGreen.reduce((sum, tip) => sum + (tip.odd - 1), 0);\n  const todayLoss = todayRed.length;\n  const todayResult = todayProfit - todayLoss;\n\n  // Calcular resultado do M√äS baseado em sinais reais\n  const monthStart = new Date();\n  monthStart.setDate(1);\n  monthStart.setHours(0, 0, 0, 0);\n  const monthTips = realTips.filter(tip => {\n    const tipDate = new Date(tip.timestamp);\n    return tipDate >= monthStart && (tip.status === 'green' || tip.status === 'red');\n  });\n  \n  const monthGreen = monthTips.filter(t => t.status === 'green');\n  const monthRed = monthTips.filter(t => t.status === 'red');\n  const monthProfit = monthGreen.reduce((sum, tip) => sum + (tip.odd - 1), 0);\n  const monthLoss = monthRed.length;\n  const monthResult = monthProfit - monthLoss;\n\n  return {\n    assertivity,\n    totalUnits,\n    roi,\n    currentStreak: { wins, losses },\n    todayResult,\n    monthResult,\n    unitsHistory,\n    activityDays,\n    activeSignals,\n    recentSignals,\n    systemStatus: {\n      scanning: true,\n      gamesAnalyzed: 1402 + Math.floor(Math.random() * 100),\n      lastSync: new Date(),\n    },\n  };\n}\n","path":null,"size_bytes":9786,"size_tokens":null},"client/src/pages/dashboard-crm.tsx":{"content":"import { Layout } from \"@/components/layout\";\nimport { CompactLiveHud } from \"@/components/compact-live-hud\";\nimport { AIScanner } from \"@/components/ai-scanner\";\nimport { TrialBanner } from \"@/components/paywall/trial-banner\";\nimport { Bell, CheckCircle2, Smartphone } from \"lucide-react\";\nimport { useState, useEffect } from \"react\";\nimport { notificationService } from \"@/lib/notification-service\";\n\nfunction MobileNotificationCard() {\n  const [notificationsEnabled, setNotificationsEnabled] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n\n  useEffect(() => {\n    const checkStatus = async () => {\n      const enabled = await notificationService.isEnabled();\n      setNotificationsEnabled(enabled);\n    };\n    checkStatus();\n  }, []);\n\n  const handleEnableNotifications = async () => {\n    setIsLoading(true);\n    try {\n      const granted = await notificationService.requestPermission();\n      if (granted) {\n        setNotificationsEnabled(true);\n        // Envia notifica√ß√£o de teste para confirmar que est√° funcionando\n        if ('Notification' in window) {\n          new Notification(\"Notifica√ß√µes Ativadas! ‚úÖ\", {\n            body: \"Voc√™ receber√° alertas de novas entradas em tempo real.\",\n            icon: \"/favicon.ico\",\n          });\n        }\n      }\n    } catch (error) {\n      console.error(\"Erro ao ativar notifica√ß√µes:\", error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"md:hidden mt-4 bg-gradient-to-r from-[#0a1628] to-[#0d1f3c] border border-[#33b864]/30 rounded-xl p-4 shadow-lg\" data-testid=\"card-mobile-notifications\">\n      <div className=\"flex items-start gap-3\">\n        <div className={`w-12 h-12 rounded-full ${notificationsEnabled ? 'bg-[#33b864]/30' : 'bg-[#33b864]/20'} flex items-center justify-center flex-shrink-0`}>\n          {notificationsEnabled ? (\n            <CheckCircle2 className=\"w-6 h-6 text-[#33b864]\" />\n          ) : (\n            <Bell className=\"w-6 h-6 text-[#33b864]\" />\n          )}\n        </div>\n        <div className=\"flex-1\">\n          <h3 className=\"text-white font-semibold text-sm mb-1\">\n            {notificationsEnabled ? 'Notifica√ß√µes Ativadas' : 'Ative as Notifica√ß√µes'}\n          </h3>\n          <p className=\"text-gray-400 text-xs leading-relaxed mb-3\">\n            {notificationsEnabled \n              ? 'Voc√™ receber√° alertas em tempo real no seu celular sempre que uma nova entrada for publicada.'\n              : 'Receba alertas diretamente no seu celular e n√£o perca nenhuma entrada. Suas opera√ß√µes na palma da m√£o, 24h por dia.'}\n          </p>\n          \n          <button\n            onClick={handleEnableNotifications}\n            disabled={notificationsEnabled || isLoading}\n            className={`w-full py-2.5 px-4 rounded-lg font-bold text-sm flex items-center justify-center gap-2 transition-all ${\n              notificationsEnabled \n                ? 'bg-[#33b864]/20 text-[#33b864] cursor-default' \n                : 'bg-[#33b864] hover:bg-[#2da356] text-black'\n            }`}\n            data-testid=\"button-enable-notifications\"\n          >\n            {isLoading ? (\n              <>Ativando...</>\n            ) : notificationsEnabled ? (\n              <>\n                <CheckCircle2 className=\"w-4 h-4\" />\n                Ativado\n              </>\n            ) : (\n              <>\n                <Smartphone className=\"w-4 h-4\" />\n                Ativar Notifica√ß√µes\n              </>\n            )}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default function DashboardCRM() {\n\n  return (\n    <Layout>\n      {/* Trial Banner (only shows for trial users) */}\n      <TrialBanner />\n      \n      {/* Header */}\n      <div className=\"mb-6 mt-4\">\n        <h1 className=\"text-3xl font-display font-bold text-slate-900 dark:text-white mb-2\">\n          Central de Opera√ß√µes\n        </h1>\n        <p className=\"text-sm text-muted-foreground\">Gest√£o de Performance em Unidades</p>\n      </div>\n\n      {/* Compact Live HUD - Split View (C√≠rculo + Cards) */}\n      <CompactLiveHud />\n\n      {/* AI Scanner - Full Width */}\n      <div className=\"flex-1 mt-6\">\n        <AIScanner />\n      </div>\n\n      {/* Mobile Notification Card */}\n      <MobileNotificationCard />\n    </Layout>\n  );\n}\n","path":null,"size_bytes":4299,"size_tokens":null},"client/src/components/home-dashboard-preview.tsx":{"content":"import { ArrowRight } from \"lucide-react\";\nimport { Link } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { motion } from \"framer-motion\";\n\nexport function HomeDashboardPreview() {\n  return (\n    <section className=\"relative py-24 overflow-hidden bg-[#0a0a0a]\">\n      {/* Subtle radial glow */}\n      <div className=\"absolute inset-0 bg-[radial-gradient(circle_at_center,_rgba(51,184,100,0.05)_0%,_transparent_70%)]\" />\n      \n      <div className=\"container relative z-10 mx-auto px-4\">\n        {/* Section Header */}\n        <motion.div \n          initial={{ opacity: 0, y: 20 }}\n          whileInView={{ opacity: 1, y: 0 }}\n          viewport={{ once: true }}\n          transition={{ duration: 0.6 }}\n          className=\"text-center mb-12\"\n        >\n          <h2 className=\"text-4xl md:text-5xl font-display font-bold text-white mb-4\">\n            Seu Painel de Controle{\" \"}\n            <span className=\"text-gradient\">Profissional</span>\n          </h2>\n          <p className=\"text-lg text-gray-400 max-w-2xl mx-auto\">\n            Interface projetada para clareza e execu√ß√£o precisa.\n            <br />\n            Clique para ver o que te espera.\n          </p>\n        </motion.div>\n\n        {/* Dashboard Preview Card - Clickable */}\n        <Link href=\"/app\">\n          <motion.div\n            initial={{ opacity: 0, y: 30 }}\n            whileInView={{ opacity: 1, y: 0 }}\n            viewport={{ once: true }}\n            transition={{ duration: 0.6, delay: 0.2 }}\n            className=\"relative max-w-5xl mx-auto cursor-pointer group\"\n            style={{ \n              perspective: '2000px',\n            }}\n          >\n            <div \n              className=\"relative bg-[#121212]/80 backdrop-blur-md border border-primary/30 rounded-2xl p-8 md:p-12 shadow-[0_0_60px_rgba(51,184,100,0.15)] transition-all duration-300 group-hover:shadow-[0_0_80px_rgba(51,184,100,0.25)] group-hover:border-primary/50\"\n              style={{\n                transform: 'rotateX(2deg)',\n                transformStyle: 'preserve-3d',\n              }}\n              data-testid=\"dashboard-preview-card\"\n            >\n              {/* Glow effect */}\n              <div className=\"absolute inset-0 bg-gradient-to-br from-primary/5 to-transparent rounded-2xl pointer-events-none opacity-50 group-hover:opacity-100 transition-opacity\" />\n              \n              {/* Content */}\n              <div className=\"relative z-10 text-center space-y-6\">\n                {/* Icon/Visual Indicator */}\n                <div className=\"flex justify-center\">\n                  <div className=\"w-20 h-20 rounded-2xl bg-primary/10 border border-primary/20 flex items-center justify-center group-hover:bg-primary/20 transition-colors\">\n                    <svg \n                      className=\"w-10 h-10 text-primary\"\n                      fill=\"none\" \n                      viewBox=\"0 0 24 24\" \n                      stroke=\"currentColor\"\n                    >\n                      <path \n                        strokeLinecap=\"round\" \n                        strokeLinejoin=\"round\" \n                        strokeWidth={2} \n                        d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" \n                      />\n                    </svg>\n                  </div>\n                </div>\n\n                {/* Text */}\n                <div>\n                  <h3 className=\"text-2xl md:text-3xl font-display font-bold text-white mb-3\">\n                    Dashboard Completo\n                  </h3>\n                  <p className=\"text-gray-400 text-sm md:text-base max-w-md mx-auto\">\n                    Sinais ao vivo, an√°lise t√©cnica, estat√≠sticas em tempo real e muito mais.\n                  </p>\n                </div>\n\n                {/* CTA Button */}\n                <div className=\"pt-4\">\n                  <Button \n                    size=\"lg\"\n                    className=\"bg-primary hover:bg-primary/90 text-black font-bold\"\n                    data-testid=\"button-view-dashboard\"\n                  >\n                    <span className=\"flex items-center gap-2\">\n                      Ver Dashboard Completo\n                      <ArrowRight className=\"w-5 h-5 group-hover:translate-x-1 transition-transform\" />\n                    </span>\n                  </Button>\n                </div>\n\n                {/* Badge */}\n                <div className=\"pt-6\">\n                  <div className=\"inline-flex items-center gap-2 px-4 py-2 bg-primary/5 border border-primary/20 rounded-full\">\n                    <div className=\"w-2 h-2 bg-primary rounded-full animate-pulse\" />\n                    <span className=\"text-xs text-primary font-medium\">\n                      Dados em tempo real ‚Ä¢ Sistema 24/7\n                    </span>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </motion.div>\n        </Link>\n\n        {/* Bottom Text */}\n        <motion.div \n          initial={{ opacity: 0 }}\n          whileInView={{ opacity: 1 }}\n          viewport={{ once: true }}\n          transition={{ duration: 0.6, delay: 0.4 }}\n          className=\"text-center mt-8\"\n        >\n          <p className=\"text-muted-foreground text-sm\">\n            Tecnologia profissional ao alcance dos seus dedos.\n          </p>\n        </motion.div>\n      </div>\n    </section>\n  );\n}\n","path":null,"size_bytes":5513,"size_tokens":null},"client/src/hooks/use-dashboard-data.ts":{"content":"import { useState, useEffect } from 'react';\nimport { useQuery } from '@tanstack/react-query';\nimport { tipsService } from '@/lib/tips-service';\nimport { apiRequest } from '@/lib/queryClient';\n\nexport interface SimulatedTip {\n  id: string;\n  matchName: string;\n  league: string;\n  market: string;\n  odd: number;\n  status: 'green' | 'red' | 'pending';\n  timestamp: Date;\n  profit: number;\n}\n\nexport interface MonthlyStats {\n  month: number;\n  year: number;\n  totalTips: number;\n  greenTips: number;\n  redTips: number;\n  pendingTips: number;\n  settledTips: number;\n  assertivity: number;\n  totalProfit: number;\n  roi: number;\n  avgOddGreen: number;\n  currentStreak: { wins: number; losses: number; type: 'win' | 'loss' | 'none' };\n  lastUpdated: string;\n}\n\nexport interface DailyStats {\n  date: string;\n  green: number;\n  red: number;\n  profit: number;\n}\n\nexport interface DashboardStats {\n  balance: number;\n  winRate: number;\n  totalTips: number;\n  currentStreak: number;\n  profitHistory: { time: string; profit: number }[];\n  recentTips: SimulatedTip[];\n  monthlyStats: MonthlyStats | null;\n  dailyStats: DailyStats[];\n  isLoading: boolean;\n}\n\nconst INITIAL_BALANCE = 1000;\nconst WIN_PROFIT = 50;\nconst LOSS_AMOUNT = 100;\nconst TIP_INTERVAL_MINUTES = 20;\nconst WIN_LOSS_RATIO = 20; // 20 wins per 1 loss\n\n// Leagues for simulation variety\nconst LEAGUES = [\n  'Premier League',\n  'La Liga',\n  'Serie A',\n  'Bundesliga',\n  'Ligue 1',\n  'Champions League',\n  'Brasileir√£o',\n  'Copa Libertadores',\n];\n\n// Teams pool for realistic match names\nconst TEAMS = {\n  'Premier League': ['Manchester City', 'Arsenal', 'Liverpool', 'Chelsea', 'Tottenham', 'Manchester United'],\n  'La Liga': ['Real Madrid', 'Barcelona', 'Atl√©tico Madrid', 'Sevilla', 'Real Betis', 'Valencia'],\n  'Serie A': ['Inter Milan', 'AC Milan', 'Juventus', 'Napoli', 'Roma', 'Lazio'],\n  'Bundesliga': ['Bayern Munich', 'Borussia Dortmund', 'RB Leipzig', 'Leverkusen', 'Frankfurt', 'Union Berlin'],\n  'Ligue 1': ['PSG', 'Marseille', 'Monaco', 'Lyon', 'Lille', 'Nice'],\n  'Champions League': ['Barcelona', 'Real Madrid', 'Bayern Munich', 'Manchester City', 'PSG', 'Liverpool'],\n  'Brasileir√£o': ['Flamengo', 'Palmeiras', 'S√£o Paulo', 'Corinthians', 'Atl√©tico-MG', 'Internacional'],\n  'Copa Libertadores': ['Flamengo', 'River Plate', 'Boca Juniors', 'Palmeiras', 'Pe√±arol', 'Nacional'],\n};\n\nconst MARKETS = [\n  'Over 0.5 HT',\n  'Over 1.5 FT',\n  'BTTS Yes',\n  'Home Win',\n  'Draw No Bet',\n  'Over 2.5 FT',\n  'Asian Handicap -0.5',\n];\n\nfunction generateRandomMatch(league: string): string {\n  const teams = TEAMS[league as keyof typeof TEAMS] || TEAMS['Premier League'];\n  const home = teams[Math.floor(Math.random() * teams.length)];\n  let away = teams[Math.floor(Math.random() * teams.length)];\n  while (away === home) {\n    away = teams[Math.floor(Math.random() * teams.length)];\n  }\n  return `${home} vs ${away}`;\n}\n\nfunction generateHistoricalTips(count: number): SimulatedTip[] {\n  const tips: SimulatedTip[] = [];\n  let balance = INITIAL_BALANCE;\n  const now = new Date();\n  \n  for (let i = count - 1; i >= 0; i--) {\n    const isRed = (count - i) % (WIN_LOSS_RATIO + 1) === 0 && i > 0; // Every 21st tip is RED\n    const status = isRed ? 'red' : 'green';\n    const profit = isRed ? -LOSS_AMOUNT : WIN_PROFIT;\n    balance += profit;\n    \n    const league = LEAGUES[Math.floor(Math.random() * LEAGUES.length)];\n    const market = MARKETS[Math.floor(Math.random() * MARKETS.length)];\n    const odd = (1.5 + Math.random() * 1.5).toFixed(2);\n    \n    const timestamp = new Date(now.getTime() - i * TIP_INTERVAL_MINUTES * 60 * 1000);\n    \n    tips.push({\n      id: `sim-${count - i}`,\n      matchName: generateRandomMatch(league),\n      league,\n      market,\n      odd: parseFloat(odd),\n      status,\n      timestamp,\n      profit,\n    });\n  }\n  \n  return tips.reverse();\n}\n\nexport function useDashboardData(): DashboardStats {\n  const [simulatedTips, setSimulatedTips] = useState<SimulatedTip[]>([]);\n  const [currentBalance, setCurrentBalance] = useState(INITIAL_BALANCE);\n  \n  // Fetch real tips from API\n  const { data: realTips = [] } = useQuery({\n    queryKey: ['tips'],\n    queryFn: tipsService.getAll,\n  });\n\n  // Fetch real monthly stats from API\n  const { data: monthlyStats, isLoading: isLoadingMonthly } = useQuery<MonthlyStats>({\n    queryKey: ['tips-stats'],\n    queryFn: async () => {\n      const response = await fetch('/api/tips/stats');\n      if (!response.ok) throw new Error('Failed to fetch stats');\n      return response.json();\n    },\n    refetchInterval: 60000, // Refresh every minute\n  });\n\n  // Fetch daily stats for chart\n  const { data: dailyStats = [], isLoading: isLoadingDaily } = useQuery<DailyStats[]>({\n    queryKey: ['tips-stats-daily'],\n    queryFn: async () => {\n      const response = await fetch('/api/tips/stats/daily?days=30');\n      if (!response.ok) throw new Error('Failed to fetch daily stats');\n      return response.json();\n    },\n    refetchInterval: 60000,\n  });\n\n  // Initialize simulation only if no real data\n  useEffect(() => {\n    if (realTips.length === 0) {\n      const historical = generateHistoricalTips(100);\n      setSimulatedTips(historical);\n      const totalProfit = historical.reduce((sum, tip) => sum + tip.profit, 0);\n      setCurrentBalance(INITIAL_BALANCE + totalProfit);\n    }\n  }, [realTips.length]);\n\n  // Add new simulated tip every 30 seconds (only if no real data)\n  useEffect(() => {\n    if (realTips.length > 0) return;\n    \n    const interval = setInterval(() => {\n      setSimulatedTips((prev) => {\n        const newTipIndex = prev.length + 1;\n        const isRed = newTipIndex % (WIN_LOSS_RATIO + 1) === 0;\n        const status = isRed ? 'red' : 'green';\n        const profit = isRed ? -LOSS_AMOUNT : WIN_PROFIT;\n        \n        const league = LEAGUES[Math.floor(Math.random() * LEAGUES.length)];\n        const market = MARKETS[Math.floor(Math.random() * MARKETS.length)];\n        const odd = (1.5 + Math.random() * 1.5).toFixed(2);\n        \n        const newTip: SimulatedTip = {\n          id: `sim-${newTipIndex}`,\n          matchName: generateRandomMatch(league),\n          league,\n          market,\n          odd: parseFloat(odd),\n          status,\n          timestamp: new Date(),\n          profit,\n        };\n        \n        setCurrentBalance((prevBalance) => prevBalance + profit);\n        \n        return [...prev, newTip];\n      });\n    }, 30000);\n    \n    return () => clearInterval(interval);\n  }, [realTips.length]);\n\n  // Use REAL stats if available, otherwise fallback to simulation\n  const hasRealData = monthlyStats && monthlyStats.settledTips > 0;\n  \n  const winRate = hasRealData \n    ? monthlyStats.assertivity \n    : simulatedTips.length > 0 \n      ? (simulatedTips.filter((t) => t.status === 'green').length / simulatedTips.length) * 100 \n      : 0;\n  \n  const totalTips = hasRealData \n    ? monthlyStats.totalTips \n    : simulatedTips.length;\n  \n  // Current streak from real data or simulation\n  let currentStreak = 0;\n  if (hasRealData) {\n    currentStreak = monthlyStats.currentStreak.type === 'win' \n      ? monthlyStats.currentStreak.wins \n      : 0;\n  } else {\n    for (let i = simulatedTips.length - 1; i >= 0; i--) {\n      if (simulatedTips[i].status === 'green') {\n        currentStreak++;\n      } else {\n        break;\n      }\n    }\n  }\n\n  // Profit history: use daily stats if available, otherwise simulation\n  let profitHistory: { time: string; profit: number }[] = [];\n  \n  if (dailyStats.length > 0) {\n    let cumulativeProfit = INITIAL_BALANCE;\n    profitHistory = dailyStats.map((day) => {\n      cumulativeProfit += day.profit;\n      return {\n        time: new Date(day.date).toLocaleDateString('pt-BR', { day: '2-digit', month: 'short' }),\n        profit: cumulativeProfit,\n      };\n    });\n  } else {\n    const historyStartIndex = Math.max(0, simulatedTips.length - 72);\n    profitHistory = simulatedTips.slice(historyStartIndex).map((tip, index) => {\n      const absoluteIndex = historyStartIndex + index;\n      const cumulativeProfit = simulatedTips\n        .slice(0, absoluteIndex + 1)\n        .reduce((sum, t) => sum + t.profit, 0);\n      \n      return {\n        time: tip.timestamp.toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' }),\n        profit: INITIAL_BALANCE + cumulativeProfit,\n      };\n    });\n  }\n\n  // Balance: use real profit if available\n  const balance = hasRealData \n    ? INITIAL_BALANCE + monthlyStats.totalProfit \n    : currentBalance;\n\n  // Recent tips: prioritize real tips\n  const recentTips: SimulatedTip[] = [\n    ...realTips.map((tip) => ({\n      id: tip.id,\n      matchName: `${tip.homeTeam} vs ${tip.awayTeam}`,\n      league: tip.league,\n      market: tip.market,\n      odd: tip.odd,\n      status: tip.status as 'green' | 'red' | 'pending',\n      timestamp: new Date(tip.timestamp || new Date()),\n      profit: tip.status === 'green' ? WIN_PROFIT : tip.status === 'red' ? -LOSS_AMOUNT : 0,\n    })),\n    ...simulatedTips.slice(-20).reverse(),\n  ];\n\n  return {\n    balance,\n    winRate,\n    totalTips,\n    currentStreak,\n    profitHistory,\n    recentTips: recentTips.slice(0, 30),\n    monthlyStats: monthlyStats || null,\n    dailyStats,\n    isLoading: isLoadingMonthly || isLoadingDaily,\n  };\n}\n","path":null,"size_bytes":9225,"size_tokens":null},"client/src/components/compact-live-hud.tsx":{"content":"import { Scale, Users, TrendingDown, TrendingUp, Shield, User } from 'lucide-react';\nimport { ProfitTrendChart } from './dashboard/profit-trend-chart';\nimport { useTipsStats } from '@/hooks/use-tips-stats';\nimport { useUserBets } from '@/hooks/use-user-bets';\nimport { useAuth } from '@/hooks/use-auth';\nimport { useState, useEffect } from 'react';\n\nexport function CompactLiveHud() {\n  const { user } = useAuth();\n  \n  // Estat√≠sticas globais (backup/refer√™ncia)\n  const { data: globalStats, isLoading: globalLoading } = useTipsStats();\n  \n  // Estat√≠sticas individuais do usu√°rio\n  const { stats: userStats, isLoading: userLoading } = useUserBets();\n  \n  // Verifica se o usu√°rio tem entradas pr√≥prias\n  const hasUserBets = userStats && userStats.totalBets > 0;\n  \n  // Se o usu√°rio tem entradas, mostra estat√≠sticas DELE\n  // Sen√£o, mostra estat√≠sticas GLOBAIS da plataforma\n  const greens = hasUserBets ? userStats.greens : (globalStats?.greens ?? 0);\n  const reds = hasUserBets ? userStats.reds : (globalStats?.reds ?? 0);\n  const assertivityValue = hasUserBets ? userStats.assertivity : (globalStats?.assertivity ?? 0);\n  const profit = hasUserBets ? userStats.profit : 0;\n  const monthName = globalStats?.monthName ?? new Date().toLocaleString('pt-BR', { month: 'long' });\n  const totalBets = hasUserBets ? userStats.totalBets : (globalStats?.monthTotalTips ?? 0);\n  \n  // Valores globais para refer√™ncia\n  const averageOdd = globalStats?.averageOdd ?? 0;\n  const growthPercentage = globalStats?.growthPercentage ?? 0;\n  \n  const isLoading = globalLoading || userLoading;\n  \n  // Usu√°rios online oscila entre 254-403 com movimento suave\n  const [onlineUsers, setOnlineUsers] = useState(330);\n  const [direction, setDirection] = useState<'up' | 'down'>('up');\n  \n  // Lat√™ncia oscila entre 8-18ms\n  const [latency, setLatency] = useState(12);\n  \n  useEffect(() => {\n    const interval = setInterval(() => {\n      setOnlineUsers(prev => {\n        const step = Math.floor(Math.random() * 20) + 15;\n        \n        if (direction === 'up') {\n          const newValue = prev + step;\n          if (newValue >= 403) {\n            setDirection('down');\n            return 403;\n          }\n          return newValue;\n        } else {\n          const newValue = prev - step;\n          if (newValue <= 254) {\n            setDirection('up');\n            return 254;\n          }\n          return newValue;\n        }\n      });\n      \n      // Atualiza lat√™ncia aleatoriamente\n      setLatency(Math.floor(Math.random() * 10) + 8);\n    }, 30000);\n    \n    return () => clearInterval(interval);\n  }, [direction]);\n\n  return (\n    <div className=\"w-full mb-8 flex flex-col gap-6\">\n\n      {/* SE√á√ÉO 1: BLOCO SUPERIOR (C√≠rculo + Gr√°fico) */}\n      <div className=\"grid grid-cols-[40%_60%] gap-4 h-44 items-center\">\n\n        {/* ESQUERDA: GAUGE DE ASSERTIVIDADE COM META */}\n        <div className=\"relative flex items-center justify-center h-full w-full\">\n          <div className=\"relative w-36 h-36 flex items-center justify-center\">\n            \n            <svg className=\"w-full h-full transform -rotate-90\" viewBox=\"0 0 100 100\">\n              {/* Anel externo fino - Meta 100% */}\n              <circle\n                cx=\"50\"\n                cy=\"50\"\n                r=\"46\"\n                stroke=\"#1f1f1f\"\n                strokeWidth=\"2\"\n                fill=\"none\"\n                strokeDasharray=\"3 3\"\n                opacity=\"0.5\"\n              />\n              {/* C√≠rculo de fundo */}\n              <circle\n                cx=\"50\"\n                cy=\"50\"\n                r=\"42\"\n                stroke=\"#1a1a1a\"\n                strokeWidth=\"8\"\n                fill=\"none\"\n              />\n              {/* C√≠rculo de progresso com glow */}\n              <circle\n                cx=\"50\"\n                cy=\"50\"\n                r=\"42\"\n                stroke=\"#33b864\"\n                strokeWidth=\"8\"\n                fill=\"none\"\n                strokeLinecap=\"round\"\n                strokeDasharray={`${(assertivityValue / 100) * 2 * Math.PI * 42} ${2 * Math.PI * 42}`}\n                style={{ \n                  transition: 'stroke-dasharray 0.5s ease',\n                  filter: 'drop-shadow(0 0 6px #33b864)'\n                }}\n              />\n            </svg>\n\n            <div className=\"absolute inset-0 flex flex-col items-center justify-center z-10\">\n              <span \n                className=\"text-[28px] font-black text-[#33b864] tracking-tight leading-none\" \n                style={{ \n                  fontFamily: 'Sora, sans-serif',\n                  textShadow: '0 0 20px rgba(51, 184, 100, 0.5)'\n                }}\n              >\n                {isLoading ? '--' : `${assertivityValue.toFixed(1)}%`}\n              </span>\n              <span className=\"text-[10px] text-muted-foreground mt-1 text-center\">\n                {hasUserBets ? 'Sua M√©dia' : `M√©dia ${monthName}`}\n              </span>\n            </div>\n\n          </div>\n        </div>\n\n        {/* DIREITA: GR√ÅFICO DE LUCRO */}\n        <ProfitTrendChart growthPercentage={growthPercentage} />\n\n      </div>\n\n      {/* SE√á√ÉO 2: BLOCO INFERIOR (Grid 2x2 Premium) */}\n      <div className=\"grid grid-cols-2 gap-4\">\n        \n        {/* CARD A: ODD M√âDIA com comparativo */}\n        <div className=\"h-32 bg-[#1a1a1a] border-2 border-white/10 rounded-2xl p-4 hover:bg-[#1e1e1e] hover:border-[#33b864]/50 transition-all flex flex-col justify-center relative group shadow-xl shadow-black/60 overflow-hidden\">\n          {/* Textura noise */}\n          <div className=\"absolute inset-0 opacity-[0.02]\" style={{ backgroundImage: 'url(\"data:image/svg+xml,%3Csvg viewBox=\\'0 0 256 256\\' xmlns=\\'http://www.w3.org/2000/svg\\'%3E%3Cfilter id=\\'noise\\'%3E%3CfeTurbulence type=\\'fractalNoise\\' baseFrequency=\\'0.9\\' numOctaves=\\'4\\' stitchTiles=\\'stitch\\'/%3E%3C/filter%3E%3Crect width=\\'100%25\\' height=\\'100%25\\' filter=\\'url(%23noise)\\'/%3E%3C/svg%3E\")' }} />\n          \n          <div className=\"absolute top-0 right-0 p-2 opacity-20 group-hover:opacity-50 transition-opacity\">\n            <Scale className=\"w-8 h-8 text-orange-500\" />\n          </div>\n          <div className=\"flex items-center gap-2 mb-2 z-10\">\n            <div className=\"w-1 h-3 bg-orange-500 rounded-full\"></div>\n            <span className=\"text-[10px] text-gray-400 uppercase font-bold tracking-widest\">Odd M√©dia</span>\n          </div>\n          <div className=\"flex items-center gap-2 z-10\">\n            <span className=\"text-3xl font-sora font-bold text-white\">\n              {isLoading ? '--' : averageOdd.toFixed(2)}\n            </span>\n            <span className=\"text-[9px] bg-[#33b864]/20 text-[#33b864] px-2 py-0.5 rounded-full font-bold\">\n              ‚ñ≤ 20% acima\n            </span>\n          </div>\n        </div>\n\n        {/* CARD B: USU√ÅRIOS ONLINE com lat√™ncia */}\n        <div className=\"h-32 bg-[#1a1a1a] border-2 border-white/10 rounded-2xl p-4 hover:bg-[#1e1e1e] hover:border-[#33b864]/50 transition-all flex flex-col justify-between relative group shadow-xl shadow-black/60 overflow-hidden\">\n          {/* Textura noise */}\n          <div className=\"absolute inset-0 opacity-[0.02]\" style={{ backgroundImage: 'url(\"data:image/svg+xml,%3Csvg viewBox=\\'0 0 256 256\\' xmlns=\\'http://www.w3.org/2000/svg\\'%3E%3Cfilter id=\\'noise\\'%3E%3CfeTurbulence type=\\'fractalNoise\\' baseFrequency=\\'0.9\\' numOctaves=\\'4\\' stitchTiles=\\'stitch\\'/%3E%3C/filter%3E%3Crect width=\\'100%25\\' height=\\'100%25\\' filter=\\'url(%23noise)\\'/%3E%3C/svg%3E\")' }} />\n          \n          <div className=\"absolute top-0 right-0 p-2 opacity-20 group-hover:opacity-50 transition-opacity\">\n            <Users className=\"w-8 h-8 text-[#33b864]\" />\n          </div>\n          \n          <div className=\"flex flex-col justify-center flex-1\">\n            <div className=\"flex items-center gap-2 mb-2 z-10\">\n              <span className=\"w-2 h-2 rounded-full bg-[#33b864] animate-pulse shadow-[0_0_8px_#33b864]\"></span>\n              <span className=\"text-[10px] text-gray-400 uppercase font-bold tracking-widest\">Usu√°rios Online</span>\n            </div>\n            <span \n              className=\"text-3xl font-sora font-bold text-white z-10\"\n              style={{ textShadow: '0 0 10px rgba(255,255,255,0.1)' }}\n            >\n              {onlineUsers.toLocaleString('pt-BR')}\n            </span>\n          </div>\n          \n          {/* Rodap√© com lat√™ncia */}\n          <div className=\"flex items-center gap-1.5 z-10 border-t border-white/5 pt-2 mt-2\">\n            <span className=\"w-1.5 h-1.5 rounded-full bg-[#33b864] animate-pulse\"></span>\n            <span className=\"text-[8px] text-gray-500\">Lat√™ncia: <span className=\"text-[#33b864]\">{latency}ms</span> (Tempo Real)</span>\n          </div>\n        </div>\n\n        {/* CARD C: GREENS */}\n        <div className=\"h-32 bg-[#1a1a1a] border-2 border-white/10 rounded-2xl p-4 hover:bg-[#1e1e1e] hover:border-[#33b864]/50 transition-all flex flex-col justify-between relative group shadow-xl shadow-black/60 overflow-hidden\">\n          {/* Textura noise */}\n          <div className=\"absolute inset-0 opacity-[0.02]\" style={{ backgroundImage: 'url(\"data:image/svg+xml,%3Csvg viewBox=\\'0 0 256 256\\' xmlns=\\'http://www.w3.org/2000/svg\\'%3E%3Cfilter id=\\'noise\\'%3E%3CfeTurbulence type=\\'fractalNoise\\' baseFrequency=\\'0.9\\' numOctaves=\\'4\\' stitchTiles=\\'stitch\\'/%3E%3C/filter%3E%3Crect width=\\'100%25\\' height=\\'100%25\\' filter=\\'url(%23noise)\\'/%3E%3C/svg%3E\")' }} />\n          \n          <div className=\"absolute top-0 right-0 p-2 opacity-20 group-hover:opacity-50 transition-opacity\">\n            <TrendingUp className=\"w-8 h-8 text-[#33b864]\" />\n          </div>\n          \n          <div className=\"flex flex-col justify-center flex-1\">\n            <div className=\"flex items-center gap-2 mb-2 z-10\">\n              {hasUserBets && <User className=\"w-3 h-3 text-[#33b864]\" />}\n              <div className=\"w-1 h-3 bg-[#33b864] rounded-full\"></div>\n              <span className=\"text-[10px] text-gray-400 uppercase font-bold tracking-widest\">\n                {hasUserBets ? 'Seus Greens' : 'Ganhou'}\n              </span>\n            </div>\n            <span \n              className=\"text-3xl font-sora font-bold text-[#33b864] z-10\"\n              style={{ textShadow: '0 0 20px rgba(51, 184, 100, 0.4)' }}\n            >\n              {isLoading ? '--' : greens}\n            </span>\n          </div>\n          \n          {/* Total de bilhetes do m√™s */}\n          <div className=\"z-10 border-t border-white/5 pt-2 mt-2\">\n            <span className=\"text-[8px] text-gray-500\">\n              {hasUserBets \n                ? `${totalBets} entradas em ${monthName}` \n                : `${totalBets} bilhetes em ${monthName}`}\n            </span>\n          </div>\n        </div>\n\n        {/* CARD D: REDS */}\n        <div className=\"h-32 bg-[#1a1a1a] border-2 border-white/10 rounded-2xl p-4 hover:bg-[#1e1e1e] hover:border-red-500/40 transition-all flex flex-col justify-between relative group shadow-xl shadow-black/60 overflow-hidden\">\n          {/* Textura noise */}\n          <div className=\"absolute inset-0 opacity-[0.02]\" style={{ backgroundImage: 'url(\"data:image/svg+xml,%3Csvg viewBox=\\'0 0 256 256\\' xmlns=\\'http://www.w3.org/2000/svg\\'%3E%3Cfilter id=\\'noise\\'%3E%3CfeTurbulence type=\\'fractalNoise\\' baseFrequency=\\'0.9\\' numOctaves=\\'4\\' stitchTiles=\\'stitch\\'/%3E%3C/filter%3E%3Crect width=\\'100%25\\' height=\\'100%25\\' filter=\\'url(%23noise)\\'/%3E%3C/svg%3E\")' }} />\n          \n          {/* Escudo como marca d'√°gua */}\n          <div className=\"absolute inset-0 flex items-center justify-center opacity-5 group-hover:opacity-10 transition-opacity\">\n            <Shield className=\"w-24 h-24 text-[#33b864]\" />\n          </div>\n          \n          <div className=\"flex flex-col justify-center flex-1\">\n            <div className=\"flex items-center gap-2 mb-2 z-10\">\n              {hasUserBets && <User className=\"w-3 h-3 text-red-500\" />}\n              <div className=\"w-1 h-3 bg-red-500 rounded-full\"></div>\n              <span className=\"text-[10px] text-gray-400 uppercase font-bold tracking-widest\">\n                {hasUserBets ? 'Suas Reds' : 'Perdida'}\n              </span>\n            </div>\n            <span className=\"text-3xl font-sora font-bold text-red-500 z-10\">\n              {isLoading ? '--' : reds}\n            </span>\n          </div>\n          \n          {/* Lucro/Preju√≠zo ou prote√ß√£o */}\n          <div className=\"flex items-center gap-1.5 z-10 border-t border-white/5 pt-2 mt-2\">\n            {hasUserBets ? (\n              <span className={`text-[8px] font-bold ${profit >= 0 ? 'text-[#33b864]' : 'text-red-500'}`}>\n                {profit >= 0 ? '+' : ''}{profit.toFixed(2)} unidades\n              </span>\n            ) : (\n              <>\n                <Shield className=\"w-3 h-3 text-[#33b864]\" />\n                <span className=\"text-[8px] text-[#33b864]\">Prote√ß√£o de Banca Ativa</span>\n              </>\n            )}\n          </div>\n        </div>\n\n      </div>\n\n    </div>\n  );\n}\n","path":null,"size_bytes":13069,"size_tokens":null},"client/src/components/live-metrics-bar.tsx":{"content":"import { Users, Zap, Target } from \"lucide-react\";\nimport { useState, useEffect } from \"react\";\n\nexport function LiveMetricsBar() {\n  const [onlineUsers, setOnlineUsers] = useState(0);\n  const [displayUsers, setDisplayUsers] = useState(3420);\n  const [totalTips] = useState(18940);\n  const [winRate] = useState(94.8);\n  \n  // CountUp animation on mount\n  useEffect(() => {\n    let current = 0;\n    const target = 3420;\n    const duration = 2000;\n    const increment = target / (duration / 16);\n\n    const interval = setInterval(() => {\n      current += increment;\n      if (current >= target) {\n        setOnlineUsers(target);\n        clearInterval(interval);\n      } else {\n        setOnlineUsers(Math.floor(current));\n      }\n    }, 16);\n\n    return () => clearInterval(interval);\n  }, []);\n\n  // Oscillation engine for online users (3-5 seconds)\n  useEffect(() => {\n    const oscillate = () => {\n      setDisplayUsers(prev => {\n        const variation = Math.floor(Math.random() * 40) - 15; // -15 to +25\n        const newValue = prev + variation;\n        // Keep between 3400 and 3500\n        return Math.max(3400, Math.min(3500, newValue));\n      });\n    };\n\n    const getRandomInterval = () => Math.random() * 2000 + 3000; // 3-5 seconds\n\n    let timeoutId: number;\n    const scheduleNext = () => {\n      timeoutId = window.setTimeout(() => {\n        oscillate();\n        scheduleNext();\n      }, getRandomInterval());\n    };\n\n    // Start after initial countup finishes\n    const initialDelay = setTimeout(() => {\n      scheduleNext();\n    }, 2500);\n\n    return () => {\n      clearTimeout(initialDelay);\n      clearTimeout(timeoutId);\n    };\n  }, []);\n\n  // Sync display with oscillation\n  useEffect(() => {\n    setOnlineUsers(displayUsers);\n  }, [displayUsers]);\n\n  return (\n    <div className=\"flex flex-col sm:flex-row items-center justify-center gap-4 sm:gap-6 px-6 py-4 bg-[#121212]/50 backdrop-blur-sm border border-primary/20 rounded-full max-w-4xl mx-auto\">\n      {/* Metric 1: Online Users (Oscillating) */}\n      <div className=\"flex items-center gap-2\">\n        <Users className=\"w-4 h-4 text-primary\" strokeWidth={1.5} />\n        <div className=\"flex items-center gap-2\">\n          <div className=\"w-2 h-2 bg-primary rounded-full animate-pulse\" />\n          <span className=\"text-sm text-white font-bold font-mono\">\n            {onlineUsers.toLocaleString('pt-BR')}\n          </span>\n          <span className=\"text-sm text-gray-300\">Online Agora</span>\n        </div>\n      </div>\n\n      {/* Separator */}\n      <div className=\"hidden sm:block w-px h-6 bg-primary/20\" />\n\n      {/* Metric 2: Total Tips Sent */}\n      <div className=\"flex items-center gap-2\">\n        <Zap className=\"w-4 h-4 text-primary\" strokeWidth={1.5} />\n        <div className=\"flex items-center gap-2\">\n          <span className=\"text-sm text-white font-bold font-mono\">\n            {totalTips.toLocaleString('pt-BR')}+\n          </span>\n          <span className=\"text-sm text-gray-300\">Sinais Enviados</span>\n        </div>\n      </div>\n\n      {/* Separator */}\n      <div className=\"hidden sm:block w-px h-6 bg-primary/20\" />\n\n      {/* Metric 3: Win Rate */}\n      <div className=\"flex items-center gap-2\">\n        <Target className=\"w-4 h-4 text-primary\" strokeWidth={1.5} />\n        <div className=\"flex items-center gap-2\">\n          <span className=\"text-sm text-primary font-bold font-mono\">\n            {winRate}%\n          </span>\n          <span className=\"text-sm text-gray-300\">Assertividade Global</span>\n        </div>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":3560,"size_tokens":null},"client/src/components/ai-scanner.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { Activity, Brain, Database, Zap } from 'lucide-react';\n\n// Separated leagues with their respective teams\nconst LEAGUES_DATA = {\n  'Liga Inglesa': ['Manchester City', 'Arsenal', 'Liverpool', 'Chelsea', 'Tottenham', 'Man United'],\n  'Campeonato Espanhol': ['Real Madrid', 'Barcelona', 'Atl√©tico Madrid', 'Sevilla', 'Valencia'],\n  'S√©rie A Italiana': ['Inter de Mil√£o', 'AC Milan', 'Juventus', 'Napoli', 'Roma'],\n  'Bundesliga': ['Bayern Munique', 'Borussia Dortmund', 'RB Leipzig', 'Bayer Leverkusen'],\n  'Liga Francesa': ['Paris SG', 'Olympique Marseille', 'Lyon', 'Monaco'],\n  'Brasileir√£o': ['Flamengo', 'Palmeiras', 'S√£o Paulo', 'Corinthians', 'Atl√©tico-MG', 'Fluminense'],\n  'Liga dos Campe√µes': ['Bayern Munique', 'Real Madrid', 'Manchester City', 'Barcelona', 'Liverpool']\n};\n\nconst MARKETS = ['Mais de 0.5 gols 1T', 'Ambas Marcam', 'Mais de 1.5 gols', 'Vit√≥ria Casa', 'Empate Anula', 'Handicap Asi√°tico'];\n\ninterface ScanLine {\n  id: string;\n  text: string;\n  timestamp: number;\n}\n\nexport function AIScanner() {\n  const [lines, setLines] = useState<ScanLine[]>([]);\n  const [analyzing, setAnalyzing] = useState(0);\n\n  useEffect(() => {\n    const addLine = () => {\n      // Pick a random league\n      const leagueNames = Object.keys(LEAGUES_DATA);\n      const selectedLeague = leagueNames[Math.floor(Math.random() * leagueNames.length)];\n      const leagueTeams = LEAGUES_DATA[selectedLeague as keyof typeof LEAGUES_DATA];\n      \n      // Pick two different teams from the SAME league\n      const team1Index = Math.floor(Math.random() * leagueTeams.length);\n      let team2Index = Math.floor(Math.random() * leagueTeams.length);\n      while (team2Index === team1Index) {\n        team2Index = Math.floor(Math.random() * leagueTeams.length);\n      }\n      \n      const templates = [\n        `Varrendo partidas ${selectedLeague}...`,\n        `Avaliando mercado ${MARKETS[Math.floor(Math.random() * MARKETS.length)]}...`,\n        `Processando dados de cota√ß√µes ao vivo...`,\n        `Confian√ßa IA: ${(85 + Math.random() * 12).toFixed(1)}% - Sinal detectado`,\n        `Valida√ß√£o cruzada com especialistas...`,\n        `Converg√™ncia do modelo estat√≠stico: ${(92 + Math.random() * 7).toFixed(1)}%`,\n        `Reconhecimento de padr√µes: ${Math.floor(Math.random() * 15) + 5} oportunidades`,\n      ];\n\n      const newLine: ScanLine = {\n        id: `line-${Date.now()}-${Math.random()}`,\n        text: templates[Math.floor(Math.random() * templates.length)],\n        timestamp: Date.now(),\n      };\n\n      setLines(prev => [newLine, ...prev].slice(0, 8));\n    };\n\n    const interval = setInterval(addLine, 1800);\n    const analyzeInterval = setInterval(() => {\n      setAnalyzing(prev => (prev + 1) % 4);\n    }, 500);\n\n    // Add initial lines and store timeout IDs for cleanup\n    const initialTimeouts: ReturnType<typeof setTimeout>[] = [];\n    for (let i = 0; i < 5; i++) {\n      initialTimeouts.push(setTimeout(addLine, i * 400));\n    }\n\n    return () => {\n      clearInterval(interval);\n      clearInterval(analyzeInterval);\n      initialTimeouts.forEach(timeout => clearTimeout(timeout));\n    };\n  }, []);\n\n  return (\n    <div className=\"bg-[#0a0a0a] border border-[#222] rounded-lg p-4 overflow-hidden\">\n      <div className=\"flex items-center justify-between mb-2\">\n        <div className=\"flex items-center gap-1\">\n          <Brain className=\"w-3 h-3 text-primary animate-pulse\" />\n          <h3 className=\"text-[7px] font-bold text-white uppercase tracking-tight\">\n            Scanning\n          </h3>\n        </div>\n        <div className=\"flex items-center gap-1\">\n          <div className=\"w-1.5 h-1.5 bg-primary rounded-full animate-ping\" />\n          <span className=\"text-[7px] text-primary font-mono\">LIVE</span>\n        </div>\n      </div>\n\n      <div className=\"space-y-1.5 font-mono text-[10px] h-[180px] overflow-hidden\">\n        {lines.map((line, idx) => (\n          <div\n            key={line.id}\n            className=\"text-primary/60 transition-all duration-300 animate-scan-in\"\n            style={{\n              opacity: 1 - (idx * 0.12),\n              transform: `translateY(${idx * 0}px)`,\n            }}\n          >\n            <span className=\"text-primary/40\">{'>'}</span> {line.text}\n          </div>\n        ))}\n      </div>\n\n      <div className=\"mt-3 pt-3 border-t border-[#222] flex items-center justify-between text-[9px]\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"flex items-center gap-1\">\n            <Database className=\"w-3 h-3 text-primary/60\" />\n            <span className=\"text-muted-foreground\">{Math.floor(Math.random() * 200) + 1200} jogos</span>\n          </div>\n          <div className=\"flex items-center gap-1\">\n            <Zap className=\"w-3 h-3 text-primary/60\" />\n            <span className=\"text-muted-foreground\">{(Math.random() * 5 + 15).toFixed(1)}ms</span>\n          </div>\n        </div>\n        <div className=\"flex items-center gap-1\">\n          <Activity className=\"w-3 h-3 text-primary\" />\n          <span className=\"text-primary font-semibold\">Processando</span>\n        </div>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":5176,"size_tokens":null},"client/src/components/activity-heatmap.tsx":{"content":"interface ActivityDay {\n  date: string;\n  count: number;\n  intensity: number;\n}\n\ninterface ActivityHeatmapProps {\n  data: ActivityDay[];\n}\n\nexport function ActivityHeatmap({ data }: ActivityHeatmapProps) {\n  const getColor = (intensity: number) => {\n    if (intensity === 0) return 'bg-[#161616]';\n    if (intensity === 1) return 'bg-primary/20';\n    if (intensity === 2) return 'bg-primary/40';\n    if (intensity === 3) return 'bg-primary/60';\n    return 'bg-primary';\n  };\n\n  // Group by weeks (7 days per row)\n  const weeks: ActivityDay[][] = [];\n  for (let i = 0; i < data.length; i += 7) {\n    weeks.push(data.slice(i, i + 7));\n  }\n\n  return (\n    <div className=\"space-y-2\">\n      <h4 className=\"text-xs font-medium text-muted-foreground uppercase tracking-wide\">\n        Matriz de Atividade\n      </h4>\n      <div className=\"flex gap-1 flex-wrap\">\n        {weeks.map((week, weekIdx) => (\n          <div key={weekIdx} className=\"flex flex-col gap-1\">\n            {week.map((day) => (\n              <div\n                key={day.date}\n                className={`w-3 h-3 rounded-sm ${getColor(day.intensity)} border border-[#222] transition-colors`}\n                title={`${day.date}: ${day.count} verdes`}\n              />\n            ))}\n          </div>\n        ))}\n      </div>\n      <div className=\"flex items-center gap-2 text-[9px] text-muted-foreground mt-2\">\n        <span>Menos</span>\n        <div className=\"flex gap-1\">\n          <div className=\"w-2 h-2 bg-[#161616] border border-[#222] rounded-sm\" />\n          <div className=\"w-2 h-2 bg-primary/20 border border-[#222] rounded-sm\" />\n          <div className=\"w-2 h-2 bg-primary/40 border border-[#222] rounded-sm\" />\n          <div className=\"w-2 h-2 bg-primary/60 border border-[#222] rounded-sm\" />\n          <div className=\"w-2 h-2 bg-primary border border-[#222] rounded-sm\" />\n        </div>\n        <span>Mais</span>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":1927,"size_tokens":null},"client/src/lib/team-logos.ts":{"content":"// Team Logos Database - Using official API-Football CDN\n// This avoids hitting API rate limits by using direct CDN URLs\n\ninterface TeamLogo {\n  name: string;\n  logo: string;\n  variations?: string[]; // Alternative team names\n}\n\nconst teamLogos: TeamLogo[] = [\n  // PREMIER LEAGUE\n  { name: \"Manchester City\", logo: \"https://media.api-sports.io/football/teams/50.png\", variations: [\"Man City\", \"City\"] },\n  { name: \"Liverpool\", logo: \"https://media.api-sports.io/football/teams/40.png\" },\n  { name: \"Chelsea\", logo: \"https://media.api-sports.io/football/teams/49.png\" },\n  { name: \"Arsenal\", logo: \"https://media.api-sports.io/football/teams/42.png\" },\n  { name: \"Manchester United\", logo: \"https://media.api-sports.io/football/teams/33.png\", variations: [\"Man United\", \"United\"] },\n  { name: \"Tottenham\", logo: \"https://media.api-sports.io/football/teams/47.png\", variations: [\"Spurs\"] },\n  { name: \"Newcastle\", logo: \"https://media.api-sports.io/football/teams/34.png\", variations: [\"Newcastle United\"] },\n  { name: \"Aston Villa\", logo: \"https://media.api-sports.io/football/teams/66.png\", variations: [\"Villa\"] },\n  { name: \"Brighton\", logo: \"https://media.api-sports.io/football/teams/51.png\", variations: [\"Brighton & Hove Albion\"] },\n  { name: \"West Ham\", logo: \"https://media.api-sports.io/football/teams/48.png\", variations: [\"West Ham United\"] },\n  \n  // LA LIGA\n  { name: \"Barcelona\", logo: \"https://media.api-sports.io/football/teams/529.png\", variations: [\"Bar√ßa\", \"FC Barcelona\"] },\n  { name: \"Real Madrid\", logo: \"https://media.api-sports.io/football/teams/541.png\", variations: [\"Madrid\"] },\n  { name: \"Atletico Madrid\", logo: \"https://media.api-sports.io/football/teams/530.png\", variations: [\"Atl√©tico\", \"Atleti\"] },\n  { name: \"Sevilla\", logo: \"https://media.api-sports.io/football/teams/536.png\", variations: [\"Sevilla FC\"] },\n  { name: \"Real Sociedad\", logo: \"https://media.api-sports.io/football/teams/548.png\", variations: [\"Sociedad\"] },\n  { name: \"Villarreal\", logo: \"https://media.api-sports.io/football/teams/533.png\" },\n  { name: \"Athletic Bilbao\", logo: \"https://media.api-sports.io/football/teams/531.png\", variations: [\"Athletic Club\"] },\n  { name: \"Real Betis\", logo: \"https://media.api-sports.io/football/teams/543.png\", variations: [\"Betis\"] },\n  \n  // SERIE A\n  { name: \"Juventus\", logo: \"https://media.api-sports.io/football/teams/496.png\", variations: [\"Juve\"] },\n  { name: \"Inter\", logo: \"https://media.api-sports.io/football/teams/505.png\", variations: [\"Inter Milan\", \"Internazionale\"] },\n  { name: \"Milan\", logo: \"https://media.api-sports.io/football/teams/489.png\", variations: [\"AC Milan\"] },\n  { name: \"Napoli\", logo: \"https://media.api-sports.io/football/teams/492.png\", variations: [\"SSC Napoli\"] },\n  { name: \"Roma\", logo: \"https://media.api-sports.io/football/teams/497.png\", variations: [\"AS Roma\"] },\n  { name: \"Lazio\", logo: \"https://media.api-sports.io/football/teams/487.png\", variations: [\"SS Lazio\"] },\n  { name: \"Atalanta\", logo: \"https://media.api-sports.io/football/teams/499.png\" },\n  { name: \"Fiorentina\", logo: \"https://media.api-sports.io/football/teams/502.png\", variations: [\"ACF Fiorentina\"] },\n  \n  // BUNDESLIGA\n  { name: \"Bayern Munich\", logo: \"https://media.api-sports.io/football/teams/157.png\", variations: [\"Bayern\", \"FC Bayern\"] },\n  { name: \"Borussia Dortmund\", logo: \"https://media.api-sports.io/football/teams/165.png\", variations: [\"Dortmund\", \"BVB\"] },\n  { name: \"RB Leipzig\", logo: \"https://media.api-sports.io/football/teams/173.png\", variations: [\"Leipzig\"] },\n  { name: \"Bayer Leverkusen\", logo: \"https://media.api-sports.io/football/teams/168.png\", variations: [\"Leverkusen\"] },\n  { name: \"Union Berlin\", logo: \"https://media.api-sports.io/football/teams/28.png\" },\n  \n  // LIGUE 1\n  { name: \"PSG\", logo: \"https://media.api-sports.io/football/teams/85.png\", variations: [\"Paris Saint-Germain\", \"Paris\"] },\n  { name: \"Marseille\", logo: \"https://media.api-sports.io/football/teams/81.png\", variations: [\"OM\"] },\n  { name: \"Monaco\", logo: \"https://media.api-sports.io/football/teams/91.png\", variations: [\"AS Monaco\"] },\n  { name: \"Lyon\", logo: \"https://media.api-sports.io/football/teams/80.png\", variations: [\"Olympique Lyon\", \"OL\"] },\n  { name: \"Lille\", logo: \"https://media.api-sports.io/football/teams/79.png\", variations: [\"LOSC\"] },\n  \n  // BRASILEIR√ÉO\n  { name: \"Flamengo\", logo: \"https://media.api-sports.io/football/teams/127.png\" },\n  { name: \"Palmeiras\", logo: \"https://media.api-sports.io/football/teams/126.png\" },\n  { name: \"Corinthians\", logo: \"https://media.api-sports.io/football/teams/131.png\" },\n  { name: \"S√£o Paulo\", logo: \"https://media.api-sports.io/football/teams/130.png\", variations: [\"Sao Paulo\"] },\n  { name: \"Fluminense\", logo: \"https://media.api-sports.io/football/teams/124.png\" },\n  { name: \"Atl√©tico Mineiro\", logo: \"https://media.api-sports.io/football/teams/120.png\", variations: [\"Atletico Mineiro\", \"Galo\"] },\n  { name: \"Internacional\", logo: \"https://media.api-sports.io/football/teams/129.png\", variations: [\"Inter Porto Alegre\"] },\n  { name: \"Gr√™mio\", logo: \"https://media.api-sports.io/football/teams/128.png\", variations: [\"Gremio\"] },\n  { name: \"Santos\", logo: \"https://media.api-sports.io/football/teams/123.png\" },\n  { name: \"Vasco\", logo: \"https://media.api-sports.io/football/teams/1062.png\", variations: [\"Vasco da Gama\"] },\n  { name: \"Botafogo\", logo: \"https://media.api-sports.io/football/teams/118.png\" },\n  { name: \"Cruzeiro\", logo: \"https://media.api-sports.io/football/teams/133.png\" },\n];\n\n// Create a map for faster lookups\nconst logoMap = new Map<string, string>();\nteamLogos.forEach(team => {\n  // Add primary name\n  logoMap.set(team.name.toLowerCase(), team.logo);\n  // Add variations\n  team.variations?.forEach(variation => {\n    logoMap.set(variation.toLowerCase(), team.logo);\n  });\n});\n\n/**\n * Get team logo URL by team name\n * Returns logo URL or undefined if not found\n */\nexport function getTeamLogo(teamName: string): string | undefined {\n  if (!teamName) return undefined;\n  \n  const cleanName = teamName.trim().toLowerCase();\n  return logoMap.get(cleanName);\n}\n\n/**\n * Check if a team logo exists in our database\n */\nexport function hasTeamLogo(teamName: string): boolean {\n  if (!teamName) return false;\n  const cleanName = teamName.trim().toLowerCase();\n  return logoMap.has(cleanName);\n}\n","path":null,"size_bytes":6345,"size_tokens":null},"client/src/components/admin/market-selector.tsx":{"content":"// MarketSelector - Standardized Betting Market Selector\n// Prevents typos and ensures consistent market naming\n\ninterface MarketGroup {\n  label: string;\n  options: string[];\n}\n\nconst MARKET_OPTIONS: MarketGroup[] = [\n  {\n    label: \"üéØ M√öLTIPLAS\",\n    options: [\n      \"M√∫ltipla Simples\",\n      \"M√∫ltipla Combinada\"\n    ]\n  },\n  {\n    label: \"Resultado Final\",\n    options: [\n      \"Vit√≥ria Casa (1)\",\n      \"Empate (X)\",\n      \"Vit√≥ria Visitante (2)\",\n      \"Dupla Chance: 1X (Casa ou Empate)\",\n      \"Dupla Chance: 12 (Casa ou Visitante)\",\n      \"Dupla Chance: X2 (Empate ou Visitante)\",\n      \"Empate Anula (DNB) Casa\",\n      \"Empate Anula (DNB) Visitante\",\n      \"Vit√≥ria com Handicap Europeu Casa -1\",\n      \"Vit√≥ria com Handicap Europeu Casa -2\",\n      \"Vit√≥ria com Handicap Europeu Visitante -1\",\n      \"Vit√≥ria com Handicap Europeu Visitante -2\"\n    ]\n  },\n  {\n    label: \"Gols - Over/Under (Total)\",\n    options: [\n      \"Mais de 0.5 Gols\",\n      \"Mais de 1.5 Gols\",\n      \"Mais de 2.5 Gols\",\n      \"Mais de 3.5 Gols\",\n      \"Mais de 4.5 Gols\",\n      \"Mais de 5.5 Gols\",\n      \"Menos de 0.5 Gols\",\n      \"Menos de 1.5 Gols\",\n      \"Menos de 2.5 Gols\",\n      \"Menos de 3.5 Gols\",\n      \"Menos de 4.5 Gols\",\n      \"Menos de 5.5 Gols\",\n      \"Exatamente 0 Gols\",\n      \"Exatamente 1 Gol\",\n      \"Exatamente 2 Gols\",\n      \"Exatamente 3 Gols\",\n      \"Exatamente 4 Gols\"\n    ]\n  },\n  {\n    label: \"Ambas Marcam (BTTS)\",\n    options: [\n      \"Ambas Marcam: SIM\",\n      \"Ambas Marcam: N√ÉO\",\n      \"Ambas Marcam 1T: SIM\",\n      \"Ambas Marcam 1T: N√ÉO\",\n      \"Ambas Marcam 2T: SIM\",\n      \"Ambas Marcam 2T: N√ÉO\"\n    ]\n  },\n  {\n    label: \"Gols - Casa/Visitante\",\n    options: [\n      \"Casa - Mais de 0.5 Gols\",\n      \"Casa - Mais de 1.5 Gols\",\n      \"Casa - Mais de 2.5 Gols\",\n      \"Casa - Mais de 3.5 Gols\",\n      \"Casa - Menos de 0.5 Gols\",\n      \"Casa - Menos de 1.5 Gols\",\n      \"Casa - Menos de 2.5 Gols\",\n      \"Visitante - Mais de 0.5 Gols\",\n      \"Visitante - Mais de 1.5 Gols\",\n      \"Visitante - Mais de 2.5 Gols\",\n      \"Visitante - Mais de 3.5 Gols\",\n      \"Visitante - Menos de 0.5 Gols\",\n      \"Visitante - Menos de 1.5 Gols\",\n      \"Visitante - Menos de 2.5 Gols\",\n      \"Casa Marcar em Ambos Tempos\",\n      \"Visitante Marcar em Ambos Tempos\"\n    ]\n  },\n  {\n    label: \"Handicap Asi√°tico\",\n    options: [\n      \"Handicap Asi√°tico Casa 0.0\",\n      \"Handicap Asi√°tico Casa -0.25\",\n      \"Handicap Asi√°tico Casa -0.5\",\n      \"Handicap Asi√°tico Casa -0.75\",\n      \"Handicap Asi√°tico Casa -1.0\",\n      \"Handicap Asi√°tico Casa -1.25\",\n      \"Handicap Asi√°tico Casa -1.5\",\n      \"Handicap Asi√°tico Casa -1.75\",\n      \"Handicap Asi√°tico Casa -2.0\",\n      \"Handicap Asi√°tico Casa -2.25\",\n      \"Handicap Asi√°tico Casa -2.5\",\n      \"Handicap Asi√°tico Visitante 0.0\",\n      \"Handicap Asi√°tico Visitante +0.25\",\n      \"Handicap Asi√°tico Visitante +0.5\",\n      \"Handicap Asi√°tico Visitante +0.75\",\n      \"Handicap Asi√°tico Visitante +1.0\",\n      \"Handicap Asi√°tico Visitante +1.25\",\n      \"Handicap Asi√°tico Visitante +1.5\",\n      \"Handicap Asi√°tico Visitante +1.75\",\n      \"Handicap Asi√°tico Visitante +2.0\",\n      \"Handicap Asi√°tico Visitante +2.25\",\n      \"Handicap Asi√°tico Visitante +2.5\"\n    ]\n  },\n  {\n    label: \"Over/Under Asi√°tico\",\n    options: [\n      \"Asi√°tico Mais de 0.5\",\n      \"Asi√°tico Mais de 0.75\",\n      \"Asi√°tico Mais de 1.0\",\n      \"Asi√°tico Mais de 1.25\",\n      \"Asi√°tico Mais de 1.5\",\n      \"Asi√°tico Mais de 1.75\",\n      \"Asi√°tico Mais de 2.0\",\n      \"Asi√°tico Mais de 2.25\",\n      \"Asi√°tico Mais de 2.5\",\n      \"Asi√°tico Mais de 2.75\",\n      \"Asi√°tico Mais de 3.0\",\n      \"Asi√°tico Mais de 3.25\",\n      \"Asi√°tico Mais de 3.5\",\n      \"Asi√°tico Mais de 3.75\",\n      \"Asi√°tico Mais de 4.0\",\n      \"Asi√°tico Menos de 0.5\",\n      \"Asi√°tico Menos de 0.75\",\n      \"Asi√°tico Menos de 1.0\",\n      \"Asi√°tico Menos de 1.25\",\n      \"Asi√°tico Menos de 1.5\",\n      \"Asi√°tico Menos de 1.75\",\n      \"Asi√°tico Menos de 2.0\",\n      \"Asi√°tico Menos de 2.25\",\n      \"Asi√°tico Menos de 2.5\",\n      \"Asi√°tico Menos de 2.75\",\n      \"Asi√°tico Menos de 3.0\",\n      \"Asi√°tico Menos de 3.25\",\n      \"Asi√°tico Menos de 3.5\",\n      \"Asi√°tico Menos de 3.75\",\n      \"Asi√°tico Menos de 4.0\"\n    ]\n  },\n  {\n    label: \"1¬∫ Tempo - Resultado\",\n    options: [\n      \"1T - Vit√≥ria Casa\",\n      \"1T - Empate\",\n      \"1T - Vit√≥ria Visitante\",\n      \"1T - Dupla Chance: 1X\",\n      \"1T - Dupla Chance: 12\",\n      \"1T - Dupla Chance: X2\"\n    ]\n  },\n  {\n    label: \"1¬∫ Tempo - Gols\",\n    options: [\n      \"1T - Mais de 0.5 Gols\",\n      \"1T - Mais de 1.5 Gols\",\n      \"1T - Mais de 2.5 Gols\",\n      \"1T - Menos de 0.5 Gols\",\n      \"1T - Menos de 1.5 Gols\",\n      \"1T - Menos de 2.5 Gols\",\n      \"1T - Casa Mais de 0.5\",\n      \"1T - Casa Mais de 1.5\",\n      \"1T - Visitante Mais de 0.5\",\n      \"1T - Visitante Mais de 1.5\"\n    ]\n  },\n  {\n    label: \"2¬∫ Tempo - Resultado\",\n    options: [\n      \"2T - Vit√≥ria Casa\",\n      \"2T - Empate\",\n      \"2T - Vit√≥ria Visitante\",\n      \"2T - Dupla Chance: 1X\",\n      \"2T - Dupla Chance: 12\",\n      \"2T - Dupla Chance: X2\"\n    ]\n  },\n  {\n    label: \"2¬∫ Tempo - Gols\",\n    options: [\n      \"2T - Mais de 0.5 Gols\",\n      \"2T - Mais de 1.5 Gols\",\n      \"2T - Mais de 2.5 Gols\",\n      \"2T - Menos de 0.5 Gols\",\n      \"2T - Menos de 1.5 Gols\",\n      \"2T - Menos de 2.5 Gols\",\n      \"2T - Casa Mais de 0.5\",\n      \"2T - Casa Mais de 1.5\",\n      \"2T - Visitante Mais de 0.5\",\n      \"2T - Visitante Mais de 1.5\"\n    ]\n  },\n  {\n    label: \"Resultado HT/FT\",\n    options: [\n      \"HT/FT: Casa/Casa\",\n      \"HT/FT: Casa/Empate\",\n      \"HT/FT: Casa/Visitante\",\n      \"HT/FT: Empate/Casa\",\n      \"HT/FT: Empate/Empate\",\n      \"HT/FT: Empate/Visitante\",\n      \"HT/FT: Visitante/Casa\",\n      \"HT/FT: Visitante/Empate\",\n      \"HT/FT: Visitante/Visitante\"\n    ]\n  },\n  {\n    label: \"Escanteios - Total\",\n    options: [\n      \"Mais de 6.5 Escanteios\",\n      \"Mais de 7.5 Escanteios\",\n      \"Mais de 8.5 Escanteios\",\n      \"Mais de 9.5 Escanteios\",\n      \"Mais de 10.5 Escanteios\",\n      \"Mais de 11.5 Escanteios\",\n      \"Mais de 12.5 Escanteios\",\n      \"Menos de 6.5 Escanteios\",\n      \"Menos de 7.5 Escanteios\",\n      \"Menos de 8.5 Escanteios\",\n      \"Menos de 9.5 Escanteios\",\n      \"Menos de 10.5 Escanteios\",\n      \"Menos de 11.5 Escanteios\",\n      \"Menos de 12.5 Escanteios\"\n    ]\n  },\n  {\n    label: \"Escanteios - Casa/Visitante\",\n    options: [\n      \"Casa - Mais de 3.5 Escanteios\",\n      \"Casa - Mais de 4.5 Escanteios\",\n      \"Casa - Mais de 5.5 Escanteios\",\n      \"Casa - Mais de 6.5 Escanteios\",\n      \"Casa - Menos de 3.5 Escanteios\",\n      \"Casa - Menos de 4.5 Escanteios\",\n      \"Casa - Menos de 5.5 Escanteios\",\n      \"Visitante - Mais de 3.5 Escanteios\",\n      \"Visitante - Mais de 4.5 Escanteios\",\n      \"Visitante - Mais de 5.5 Escanteios\",\n      \"Visitante - Mais de 6.5 Escanteios\",\n      \"Visitante - Menos de 3.5 Escanteios\",\n      \"Visitante - Menos de 4.5 Escanteios\",\n      \"Visitante - Menos de 5.5 Escanteios\"\n    ]\n  },\n  {\n    label: \"Escanteios - 1¬∫ Tempo\",\n    options: [\n      \"1T - Mais de 3.5 Escanteios\",\n      \"1T - Mais de 4.5 Escanteios\",\n      \"1T - Mais de 5.5 Escanteios\",\n      \"1T - Mais de 6.5 Escanteios\",\n      \"1T - Menos de 3.5 Escanteios\",\n      \"1T - Menos de 4.5 Escanteios\",\n      \"1T - Menos de 5.5 Escanteios\",\n      \"1T - Casa Mais de 2.5 Escanteios\",\n      \"1T - Casa Mais de 3.5 Escanteios\",\n      \"1T - Visitante Mais de 2.5 Escanteios\",\n      \"1T - Visitante Mais de 3.5 Escanteios\"\n    ]\n  },\n  {\n    label: \"Escanteios - Especiais\",\n    options: [\n      \"Handicap Asi√°tico Escanteios Casa -2.5\",\n      \"Handicap Asi√°tico Escanteios Casa -3.5\",\n      \"Handicap Asi√°tico Escanteios Visitante +2.5\",\n      \"Handicap Asi√°tico Escanteios Visitante +3.5\",\n      \"Pr√≥ximo Escanteio: Casa\",\n      \"Pr√≥ximo Escanteio: Visitante\",\n      \"√öltimo Escanteio: Casa\",\n      \"√öltimo Escanteio: Visitante\",\n      \"Corrida para 5 Escanteios: Casa\",\n      \"Corrida para 5 Escanteios: Visitante\",\n      \"Corrida para 7 Escanteios: Casa\",\n      \"Corrida para 7 Escanteios: Visitante\",\n      \"Corrida para 9 Escanteios: Casa\",\n      \"Corrida para 9 Escanteios: Visitante\"\n    ]\n  },\n  {\n    label: \"Cart√µes - Total\",\n    options: [\n      \"Mais de 1.5 Cart√µes\",\n      \"Mais de 2.5 Cart√µes\",\n      \"Mais de 3.5 Cart√µes\",\n      \"Mais de 4.5 Cart√µes\",\n      \"Mais de 5.5 Cart√µes\",\n      \"Mais de 6.5 Cart√µes\",\n      \"Menos de 2.5 Cart√µes\",\n      \"Menos de 3.5 Cart√µes\",\n      \"Menos de 4.5 Cart√µes\",\n      \"Menos de 5.5 Cart√µes\",\n      \"Cart√£o Vermelho: SIM\",\n      \"Cart√£o Vermelho: N√ÉO\"\n    ]\n  },\n  {\n    label: \"Cart√µes - Casa/Visitante\",\n    options: [\n      \"Casa - Mais de 1.5 Cart√µes\",\n      \"Casa - Mais de 2.5 Cart√µes\",\n      \"Casa - Mais de 3.5 Cart√µes\",\n      \"Casa - Menos de 1.5 Cart√µes\",\n      \"Casa - Menos de 2.5 Cart√µes\",\n      \"Visitante - Mais de 1.5 Cart√µes\",\n      \"Visitante - Mais de 2.5 Cart√µes\",\n      \"Visitante - Mais de 3.5 Cart√µes\",\n      \"Visitante - Menos de 1.5 Cart√µes\",\n      \"Visitante - Menos de 2.5 Cart√µes\",\n      \"Ambas Equipes Levam Cart√£o: SIM\",\n      \"Ambas Equipes Levam Cart√£o: N√ÉO\"\n    ]\n  },\n  {\n    label: \"Chutes ao Gol - Total\",\n    options: [\n      \"Mais de 7.5 Chutes no Gol\",\n      \"Mais de 8.5 Chutes no Gol\",\n      \"Mais de 9.5 Chutes no Gol\",\n      \"Mais de 10.5 Chutes no Gol\",\n      \"Mais de 11.5 Chutes no Gol\",\n      \"Menos de 7.5 Chutes no Gol\",\n      \"Menos de 8.5 Chutes no Gol\",\n      \"Menos de 9.5 Chutes no Gol\",\n      \"Menos de 10.5 Chutes no Gol\"\n    ]\n  },\n  {\n    label: \"Chutes ao Gol - Casa/Visitante\",\n    options: [\n      \"Casa - Mais de 3.5 Chutes no Gol\",\n      \"Casa - Mais de 4.5 Chutes no Gol\",\n      \"Casa - Mais de 5.5 Chutes no Gol\",\n      \"Casa - Mais de 6.5 Chutes no Gol\",\n      \"Casa - Menos de 3.5 Chutes no Gol\",\n      \"Casa - Menos de 4.5 Chutes no Gol\",\n      \"Visitante - Mais de 3.5 Chutes no Gol\",\n      \"Visitante - Mais de 4.5 Chutes no Gol\",\n      \"Visitante - Mais de 5.5 Chutes no Gol\",\n      \"Visitante - Mais de 6.5 Chutes no Gol\",\n      \"Visitante - Menos de 3.5 Chutes no Gol\",\n      \"Visitante - Menos de 4.5 Chutes no Gol\"\n    ]\n  },\n  {\n    label: \"Placar Exato\",\n    options: [\n      \"Placar Exato: 0-0\",\n      \"Placar Exato: 1-0\",\n      \"Placar Exato: 2-0\",\n      \"Placar Exato: 2-1\",\n      \"Placar Exato: 3-0\",\n      \"Placar Exato: 3-1\",\n      \"Placar Exato: 3-2\",\n      \"Placar Exato: 0-1\",\n      \"Placar Exato: 0-2\",\n      \"Placar Exato: 1-2\",\n      \"Placar Exato: 0-3\",\n      \"Placar Exato: 1-3\",\n      \"Placar Exato: 2-3\",\n      \"Placar Exato: 1-1\",\n      \"Placar Exato: 2-2\",\n      \"Placar Exato: 3-3\",\n      \"Placar Exato: Outro\"\n    ]\n  },\n  {\n    label: \"Margem de Vit√≥ria\",\n    options: [\n      \"Casa Vence por 1 Gol\",\n      \"Casa Vence por 2 Gols\",\n      \"Casa Vence por 3+ Gols\",\n      \"Visitante Vence por 1 Gol\",\n      \"Visitante Vence por 2 Gols\",\n      \"Visitante Vence por 3+ Gols\",\n      \"Qualquer Time Vence por 1 Gol\",\n      \"Qualquer Time Vence por 2 Gols\",\n      \"Qualquer Time Vence por 3+ Gols\"\n    ]\n  },\n  {\n    label: \"Quando Marcar - Minutos\",\n    options: [\n      \"Gol nos Primeiros 10 Minutos\",\n      \"Gol entre 10-20 Minutos\",\n      \"Gol entre 20-30 Minutos\",\n      \"Gol entre 30-HT Minutos\",\n      \"Gol entre HT-60 Minutos\",\n      \"Gol entre 60-70 Minutos\",\n      \"Gol entre 70-80 Minutos\",\n      \"Gol entre 80-FT Minutos\",\n      \"Gol nos √öltimos 10 Minutos\"\n    ]\n  },\n  {\n    label: \"Intervalo de Gols\",\n    options: [\n      \"0-1 Gols no Jogo\",\n      \"2-3 Gols no Jogo\",\n      \"4-5 Gols no Jogo\",\n      \"6+ Gols no Jogo\",\n      \"Casa 0-1 Gols\",\n      \"Casa 2-3 Gols\",\n      \"Casa 4+ Gols\",\n      \"Visitante 0-1 Gols\",\n      \"Visitante 2-3 Gols\",\n      \"Visitante 4+ Gols\"\n    ]\n  },\n  {\n    label: \"Vit√≥ria Limpa\",\n    options: [\n      \"Casa Win to Nil (Vencer Sem Levar Gol)\",\n      \"Visitante Win to Nil (Vencer Sem Levar Gol)\",\n      \"Qualquer Time Win to Nil\",\n      \"Nenhum Time Win to Nil\"\n    ]\n  },\n  {\n    label: \"Ambos os Tempos\",\n    options: [\n      \"Casa Vence Ambos os Tempos\",\n      \"Visitante Vence Ambos os Tempos\",\n      \"Casa N√£o Perde Nenhum Tempo\",\n      \"Visitante N√£o Perde Nenhum Tempo\",\n      \"Mesmo Vencedor HT e FT\"\n    ]\n  },\n  {\n    label: \"Par/√çmpar\",\n    options: [\n      \"Total de Gols: Par\",\n      \"Total de Gols: √çmpar\",\n      \"Casa Gols: Par\",\n      \"Casa Gols: √çmpar\",\n      \"Visitante Gols: Par\",\n      \"Visitante Gols: √çmpar\"\n    ]\n  },\n  {\n    label: \"Jogador - Gols\",\n    options: [\n      \"Jogador Marcar a Qualquer Momento\",\n      \"Jogador Marcar Primeiro Gol\",\n      \"Jogador Marcar √öltimo Gol\",\n      \"Jogador Marcar 2+ Gols\",\n      \"Jogador Marcar Hat-trick (3+ Gols)\",\n      \"Jogador N√£o Marcar\"\n    ]\n  },\n  {\n    label: \"Jogador - Assist√™ncias\",\n    options: [\n      \"Jogador Dar Assist√™ncia\",\n      \"Jogador Dar 2+ Assist√™ncias\",\n      \"Jogador Marcar e Assistir\"\n    ]\n  },\n  {\n    label: \"Jogador - Chutes\",\n    options: [\n      \"Jogador Mais de 0.5 Chutes no Gol\",\n      \"Jogador Mais de 1.5 Chutes no Gol\",\n      \"Jogador Mais de 2.5 Chutes no Gol\",\n      \"Jogador Mais de 3.5 Chutes no Gol\",\n      \"Jogador Mais de 0.5 Chutes (Total)\",\n      \"Jogador Mais de 1.5 Chutes (Total)\",\n      \"Jogador Mais de 2.5 Chutes (Total)\",\n      \"Jogador Mais de 3.5 Chutes (Total)\"\n    ]\n  },\n  {\n    label: \"Jogador - Cart√µes\",\n    options: [\n      \"Jogador Levar Cart√£o Amarelo\",\n      \"Jogador Levar Cart√£o Vermelho\",\n      \"Jogador Levar Qualquer Cart√£o\",\n      \"Jogador N√£o Levar Cart√£o\"\n    ]\n  },\n  {\n    label: \"Goleiro - Defesas\",\n    options: [\n      \"Goleiro Mais de 2.5 Defesas\",\n      \"Goleiro Mais de 3.5 Defesas\",\n      \"Goleiro Mais de 4.5 Defesas\",\n      \"Goleiro Mais de 5.5 Defesas\",\n      \"Goleiro Sofrer Gol: SIM\",\n      \"Goleiro Sofrer Gol: N√ÉO (Clean Sheet)\"\n    ]\n  },\n  {\n    label: \"Especiais - Combos\",\n    options: [\n      \"Vit√≥ria Casa + Over 1.5\",\n      \"Vit√≥ria Casa + Over 2.5\",\n      \"Vit√≥ria Casa + BTTS\",\n      \"Vit√≥ria Visitante + Over 1.5\",\n      \"Vit√≥ria Visitante + Over 2.5\",\n      \"Vit√≥ria Visitante + BTTS\",\n      \"Empate + Under 2.5\",\n      \"BTTS + Over 2.5\",\n      \"BTTS + Over 3.5\",\n      \"Qualquer Time Vencer + Over 2.5\"\n    ]\n  },\n  {\n    label: \"Especiais - Tempo com Mais Gols\",\n    options: [\n      \"Tempo com Mais Gols: 1¬∫ Tempo\",\n      \"Tempo com Mais Gols: 2¬∫ Tempo\",\n      \"Tempos com Mesma Quantidade de Gols\",\n      \"Casa Marcar Mais no 1T\",\n      \"Casa Marcar Mais no 2T\",\n      \"Visitante Marcar Mais no 1T\",\n      \"Visitante Marcar Mais no 2T\"\n    ]\n  },\n  {\n    label: \"Especiais - P√™naltis\",\n    options: [\n      \"P√™nalti no Jogo: SIM\",\n      \"P√™nalti no Jogo: N√ÉO\",\n      \"P√™nalti Convertido: SIM\",\n      \"P√™nalti Perdido: SIM\"\n    ]\n  },\n  {\n    label: \"Especiais - Gol Contra\",\n    options: [\n      \"Gol Contra no Jogo: SIM\",\n      \"Gol Contra no Jogo: N√ÉO\"\n    ]\n  },\n  {\n    label: \"Especiais - VAR\",\n    options: [\n      \"VAR Usado no Jogo: SIM\",\n      \"VAR Usado no Jogo: N√ÉO\",\n      \"Gol Anulado por VAR: SIM\"\n    ]\n  },\n  {\n    label: \"Especiais - Substitui√ß√µes\",\n    options: [\n      \"Mais de 4.5 Substitui√ß√µes\",\n      \"Mais de 5.5 Substitui√ß√µes\",\n      \"Menos de 4.5 Substitui√ß√µes\",\n      \"Casa Fazer 3 Substitui√ß√µes\",\n      \"Visitante Fazer 3 Substitui√ß√µes\"\n    ]\n  },\n  {\n    label: \"Especiais - Les√µes\",\n    options: [\n      \"Mais de 2.5 Minutos de Acr√©scimo 1T\",\n      \"Mais de 3.5 Minutos de Acr√©scimo 1T\",\n      \"Mais de 4.5 Minutos de Acr√©scimo 2T\",\n      \"Mais de 5.5 Minutos de Acr√©scimo 2T\"\n    ]\n  }\n];\n\ninterface MarketSelectorProps {\n  value: string;\n  onChange: (value: string) => void;\n  className?: string;\n}\n\nexport function MarketSelector({ value, onChange, className = \"\" }: MarketSelectorProps) {\n  return (\n    <div className=\"relative\">\n      <select\n        required\n        value={value}\n        onChange={(e) => onChange(e.target.value)}\n        className={`flex h-10 w-full rounded-xl border border-[#33b864]/30 bg-[#121212] px-4 py-3 text-sm text-white appearance-none focus:outline-none focus:border-[#33b864] focus:ring-1 focus:ring-[#33b864] disabled:cursor-not-allowed disabled:opacity-50 transition-all ${className}`}\n        data-testid=\"market-selector\"\n      >\n        <option value=\"\" disabled className=\"bg-[#0a0a0a] text-gray-400\">\n          Selecione o mercado da aposta...\n        </option>\n        {MARKET_OPTIONS.map((group) => (\n          <optgroup \n            key={group.label} \n            label={group.label}\n            className=\"bg-[#0a0a0a] text-[#33b864] font-bold\"\n          >\n            {group.options.map((option) => (\n              <option \n                key={option} \n                value={option}\n                className=\"bg-[#121212] text-white py-1 hover:bg-[#33b864]/10\"\n              >\n                {option}\n              </option>\n            ))}\n          </optgroup>\n        ))}\n      </select>\n      \n      {/* √çcone de seta customizado */}\n      <div className=\"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none\">\n        <svg className=\"w-4 h-4 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M19 9l-7 7-7-7\"></path>\n        </svg>\n      </div>\n    </div>\n  );\n}\n\n// Export market options for use in other components if needed\nexport { MARKET_OPTIONS };\n","path":null,"size_bytes":17415,"size_tokens":null},"client/src/components/dashboard/stat-card.tsx":{"content":"import { ReactNode } from 'react';\n\ninterface StatCardProps {\n  label: string;\n  value: string;\n  icon: ReactNode;\n  trendColor?: string;\n}\n\nexport function StatCard({ label, value, icon, trendColor = \"text-white\" }: StatCardProps) {\n  return (\n    <div className=\"flex-1 bg-[#121212] border border-[#333] rounded-lg p-4 flex flex-col justify-center h-full min-h-[90px]\">\n      <div className=\"flex items-center gap-2 mb-2\">\n        {icon}\n        <span className=\"text-xs text-muted-foreground uppercase tracking-wide\">{label}</span>\n      </div>\n      <p className={`text-2xl font-bold font-mono ${trendColor}`}>\n        {value}\n      </p>\n    </div>\n  );\n}\n","path":null,"size_bytes":660,"size_tokens":null},"client/src/components/dashboard/neon-card.tsx":{"content":"import { ReactNode } from 'react';\n\ninterface NeonCardProps {\n  children: ReactNode;\n  className?: string;\n  intensity?: 'low' | 'high';\n}\n\nexport function NeonCard({ children, className = \"\", intensity = 'high' }: NeonCardProps) {\n  return (\n    <div className={`relative group overflow-hidden rounded-2xl p-[1px] ${className}`}>\n      \n      {/* O MOTOR DE LUZ (O Gradiente que Gira no Hover) */}\n      <div className=\"absolute inset-[-1000%] animate-[spin_4s_linear_infinite] bg-[conic-gradient(from_90deg_at_50%_50%,#000000_0%,#121212_40%,#33b864_50%,#121212_60%,#000000_100%)] opacity-0 group-hover:opacity-100 transition-opacity duration-500\" />\n      \n      {/* Se intensity for 'high', o brilho √© constante (sempre vis√≠vel) */}\n      {intensity === 'high' && (\n         <div className=\"absolute inset-[-1000%] animate-[spin_3s_linear_infinite] bg-[conic-gradient(from_90deg_at_50%_50%,#000000_0%,#000000_40%,#33b864_50%,#000000_60%,#000000_100%)] opacity-60\" />\n      )}\n\n      {/* O CONTE√öDO (Fundo Preto por cima da Luz) */}\n      <div className=\"relative h-full w-full bg-[#0a0a0a] rounded-2xl border border-[#33b864]/10 backdrop-blur-xl p-4 flex flex-col justify-center\">\n        \n        {/* Brilho Ambiental Interno (Glow) */}\n        <div className=\"absolute top-0 right-0 -mt-4 -mr-4 w-24 h-24 bg-[#33b864] rounded-full blur-[60px] opacity-10\"></div>\n        \n        {children}\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":1429,"size_tokens":null},"client/src/components/dashboard/holographic-card.tsx":{"content":"import { ReactNode } from 'react';\n\ninterface HolographicCardProps {\n  label: string;\n  value: string;\n  subValue?: string;\n  icon: ReactNode;\n  color: 'green' | 'orange' | 'white';\n}\n\nexport function HolographicCard({ label, value, subValue, icon, color }: HolographicCardProps) {\n  \n  const theme = {\n    green: {\n      border: 'border-[#33b864]/30',\n      bg: 'from-[#33b864]/10 to-transparent',\n      text: 'text-[#33b864]',\n      glow: 'shadow-[0_0_20px_rgba(51,184,100,0.1)]',\n      iconColor: 'text-[#33b864]',\n      barColor: 'bg-[#33b864]'\n    },\n    orange: {\n      border: 'border-orange-500/30',\n      bg: 'from-orange-500/10 to-transparent',\n      text: 'text-white',\n      glow: 'shadow-[0_0_20px_rgba(249,115,22,0.1)]',\n      iconColor: 'text-orange-500',\n      barColor: 'bg-orange-500'\n    },\n    white: {\n      border: 'border-gray-500/30',\n      bg: 'from-gray-500/10 to-transparent',\n      text: 'text-white',\n      glow: 'shadow-[0_0_20px_rgba(156,163,175,0.1)]',\n      iconColor: 'text-gray-400',\n      barColor: 'bg-gray-400'\n    }\n  }[color];\n\n  return (\n    <div className={`relative flex-1 overflow-hidden rounded-2xl border ${theme.border} bg-gradient-to-br ${theme.bg} p-4 backdrop-blur-md transition-all hover:scale-[1.02] ${theme.glow} group min-h-[90px]`}>\n      \n      {/* MARCA D'√ÅGUA (√çCONE GIGANTE NO FUNDO) */}\n      <div className={`absolute -right-4 -bottom-4 opacity-10 transform rotate-[-15deg] scale-[2.5] transition-transform group-hover:scale-[3] ${theme.iconColor}`}>\n        {icon}\n      </div>\n\n      {/* CONTE√öDO (FRONTAL) */}\n      <div className=\"relative z-10 flex flex-col justify-center h-full\">\n        \n        {/* Label com linha decorativa */}\n        <div className=\"flex items-center gap-2 mb-1\">\n          <div className={`w-1 h-3 rounded-full ${theme.barColor}`}></div>\n          <span className=\"text-[10px] text-gray-400 uppercase font-bold tracking-widest\">{label}</span>\n        </div>\n\n        {/* Valor Principal */}\n        <span className={`text-3xl font-sora font-extrabold ${theme.text} drop-shadow-sm`}>\n          {value}\n        </span>\n\n        {/* Sub-valor (Opcional) */}\n        {subValue && (\n          <span className=\"text-[10px] text-gray-500 font-mono mt-1 opacity-80\">\n            {subValue}\n          </span>\n        )}\n      </div>\n\n      {/* EFEITO DE BRILHO NO HOVER (OVERLAY) */}\n      <div className=\"absolute inset-0 bg-white/5 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none\"></div>\n    </div>\n  );\n}\n","path":null,"size_bytes":2519,"size_tokens":null},"client/src/hooks/use-bankroll.ts":{"content":"import { useQuery } from '@tanstack/react-query';\nimport { tipsService } from '@/lib/tips-service';\n\nconst INITIAL_BANKROLL = 1000; // R$ 1.000,00\nconst UNIT_VALUE = 100; // R$ 100,00 por aposta\n\nexport interface BankrollStats {\n  initialBankroll: number;\n  unitValue: number;\n  totalProfit: number;\n  totalProfitUnits: number;\n  currentBankroll: number;\n  greenCount: number;\n  redCount: number;\n  pendingCount: number;\n  totalTips: number;\n  monthTips: number;\n  averageOdd: number;\n}\n\nexport function useBankroll(): BankrollStats {\n  const { data: tips = [] } = useQuery({\n    queryKey: ['tips'],\n    queryFn: tipsService.getAll,\n  });\n\n  // Calcula lucro total baseado nas tips reais\n  let totalProfit = 0;\n  let greenCount = 0;\n  let redCount = 0;\n  let pendingCount = 0;\n\n  tips.forEach((tip) => {\n    if (tip.status === 'green') {\n      // Lucro = Unit * (odd - 1)\n      totalProfit += UNIT_VALUE * (tip.odd - 1);\n      greenCount++;\n    } else if (tip.status === 'red') {\n      // Perda = -Unit\n      totalProfit -= UNIT_VALUE;\n      redCount++;\n    } else if (tip.status === 'pending') {\n      pendingCount++;\n    }\n  });\n\n  const totalProfitUnits = totalProfit / UNIT_VALUE;\n  const currentBankroll = INITIAL_BANKROLL + totalProfit;\n\n  // Calcula odd m√©dia de TODOS os sinais com odd v√°lida\n  const tipsWithValidOdd = tips.filter(tip => tip.odd != null && !isNaN(tip.odd));\n  const averageOdd = tipsWithValidOdd.length > 0\n    ? tipsWithValidOdd.reduce((sum, tip) => sum + tip.odd, 0) / tipsWithValidOdd.length\n    : 0;\n\n  // Conta sinais do m√™s atual\n  const monthStart = new Date();\n  monthStart.setDate(1);\n  monthStart.setHours(0, 0, 0, 0);\n  const monthTips = tips.filter(tip => {\n    const tipDate = new Date(tip.timestamp);\n    return tipDate >= monthStart;\n  }).length;\n\n  return {\n    initialBankroll: INITIAL_BANKROLL,\n    unitValue: UNIT_VALUE,\n    totalProfit,\n    totalProfitUnits,\n    currentBankroll,\n    greenCount,\n    redCount,\n    pendingCount,\n    totalTips: tips.length,\n    monthTips,\n    averageOdd,\n  };\n}\n","path":null,"size_bytes":2043,"size_tokens":null},"client/src/components/dashboard/profit-trend-chart.tsx":{"content":"import { AreaChart, Area, ResponsiveContainer, Tooltip, ReferenceLine, YAxis } from 'recharts';\nimport { TrendingUp, TrendingDown } from 'lucide-react';\n\nconst data = [\n  { name: '1', val: 10 }, { name: '2', val: 25 }, { name: '3', val: 20 },\n  { name: '4', val: 40 }, { name: '5', val: 35 }, { name: '6', val: 60 },\n  { name: '7', val: 85 },\n];\n\n// Valor m√©dio de refer√™ncia\nconst averageValue = 35;\n\ninterface ProfitTrendChartProps {\n  growthPercentage: number;\n}\n\nexport function ProfitTrendChart({ growthPercentage }: ProfitTrendChartProps) {\n  const isPositive = growthPercentage >= 0;\n  const color = isPositive ? '#33b864' : '#ef4444';\n  const Icon = isPositive ? TrendingUp : TrendingDown;\n  \n  return (\n    <div className=\"h-full bg-[#121212] border border-[#33b864]/20 rounded-2xl p-4 hover:bg-[#161616] hover:border-[#33b864]/50 transition-all flex flex-col justify-center relative group shadow-lg shadow-black/50 overflow-hidden\">\n      \n      {/* Textura noise */}\n      <div className=\"absolute inset-0 opacity-[0.02]\" style={{ backgroundImage: 'url(\"data:image/svg+xml,%3Csvg viewBox=\\'0 0 256 256\\' xmlns=\\'http://www.w3.org/2000/svg\\'%3E%3Cfilter id=\\'noise\\'%3E%3CfeTurbulence type=\\'fractalNoise\\' baseFrequency=\\'0.9\\' numOctaves=\\'4\\' stitchTiles=\\'stitch\\'/%3E%3C/filter%3E%3Crect width=\\'100%25\\' height=\\'100%25\\' filter=\\'url(%23noise)\\'/%3E%3C/svg%3E\")' }} />\n      \n      {/* √çcone decorativo no canto */}\n      <div className=\"absolute top-0 right-0 p-2 opacity-20 group-hover:opacity-50 transition-opacity\">\n        <Icon className=\"w-8 h-8\" style={{ color }} />\n      </div>\n\n      {/* Label com barra vertical */}\n      <div className=\"flex items-center gap-2 mb-2 z-10\">\n        <div className=\"w-1 h-3 rounded-full\" style={{ backgroundColor: color }}></div>\n        <span className=\"text-[10px] text-gray-400 uppercase font-bold tracking-widest\">Crescimento</span>\n      </div>\n\n      {/* Valor com glow */}\n      <span \n        className=\"text-3xl font-sora font-bold z-10\" \n        style={{ \n          color,\n          textShadow: isPositive ? '0 0 20px rgba(51, 184, 100, 0.4)' : '0 0 20px rgba(239, 68, 68, 0.4)'\n        }}\n      >\n        {isPositive ? '+' : ''}{growthPercentage.toFixed(1)}%\n      </span>\n\n      {/* Gr√°fico de fundo com linha de refer√™ncia */}\n      <div className=\"absolute bottom-0 left-0 right-0 h-20 w-full opacity-70\">\n        <ResponsiveContainer width=\"100%\" height=\"100%\">\n          <AreaChart data={data} margin={{ top: 10, right: 0, left: 0, bottom: 0 }}>\n            <defs>\n              <linearGradient id=\"chartGradient\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                <stop offset=\"5%\" stopColor=\"#33b864\" stopOpacity={0.4}/>\n                <stop offset=\"95%\" stopColor=\"#33b864\" stopOpacity={0}/>\n              </linearGradient>\n            </defs>\n            <YAxis domain={[0, 100]} hide />\n            <Tooltip cursor={false} content={() => null} />\n            \n            {/* Linha de refer√™ncia - Performance M√©dia */}\n            <ReferenceLine \n              y={averageValue} \n              stroke=\"#444\" \n              strokeDasharray=\"4 4\" \n              strokeWidth={1}\n            />\n            \n            <Area \n              type=\"monotone\" \n              dataKey=\"val\" \n              stroke=\"#33b864\" \n              strokeWidth={2} \n              fill=\"url(#chartGradient)\"\n              style={{ filter: 'drop-shadow(0 0 4px rgba(51, 184, 100, 0.5))' }}\n            />\n          </AreaChart>\n        </ResponsiveContainer>\n        \n        {/* Label da linha de refer√™ncia */}\n        <div className=\"absolute left-2 top-[45%] transform -translate-y-1/2\">\n          <span className=\"text-[7px] text-gray-500 bg-[#121212]/80 px-1 rounded\">M√©dia</span>\n        </div>\n      </div>\n\n    </div>\n  );\n}\n","path":null,"size_bytes":3798,"size_tokens":null},"client/src/components/paywall/locked-screen.tsx":{"content":"import { motion } from 'framer-motion';\nimport { LockKeyhole, Sparkles, Check } from 'lucide-react';\n\nconst CHECKOUT_URL = '/checkout';\n\nexport function LockedScreen() {\n  const benefits = [\n    'Acesso ilimitado a TODOS os sinais',\n    'Dashboard analytics profissional completo',\n    'Notifica√ß√µes em tempo real',\n    'Comunidade VIP exclusiva',\n    'Suporte priorit√°rio 24/7',\n    'Gest√£o automatizada de banca',\n  ];\n  \n  return (\n    <div className=\"min-h-screen bg-black flex items-center justify-center px-4 relative overflow-hidden\">\n      {/* Background effects */}\n      <div className=\"absolute inset-0 bg-gradient-to-b from-black via-red-950/10 to-black\" />\n      <div className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-red-500/10 rounded-full blur-[150px]\" />\n      \n      <motion.div\n        initial={{ opacity: 0, scale: 0.9 }}\n        animate={{ opacity: 1, scale: 1 }}\n        transition={{ duration: 0.8 }}\n        className=\"relative z-10 max-w-2xl w-full\"\n      >\n        {/* Lock Icon */}\n        <motion.div\n          initial={{ scale: 0, rotate: -180 }}\n          animate={{ scale: 1, rotate: 0 }}\n          transition={{ duration: 1, type: 'spring' }}\n          className=\"flex justify-center mb-8\"\n        >\n          <div className=\"relative\">\n            <div className=\"absolute inset-0 bg-gradient-to-br from-red-500 to-red-700 rounded-full blur-2xl opacity-50\" />\n            <div className=\"relative w-32 h-32 rounded-full bg-gradient-to-br from-red-500 to-red-700 flex items-center justify-center shadow-2xl\">\n              <LockKeyhole className=\"w-16 h-16 text-white\" />\n            </div>\n          </div>\n        </motion.div>\n        \n        {/* Main message */}\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.3 }}\n          className=\"text-center mb-8\"\n        >\n          <h1 className=\"text-4xl md:text-5xl font-black text-white mb-4\" style={{ fontFamily: 'Sora, sans-serif' }}>\n            Seu Per√≠odo de Teste Acabou\n          </h1>\n          <p className=\"text-xl text-gray-300 mb-2\">\n            Voc√™ testou a precis√£o da nossa IA por 5 dias.\n          </p>\n          <p className=\"text-lg text-gray-400\">\n            Agora √© hora de desbloquear todo o poder do <span className=\"text-[#33b864] font-bold\">TRUE SIGNAL</span>.\n          </p>\n        </motion.div>\n        \n        {/* Pricing card */}\n        <motion.div\n          initial={{ opacity: 0, y: 30 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.5 }}\n          className=\"relative group mb-8\"\n        >\n          <div className=\"absolute inset-0 bg-gradient-to-r from-[#33b864] to-[#2ea558] rounded-3xl blur-xl opacity-50 group-hover:opacity-70 transition-opacity\" />\n          \n          <div className=\"relative bg-gradient-to-br from-black via-[#0a0a0a] to-black border-2 border-[#33b864] rounded-3xl p-8\">\n            <div className=\"text-center mb-6\">\n              <div className=\"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-red-500/20 to-red-600/20 border border-red-500/40 rounded-full mb-4 animate-pulse\">\n                <Sparkles className=\"w-4 h-4 text-red-400\" />\n                <span className=\"text-sm text-red-400 font-black uppercase tracking-wider\">TRUE SIGNAL PRIME</span>\n              </div>\n              \n              <div className=\"flex items-center justify-center gap-3 mb-2\">\n                <span className=\"text-xl text-gray-500 line-through\">R$ 99,87</span>\n                <span className=\"px-2 py-1 bg-red-500/20 text-red-400 text-xs font-bold rounded\">-52%</span>\n              </div>\n              \n              <div className=\"flex items-baseline justify-center gap-2 mb-2\">\n                <span className=\"text-5xl md:text-6xl font-black text-[#33b864] font-mono\">R$ 47,90</span>\n                <span className=\"text-gray-400 text-lg\">/m√™s</span>\n              </div>\n              \n              <p className=\"text-gray-400 text-sm\">\n                Investimento que se paga em 1 sinal certo\n              </p>\n            </div>\n            \n            <ul className=\"space-y-3 mb-8\">\n              {benefits.map((benefit, i) => (\n                <motion.li\n                  key={i}\n                  initial={{ opacity: 0, x: -20 }}\n                  animate={{ opacity: 1, x: 0 }}\n                  transition={{ delay: 0.7 + i * 0.05 }}\n                  className=\"flex items-start gap-3\"\n                >\n                  <div className=\"w-5 h-5 rounded-full bg-[#33b864]/20 flex items-center justify-center flex-shrink-0 mt-0.5\">\n                    <Check className=\"w-3 h-3 text-[#33b864]\" />\n                  </div>\n                  <span className=\"text-gray-300\">{benefit}</span>\n                </motion.li>\n              ))}\n            </ul>\n            \n            <a\n              href={CHECKOUT_URL}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"block w-full\"\n              data-testid=\"button-subscribe-premium\"\n            >\n              <button className=\"w-full bg-[#33b864] hover:bg-[#2ea558] text-black font-black py-5 rounded-xl transition-all duration-300 hover:scale-105 shadow-xl shadow-[#33b864]/40 text-lg touch-manipulation\">\n                ASSINAR TRUE SIGNAL PRIME - R$ 47,90/M√äS\n              </button>\n            </a>\n            \n            <p className=\"text-center text-sm text-gray-500 mt-4\">\n              üîí Pagamento 100% seguro ‚Ä¢ Cancele quando quiser\n            </p>\n          </div>\n        </motion.div>\n        \n        {/* Footer note */}\n        <p className=\"text-center text-sm text-gray-500\">\n          Tem d√∫vidas? Entre em contato com nosso suporte:{' '}\n          <a href=\"mailto:suporte@truesignal.com\" className=\"text-[#33b864] hover:underline\">\n            suporte@truesignal.com\n          </a>\n        </p>\n      </motion.div>\n    </div>\n  );\n}\n","path":null,"size_bytes":6008,"size_tokens":null},"client/src/components/landing/hero-shot.tsx":{"content":"import { motion } from 'framer-motion';\nimport { Link } from 'wouter';\nimport { Zap } from 'lucide-react';\nimport { Logo } from '@/components/logo';\n\nexport function HeroShot() {\n  return (\n    <section className=\"relative min-h-screen flex items-center justify-center px-4 py-20 overflow-hidden\">\n      {/* Background gradient glow */}\n      <div className=\"absolute inset-0 bg-gradient-to-b from-black via-[#0a0a0a] to-[#121212]\" />\n      <div className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[800px] bg-[#33b864]/20 rounded-full blur-[150px]\" />\n      \n      <div className=\"relative z-10 max-w-7xl mx-auto grid lg:grid-cols-2 gap-12 lg:gap-20 items-center lg:px-8\">\n        {/* Left: Copy */}\n        <div className=\"text-center lg:text-left\">\n          <motion.div\n            initial={{ opacity: 0, y: 30 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ duration: 0.8 }}\n            className=\"mb-6 flex justify-center lg:justify-start\"\n          >\n            <Logo size=\"lg\" showText={true} />\n          </motion.div>\n          \n          <motion.h1\n            initial={{ opacity: 0, y: 30 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ duration: 0.8, delay: 0.1 }}\n            className=\"text-3xl md:text-4xl lg:text-5xl font-extrabold text-white mb-8 tracking-tight leading-[1.15] lg:max-w-xl\"\n            style={{ fontFamily: 'Sora, sans-serif' }}\n          >\n            Chega de \"Achismo\".<br />\n            O mercado pune quem tenta adivinhar.\n          </motion.h1>\n          \n          <motion.div\n            initial={{ opacity: 0, y: 30 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ duration: 0.8, delay: 0.2 }}\n            className=\"max-w-2xl mb-8 space-y-4\"\n            style={{ fontFamily: 'Sora, sans-serif' }}\n          >\n            <p className=\"text-base md:text-lg text-gray-300 leading-relaxed\">\n              Voc√™ n√£o precisa mais quebrar a cabe√ßa analisando.\n            </p>\n            <p className=\"text-base md:text-lg text-gray-300 leading-relaxed\">\n              Temos <span className=\"text-[#33b864] font-bold\">20 Especialistas (7+ anos de mercado)</span> trabalhando lado a lado com nossa{' '}\n              <span className=\"text-[#33b864] font-bold\">IA Esportiva</span>.\n            </p>\n            <p className=\"text-base md:text-lg text-gray-300 leading-relaxed\">\n              A IA l√™ os dados, n√≥s filtramos os riscos e entregamos apenas as melhores oportunidades{' '}\n              <span className=\"text-[#33b864] font-bold\">(assertividade acima de 83%)</span>.\n            </p>\n            <p className=\"text-base md:text-lg text-gray-300 leading-relaxed\">\n              S√£o horas de an√°lises, ap√≥s isso te enviamos uma notifica√ß√£o em seu celular para voc√™ copiar e colar a entrada.\n            </p>\n          </motion.div>\n          \n          <motion.div\n            initial={{ opacity: 0, scale: 0.9 }}\n            animate={{ opacity: 1, scale: 1 }}\n            transition={{ duration: 0.5, delay: 0.4 }}\n            className=\"flex flex-col items-center lg:items-start gap-4\"\n          >\n            <Link href=\"/auth?mode=register\">\n              <motion.button\n                className=\"group relative px-8 md:px-10 py-5 md:py-6 bg-[#33b864] text-black font-black text-base md:text-lg rounded-2xl overflow-hidden shadow-2xl shadow-[#33b864]/60 hover:shadow-[#33b864]/80 transition-all duration-300 hover:scale-105 touch-manipulation\"\n                data-testid=\"button-access-ai\"\n                animate={{\n                  scale: [1, 1.05, 1],\n                  boxShadow: [\n                    '0 25px 50px -12px rgba(51, 184, 100, 0.6)',\n                    '0 25px 50px -12px rgba(51, 184, 100, 0.9)',\n                    '0 25px 50px -12px rgba(51, 184, 100, 0.6)',\n                  ],\n                }}\n                transition={{\n                  repeat: Infinity,\n                  duration: 2,\n                  ease: 'easeInOut',\n                }}\n              >\n                <motion.div\n                  className=\"absolute inset-0 bg-gradient-to-r from-[#33b864] via-white/30 to-[#33b864]\"\n                  animate={{\n                    x: ['-100%', '200%'],\n                  }}\n                  transition={{\n                    repeat: Infinity,\n                    duration: 2,\n                    ease: 'linear',\n                  }}\n                />\n                <span className=\"relative z-10 flex items-center gap-2 whitespace-nowrap\" style={{ fontFamily: 'Sora, sans-serif' }}>\n                  <Zap className=\"w-5 h-5\" />\n                  QUERO RECEBER OS SINAIS\n                </span>\n              </motion.button>\n            </Link>\n            <p className=\"text-sm text-gray-500 font-light\" style={{ fontFamily: 'Sora, sans-serif' }}>\n              Acesso imediato. 5 dias gr√°tis para testar.\n            </p>\n          </motion.div>\n        </div>\n        \n        {/* Right: iPhone Mockup */}\n        <motion.div\n          initial={{ opacity: 0, scale: 0.8, rotateY: -20 }}\n          animate={{ opacity: 1, scale: 1, rotateY: 0 }}\n          transition={{ duration: 1, delay: 0.5 }}\n          className=\"relative flex justify-center lg:justify-end\"\n        >\n          {/* Glow effect */}\n          <div className=\"absolute inset-0 bg-[#33b864]/30 rounded-[60px] blur-[100px] scale-110\" />\n          \n          {/* iPhone Frame */}\n          <div className=\"relative\">\n            <motion.div\n              animate={{\n                y: [0, -20, 0],\n              }}\n              transition={{\n                repeat: Infinity,\n                duration: 4,\n                ease: 'easeInOut',\n              }}\n              className=\"relative w-[280px] md:w-[320px] lg:w-[360px] aspect-[9/19] bg-black rounded-[50px] p-3 shadow-2xl border-4 border-gray-900\"\n            >\n              {/* Screen - Dashboard Image */}\n              <div className=\"w-full h-full rounded-[42px] overflow-hidden border border-[#33b864]/20\">\n                <img \n                  src=\"/attached_assets/image_1764341720746.png\" \n                  alt=\"Central de Opera√ß√µes\" \n                  className=\"w-full h-full object-cover object-top\"\n                />\n              </div>\n            </motion.div>\n            \n            {/* Floating particles */}\n            {[...Array(6)].map((_, i) => (\n              <motion.div\n                key={i}\n                className=\"absolute w-2 h-2 bg-[#33b864] rounded-full\"\n                style={{\n                  top: `${Math.random() * 100}%`,\n                  left: `${Math.random() * 100}%`,\n                }}\n                animate={{\n                  y: [0, -30, 0],\n                  opacity: [0, 1, 0],\n                }}\n                transition={{\n                  repeat: Infinity,\n                  duration: 3 + Math.random() * 2,\n                  delay: Math.random() * 2,\n                }}\n              />\n            ))}\n          </div>\n        </motion.div>\n      </div>\n    </section>\n  );\n}\n","path":null,"size_bytes":7088,"size_tokens":null},"client/src/components/landing/final-cta.tsx":{"content":"import { motion, useInView } from 'framer-motion';\nimport { useRef } from 'react';\nimport { Link } from 'wouter';\nimport { Zap, CheckCircle2 } from 'lucide-react';\n\nexport function FinalCTA() {\n  const ref = useRef(null);\n  const isInView = useInView(ref, { once: true });\n  \n  return (\n    <section ref={ref} className=\"relative py-20 px-4 bg-gradient-to-b from-[#121212] via-black to-black overflow-hidden\">\n      {/* Background glow */}\n      <div className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-[#33b864]/15 rounded-full blur-[150px]\" />\n      \n      <div className=\"relative z-10 max-w-3xl mx-auto text-center lg:max-w-4xl lg:px-8\">\n        {/* Main headline */}\n        <motion.h2\n          initial={{ opacity: 0, y: 30 }}\n          animate={isInView ? { opacity: 1, y: 0 } : {}}\n          className=\"text-2xl md:text-3xl lg:text-5xl font-black text-white mb-4 leading-tight\"\n          style={{ fontFamily: 'Sora, sans-serif' }}\n        >\n          CONFIE EM QUEM REALMENTE\n          <br />\n          <span className=\"text-transparent bg-clip-text bg-gradient-to-r from-[#33b864] to-[#2ea558]\">\n            FATURA NESSE MERCADO\n          </span>\n        </motion.h2>\n        \n        <motion.p\n          initial={{ opacity: 0, y: 20 }}\n          animate={isInView ? { opacity: 1, y: 0 } : {}}\n          transition={{ delay: 0.1 }}\n          className=\"text-gray-400 text-lg mb-8\"\n        >\n          Sistema global com operadores em dezenas de pa√≠ses\n        </motion.p>\n        \n        {/* CTA Button */}\n        <motion.div\n          initial={{ opacity: 0, scale: 0.9 }}\n          animate={isInView ? { opacity: 1, scale: 1 } : {}}\n          transition={{ delay: 0.2, type: 'spring' }}\n          className=\"mb-8\"\n        >\n          <Link href=\"/auth?mode=register\">\n            <motion.button\n              className=\"group relative px-10 py-5 bg-[#33b864] text-black font-black text-lg md:text-xl rounded-2xl overflow-hidden shadow-xl shadow-[#33b864]/40 hover:shadow-[#33b864]/70 transition-all duration-300 hover:scale-105\"\n              data-testid=\"button-final-cta\"\n              animate={{\n                scale: [1, 1.05, 1],\n                boxShadow: [\n                  '0 10px 40px -10px rgba(51, 184, 100, 0.4)',\n                  '0 10px 40px -10px rgba(51, 184, 100, 0.8)',\n                  '0 10px 40px -10px rgba(51, 184, 100, 0.4)',\n                ],\n              }}\n              transition={{\n                repeat: Infinity,\n                duration: 2,\n                ease: 'easeInOut',\n              }}\n            >\n              <motion.div\n                className=\"absolute inset-0 bg-gradient-to-r from-[#33b864] via-white/30 to-[#33b864]\"\n                animate={{ x: ['-100%', '200%'] }}\n                transition={{ repeat: Infinity, duration: 2.5, ease: 'linear' }}\n              />\n              <span className=\"relative z-10 flex items-center gap-3\" style={{ fontFamily: 'Sora, sans-serif' }}>\n                <Zap className=\"w-6 h-6\" />\n                FAZER TESTE GR√ÅTIS\n              </span>\n            </motion.button>\n          </Link>\n        </motion.div>\n        \n        {/* Benefits */}\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={isInView ? { opacity: 1, y: 0 } : {}}\n          transition={{ delay: 0.4 }}\n          className=\"flex flex-wrap items-center justify-center gap-4 md:gap-6 text-sm text-gray-400\"\n        >\n          <div className=\"flex items-center gap-2\">\n            <CheckCircle2 className=\"w-4 h-4 text-[#33b864]\" />\n            <span>5 dias gr√°tis</span>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <CheckCircle2 className=\"w-4 h-4 text-[#33b864]\" />\n            <span>Garantia total</span>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <CheckCircle2 className=\"w-4 h-4 text-[#33b864]\" />\n            <span>Cancele quando quiser</span>\n          </div>\n        </motion.div>\n      </div>\n    </section>\n  );\n}\n","path":null,"size_bytes":4051,"size_tokens":null},"client/src/components/paywall/trial-banner.tsx":{"content":"import { motion, AnimatePresence } from 'framer-motion';\nimport { X, Sparkles } from 'lucide-react';\nimport { useState } from 'react';\nimport { useAccessControl } from '@/hooks/use-access-control';\nimport { Link } from 'wouter';\n\nconst CHECKOUT_URL = '/checkout';\n\nexport function TrialBanner() {\n  const [isDismissed, setIsDismissed] = useState(false);\n  const { isTrial, daysRemaining, isPremium } = useAccessControl();\n  \n  if (!isTrial || isPremium || isDismissed) {\n    return null;\n  }\n  \n  const isUrgent = daysRemaining <= 3;\n  \n  return (\n    <AnimatePresence>\n      <motion.div\n        initial={{ y: -50, opacity: 0 }}\n        animate={{ y: 0, opacity: 1 }}\n        exit={{ y: -50, opacity: 0 }}\n        className={`relative ${isUrgent ? 'bg-gradient-to-r from-red-600 to-red-500' : 'bg-gradient-to-r from-amber-500 to-yellow-500'} text-black px-4 py-1 shadow-md z-50`}\n        data-testid=\"banner-trial-countdown\"\n      >\n        <div className=\"max-w-7xl mx-auto flex items-center justify-between gap-3\">\n          <p className=\"font-semibold text-sm flex-1\">\n            {isUrgent ? (\n              <span className=\"text-white\">‚ö†Ô∏è {daysRemaining} {daysRemaining === 1 ? 'dia restante' : 'dias restantes'}!</span>\n            ) : (\n              <span>{daysRemaining} dias gr√°tis restantes</span>\n            )}\n          </p>\n          \n          <div className=\"flex items-center gap-2 flex-shrink-0\">\n            <Link href={CHECKOUT_URL}>\n              <button \n                className=\"px-3 py-1 bg-black text-white font-bold rounded hover:bg-gray-800 transition-colors text-sm whitespace-nowrap shadow-md\" \n                data-testid=\"button-trial-banner-subscribe\"\n              >\n                Assinar Prime\n              </button>\n            </Link>\n            \n            <button\n              onClick={() => setIsDismissed(true)}\n              className=\"p-1 hover:bg-black/10 rounded-full transition-colors\"\n              aria-label=\"Fechar\"\n              data-testid=\"button-trial-banner-dismiss\"\n            >\n              <X className=\"w-4 h-4\" />\n            </button>\n          </div>\n        </div>\n      </motion.div>\n    </AnimatePresence>\n  );\n}\n","path":null,"size_bytes":2193,"size_tokens":null},"client/src/components/landing/system-terminal.tsx":{"content":"import { useEffect, useState } from 'react';\nimport { motion } from 'framer-motion';\nimport { Activity, Signal, TrendingUp } from 'lucide-react';\n\nexport function SystemTerminal() {\n  const [uptime, setUptime] = useState('99.9');\n  const [signals, setSignals] = useState(14);\n  const [accuracy, setAccuracy] = useState(92.4);\n  \n  useEffect(() => {\n    const interval = setInterval(() => {\n      setSignals(prev => (prev + 1) % 20);\n    }, 15000);\n    \n    return () => clearInterval(interval);\n  }, []);\n  \n  return (\n    <div className=\"bg-black/80 border border-[#33b864]/30 rounded-2xl p-6 font-mono text-sm backdrop-blur-xl\">\n      <div className=\"flex items-center gap-2 mb-4 pb-3 border-b border-gray-800\">\n        <div className=\"w-3 h-3 rounded-full bg-[#33b864] animate-pulse\" />\n        <span className=\"text-[#33b864] font-bold\">TRUE SIGNAL SYSTEM STATUS</span>\n      </div>\n      \n      <div className=\"space-y-3\">\n        <motion.div\n          initial={{ opacity: 0, x: -20 }}\n          animate={{ opacity: 1, x: 0 }}\n          className=\"flex items-center justify-between\"\n        >\n          <span className=\"text-gray-400 flex items-center gap-2\">\n            <Activity className=\"w-4 h-4 text-[#33b864]\" />\n            Uptime\n          </span>\n          <span className=\"text-[#33b864] font-bold\">{uptime}%</span>\n        </motion.div>\n        \n        <motion.div\n          initial={{ opacity: 0, x: -20 }}\n          animate={{ opacity: 1, x: 0 }}\n          transition={{ delay: 0.1 }}\n          className=\"flex items-center justify-between\"\n        >\n          <span className=\"text-gray-400 flex items-center gap-2\">\n            <Signal className=\"w-4 h-4 text-blue-400\" />\n            Sinais Enviados Hoje\n          </span>\n          <span className=\"text-white font-bold\">{signals}</span>\n        </motion.div>\n        \n        <motion.div\n          initial={{ opacity: 0, x: -20 }}\n          animate={{ opacity: 1, x: 0 }}\n          transition={{ delay: 0.2 }}\n          className=\"flex items-center justify-between\"\n        >\n          <span className=\"text-gray-400 flex items-center gap-2\">\n            <TrendingUp className=\"w-4 h-4 text-[#33b864]\" />\n            Assertividade Semanal\n          </span>\n          <span className=\"text-[#33b864] font-bold\">{accuracy}%</span>\n        </motion.div>\n      </div>\n      \n      <div className=\"mt-4 pt-4 border-t border-gray-800\">\n        <div className=\"text-xs text-gray-600\">\n          <span className=\"text-[#33b864]\">$</span> ./monitor --status\n        </div>\n        <div className=\"text-xs text-gray-500 mt-1\">\n          [OK] All systems operational\n        </div>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":2677,"size_tokens":null},"client/src/hooks/use-access-control.ts":{"content":"import { useAuth } from './use-auth';\nimport { differenceInCalendarDays, differenceInHours } from 'date-fns';\n\nconst TRIAL_DAYS = 5;\nconst TRIAL_HOURS = TRIAL_DAYS * 24; // 120 hours = 5 full days\n\nexport function useAccessControl() {\n  const { user } = useAuth();\n  \n  if (!user) {\n    return {\n      daysRemaining: 0,\n      subscriptionDaysRemaining: 0,\n      isLocked: false,\n      canSeeAllTips: false,\n      isPremium: false,\n      isTrial: false,\n      isExpired: true,\n      isAdmin: false,\n      subscriptionEndsAt: null,\n    };\n  }\n  \n  // ADMIN users have FULL ACCESS to everything - no restrictions\n  const isAdmin = user.role === 'admin';\n  if (isAdmin) {\n    return {\n      daysRemaining: 999,\n      subscriptionDaysRemaining: 999,\n      isLocked: false,\n      canSeeAllTips: true,\n      isPremium: true,\n      isTrial: false,\n      isExpired: false,\n      isAdmin: true,\n      subscriptionEndsAt: null,\n    };\n  }\n  \n  const isPremium = user.subscriptionStatus === 'active';\n  const isTrial = user.subscriptionStatus === 'trial';\n  const isExpired = user.subscriptionStatus === 'expired';\n  const now = new Date();\n  \n  // Premium users (subscriptionStatus === 'active') have full access\n  if (isPremium) {\n    // Calculate days remaining in subscription using precise timestamp comparison\n    let subscriptionDaysRemaining = 30; // Default\n    let subscriptionHasExpired = false;\n    \n    if (user.subscriptionEndsAt) {\n      const endsAt = new Date(user.subscriptionEndsAt);\n      \n      // Use precise timestamp comparison (not calendar days)\n      // Subscription is only expired when current time is PAST the end timestamp\n      subscriptionHasExpired = now.getTime() >= endsAt.getTime();\n      \n      // Calculate days remaining for display (round up to give full day credit)\n      const hoursRemaining = differenceInHours(endsAt, now);\n      subscriptionDaysRemaining = Math.max(0, Math.ceil(hoursRemaining / 24));\n      \n      // If subscription has expired, treat as expired user\n      if (subscriptionHasExpired) {\n        return {\n          daysRemaining: 0,\n          subscriptionDaysRemaining: 0,\n          isLocked: true,\n          canSeeAllTips: false,\n          isPremium: false,\n          isTrial: false,\n          isExpired: true,\n          isAdmin: false,\n          subscriptionEndsAt: user.subscriptionEndsAt,\n        };\n      }\n    }\n    \n    return {\n      daysRemaining: subscriptionDaysRemaining,\n      subscriptionDaysRemaining,\n      isLocked: false,\n      canSeeAllTips: true,\n      isPremium: true,\n      isTrial: false,\n      isExpired: false,\n      isAdmin: false,\n      subscriptionEndsAt: user.subscriptionEndsAt,\n    };\n  }\n  \n  // Expired users are locked out\n  if (isExpired) {\n    return {\n      daysRemaining: 0,\n      subscriptionDaysRemaining: 0,\n      isLocked: true,\n      canSeeAllTips: false,\n      isPremium: false,\n      isTrial: false,\n      isExpired: true,\n      isAdmin: false,\n      subscriptionEndsAt: user.subscriptionEndsAt,\n    };\n  }\n  \n  // Trial users: calculate days remaining\n  // Use trial_start_date if available, fallback to created_at\n  const trialStartDate = new Date(user.trialStartDate || user.createdAt);\n  \n  // Calculate hours elapsed for precise 15√ó24h trial window\n  const hoursElapsed = differenceInHours(now, trialStartDate);\n  \n  // Calculate calendar days for display purposes\n  const daysElapsed = differenceInCalendarDays(now, trialStartDate);\n  const daysRemaining = Math.max(0, TRIAL_DAYS - daysElapsed);\n  \n  // Lock when 360 hours (15 full days) have elapsed\n  // This ensures users get exactly 15√ó24h of access regardless of signup time\n  const isLocked = hoursElapsed >= TRIAL_HOURS;\n  \n  return {\n    daysRemaining,\n    subscriptionDaysRemaining: 0,\n    isLocked,\n    canSeeAllTips: false, // Trial users see limited tips\n    isPremium: false,\n    isTrial: true,\n    isExpired: false,\n    isAdmin: false,\n    subscriptionEndsAt: null,\n  };\n}\n","path":null,"size_bytes":3942,"size_tokens":null},"client/src/components/landing/tech-solution.tsx":{"content":"import { motion, useInView } from 'framer-motion';\nimport { useRef } from 'react';\nimport { Zap, Globe, Users, Smartphone } from 'lucide-react';\nimport { ProfitSimulator } from './profit-simulator';\n\nexport function TechSolution() {\n  const ref = useRef(null);\n  const isInView = useInView(ref, { once: true });\n  \n  return (\n    <section ref={ref} className=\"relative py-16 px-4 bg-gradient-to-b from-black via-[#0a0a0a] to-[#121212] overflow-hidden\">\n      {/* Background grid */}\n      <div className=\"absolute inset-0 opacity-10\">\n        <div className=\"absolute inset-0\" style={{\n          backgroundImage: 'linear-gradient(#33b864 1px, transparent 1px), linear-gradient(90deg, #33b864 1px, transparent 1px)',\n          backgroundSize: '50px 50px'\n        }} />\n      </div>\n      \n      <div className=\"relative z-10 max-w-7xl mx-auto lg:px-8\">\n        <motion.div\n          initial={{ opacity: 0, y: 30 }}\n          animate={isInView ? { opacity: 1, y: 0 } : {}}\n          className=\"text-center mb-16\"\n        >\n          <h2 className=\"text-2xl md:text-3xl lg:text-4xl font-black text-white mb-4\" style={{ fontFamily: 'Sora, sans-serif' }}>\n            Como funciona na{' '}\n            <span className=\"text-transparent bg-clip-text bg-gradient-to-r from-[#33b864] to-[#2ea558]\">\n              pr√°tica\n            </span>\n          </h2>\n          <p className=\"text-sm md:text-base text-gray-400 max-w-2xl mx-auto text-center\">\n            N√≥s analisamos, voc√™ recebe uma notifica√ß√£o no celular te avisando que tem bilhetes dispon√≠veis com alta assertividade\n          </p>\n        </motion.div>\n        \n        {/* Simple 3-step flow */}\n        <div className=\"relative max-w-4xl mx-auto\">\n          <div className=\"grid md:grid-cols-3 gap-6 md:gap-8\">\n            {/* Step 1 */}\n            <motion.div\n              initial={{ opacity: 0, y: 30 }}\n              animate={isInView ? { opacity: 1, y: 0 } : {}}\n              transition={{ duration: 0.6, delay: 0.1 }}\n              className=\"relative\"\n            >\n              <div className=\"bg-gradient-to-br from-[#33b864]/10 to-black border border-[#33b864]/30 rounded-2xl p-6 h-full\">\n                <div className=\"w-14 h-14 rounded-full bg-[#33b864]/20 flex items-center justify-center mb-4\">\n                  <Globe className=\"w-7 h-7 text-[#33b864]\" />\n                </div>\n                <div className=\"text-[#33b864] font-bold text-sm mb-2\">PASSO 1</div>\n                <h3 className=\"text-lg font-bold text-white mb-2\" style={{ fontFamily: 'Sora, sans-serif' }}>\n                  Monitoramos tudo\n                </h3>\n                <p className=\"text-sm text-gray-400 leading-relaxed\">\n                  Nossa tecnologia acompanha jogos do mundo inteiro, 24 horas por dia, buscando as melhores oportunidades.\n                </p>\n              </div>\n              \n              {/* Arrow (desktop only) */}\n              <div className=\"hidden md:block absolute top-1/2 -right-4 transform -translate-y-1/2\">\n                <Zap className=\"w-6 h-6 text-[#33b864]/50\" />\n              </div>\n            </motion.div>\n            \n            {/* Step 2 */}\n            <motion.div\n              initial={{ opacity: 0, y: 30 }}\n              animate={isInView ? { opacity: 1, y: 0 } : {}}\n              transition={{ duration: 0.6, delay: 0.2 }}\n              className=\"relative\"\n            >\n              <div className=\"bg-gradient-to-br from-[#33b864]/10 to-black border border-[#33b864]/30 rounded-2xl p-6 h-full\">\n                <div className=\"w-14 h-14 rounded-full bg-[#33b864]/20 flex items-center justify-center mb-4\">\n                  <Users className=\"w-7 h-7 text-[#33b864]\" />\n                </div>\n                <div className=\"text-[#33b864] font-bold text-sm mb-2\">PASSO 2</div>\n                <h3 className=\"text-lg font-bold text-white mb-2\" style={{ fontFamily: 'Sora, sans-serif' }}>\n                  Especialistas validam\n                </h3>\n                <p className=\"text-sm text-gray-400 leading-relaxed\">\n                  Nossa equipe de 20 analistas profissionais revisa cada oportunidade antes de liberar. S√≥ passa o que tem alta chance de acerto.\n                </p>\n              </div>\n              \n              {/* Arrow (desktop only) */}\n              <div className=\"hidden md:block absolute top-1/2 -right-4 transform -translate-y-1/2\">\n                <Zap className=\"w-6 h-6 text-[#33b864]/50\" />\n              </div>\n            </motion.div>\n            \n            {/* Step 3 */}\n            <motion.div\n              initial={{ opacity: 0, y: 30 }}\n              animate={isInView ? { opacity: 1, y: 0 } : {}}\n              transition={{ duration: 0.6, delay: 0.3 }}\n            >\n              <div className=\"bg-gradient-to-br from-[#33b864]/10 to-black border border-[#33b864]/30 rounded-2xl p-6 h-full\">\n                <div className=\"w-14 h-14 rounded-full bg-[#33b864]/20 flex items-center justify-center mb-4\">\n                  <Smartphone className=\"w-7 h-7 text-[#33b864]\" />\n                </div>\n                <div className=\"text-[#33b864] font-bold text-sm mb-2\">PASSO 3</div>\n                <h3 className=\"text-lg font-bold text-white mb-2\" style={{ fontFamily: 'Sora, sans-serif' }}>\n                  Voc√™ recebe pronto\n                </h3>\n                <p className=\"text-sm text-gray-400 leading-relaxed\">\n                  Chega uma notifica√ß√£o no seu celular com tudo mastigado. √â s√≥ copiar e colar na sua casa de apostas favorita.\n                </p>\n              </div>\n            </motion.div>\n          </div>\n          \n          {/* Demo Video + Simulator Grid (Desktop: side by side) */}\n          <motion.div\n            initial={{ opacity: 0, y: 30 }}\n            animate={isInView ? { opacity: 1, y: 0 } : {}}\n            transition={{ duration: 0.6, delay: 0.4 }}\n            className=\"mt-12\"\n          >\n            <div className=\"text-center mb-6 lg:mb-10\">\n              <h3 className=\"text-xl md:text-2xl font-bold text-white mb-2\" style={{ fontFamily: 'Sora, sans-serif' }}>\n                Veja como √© <span className=\"text-[#33b864]\">simples</span>\n              </h3>\n              <p className=\"text-sm text-gray-400\">Basta clicar em \"Copiar\" e colar na sua casa de apostas</p>\n            </div>\n            \n            {/* Desktop: 2 columns, Mobile: stacked */}\n            <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-center lg:gap-12\">\n              {/* Left: Video with Hand Interaction */}\n              <div className=\"flex justify-center w-full lg:w-auto\">\n                <motion.div\n                  animate={{ y: [0, -10, 0] }}\n                  transition={{ repeat: Infinity, duration: 3, ease: 'easeInOut' }}\n                  className=\"relative\"\n                >\n                  {/* Phone glow effect */}\n                  <div className=\"absolute inset-0 bg-[#33b864]/30 rounded-[50px] blur-3xl scale-110\" />\n                  \n                  {/* iPhone Frame with Video */}\n                  <div className=\"relative w-[280px] md:w-[320px] aspect-[9/19] bg-black rounded-[50px] p-3 shadow-2xl border-4 border-gray-800\">\n                    {/* Screen with Video */}\n                    <div className=\"w-full h-full rounded-[42px] overflow-hidden border border-[#33b864]/20 relative\">\n                      {/* Notch overlay */}\n                      <div className=\"absolute top-0 left-1/2 -translate-x-1/2 h-7 w-28 bg-black rounded-b-2xl z-20\" />\n                      \n                      {/* Video */}\n                      <video\n                        src=\"/attached_assets/truevideo_1764359168903.mp4\"\n                        autoPlay\n                        loop\n                        muted\n                        playsInline\n                        className=\"w-full h-full object-cover\"\n                        data-testid=\"video-demo\"\n                      />\n                    </div>\n                  </div>\n                  \n                                  </motion.div>\n              </div>\n              \n              {/* Right: Profit Simulator (Desktop only, hidden on mobile - shown separately below) */}\n              <div className=\"hidden lg:block lg:w-[480px]\">\n                <ProfitSimulator />\n              </div>\n            </div>\n          </motion.div>\n          \n        </div>\n      </div>\n    </section>\n  );\n}\n","path":null,"size_bytes":8433,"size_tokens":null},"client/src/components/landing/live-toast.tsx":{"content":"import { useEffect, useState } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Check, TrendingUp, UserPlus } from 'lucide-react';\n\ninterface Notification {\n  id: number;\n  type: 'green' | 'member';\n  message: string;\n  icon: typeof Check;\n}\n\nconst notifications: Omit<Notification, 'id'>[] = [\n  { type: 'green', message: 'Green confirmado: Over 2.5 @1.90 ‚úÖ', icon: Check },\n  { type: 'member', message: 'Ricardo M. entrou no plano Pro', icon: UserPlus },\n  { type: 'green', message: 'Green confirmado: BTTS @2.15 ‚úÖ', icon: Check },\n  { type: 'member', message: 'Ana P. ativou acesso vital√≠cio', icon: UserPlus },\n  { type: 'green', message: 'Lucro realizado: +R$ 1.250', icon: TrendingUp },\n  { type: 'member', message: 'Carlos S. entrou no plano Pro', icon: UserPlus },\n];\n\nexport function LiveToast() {\n  const [activeNotification, setActiveNotification] = useState<Notification | null>(null);\n\n  useEffect(() => {\n    let currentIndex = 0;\n    \n    const showNotification = () => {\n      const notification = {\n        ...notifications[currentIndex % notifications.length],\n        id: Date.now(),\n      };\n      setActiveNotification(notification);\n      currentIndex++;\n\n      setTimeout(() => {\n        setActiveNotification(null);\n      }, 4000);\n    };\n\n    const interval = setInterval(showNotification, 20000);\n    showNotification();\n\n    return () => clearInterval(interval);\n  }, []);\n\n  return (\n    <div className=\"fixed bottom-6 left-6 z-50\">\n      <AnimatePresence>\n        {activeNotification && (\n          <motion.div\n            initial={{ x: -400, opacity: 0 }}\n            animate={{ x: 0, opacity: 1 }}\n            exit={{ x: -400, opacity: 0 }}\n            transition={{ type: 'spring', damping: 20 }}\n            className=\"bg-black/80 backdrop-blur-xl border border-[#33b864]/30 rounded-xl p-4 shadow-2xl shadow-[#33b864]/20 min-w-[300px]\"\n          >\n            <div className=\"flex items-center gap-3\">\n              <div className=\"w-10 h-10 rounded-full bg-[#33b864]/20 flex items-center justify-center\">\n                <activeNotification.icon className=\"w-5 h-5 text-[#33b864]\" />\n              </div>\n              <p className=\"text-sm text-white font-medium\">{activeNotification.message}</p>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n}\n","path":null,"size_bytes":2365,"size_tokens":null},"client/src/components/landing/guarantee-seal.tsx":{"content":"import { motion, useInView } from 'framer-motion';\nimport { useRef } from 'react';\nimport { Shield, CheckCircle2, Sparkles } from 'lucide-react';\n\nexport function GuaranteeSeal() {\n  const ref = useRef(null);\n  const isInView = useInView(ref, { once: true });\n  \n  const benefits = [\n    '5 dias de acesso gratuito',\n    'Todas as funcionalidades liberadas',\n    'Sem cart√£o de cr√©dito',\n    'Cancele quando quiser',\n  ];\n  \n  return (\n    <section ref={ref} className=\"relative py-20 px-4 bg-gradient-to-b from-[#121212] via-black to-[#0a0a0a]\">\n      <div className=\"max-w-4xl mx-auto\">\n        <motion.div\n          initial={{ opacity: 0, scale: 0.9 }}\n          animate={isInView ? { opacity: 1, scale: 1 } : {}}\n          transition={{ duration: 0.8 }}\n          className=\"relative\"\n        >\n          {/* Glow effect */}\n          <div className=\"absolute inset-0 bg-[#33b864]/20 rounded-full blur-3xl opacity-60\" />\n          \n          <div className=\"relative bg-gradient-to-br from-[#33b864]/10 via-black to-[#33b864]/5 border-2 border-[#33b864]/30 rounded-3xl p-12 backdrop-blur-xl\">\n            {/* Shield Icon */}\n            <motion.div\n              initial={{ scale: 0, rotate: -180 }}\n              animate={isInView ? { scale: 1, rotate: 0 } : {}}\n              transition={{ duration: 1, type: 'spring' }}\n              className=\"flex justify-center mb-8\"\n            >\n              <div className=\"relative\">\n                <div className=\"absolute inset-0 bg-[#33b864] rounded-full blur-2xl opacity-50\" />\n                <div className=\"relative w-28 h-28 rounded-full bg-gradient-to-br from-[#33b864] to-[#2ea558] flex items-center justify-center shadow-2xl\">\n                  <Sparkles className=\"w-14 h-14 text-black\" />\n                </div>\n              </div>\n            </motion.div>\n            \n            {/* Title */}\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              animate={isInView ? { opacity: 1, y: 0 } : {}}\n              transition={{ delay: 0.3 }}\n              className=\"text-center mb-8\"\n            >\n              <h2 className=\"text-3xl md:text-3xl font-black text-white mb-4\" style={{ fontFamily: 'Sora, sans-serif' }}>\n                Teste{' '}\n                <span className=\"text-transparent bg-clip-text bg-gradient-to-r from-[#33b864] to-[#4ade80]\">\n                  Gr√°tis por 5 Dias\n                </span>\n              </h2>\n              <p className=\"text-xl text-gray-300\">\n                Experimente a plataforma completa sem pagar nada\n              </p>\n            </motion.div>\n            \n            {/* Benefits List */}\n            <div className=\"grid md:grid-cols-2 gap-4 mb-8\">\n              {benefits.map((benefit, i) => (\n                <motion.div\n                  key={i}\n                  initial={{ opacity: 0, x: i % 2 === 0 ? -20 : 20 }}\n                  animate={isInView ? { opacity: 1, x: 0 } : {}}\n                  transition={{ delay: 0.5 + i * 0.1 }}\n                  className=\"flex items-center gap-3 p-4 bg-white/5 border border-[#33b864]/20 rounded-xl\"\n                >\n                  <div className=\"w-6 h-6 rounded-full bg-[#33b864]/20 flex items-center justify-center flex-shrink-0\">\n                    <CheckCircle2 className=\"w-4 h-4 text-[#33b864]\" />\n                  </div>\n                  <span className=\"text-gray-200 font-medium\">{benefit}</span>\n                </motion.div>\n              ))}\n            </div>\n            \n            {/* Bottom statement */}\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              animate={isInView ? { opacity: 1, y: 0 } : {}}\n              transition={{ delay: 0.9 }}\n              className=\"text-center p-6 bg-gradient-to-r from-[#33b864]/10 to-[#33b864]/5 border border-[#33b864]/30 rounded-2xl\"\n            >\n              <p className=\"text-lg text-gray-300 leading-relaxed\">\n                Durante os <span className=\"text-white font-bold\">5 dias de teste</span>, voc√™ ter√° acesso completo a todos os sinais e funcionalidades.\n                Se gostar, assine o plano <span className=\"text-[#33b864] font-bold\">True Signal Prime</span> por apenas R$ 47,90/m√™s.\n              </p>\n              <p className=\"text-sm text-gray-400 mt-4\">\n                Sem compromisso. Cancele quando quiser.\n              </p>\n            </motion.div>\n            \n            {/* Badge */}\n            <motion.div\n              initial={{ opacity: 0, scale: 0 }}\n              animate={isInView ? { opacity: 1, scale: 1 } : {}}\n              transition={{ delay: 1.1, type: 'spring' }}\n              className=\"absolute -top-6 -right-6 w-28 h-28 rounded-full bg-gradient-to-br from-[#33b864] to-[#2ea558] flex items-center justify-center shadow-2xl border-4 border-black transform rotate-12\"\n            >\n              <div className=\"text-center\">\n                <div className=\"text-xl font-black text-black\">GR√ÅTIS</div>\n                <div className=\"text-xs text-black font-bold\">5 DIAS</div>\n              </div>\n            </motion.div>\n          </div>\n        </motion.div>\n      </div>\n    </section>\n  );\n}\n","path":null,"size_bytes":5158,"size_tokens":null},"client/src/components/landing/financial-ticker.tsx":{"content":"import { motion } from 'framer-motion';\n\nconst tickerData = [\n  { label: '[LIVE] PREMIER LEAGUE', value: 'OVER 2.5 DETECTADO', confidence: '94%' },\n  { label: 'LUCRO √öLTIMA HORA', value: '+4.2u', type: 'profit' },\n  { label: 'LA LIGA', value: 'BTTS CONFIRMADO', confidence: '91%' },\n  { label: 'ROI SEMANAL', value: '+18.7%', type: 'roi' },\n  { label: 'BUNDESLIGA', value: 'UNDER 3.5 1.85', confidence: '88%' },\n  { label: 'SERIE A', value: 'OVER 1.5 FT 1.65', confidence: '92%' },\n  { label: 'ASSERTIVIDADE', value: '83%', type: 'roi' },\n];\n\nexport function FinancialTicker() {\n  return (\n    <div className=\"relative w-full max-w-full overflow-x-clip bg-black/60 backdrop-blur-xl border-y border-[#33b864]/20 py-3 h-12\">\n      <motion.div\n        className=\"absolute left-0 top-0 flex gap-12 whitespace-nowrap py-3 will-change-transform\"\n        animate={{\n          x: [\"0%\", \"-50%\"],\n        }}\n        transition={{\n          x: {\n            repeat: Infinity,\n            repeatType: 'loop',\n            duration: 40,\n            ease: 'linear',\n          },\n        }}\n      >\n        {[...tickerData, ...tickerData].map((item, i) => (\n          <div key={i} className=\"flex items-center gap-3 text-sm font-mono\">\n            <span className=\"text-gray-400\">{item.label}</span>\n            <span \n              className={`font-bold ${\n                item.type === 'profit' || item.type === 'roi' \n                  ? 'text-[#33b864]' \n                  : 'text-white'\n              }`}\n            >\n              {item.value}\n            </span>\n            {item.confidence && (\n              <span className=\"text-xs text-[#33b864]/70\">({item.confidence} CONFIDENCE)</span>\n            )}\n            <span className=\"text-gray-600\">‚Ä¢</span>\n          </div>\n        ))}\n      </motion.div>\n    </div>\n  );\n}\n","path":null,"size_bytes":1824,"size_tokens":null},"client/src/components/landing/infinite-marquee.tsx":{"content":"import { motion } from 'framer-motion';\n\nconst results = [\n  'LUCRO HOJE: +12%',\n  'GREEN ARSENAL ‚úÖ',\n  'GREEN FLAMENGO ‚úÖ',\n  'ROI MENSAL: 102%',\n  'GREEN BARCELONA ‚úÖ',\n  '+R$ 15.420 ESTA SEMANA',\n  'ASSERTIVIDADE: 83%',\n  'GREEN REAL MADRID ‚úÖ',\n];\n\nexport function InfiniteMarquee() {\n  return (\n    <div className=\"relative w-full overflow-hidden bg-[#33b864]/10 border-y border-[#33b864]/30 py-4\">\n      <motion.div\n        className=\"flex gap-12 whitespace-nowrap\"\n        animate={{\n          x: [0, -1920],\n        }}\n        transition={{\n          x: {\n            repeat: Infinity,\n            repeatType: 'loop',\n            duration: 30,\n            ease: 'linear',\n          },\n        }}\n      >\n        {[...results, ...results, ...results].map((result, i) => (\n          <span\n            key={i}\n            className=\"text-lg font-bold text-[#33b864] font-sora tracking-wider\"\n          >\n            {result}\n          </span>\n        ))}\n      </motion.div>\n    </div>\n  );\n}\n","path":null,"size_bytes":1003,"size_tokens":null},"client/src/components/landing/offer-pack.tsx":{"content":"import { motion, useInView } from 'framer-motion';\nimport { useRef, useState } from 'react';\nimport { Link } from 'wouter';\nimport { Zap, Shield, CheckCircle2, Sparkles, Ticket, Scissors, Copy, Check } from 'lucide-react';\nimport { toast } from 'sonner';\n\nfunction ProCouponTicket() {\n  const [copied, setCopied] = useState(false);\n  const code = \"TRUESIGNAL50\";\n  \n  const handleCopy = () => {\n    navigator.clipboard.writeText(code);\n    setCopied(true);\n    toast.success(\"Cupom copiado!\");\n    setTimeout(() => setCopied(false), 2000);\n  };\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20, rotateY: -5 }}\n      animate={{ opacity: 1, y: 0, rotateY: 0 }}\n      transition={{ duration: 0.6, delay: 0.3 }}\n      className=\"relative max-w-sm mx-auto mt-8\"\n    >\n      {/* Glow effect */}\n      <div className=\"absolute inset-0 bg-gradient-to-r from-[#33b864]/20 to-[#33b864]/20 rounded-2xl blur-lg\" />\n      \n      {/* Ticket container */}\n      <div className=\"relative flex overflow-hidden rounded-2xl border border-[#33b864]/30 bg-gradient-to-r from-[#0a0a0a] to-black\">\n        \n        {/* Left side - Vertical strip */}\n        <div className=\"relative bg-gradient-to-b from-[#33b864] via-[#2ea558] to-[#1f8a42] w-20 flex flex-col items-center justify-center py-4\">\n          {/* Serrated edge effect - circles */}\n          <div className=\"absolute -right-2 top-0 bottom-0 flex flex-col justify-around\">\n            {[...Array(8)].map((_, i) => (\n              <div key={i} className=\"w-4 h-4 bg-black rounded-full\" />\n            ))}\n          </div>\n          \n          {/* Ticket icon */}\n          <div className=\"mb-2\">\n            <Ticket className=\"w-6 h-6 text-black/70 rotate-90\" />\n          </div>\n          \n          {/* Vertical CUPOM text */}\n          <div \n            className=\"text-black font-black text-xs tracking-[0.2em] uppercase\"\n            style={{ \n              writingMode: 'vertical-rl',\n              transform: 'rotate(180deg)',\n              fontFamily: 'Sora, sans-serif'\n            }}\n          >\n            CUPOM\n          </div>\n          \n          {/* Discount badge */}\n          <div className=\"mt-3 bg-black/20 rounded-lg px-2 py-1\">\n            <span className=\"text-white font-black text-sm\" style={{ fontFamily: 'Sora, sans-serif' }}>\n              50%\n            </span>\n          </div>\n        </div>\n\n        {/* Scissors divider */}\n        <div className=\"absolute left-[68px] top-1/2 -translate-y-1/2 z-10 bg-black rounded-full p-1\">\n          <Scissors className=\"w-3 h-3 text-[#33b864]\" />\n        </div>\n\n        {/* Right side - Content */}\n        <div className=\"flex-1 p-5 pl-6\">\n          {/* Header */}\n          <div className=\"flex items-center gap-2 mb-2\">\n            <Sparkles className=\"w-3 h-3 text-[#33b864]\" />\n            <span className=\"text-[10px] font-bold text-[#33b864] uppercase tracking-widest\">\n              Cupom de Desconto\n            </span>\n          </div>\n\n          {/* Main text */}\n          <p className=\"text-white font-bold text-base mb-1\" style={{ fontFamily: 'Sora, sans-serif' }}>\n            50% OFF\n          </p>\n          <p className=\"text-gray-500 text-xs mb-1\">\n            De R$ 99,87 por apenas\n          </p>\n          <p className=\"text-[#33b864] font-bold text-sm mb-3\">\n            R$ 49,93\n          </p>\n\n          {/* Code box with copy */}\n          <div className=\"flex items-center gap-2\">\n            <div className=\"flex-1 bg-[#33b864]/10 border border-[#33b864]/30 border-dashed rounded-lg px-3 py-2 flex items-center justify-between\">\n              <code className=\"text-[#33b864] font-mono font-bold text-sm tracking-widest\">\n                {code}\n              </code>\n            </div>\n            <button\n              onClick={handleCopy}\n              className=\"p-2 bg-[#33b864] hover:bg-[#2ea558] rounded-lg transition-all group\"\n              data-testid=\"button-copy-coupon-offer\"\n            >\n              {copied ? (\n                <Check className=\"w-4 h-4 text-black\" />\n              ) : (\n                <Copy className=\"w-4 h-4 text-black group-hover:scale-110 transition-transform\" />\n              )}\n            </button>\n          </div>\n        </div>\n      </div>\n    </motion.div>\n  );\n}\n\nexport function OfferPack() {\n  const ref = useRef(null);\n  const isInView = useInView(ref, { once: true });\n  \n  return (\n    <section ref={ref} className=\"relative py-20 px-4 bg-gradient-to-b from-[#0a0a0a] via-black to-[#121212] overflow-hidden\">\n      {/* Background glow */}\n      <div className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[800px] bg-[#33b864]/10 rounded-full blur-[200px]\" />\n      \n      <div className=\"relative z-10 max-w-3xl mx-auto lg:max-w-4xl lg:px-8\">\n        {/* Pricing Card */}\n        <motion.div\n          initial={{ opacity: 0, y: 30, scale: 0.95 }}\n          animate={isInView ? { opacity: 1, y: 0, scale: 1 } : {}}\n          transition={{ duration: 0.6 }}\n          className=\"relative\"\n        >\n          {/* Glow ring */}\n          <div className=\"absolute inset-0 bg-gradient-to-r from-[#33b864]/30 to-[#33b864]/30 rounded-3xl blur-xl\" />\n          \n          {/* Black Friday Badge */}\n          <motion.div \n            className=\"absolute -top-3 -right-3 md:-top-4 md:-right-4 z-20\"\n            initial={{ opacity: 0, scale: 0.5, rotate: -10 }}\n            animate={isInView ? { \n              opacity: 1, \n              scale: [1, 1.1, 1],\n              rotate: 0\n            } : {}}\n            transition={{ \n              opacity: { duration: 0.5, delay: 0.3 },\n              scale: { duration: 1.5, repeat: Infinity, ease: \"easeInOut\" },\n              rotate: { duration: 0.5, delay: 0.3 }\n            }}\n          >\n            <motion.div \n              className=\"bg-gradient-to-br from-red-600 to-red-800 px-4 py-2 md:px-5 md:py-3 rounded-lg shadow-2xl border border-red-500/50\"\n              animate={{\n                boxShadow: [\n                  '0 0 20px rgba(239, 68, 68, 0.5), 0 10px 30px rgba(0,0,0,0.6)',\n                  '0 0 40px rgba(239, 68, 68, 0.8), 0 10px 40px rgba(0,0,0,0.8)',\n                  '0 0 20px rgba(239, 68, 68, 0.5), 0 10px 30px rgba(0,0,0,0.6)',\n                ]\n              }}\n              transition={{ duration: 1.5, repeat: Infinity, ease: \"easeInOut\" }}\n              style={{ fontFamily: 'Sora, sans-serif' }}\n            >\n              <span className=\"text-white font-black text-sm md:text-base tracking-wide\">\n                -50% OFF\n              </span>\n            </motion.div>\n          </motion.div>\n          \n          <div className=\"relative bg-gradient-to-br from-[#33b864]/10 via-black to-[#33b864]/5 border-2 border-[#33b864]/40 rounded-3xl overflow-hidden backdrop-blur-xl\">\n            {/* Black Friday Banner */}\n            <div className=\"relative bg-gradient-to-r from-black via-[#1a1a1a] to-black py-4 px-6 border-b border-[#33b864]/30\">\n              <div className=\"absolute inset-0 opacity-10\" style={{ backgroundImage: 'radial-gradient(circle, #33b864 1px, transparent 1px)', backgroundSize: '20px 20px' }} />\n              <div className=\"relative flex items-center justify-center gap-3\">\n                <motion.div\n                  animate={{ scale: [1, 1.2, 1] }}\n                  transition={{ duration: 2, repeat: Infinity }}\n                  className=\"w-2 h-2 bg-[#33b864] rounded-full\"\n                />\n                <span className=\"text-xs md:text-sm font-bold tracking-[0.3em] uppercase\" style={{ fontFamily: 'Sora, sans-serif' }}>\n                  <span className=\"text-white\">BLACK</span>\n                  <span className=\"text-[#33b864]\"> FRIDAY</span>\n                  <span className=\"text-white\"> SALE</span>\n                </span>\n                <motion.div\n                  animate={{ scale: [1, 1.2, 1] }}\n                  transition={{ duration: 2, repeat: Infinity, delay: 0.5 }}\n                  className=\"w-2 h-2 bg-[#33b864] rounded-full\"\n                />\n              </div>\n            </div>\n            \n            <div className=\"p-8 md:p-12 lg:p-16\">\n            <div className=\"text-center\">\n              {/* Plan name */}\n              <h3 className=\"text-2xl md:text-3xl font-black text-white mb-6\" style={{ fontFamily: 'Sora, sans-serif' }}>\n                Plano True Signal Prime\n              </h3>\n              \n              {/* Price */}\n              <div className=\"mb-8\">\n                <div className=\"flex items-center justify-center gap-3 mb-3\">\n                  <span className=\"text-gray-500 line-through text-xl\">R$ 99,87</span>\n                </div>\n                <div className=\"flex items-end justify-center gap-2\">\n                  <span className=\"text-5xl md:text-7xl font-black text-[#33b864]\" style={{ fontFamily: 'Sora, sans-serif' }}>\n                    R$ 47,90\n                  </span>\n                  <span className=\"text-gray-400 text-xl pb-3\">/m√™s</span>\n                </div>\n              </div>\n              \n              {/* CTA Button - Pulsing */}\n              <div className=\"flex justify-center\">\n                <Link href=\"/auth?mode=register\">\n                  <motion.button\n                    animate={{ \n                      boxShadow: [\n                        '0 0 20px rgba(51, 184, 100, 0.4)',\n                        '0 0 40px rgba(51, 184, 100, 0.8)',\n                        '0 0 20px rgba(51, 184, 100, 0.4)',\n                      ]\n                    }}\n                    transition={{ repeat: Infinity, duration: 2 }}\n                    className=\"w-full md:w-auto px-12 py-5 bg-[#33b864] text-black font-black text-xl rounded-2xl hover:bg-[#2ea558] transition-colors flex items-center justify-center gap-3\"\n                    data-testid=\"button-offer-cta\"\n                  >\n                    <Zap className=\"w-6 h-6 flex-shrink-0\" />\n                    <span className=\"whitespace-nowrap\">QUERO ACESSO PRIME</span>\n                  </motion.button>\n                </Link>\n              </div>\n              \n              <p className=\"text-sm text-gray-400 mt-4\">\n                üí° <span className=\"text-white font-medium\">Menos que 1 green paga o m√™s inteiro</span>\n              </p>\n              <p className=\"text-gray-500 text-xs mt-2\">\n                Cancele quando quiser. Sem multas.\n              </p>\n              \n              {/* Professional Coupon Ticket */}\n              <ProCouponTicket />\n            </div>\n            </div>\n          </div>\n        </motion.div>\n        \n        {/* Guarantee Section */}\n        <motion.div\n          initial={{ opacity: 0, y: 30 }}\n          animate={isInView ? { opacity: 1, y: 0 } : {}}\n          transition={{ duration: 0.6, delay: 0.2 }}\n          className=\"mt-12 text-center\"\n        >\n          {/* Shield icon centered */}\n          <div className=\"w-16 h-16 mx-auto rounded-2xl bg-gradient-to-br from-[#33b864]/20 to-[#33b864]/5 border border-[#33b864]/30 flex items-center justify-center mb-6\">\n            <Shield className=\"w-8 h-8 text-[#33b864]\" />\n          </div>\n          \n          <h4 className=\"text-2xl font-black text-white mb-4\" style={{ fontFamily: 'Sora, sans-serif' }}>\n            O risco √© 100% nosso\n          </h4>\n          \n          <p className=\"text-gray-400 text-base leading-relaxed max-w-lg mx-auto mb-8\">\n            Voc√™ tem <span className=\"text-[#33b864] font-bold\">5 DIAS</span> de teste. Se n√£o gostar ou mudar de ideia, devolvemos 100% do valor do plano. <span className=\"text-white font-semibold\">Sem perguntas. Sem burocracia.</span>\n          </p>\n          \n          {/* Guarantee badges - 2x2 grid with more spacing */}\n          <div className=\"grid grid-cols-2 gap-4 max-w-md mx-auto\">\n            {['5 dias de teste', 'Reembolso total', 'Sem perguntas', 'Risco zero'].map((text, i) => (\n              <div key={i} className=\"flex items-center justify-center gap-2 py-3\">\n                <CheckCircle2 className=\"w-5 h-5 text-[#33b864]\" />\n                <span className=\"text-sm text-gray-300\">{text}</span>\n              </div>\n            ))}\n          </div>\n        </motion.div>\n      </div>\n    </section>\n  );\n}\n","path":null,"size_bytes":12212,"size_tokens":null},"client/src/components/landing/profit-simulator.tsx":{"content":"import { useState } from 'react';\nimport { motion } from 'framer-motion';\nimport { Slider } from '@/components/ui/slider';\nimport { TrendingUp, Percent, Wallet } from 'lucide-react';\n\nexport function ProfitSimulator() {\n  const [initialCapital, setInitialCapital] = useState(1000);\n  \n  const dailyReturn = 0.03;\n  const days = 30;\n  const finalValue = Math.round(initialCapital * Math.pow(1 + dailyReturn, days));\n  const profit = finalValue - initialCapital;\n  const roi = ((profit / initialCapital) * 100).toFixed(0);\n  \n  return (\n    <div className=\"bg-gradient-to-br from-[#0a0a0a] to-black border border-[#33b864]/30 rounded-3xl p-6 md:p-8 backdrop-blur-xl\">\n      <h3 className=\"text-xl md:text-2xl font-bold text-white mb-2 text-center\" style={{ fontFamily: 'Sora, sans-serif' }}>\n        Simule seu Crescimento\n      </h3>\n      <p className=\"text-sm text-gray-400 text-center mb-8\">\n        Arraste e veja seu potencial de lucro\n      </p>\n      \n      {/* Slider Section */}\n      <div className=\"mb-8\">\n        <div className=\"flex justify-between items-center mb-4\">\n          <span className=\"text-sm text-gray-400\">Investimento Inicial</span>\n          <motion.span \n            key={initialCapital}\n            initial={{ scale: 1.2 }}\n            animate={{ scale: 1 }}\n            className=\"text-2xl md:text-3xl font-bold text-[#33b864] font-mono\"\n          >\n            R$ {initialCapital.toLocaleString()}\n          </motion.span>\n        </div>\n        \n        <div className=\"py-4 px-2\">\n          <Slider\n            value={[initialCapital]}\n            onValueChange={(value) => setInitialCapital(value[0])}\n            min={100}\n            max={5000}\n            step={100}\n            className=\"[&_[role=slider]]:bg-[#33b864] [&_[role=slider]]:border-[#33b864] [&_[role=slider]]:shadow-lg [&_[role=slider]]:shadow-[#33b864]/50\"\n          />\n          <div className=\"flex justify-between mt-2 text-xs text-gray-500\">\n            <span>R$ 100</span>\n            <span>R$ 5.000</span>\n          </div>\n        </div>\n      </div>\n      \n      {/* Results */}\n      <motion.div\n        key={finalValue}\n        initial={{ scale: 0.95, opacity: 0.5 }}\n        animate={{ scale: 1, opacity: 1 }}\n        className=\"space-y-4\"\n      >\n        {/* Main Result */}\n        <div className=\"bg-[#33b864]/10 border-2 border-[#33b864]/40 rounded-2xl p-6 text-center\">\n          <div className=\"flex items-center justify-center gap-2 mb-2\">\n            <Wallet className=\"w-5 h-5 text-[#33b864]\" />\n            <span className=\"text-sm text-gray-300\">Lucro Estimado (30 dias)</span>\n          </div>\n          <div className=\"text-4xl md:text-5xl font-black text-[#33b864] font-mono\" style={{ fontFamily: 'Sora, sans-serif' }}>\n            R$ {profit.toLocaleString()}\n          </div>\n        </div>\n        \n        {/* ROI Badge */}\n        <div className=\"flex justify-center\">\n          <div className=\"inline-flex items-center gap-2 px-6 py-3 bg-black border border-[#33b864]/30 rounded-full\">\n            <TrendingUp className=\"w-5 h-5 text-[#33b864]\" />\n            <span className=\"text-gray-400\">ROI Projetado:</span>\n            <span className=\"text-2xl font-bold text-[#33b864]\">+{roi}%</span>\n          </div>\n        </div>\n      </motion.div>\n      \n      {/* Disclaimer */}\n      <p className=\"text-xs text-center text-gray-500 mt-6\">\n        Baseado na performance m√©dia hist√≥rica de 3%/dia. Matem√°tica, n√£o m√°gica.\n      </p>\n    </div>\n  );\n}\n","path":null,"size_bytes":3487,"size_tokens":null},"client/src/components/landing/social-proof.tsx":{"content":"import { motion, useInView } from 'framer-motion';\nimport { useRef } from 'react';\nimport { TrendingUp, Banknote, Target, Flame } from 'lucide-react';\n\nexport function SocialProof() {\n  const ref = useRef(null);\n  const isInView = useInView(ref, { once: true });\n  \n  const notifications = [\n    { name: 'Rafael S.', initials: 'RS', action: 'bateu ROI de', value: '+146%', detail: '12 Greens seguidos', icon: Target },\n    { name: 'Ana C.', initials: 'AC', action: 'lucrou', value: '+R$ 5.120', detail: 'em 3 semanas', icon: TrendingUp },\n    { name: 'Carlos M.', initials: 'CM', action: 'dobrou a banca:', value: '+R$ 4.523', detail: '15 dias de opera√ß√£o', icon: Flame },\n    { name: 'Juliana F.', initials: 'JF', action: 'fechou o m√™s com', value: '+R$ 2.156', detail: 'sequ√™ncia de 9 greens', icon: Target },\n    { name: 'Pedro H.', initials: 'PH', action: 'multiplicou banca por', value: '3.2x', detail: 'come√ßou com R$500', icon: TrendingUp },\n    { name: 'Mariana L.', initials: 'ML', action: 'bateu meta semanal:', value: '+R$ 1.890', detail: 'primeira semana', icon: Target },\n    { name: 'Lucas B.', initials: 'LB', action: 'atingiu ROI de', value: '+187%', detail: '18 Greens no m√™s', icon: Flame },\n    { name: 'Fernanda R.', initials: 'FR', action: 'lucrou', value: '+R$ 3.890', detail: 'resultado mensal', icon: TrendingUp },\n  ];\n  \n  const NotificationCard = ({ notification, index }: { notification: typeof notifications[0], index: number }) => {\n    const IconComponent = notification.icon;\n    return (\n      <div \n        className=\"flex items-center gap-4 px-5 py-4 bg-gradient-to-r from-white/5 to-white/[0.02] border border-white/10 rounded-2xl hover:border-[#33b864]/30 transition-all\"\n        data-testid={`notification-${index}`}\n      >\n        {/* Avatar */}\n        <div className=\"w-12 h-12 rounded-full bg-gradient-to-br from-[#33b864] to-[#2ea558] flex items-center justify-center text-sm font-black text-black flex-shrink-0\">\n          {notification.initials}\n        </div>\n        \n        {/* Content */}\n        <div className=\"flex-1 min-w-0\">\n          <div className=\"flex items-center gap-2 flex-wrap\">\n            <span className=\"font-semibold text-white\">{notification.name}</span>\n            <span className=\"text-gray-500\">{notification.action}:</span>\n            <span className=\"font-bold text-[#33b864]\">{notification.value}</span>\n          </div>\n          <div className=\"text-sm text-gray-500 flex items-center gap-1\">\n            <IconComponent className=\"w-3 h-3\" />\n            {notification.detail}\n          </div>\n        </div>\n        \n        {/* Status indicator */}\n        <div className=\"w-2 h-2 rounded-full bg-[#33b864] animate-pulse flex-shrink-0\" />\n      </div>\n    );\n  };\n  \n  return (\n    <section ref={ref} className=\"relative pt-8 pb-20 px-4 bg-gradient-to-b from-black via-[#0a0a0a] to-[#121212] overflow-hidden\">\n      <div className=\"max-w-5xl mx-auto lg:px-8\">\n        <motion.div\n          initial={{ opacity: 0, y: 30 }}\n          animate={isInView ? { opacity: 1, y: 0 } : {}}\n          className=\"text-center mb-12\"\n        >\n          <h2 className=\"text-2xl md:text-3xl lg:text-4xl font-black text-white mb-3\" style={{ fontFamily: 'Sora, sans-serif' }}>\n            Usu√°rios{' '}\n            <span className=\"text-transparent bg-clip-text bg-gradient-to-r from-[#33b864] to-[#2ea558]\">\n              TRUE SIGNAL\n            </span>\n          </h2>\n          <p className=\"text-sm md:text-base text-gray-400 mb-3\">\n            Veja quem est√° lucrando agora\n          </p>\n          <div className=\"inline-flex items-center gap-2\">\n            <div className=\"w-2 h-2 rounded-full bg-[#33b864] animate-pulse\" />\n            <span className=\"text-sm text-[#33b864] font-medium\">Atualizando em tempo real</span>\n          </div>\n        </motion.div>\n        \n        {/* Animated Notification Feed - Marquee vertical */}\n        <div className=\"relative h-[400px] overflow-hidden\">\n          {/* Gradient overlays for smooth fade */}\n          <div className=\"absolute top-0 left-0 right-0 h-20 bg-gradient-to-b from-[#0a0a0a] to-transparent z-10 pointer-events-none\" />\n          <div className=\"absolute bottom-0 left-0 right-0 h-20 bg-gradient-to-t from-[#0a0a0a] to-transparent z-10 pointer-events-none\" />\n          \n          {/* Scrolling container */}\n          <div className=\"animate-marquee-vertical space-y-4\">\n            {/* First set */}\n            {notifications.map((notification, i) => (\n              <motion.div\n                key={`first-${i}`}\n                initial={{ opacity: 0, x: -20 }}\n                animate={isInView ? { opacity: 1, x: 0 } : {}}\n                transition={{ duration: 0.5, delay: i * 0.1 }}\n              >\n                <NotificationCard notification={notification} index={i} />\n              </motion.div>\n            ))}\n            {/* Duplicate for seamless loop */}\n            {notifications.map((notification, i) => (\n              <div key={`second-${i}`}>\n                <NotificationCard notification={notification} index={i + 8} />\n              </div>\n            ))}\n          </div>\n        </div>\n        \n        </div>\n      \n      {/* Add keyframes for marquee animation */}\n      <style>{`\n        @keyframes marquee-vertical {\n          0% {\n            transform: translateY(0);\n          }\n          100% {\n            transform: translateY(-50%);\n          }\n        }\n        .animate-marquee-vertical {\n          animation: marquee-vertical 30s linear infinite;\n        }\n        .animate-marquee-vertical:hover {\n          animation-play-state: paused;\n        }\n      `}</style>\n    </section>\n  );\n}\n","path":null,"size_bytes":5676,"size_tokens":null},"client/src/components/landing/problem-agitation.tsx":{"content":"import { motion, useInView } from 'framer-motion';\nimport { useRef } from 'react';\nimport { TrendingDown, XCircle, Cpu, ShieldCheck, Smartphone, ArrowRight, ArrowDown } from 'lucide-react';\n\nexport function ProblemAgitation() {\n  const ref = useRef(null);\n  const isInView = useInView(ref, { once: true });\n  \n  const painPoints = [\n    { \n      title: 'Exposi√ß√£o √† Vari√¢ncia Negativa', \n      text: 'Operar m√∫ltiplas alongadas sem valida√ß√£o estat√≠stica n√£o √© investimento, √© loteria. Voc√™ assume um risco desproporcional buscando retornos que a matem√°tica do mercado n√£o sustenta a longo prazo.' \n    },\n    { \n      title: 'Inefici√™ncia Operacional', \n      text: 'Voc√™ est√° competindo manualmente contra supercomputadores. Passar horas analisando dados dispersos gera fadiga mental e erros de julgamento. O tempo gasto na an√°lise n√£o se paga no retorno.' \n    },\n    { \n      title: 'Trading Emocional (Vi√©s Psicol√≥gico)', \n      text: 'Sem um sistema validado, suas decis√µes s√£o ref√©ns do \"feeling\". A tentativa impulsiva de recuperar perdas (Revenge Trading) √© a causa t√©cnica n¬∫ 1 da quebra de bancas no mundo.' \n    },\n    { \n      title: 'Eros√£o de Capital', \n      text: 'A falta de gest√£o de risco profissional transforma o mercado em um passivo. O resultado √© a estagna√ß√£o: ganhos pequenos devolvidos em perdas grandes. Um modelo matematicamente insustent√°vel.' \n    },\n  ];\n\n  const steps = [\n    {\n      icon: Cpu,\n      step: '1',\n      title: 'Scanner Global',\n      text: 'Nossos algoritmos monitoram 1.000+ ligas simultaneamente, identificando padr√µes estat√≠sticos invis√≠veis ao olho humano em tempo real.'\n    },\n    {\n      icon: ShieldCheck,\n      step: '2',\n      title: 'Filtro de Elite',\n      text: 'A IA detecta a oportunidade, mas nossos 20 Traders Profissionais validam. Se houver risco de les√£o, clima ou desfalque, o sinal √© descartado. S√≥ passa o fil√©.'\n    },\n    {\n      icon: Smartphone,\n      step: '3',\n      title: 'Execu√ß√£o Simples',\n      text: 'Voc√™ recebe o bilhete pronto no seu celular. Basta clicar em \"Copiar\", colar na sua casa de aposta e aguardar o resultado.'\n    },\n  ];\n  \n  return (\n    <section ref={ref} className=\"relative py-12 px-4 bg-gradient-to-b from-[#121212] via-[#0a0a0a] to-black overflow-hidden\">\n      <div className=\"max-w-7xl mx-auto lg:px-8\">\n        <div className=\"grid lg:grid-cols-2 gap-8 lg:gap-16\">\n          {/* Left: The Pain (Red Side) */}\n          <motion.div\n            initial={{ opacity: 0, x: -50 }}\n            animate={isInView ? { opacity: 1, x: 0 } : {}}\n            transition={{ duration: 0.8 }}\n            className=\"relative group\"\n          >\n            {/* Noise texture overlay */}\n            <div className=\"absolute inset-0 opacity-20 rounded-3xl\" style={{ \n              backgroundImage: 'url(\"data:image/svg+xml,%3Csvg viewBox=\\'0 0 256 256\\' xmlns=\\'http://www.w3.org/2000/svg\\'%3E%3Cfilter id=\\'noise\\'%3E%3CfeTurbulence type=\\'fractalNoise\\' baseFrequency=\\'0.9\\' numOctaves=\\'4\\' stitchTiles=\\'stitch\\'/%3E%3C/filter%3E%3Crect width=\\'100%25\\' height=\\'100%25\\' filter=\\'url(%23noise)\\'/%3E%3C/svg%3E\")',\n            }} />\n            \n            <div className=\"absolute inset-0 bg-gradient-to-b from-red-900/20 via-[#1a0505] to-transparent rounded-3xl\" />\n            \n            <div className=\"relative bg-gradient-to-br from-red-950/40 via-[#0a0505] to-black border border-red-900/30 rounded-3xl p-6 md:p-8 backdrop-blur-xl h-full\">\n              {/* Header */}\n              <div className=\"flex items-center gap-3 mb-4\">\n                <div className=\"w-10 h-10 md:w-12 md:h-12 rounded-full bg-red-900/40 flex items-center justify-center\">\n                  <TrendingDown className=\"w-5 h-5 md:w-6 md:h-6 text-red-500\" />\n                </div>\n                <div>\n                  <h3 className=\"text-lg md:text-xl font-bold text-red-400\" style={{ fontFamily: 'Sora, sans-serif' }}>\n                    O Ciclo da Opera√ß√£o Amadora\n                  </h3>\n                  <p className=\"text-xs md:text-sm text-red-400/60\">(98% do Mercado)</p>\n                </div>\n              </div>\n              \n              {/* Headline */}\n              <p className=\"text-sm md:text-base text-red-300 font-semibold mb-6 border-l-2 border-red-500/50 pl-4 whitespace-nowrap\" style={{ fontFamily: 'Sora, sans-serif' }}>\n                Por que a conta nunca fecha no final do m√™s.\n              </p>\n              \n              {/* Pain Points */}\n              <div className=\"space-y-4\">\n                {painPoints.map((item, i) => (\n                  <motion.div\n                    key={i}\n                    initial={{ opacity: 0, x: -20 }}\n                    animate={isInView ? { opacity: 1, x: 0 } : {}}\n                    transition={{ delay: i * 0.1 + 0.3 }}\n                    className=\"flex items-start gap-3\"\n                  >\n                    <XCircle className=\"w-5 h-5 text-red-500/70 flex-shrink-0 mt-0.5\" />\n                    <div>\n                      <span className=\"text-red-400 font-bold text-sm\" style={{ fontFamily: 'Sora, sans-serif' }}>{item.title}:</span>\n                      <p className=\"text-gray-400 text-sm leading-relaxed font-light\" style={{ fontFamily: 'Sora, sans-serif' }}>{item.text}</p>\n                    </div>\n                  </motion.div>\n                ))}\n              </div>\n            </div>\n          </motion.div>\n          \n          {/* Right: The Engine (Green Side - How It Works) */}\n          <motion.div\n            initial={{ opacity: 0, x: 50 }}\n            animate={isInView ? { opacity: 1, x: 0 } : {}}\n            transition={{ duration: 0.8 }}\n            className=\"relative\"\n          >\n            <div className=\"absolute inset-0 bg-[#33b864]/10 rounded-3xl blur-2xl opacity-40\" />\n            \n            <div className=\"relative bg-gradient-to-br from-[#121212]/90 via-[#0a0a0a] to-black border-2 border-[#33b864]/30 rounded-3xl p-6 md:p-8 backdrop-blur-xl h-full\">\n              {/* Header */}\n              <div className=\"mb-6 text-center\">\n                <h3 className=\"text-xl md:text-2xl font-bold text-white mb-1\" style={{ fontFamily: 'Sora, sans-serif' }}>\n                  AQUI N√ÉO √â SORTE\n                </h3>\n                <h4 className=\"text-lg md:text-xl font-bold text-[#33b864] mb-3\" style={{ fontFamily: 'Sora, sans-serif' }}>\n                  √â ENGENHARIA DE DADOS\n                </h4>\n                <p className=\"text-sm text-gray-400\">\n                  Enquanto voc√™ dorme ou trabalha, nossa infraestrutura processa milh√µes de dados para encontrar a entrada perfeita.\n                </p>\n              </div>\n              \n              {/* Steps */}\n              <div className=\"space-y-4\">\n                {steps.map((step, i) => (\n                  <motion.div\n                    key={i}\n                    initial={{ opacity: 0, y: 20 }}\n                    animate={isInView ? { opacity: 1, y: 0 } : {}}\n                    transition={{ delay: i * 0.15 + 0.4 }}\n                  >\n                    <div className=\"relative bg-[#121212]/80 backdrop-blur border border-[#33b864]/20 rounded-xl p-4\">\n                      <div className=\"flex items-start gap-4\">\n                        {/* Icon */}\n                        <div className=\"w-12 h-12 rounded-xl bg-[#33b864]/20 flex items-center justify-center flex-shrink-0\" style={{ filter: 'drop-shadow(0 0 10px rgba(51, 184, 100, 0.4))' }}>\n                          <step.icon className=\"w-6 h-6 text-[#33b864]\" />\n                        </div>\n                        \n                        {/* Content */}\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center gap-2 mb-1\">\n                            <span className=\"text-[#33b864] font-bold text-xs\">{step.step}.</span>\n                            <h4 className=\"text-white font-semibold text-sm\" style={{ fontFamily: 'Sora, sans-serif' }}>\n                              {step.title}\n                            </h4>\n                          </div>\n                          <p className=\"text-gray-400 text-xs leading-relaxed\">\n                            {step.text}\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n                    \n                    {/* Connector Arrow */}\n                    {i < steps.length - 1 && (\n                      <div className=\"flex justify-center py-2\">\n                        <motion.div\n                          animate={{ y: [0, 5, 0] }}\n                          transition={{ repeat: Infinity, duration: 1.5 }}\n                        >\n                          <ArrowDown className=\"w-5 h-5 text-[#33b864]/50\" />\n                        </motion.div>\n                      </div>\n                    )}\n                  </motion.div>\n                ))}\n              </div>\n            </div>\n          </motion.div>\n        </div>\n      </div>\n    </section>\n  );\n}\n","path":null,"size_bytes":9053,"size_tokens":null},"client/src/components/landing/matrix-rain.tsx":{"content":"import { useEffect, useRef } from 'react';\n\nexport function MatrixRain() {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n\n    const ctx = canvas.getContext('2d');\n    if (!ctx) return;\n\n    canvas.width = window.innerWidth;\n    canvas.height = window.innerHeight;\n\n    const chars = '01„Ç¢„Ç§„Ç¶„Ç®„Ç™„Ç´„Ç≠„ÇØ„Ç±„Ç≥„Çµ„Ç∑„Çπ„Çª„ÇΩ„Çø„ÉÅ„ÉÑ„ÉÜ„Éà';\n    const fontSize = 14;\n    const columns = canvas.width / fontSize;\n    const drops: number[] = [];\n\n    for (let i = 0; i < columns; i++) {\n      drops[i] = Math.random() * -100;\n    }\n\n    function draw() {\n      if (!ctx || !canvas) return;\n      \n      ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n      ctx.fillStyle = '#33b864';\n      ctx.font = `${fontSize}px monospace`;\n\n      for (let i = 0; i < drops.length; i++) {\n        const text = chars[Math.floor(Math.random() * chars.length)];\n        ctx.fillText(text, i * fontSize, drops[i] * fontSize);\n\n        if (drops[i] * fontSize > canvas.height && Math.random() > 0.975) {\n          drops[i] = 0;\n        }\n        drops[i]++;\n      }\n    }\n\n    const interval = setInterval(draw, 33);\n\n    const handleResize = () => {\n      canvas.width = window.innerWidth;\n      canvas.height = window.innerHeight;\n    };\n\n    window.addEventListener('resize', handleResize);\n\n    return () => {\n      clearInterval(interval);\n      window.removeEventListener('resize', handleResize);\n    };\n  }, []);\n\n  return (\n    <canvas\n      ref={canvasRef}\n      className=\"fixed top-0 left-0 w-full h-full pointer-events-none opacity-10 z-0\"\n    />\n  );\n}\n","path":null,"size_bytes":1691,"size_tokens":null},"client/src/components/landing/tilt-card.tsx":{"content":"import { motion, useMotionValue, useSpring, useTransform } from 'framer-motion';\nimport { MouseEvent, ReactNode, useRef } from 'react';\n\ninterface TiltCardProps {\n  children: ReactNode;\n  className?: string;\n}\n\nexport function TiltCard({ children, className = '' }: TiltCardProps) {\n  const ref = useRef<HTMLDivElement>(null);\n\n  const x = useMotionValue(0);\n  const y = useMotionValue(0);\n\n  const mouseXSpring = useSpring(x);\n  const mouseYSpring = useSpring(y);\n\n  const rotateX = useTransform(mouseYSpring, [-0.5, 0.5], ['15deg', '-15deg']);\n  const rotateY = useTransform(mouseXSpring, [-0.5, 0.5], ['-15deg', '15deg']);\n\n  const handleMouseMove = (e: MouseEvent<HTMLDivElement>) => {\n    if (!ref.current) return;\n\n    const rect = ref.current.getBoundingClientRect();\n\n    const width = rect.width;\n    const height = rect.height;\n\n    const mouseX = e.clientX - rect.left;\n    const mouseY = e.clientY - rect.top;\n\n    const xPct = mouseX / width - 0.5;\n    const yPct = mouseY / height - 0.5;\n\n    x.set(xPct);\n    y.set(yPct);\n  };\n\n  const handleMouseLeave = () => {\n    x.set(0);\n    y.set(0);\n  };\n\n  return (\n    <motion.div\n      ref={ref}\n      onMouseMove={handleMouseMove}\n      onMouseLeave={handleMouseLeave}\n      style={{\n        rotateX,\n        rotateY,\n        transformStyle: 'preserve-3d',\n      }}\n      className={className}\n    >\n      {children}\n    </motion.div>\n  );\n}\n","path":null,"size_bytes":1402,"size_tokens":null},"client/src/components/landing/benefits-grid.tsx":{"content":"import { motion, useInView } from 'framer-motion';\nimport { useRef } from 'react';\nimport { Cpu, Shield, Users } from 'lucide-react';\n\nexport function BenefitsGrid() {\n  const ref = useRef(null);\n  const isInView = useInView(ref, { once: true });\n  \n  return (\n    <section ref={ref} className=\"relative pt-20 pb-8 lg:pt-12 lg:pb-6 px-4 bg-gradient-to-b from-[#121212] via-black to-[#0a0a0a]\">\n      <div className=\"max-w-6xl mx-auto lg:px-8\">\n        <motion.div\n          initial={{ opacity: 0, y: 30 }}\n          animate={isInView ? { opacity: 1, y: 0 } : {}}\n          className=\"text-center mb-12\"\n        >\n          <h2 className=\"text-2xl md:text-3xl lg:text-4xl font-black text-white mb-3\" style={{ fontFamily: 'Sora, sans-serif' }}>\n            O Arsenal{' '}\n            <span className=\"text-transparent bg-clip-text bg-gradient-to-r from-[#33b864] to-[#2ea558]\">\n              Completo\n            </span>\n          </h2>\n          <p className=\"text-sm md:text-base text-gray-400\">\n            Tudo que voc√™ precisa em um √∫nico lugar\n          </p>\n        </motion.div>\n        \n        {/* Bento Grid */}\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4 lg:gap-6\">\n          {/* Box 1 - O C√©rebro (Grande - 2x2) */}\n          <motion.div\n            initial={{ opacity: 0, scale: 0.9 }}\n            animate={isInView ? { opacity: 1, scale: 1 } : {}}\n            transition={{ duration: 0.6 }}\n            className=\"col-span-2 row-span-2 relative group\"\n          >\n            <div className=\"h-full bg-gradient-to-br from-[#33b864]/20 via-[#0a0a0a] to-black border border-[#33b864]/30 rounded-3xl p-6 md:p-8 flex flex-col justify-between min-h-[280px]\">\n              {/* Glow effect */}\n              <div className=\"absolute inset-0 bg-[#33b864]/5 rounded-3xl blur-2xl opacity-0 group-hover:opacity-100 transition-opacity\" />\n              \n              <div className=\"relative\">\n                <div className=\"w-14 h-14 rounded-2xl bg-gradient-to-br from-[#33b864] to-[#2ea558] flex items-center justify-center mb-4 shadow-lg shadow-[#33b864]/30\">\n                  <Cpu className=\"w-7 h-7 text-black\" />\n                </div>\n                <h3 className=\"text-2xl md:text-3xl font-black text-white mb-2\" style={{ fontFamily: 'Sora, sans-serif' }}>\n                  Scanner 24/7\n                </h3>\n              </div>\n              \n              <p className=\"relative text-gray-300 text-sm md:text-base leading-relaxed\">\n                Monitoramos <span className=\"text-[#33b864] font-bold\">1.400 ligas</span> enquanto voc√™ dorme. \n                Algoritmos analisam cada partida em tempo real.\n              </p>\n              \n              {/* Decorative corner */}\n              <div className=\"absolute top-0 right-0 w-24 h-24 bg-gradient-to-br from-[#33b864]/20 to-transparent rounded-bl-full rounded-tr-3xl\" />\n            </div>\n          </motion.div>\n          \n          {/* Box 2 - A Prote√ß√£o (M√©dia - 2x1) */}\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            animate={isInView ? { opacity: 1, y: 0 } : {}}\n            transition={{ duration: 0.6, delay: 0.1 }}\n            className=\"col-span-2 relative group\"\n          >\n            <div className=\"h-full bg-gradient-to-br from-white/5 via-black/50 to-black border border-white/10 rounded-3xl p-5 md:p-6 hover:border-[#33b864]/30 transition-all min-h-[130px]\">\n              <div className=\"flex items-start gap-4\">\n                <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500/20 to-blue-600/10 border border-blue-500/30 flex items-center justify-center flex-shrink-0\">\n                  <Shield className=\"w-6 h-6 text-blue-400\" />\n                </div>\n                <div>\n                  <h3 className=\"text-lg md:text-xl font-bold text-white mb-1\" style={{ fontFamily: 'Sora, sans-serif' }}>\n                    Gest√£o de Banca\n                  </h3>\n                  <p className=\"text-gray-400 text-sm leading-relaxed\">\n                    O sistema diz quanto apostar para proteger seu capital.\n                  </p>\n                </div>\n              </div>\n            </div>\n          </motion.div>\n          \n          {/* Box 3 - A Elite (M√©dia - 2x1) */}\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            animate={isInView ? { opacity: 1, y: 0 } : {}}\n            transition={{ duration: 0.6, delay: 0.2 }}\n            className=\"col-span-2 relative group\"\n          >\n            <div className=\"h-full bg-gradient-to-br from-white/5 via-black/50 to-black border border-white/10 rounded-3xl p-5 md:p-6 hover:border-[#33b864]/30 transition-all min-h-[130px]\">\n              <div className=\"flex items-start gap-4\">\n                <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-amber-500/20 to-amber-600/10 border border-amber-500/30 flex items-center justify-center flex-shrink-0\">\n                  <Users className=\"w-6 h-6 text-amber-400\" />\n                </div>\n                <div>\n                  <h3 className=\"text-lg md:text-xl font-bold text-white mb-1\" style={{ fontFamily: 'Sora, sans-serif' }}>\n                    Suporte VIP\n                  </h3>\n                  <p className=\"text-gray-400 text-sm leading-relaxed\">\n                    Atendimento priorit√°rio 24/7 para tirar suas d√∫vidas.\n                  </p>\n                </div>\n              </div>\n            </div>\n          </motion.div>\n          \n          </div>\n      </div>\n    </section>\n  );\n}\n","path":null,"size_bytes":5541,"size_tokens":null},"client/src/pages/risk-disclaimer.tsx":{"content":"import { Link } from 'wouter';\nimport { ArrowLeft, AlertTriangle } from 'lucide-react';\n\nexport default function RiskDisclaimerPage() {\n  return (\n    <div className=\"min-h-screen bg-[#0a0a0a] text-white font-sora\">\n      <div className=\"max-w-3xl mx-auto px-4 py-12\">\n        {/* Header */}\n        <Link href=\"/\">\n          <button className=\"flex items-center gap-2 text-gray-400 hover:text-[#33b864] transition-colors mb-8\" data-testid=\"button-back-home\">\n            <ArrowLeft className=\"w-5 h-5\" />\n            Voltar para Home\n          </button>\n        </Link>\n\n        {/* Title */}\n        <div className=\"flex items-center gap-4 mb-8\">\n          <div className=\"w-16 h-16 rounded-full bg-red-500/10 border-2 border-red-500/30 flex items-center justify-center\">\n            <AlertTriangle className=\"w-8 h-8 text-red-500\" />\n          </div>\n          <h1 className=\"text-xl font-black\" style={{ fontFamily: 'Sora, sans-serif' }}>\n            Isen√ß√£o de Responsabilidade e Riscos\n          </h1>\n        </div>\n\n        {/* Content */}\n        <div className=\"space-y-8 text-gray-300 leading-relaxed\">\n          <section>\n            <h2 className=\"text-2xl font-bold text-white mb-4\">1. Natureza do Servi√ßo</h2>\n            <p>\n              A <span className=\"text-[#33b864] font-semibold\">TRUE SIGNAL</span> √© uma plataforma estritamente <strong className=\"text-white\">informativa e estat√≠stica</strong>. N√ÉO somos uma casa de apostas. N√£o recebemos dep√≥sitos, n√£o custodiamos valores financeiros e n√£o pagamos pr√™mios.\n            </p>\n            <p className=\"mt-4\">\n              Nossa fun√ß√£o √© fornecer an√°lises esportivas baseadas em intelig√™ncia artificial e estat√≠sticas avan√ßadas para fins educacionais e informativos.\n            </p>\n          </section>\n\n          <section>\n            <h2 className=\"text-2xl font-bold text-white mb-4\">2. Risco Financeiro</h2>\n            <p>\n              <strong className=\"text-red-400\">ATEN√á√ÉO:</strong> Apostas esportivas envolvem <strong className=\"text-white\">alto risco de perda de capital</strong>. O desempenho passado dos nossos bilhetes (\"Greens\") <strong className=\"text-white\">n√£o garante resultados futuros</strong>.\n            </p>\n            <p className=\"mt-4\">\n              Nossas an√°lises s√£o baseadas em probabilidades estat√≠sticas e algoritmos preditivos, n√£o em certezas. Mesmo com alta assertividade hist√≥rica, <strong className=\"text-white\">perdas podem e v√£o ocorrer</strong>.\n            </p>\n            <div className=\"bg-red-950/20 border border-red-500/30 rounded-xl p-6 mt-4\">\n              <p className=\"text-red-300 font-semibold\">\n                ‚ö†Ô∏è Nunca aposte dinheiro que voc√™ n√£o pode perder. Apostas esportivas n√£o s√£o uma fonte de renda garantida.\n              </p>\n            </div>\n          </section>\n\n          <section>\n            <h2 className=\"text-2xl font-bold text-white mb-4\">3. Isen√ß√£o de Responsabilidade</h2>\n            <p>\n              O usu√°rio √© <strong className=\"text-white\">totalmente respons√°vel</strong> por suas decis√µes financeiras. A TRUE SIGNAL n√£o se responsabiliza por:\n            </p>\n            <ul className=\"list-disc list-inside space-y-2 mt-4 ml-4\">\n              <li>Perdas financeiras decorrentes do uso de nossas informa√ß√µes;</li>\n              <li>Decis√µes de apostas tomadas com base em nossos bilhetes;</li>\n              <li>Altera√ß√µes inesperadas em odds, jogos cancelados ou adiados;</li>\n              <li>Problemas t√©cnicos com casas de apostas de terceiros;</li>\n              <li>V√≠cios ou comportamentos compulsivos relacionados a apostas.</li>\n            </ul>\n          </section>\n\n          <section>\n            <h2 className=\"text-2xl font-bold text-white mb-4\">4. Jogo Respons√°vel</h2>\n            <p>\n              Apoiamos o <strong className=\"text-white\">Jogo Respons√°vel</strong>. Se voc√™ ou algu√©m que conhece tem problemas com jogos de azar, procure ajuda profissional:\n            </p>\n            <div className=\"bg-[#33b864]/10 border border-[#33b864]/30 rounded-xl p-6 mt-4\">\n              <p className=\"text-[#33b864] font-semibold mb-2\">Centro de Valoriza√ß√£o da Vida (CVV)</p>\n              <p className=\"text-gray-300\">Telefone: 188 (dispon√≠vel 24h)</p>\n              <p className=\"text-gray-300\">Site: <a href=\"https://www.cvv.org.br\" className=\"underline hover:text-[#33b864]\" target=\"_blank\" rel=\"noopener noreferrer\">www.cvv.org.br</a></p>\n            </div>\n          </section>\n\n          <section>\n            <h2 className=\"text-2xl font-bold text-white mb-4\">5. Proibi√ß√£o para Menores de Idade</h2>\n            <p>\n              A TRUE SIGNAL √© destinada exclusivamente a <strong className=\"text-white\">maiores de 18 anos</strong>. Apostas esportivas por menores de idade s√£o ilegais e estritamente proibidas.\n            </p>\n            <div className=\"flex items-center gap-4 mt-4 p-4 bg-yellow-500/10 border border-yellow-500/30 rounded-xl\">\n              <div className=\"text-6xl\">üîû</div>\n              <p className=\"text-yellow-200 font-semibold\">Proibido para menores de 18 anos</p>\n            </div>\n          </section>\n\n          <section>\n            <h2 className=\"text-2xl font-bold text-white mb-4\">6. Conformidade Legal</h2>\n            <p>\n              √â responsabilidade do usu√°rio verificar se as apostas esportivas s√£o legais em sua jurisdi√ß√£o. A TRUE SIGNAL n√£o encoraja atividades ilegais e n√£o se responsabiliza pelo uso indevido da plataforma.\n            </p>\n          </section>\n\n          <section>\n            <h2 className=\"text-2xl font-bold text-white mb-4\">7. Contato</h2>\n            <p className=\"mb-4\">\n              Em caso de d√∫vidas sobre este documento ou nossas pol√≠ticas, entre em contato:\n            </p>\n            <div className=\"bg-gray-800/50 border border-gray-700 rounded-xl p-6\">\n              <p className=\"text-gray-300 mb-2\"><strong className=\"text-white\">Site:</strong> <a href=\"https://www.truesignal.com.br\" className=\"text-[#33b864] underline\">www.truesignal.com.br</a></p>\n              <p className=\"text-gray-300 mb-2\"><strong className=\"text-white\">E-mail:</strong> <a href=\"mailto:suporte@truesignal.com.br\" className=\"text-[#33b864] underline\">suporte@truesignal.com.br</a></p>\n              <p className=\"text-gray-300\"><strong className=\"text-white\">WhatsApp:</strong> <a href=\"https://wa.me/5516993253866\" className=\"text-[#33b864] underline\">+55 16 99325-3866</a></p>\n            </div>\n          </section>\n\n          <section className=\"border-t border-gray-800 pt-8\">\n            <p className=\"text-sm text-gray-500 italic\">\n              √öltima atualiza√ß√£o: 28 de novembro de 2024\n            </p>\n            <p className=\"text-sm text-gray-500 mt-2\">\n              Ao usar a TRUE SIGNAL, voc√™ declara ter lido, compreendido e aceito todos os riscos descritos neste documento.\n            </p>\n          </section>\n        </div>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":7005,"size_tokens":null},"client/src/pages/terms.tsx":{"content":"import { Link } from 'wouter';\nimport { ArrowLeft, FileText } from 'lucide-react';\n\nexport default function TermsPage() {\n  return (\n    <div className=\"min-h-screen bg-[#0a0a0a] text-white font-sora\">\n      <div className=\"max-w-3xl mx-auto px-4 py-12\">\n        {/* Header */}\n        <Link href=\"/\">\n          <button className=\"flex items-center gap-2 text-gray-400 hover:text-[#33b864] transition-colors mb-8\" data-testid=\"button-back-home\">\n            <ArrowLeft className=\"w-5 h-5\" />\n            Voltar para Home\n          </button>\n        </Link>\n\n        {/* Title */}\n        <div className=\"flex items-center gap-4 mb-8\">\n          <div className=\"w-16 h-16 rounded-full bg-[#33b864]/10 border-2 border-[#33b864]/30 flex items-center justify-center\">\n            <FileText className=\"w-8 h-8 text-[#33b864]\" />\n          </div>\n          <h1 className=\"text-xl font-black\" style={{ fontFamily: 'Sora, sans-serif' }}>\n            Termos e Condi√ß√µes de Uso\n          </h1>\n        </div>\n\n        {/* Content */}\n        <div className=\"space-y-8 text-gray-300 leading-relaxed\">\n          <section>\n            <h2 className=\"text-2xl font-bold text-white mb-4\">1. Aceita√ß√£o dos Termos</h2>\n            <p>\n              Ao acessar e usar a plataforma <span className=\"text-[#33b864] font-semibold\">TRUE SIGNAL</span>, voc√™ concorda com estes Termos e Condi√ß√µes de Uso. Se voc√™ n√£o concordar, n√£o utilize nossos servi√ßos.\n            </p>\n          </section>\n\n          <section>\n            <h2 className=\"text-2xl font-bold text-white mb-4\">2. Descri√ß√£o do Servi√ßo</h2>\n            <p>\n              A TRUE SIGNAL fornece <strong className=\"text-white\">an√°lises esportivas estat√≠sticas</strong> baseadas em intelig√™ncia artificial atrav√©s de um dashboard online. Nossos servi√ßos incluem:\n            </p>\n            <ul className=\"list-disc list-inside space-y-2 mt-4 ml-4\">\n              <li>Bilhetes de apostas esportivas com an√°lises probabil√≠sticas;</li>\n              <li>Scanner de oportunidades em tempo real;</li>\n              <li>Dashboard de gest√£o de banca e ROI;</li>\n              <li>Acesso √† comunidade VIP de operadores;</li>\n              <li>Suporte t√©cnico priorit√°rio.</li>\n            </ul>\n          </section>\n\n          <section>\n            <h2 className=\"text-2xl font-bold text-white mb-4\">3. Per√≠odo de Teste (Trial)</h2>\n            <p>\n              Novos usu√°rios t√™m direito a <strong className=\"text-white\">5 dias de acesso gratuito</strong> a partir do cadastro. Durante o per√≠odo de teste:\n            </p>\n            <ul className=\"list-disc list-inside space-y-2 mt-4 ml-4\">\n              <li>Acesso limitado a <strong className=\"text-white\">1 bilhete por dia</strong> (bilhetes adicionais ficam bloqueados);</li>\n              <li>Dashboard completo com m√©tricas e estat√≠sticas;</li>\n              <li>Sem solicita√ß√£o de cart√£o de cr√©dito para ativa√ß√£o;</li>\n              <li>Cancelamento autom√°tico ao final do per√≠odo sem cobran√ßa.</li>\n            </ul>\n            <div className=\"bg-[#33b864]/10 border border-[#33b864]/30 rounded-xl p-6 mt-4\">\n              <p className=\"text-[#33b864] font-semibold\">\n                Ap√≥s os 5 dias, o acesso total requer assinatura do plano True Signal Prime (R$ 47,90/m√™s).\n              </p>\n            </div>\n          </section>\n\n          <section>\n            <h2 className=\"text-2xl font-bold text-white mb-4\">4. Assinatura e Pagamento</h2>\n            <p>\n              A assinatura <strong className=\"text-white\">True Signal Prime</strong> oferece acesso ilimitado a todos os bilhetes e recursos premium. Condi√ß√µes:\n            </p>\n            <ul className=\"list-disc list-inside space-y-2 mt-4 ml-4\">\n              <li>Cobran√ßa mensal recorrente de <strong className=\"text-white\">R$ 47,90</strong>;</li>\n              <li>Renova√ß√£o autom√°tica at√© cancelamento;</li>\n              <li>Garantia de reembolso de 7 dias (primeira assinatura);</li>\n              <li>Pagamento processado via gateway seguro (PCI DSS).</li>\n            </ul>\n          </section>\n\n          <section>\n            <h2 className=\"text-2xl font-bold text-white mb-4\">5. Cancelamento e Reembolso</h2>\n            <p>\n              O usu√°rio pode <strong className=\"text-white\">cancelar a assinatura a qualquer momento</strong> atrav√©s do painel de configura√ß√µes. Ap√≥s o cancelamento:\n            </p>\n            <ul className=\"list-disc list-inside space-y-2 mt-4 ml-4\">\n              <li>O acesso permanece ativo at√© o fim do ciclo pago;</li>\n              <li>N√£o haver√° cobran√ßa no pr√≥ximo ciclo;</li>\n              <li>Reembolso dispon√≠vel apenas nos <strong className=\"text-white\">primeiros 7 dias</strong> da primeira assinatura;</li>\n              <li>Cancelamentos ap√≥s 7 dias n√£o geram reembolso proporcional.</li>\n            </ul>\n          </section>\n\n          <section>\n            <h2 className=\"text-2xl font-bold text-white mb-4\">6. Proibi√ß√µes e Uso Adequado</h2>\n            <p>\n              √â <strong className=\"text-red-400\">estritamente proibido</strong>:\n            </p>\n            <ul className=\"list-disc list-inside space-y-2 mt-4 ml-4\">\n              <li>Revender, redistribuir ou compartilhar bilhetes em grupos de terceiros (Telegram, WhatsApp, etc.);</li>\n              <li>Utilizar m√∫ltiplas contas para acessar o per√≠odo de teste repetidamente;</li>\n              <li>Realizar engenharia reversa ou tentar acessar o c√≥digo-fonte da IA;</li>\n              <li>Usar bots, scripts ou automa√ß√µes n√£o autorizadas na plataforma;</li>\n              <li>Criar contas falsas ou fornecer informa√ß√µes fraudulentas.</li>\n            </ul>\n            <div className=\"bg-red-950/20 border border-red-500/30 rounded-xl p-6 mt-4\">\n              <p className=\"text-red-300 font-semibold\">\n                ‚ö†Ô∏è Viola√ß√µes podem resultar em bloqueio permanente da conta sem direito a reembolso.\n              </p>\n            </div>\n          </section>\n\n          <section>\n            <h2 className=\"text-2xl font-bold text-white mb-4\">7. Limita√ß√£o de Responsabilidade</h2>\n            <p>\n              A TRUE SIGNAL fornece informa√ß√µes estat√≠sticas, mas <strong className=\"text-white\">n√£o garante lucros</strong>. N√£o nos responsabilizamos por:\n            </p>\n            <ul className=\"list-disc list-inside space-y-2 mt-4 ml-4\">\n              <li>Perdas financeiras decorrentes de apostas;</li>\n              <li>Interrup√ß√µes tempor√°rias do servi√ßo por manuten√ß√£o;</li>\n              <li>Altera√ß√µes nas odds ou jogos cancelados pelas casas de apostas;</li>\n              <li>Incompatibilidade com navegadores ou dispositivos desatualizados.</li>\n            </ul>\n          </section>\n\n          <section>\n            <h2 className=\"text-2xl font-bold text-white mb-4\">8. Propriedade Intelectual</h2>\n            <p>\n              Todos os algoritmos, design, marca e conte√∫do da TRUE SIGNAL s√£o <strong className=\"text-white\">propriedade exclusiva</strong> da empresa. √â proibida qualquer reprodu√ß√£o sem autoriza√ß√£o pr√©via.\n            </p>\n          </section>\n\n          <section>\n            <h2 className=\"text-2xl font-bold text-white mb-4\">9. Modifica√ß√µes dos Termos</h2>\n            <p>\n              Reservamo-nos o direito de modificar estes Termos a qualquer momento. Altera√ß√µes significativas ser√£o comunicadas por e-mail com <strong className=\"text-white\">7 dias de anteced√™ncia</strong>.\n            </p>\n          </section>\n\n          <section>\n            <h2 className=\"text-2xl font-bold text-white mb-4\">10. Lei Aplic√°vel</h2>\n            <p>\n              Estes Termos s√£o regidos pelas leis da Rep√∫blica Federativa do Brasil. Quaisquer disputas ser√£o resolvidas no foro da comarca de <strong className=\"text-white\">S√£o Paulo/SP</strong>.\n            </p>\n          </section>\n\n          <section>\n            <h2 className=\"text-2xl font-bold text-white mb-4\">11. Contato</h2>\n            <p className=\"mb-4\">\n              Para d√∫vidas, sugest√µes ou reclama√ß√µes:\n            </p>\n            <div className=\"bg-gray-800/50 border border-gray-700 rounded-xl p-6\">\n              <p className=\"text-gray-300 mb-2\"><strong className=\"text-white\">Site:</strong> <a href=\"https://www.truesignal.com.br\" className=\"text-[#33b864] underline\">www.truesignal.com.br</a></p>\n              <p className=\"text-gray-300 mb-2\"><strong className=\"text-white\">E-mail:</strong> <a href=\"mailto:suporte@truesignal.com.br\" className=\"text-[#33b864] underline\">suporte@truesignal.com.br</a></p>\n              <p className=\"text-gray-300\"><strong className=\"text-white\">WhatsApp:</strong> <a href=\"https://wa.me/5516993253866\" className=\"text-[#33b864] underline\">+55 16 99325-3866</a></p>\n            </div>\n          </section>\n\n          <section className=\"border-t border-gray-800 pt-8\">\n            <p className=\"text-sm text-gray-500 italic\">\n              √öltima atualiza√ß√£o: 28 de novembro de 2024\n            </p>\n            <p className=\"text-sm text-gray-500 mt-2\">\n              Ao usar a TRUE SIGNAL, voc√™ declara ter lido e aceito integralmente estes Termos e Condi√ß√µes.\n            </p>\n          </section>\n        </div>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":9301,"size_tokens":null},"client/src/pages/privacy.tsx":{"content":"import { Link } from 'wouter';\nimport { ArrowLeft, Shield } from 'lucide-react';\n\nexport default function PrivacyPage() {\n  return (\n    <div className=\"min-h-screen bg-[#0a0a0a] text-white font-sora\">\n      <div className=\"max-w-3xl mx-auto px-4 py-12\">\n        {/* Header */}\n        <Link href=\"/\">\n          <button className=\"flex items-center gap-2 text-gray-400 hover:text-[#33b864] transition-colors mb-8\" data-testid=\"button-back-home\">\n            <ArrowLeft className=\"w-5 h-5\" />\n            Voltar para Home\n          </button>\n        </Link>\n\n        {/* Title */}\n        <div className=\"flex items-center gap-4 mb-8\">\n          <div className=\"w-16 h-16 rounded-full bg-blue-500/10 border-2 border-blue-500/30 flex items-center justify-center\">\n            <Shield className=\"w-8 h-8 text-blue-400\" />\n          </div>\n          <h1 className=\"text-xl font-black\" style={{ fontFamily: 'Sora, sans-serif' }}>\n            Pol√≠tica de Privacidade\n          </h1>\n        </div>\n\n        {/* LGPD Badge */}\n        <div className=\"bg-blue-950/20 border border-blue-500/30 rounded-xl p-6 mb-8\">\n          <p className=\"text-blue-300 font-semibold text-center\">\n            üîí Comprometimento com a Lei Geral de Prote√ß√£o de Dados (Lei 13.709/2018 - LGPD)\n          </p>\n        </div>\n\n        {/* Content */}\n        <div className=\"space-y-8 text-gray-300 leading-relaxed\">\n          <section>\n            <h2 className=\"text-2xl font-bold text-white mb-4\">1. Introdu√ß√£o</h2>\n            <p>\n              A <span className=\"text-[#33b864] font-semibold\">TRUE SIGNAL</span> valoriza e respeita a privacidade de seus usu√°rios. Esta Pol√≠tica de Privacidade descreve como coletamos, usamos, armazenamos e protegemos seus dados pessoais, em conformidade com a <strong className=\"text-white\">LGPD</strong>.\n            </p>\n          </section>\n\n          <section>\n            <h2 className=\"text-2xl font-bold text-white mb-4\">2. Dados Coletados</h2>\n            <p>\n              Coletamos apenas os dados <strong className=\"text-white\">estritamente necess√°rios</strong> para o funcionamento do servi√ßo:\n            </p>\n            <ul className=\"list-disc list-inside space-y-2 mt-4 ml-4\">\n              <li><strong className=\"text-white\">Nome completo:</strong> Para personaliza√ß√£o da experi√™ncia;</li>\n              <li><strong className=\"text-white\">E-mail:</strong> Para acesso √† plataforma, comunica√ß√£o e recupera√ß√£o de senha;</li>\n              <li><strong className=\"text-white\">Telefone (opcional):</strong> Para notifica√ß√µes via WhatsApp (apenas se autorizado);</li>\n              <li><strong className=\"text-white\">Dados de navega√ß√£o:</strong> IP, navegador, dispositivo (para seguran√ßa e analytics);</li>\n              <li><strong className=\"text-white\">Dados de pagamento:</strong> Processados por gateways terceiros (n√£o armazenamos dados de cart√£o).</li>\n            </ul>\n          </section>\n\n          <section>\n            <h2 className=\"text-2xl font-bold text-white mb-4\">3. Finalidade do Uso dos Dados</h2>\n            <p>\n              Utilizamos seus dados pessoais exclusivamente para:\n            </p>\n            <ul className=\"list-disc list-inside space-y-2 mt-4 ml-4\">\n              <li>Gest√£o de acesso e autentica√ß√£o na plataforma;</li>\n              <li>Envio de bilhetes esportivos e notifica√ß√µes de sinais;</li>\n              <li>Processamento de pagamentos e gest√£o de assinaturas;</li>\n              <li>Comunica√ß√£o sobre atualiza√ß√µes do servi√ßo;</li>\n              <li>An√°lise de performance e melhorias na plataforma;</li>\n              <li>Cumprimento de obriga√ß√µes legais e fiscais.</li>\n            </ul>\n          </section>\n\n          <section>\n            <h2 className=\"text-2xl font-bold text-white mb-4\">4. Compartilhamento de Dados</h2>\n            <p>\n              <strong className=\"text-white\">N√£o vendemos seus dados para terceiros.</strong> Seus dados podem ser compartilhados apenas com:\n            </p>\n            <ul className=\"list-disc list-inside space-y-2 mt-4 ml-4\">\n              <li><strong className=\"text-white\">Provedores de infraestrutura:</strong> Supabase (banco de dados), AWS (hospedagem);</li>\n              <li><strong className=\"text-white\">Processadores de pagamento:</strong> Stripe, Mercado Pago (conforme escolha do usu√°rio);</li>\n              <li><strong className=\"text-white\">Autoridades legais:</strong> Quando exigido por lei ou ordem judicial.</li>\n            </ul>\n            <div className=\"bg-[#33b864]/10 border border-[#33b864]/30 rounded-xl p-6 mt-4\">\n              <p className=\"text-[#33b864] font-semibold\">\n                Todos os parceiros assinam Acordo de Processamento de Dados (DPA) e seguem padr√µes de seguran√ßa internacionais.\n              </p>\n            </div>\n          </section>\n\n          <section>\n            <h2 className=\"text-2xl font-bold text-white mb-4\">5. Seguran√ßa dos Dados</h2>\n            <p>\n              Adotamos medidas t√©cnicas e organizacionais para proteger seus dados:\n            </p>\n            <ul className=\"list-disc list-inside space-y-2 mt-4 ml-4\">\n              <li><strong className=\"text-white\">Criptografia SSL/TLS:</strong> Todas as transmiss√µes s√£o criptografadas;</li>\n              <li><strong className=\"text-white\">Armazenamento seguro:</strong> Servidores certificados com backup di√°rio;</li>\n              <li><strong className=\"text-white\">Controle de acesso:</strong> Apenas funcion√°rios autorizados t√™m acesso aos dados;</li>\n              <li><strong className=\"text-white\">Autentica√ß√£o forte:</strong> Senhas hasheadas com bcrypt (n√£o revers√≠vel);</li>\n              <li><strong className=\"text-white\">Monitoramento 24/7:</strong> Detec√ß√£o de atividades suspeitas e ataques.</li>\n            </ul>\n          </section>\n\n          <section>\n            <h2 className=\"text-2xl font-bold text-white mb-4\">6. Cookies e Tecnologias Similares</h2>\n            <p>\n              Utilizamos <strong className=\"text-white\">cookies essenciais</strong> para:\n            </p>\n            <ul className=\"list-disc list-inside space-y-2 mt-4 ml-4\">\n              <li>Manter sua sess√£o de login ativa;</li>\n              <li>Lembrar suas prefer√™ncias de idioma e configura√ß√µes;</li>\n              <li>An√°lise de tr√°fego e performance (Google Analytics - anonimizado).</li>\n            </ul>\n            <p className=\"mt-4\">\n              Voc√™ pode desabilitar cookies nas configura√ß√µes do navegador, mas isso pode afetar a funcionalidade da plataforma.\n            </p>\n          </section>\n\n          <section>\n            <h2 className=\"text-2xl font-bold text-white mb-4\">7. Seus Direitos (LGPD)</h2>\n            <p>\n              Voc√™ possui os seguintes <strong className=\"text-white\">direitos sobre seus dados</strong>:\n            </p>\n            <ul className=\"list-disc list-inside space-y-2 mt-4 ml-4\">\n              <li><strong className=\"text-white\">Acesso:</strong> Solicitar c√≥pia dos dados que possu√≠mos sobre voc√™;</li>\n              <li><strong className=\"text-white\">Corre√ß√£o:</strong> Atualizar dados incorretos ou incompletos;</li>\n              <li><strong className=\"text-white\">Exclus√£o:</strong> Solicitar a remo√ß√£o de seus dados (sujeito a obriga√ß√µes legais);</li>\n              <li><strong className=\"text-white\">Portabilidade:</strong> Exportar seus dados em formato estruturado;</li>\n              <li><strong className=\"text-white\">Revoga√ß√£o de consentimento:</strong> Retirar permiss√£o para uso de dados opcionais;</li>\n              <li><strong className=\"text-white\">Oposi√ß√£o:</strong> Contestar o uso de dados para determinadas finalidades.</li>\n            </ul>\n            <div className=\"bg-blue-950/20 border border-blue-500/30 rounded-xl p-6 mt-4\">\n              <p className=\"text-blue-300 font-semibold mb-2\">Para exercer seus direitos, entre em contato:</p>\n              <p className=\"text-gray-300\">E-mail: <a href=\"mailto:suporte@truesignal.com.br\" className=\"text-[#33b864] underline hover:text-[#2ea558]\">suporte@truesignal.com.br</a></p>\n              <p className=\"text-gray-300\">WhatsApp: <a href=\"https://wa.me/5516993253866\" className=\"text-[#33b864] underline hover:text-[#2ea558]\">+55 16 99325-3866</a></p>\n              <p className=\"text-gray-300\">Prazo de resposta: <strong className=\"text-white\">15 dias √∫teis</strong></p>\n            </div>\n          </section>\n\n          <section>\n            <h2 className=\"text-2xl font-bold text-white mb-4\">8. Reten√ß√£o de Dados</h2>\n            <p>\n              Mantemos seus dados pessoais pelo tempo necess√°rio para:\n            </p>\n            <ul className=\"list-disc list-inside space-y-2 mt-4 ml-4\">\n              <li>Prestar os servi√ßos contratados;</li>\n              <li>Cumprir obriga√ß√µes legais (cont√°beis, fiscais) - <strong className=\"text-white\">5 anos</strong>;</li>\n              <li>Dados de usu√°rios inativos por mais de <strong className=\"text-white\">2 anos</strong> s√£o exclu√≠dos automaticamente.</li>\n            </ul>\n          </section>\n\n          <section>\n            <h2 className=\"text-2xl font-bold text-white mb-4\">9. Transfer√™ncia Internacional de Dados</h2>\n            <p>\n              Alguns dados podem ser armazenados em servidores localizados fora do Brasil (AWS US-East, Supabase). Garantimos que:\n            </p>\n            <ul className=\"list-disc list-inside space-y-2 mt-4 ml-4\">\n              <li>Todos os provedores atendem padr√µes internacionais de seguran√ßa (SOC 2, ISO 27001);</li>\n              <li>Transfer√™ncias seguem cl√°usulas contratuais padr√£o aprovadas pela LGPD;</li>\n              <li>Voc√™ pode solicitar armazenamento exclusivo em servidores brasileiros (plano Enterprise).</li>\n            </ul>\n          </section>\n\n          <section>\n            <h2 className=\"text-2xl font-bold text-white mb-4\">10. Menores de Idade</h2>\n            <p>\n              A TRUE SIGNAL n√£o √© destinada a menores de <strong className=\"text-white\">18 anos</strong>. N√£o coletamos intencionalmente dados de menores. Se identificarmos uso por menores, a conta ser√° bloqueada imediatamente.\n            </p>\n          </section>\n\n          <section>\n            <h2 className=\"text-2xl font-bold text-white mb-4\">11. Altera√ß√µes nesta Pol√≠tica</h2>\n            <p>\n              Podemos atualizar esta Pol√≠tica periodicamente. Altera√ß√µes significativas ser√£o comunicadas por e-mail com <strong className=\"text-white\">30 dias de anteced√™ncia</strong>. Recomendamos revisar esta p√°gina regularmente.\n            </p>\n          </section>\n\n          <section>\n            <h2 className=\"text-2xl font-bold text-white mb-4\">12. Contato</h2>\n            <div className=\"bg-gray-800/50 border border-gray-700 rounded-xl p-6\">\n              <p className=\"text-gray-300 mb-2\"><strong className=\"text-white\">Site:</strong> <a href=\"https://www.truesignal.com.br\" className=\"text-[#33b864] underline\">www.truesignal.com.br</a></p>\n              <p className=\"text-gray-300 mb-2\"><strong className=\"text-white\">E-mail:</strong> <a href=\"mailto:suporte@truesignal.com.br\" className=\"text-[#33b864] underline\">suporte@truesignal.com.br</a></p>\n              <p className=\"text-gray-300\"><strong className=\"text-white\">WhatsApp:</strong> <a href=\"https://wa.me/5516993253866\" className=\"text-[#33b864] underline\">+55 16 99325-3866</a></p>\n            </div>\n          </section>\n\n          <section className=\"border-t border-gray-800 pt-8\">\n            <p className=\"text-sm text-gray-500 italic\">\n              √öltima atualiza√ß√£o: 28 de novembro de 2024\n            </p>\n            <p className=\"text-sm text-gray-500 mt-2\">\n              Ao usar a TRUE SIGNAL, voc√™ declara ter lido e aceito esta Pol√≠tica de Privacidade.\n            </p>\n          </section>\n        </div>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":11918,"size_tokens":null},"client/src/pages/pricing.tsx":{"content":"import { motion } from 'framer-motion';\nimport { Check, X, Sparkles, Clock, Zap, Crown, ArrowRight } from 'lucide-react';\nimport { Link, useLocation } from 'wouter';\nimport { useAuth } from '@/hooks/use-auth';\nimport { useAccessControl } from '@/hooks/use-access-control';\n\nconst CHECKOUT_URL = '/checkout';\n\nexport default function PricingPage() {\n  const { user } = useAuth();\n  const { daysRemaining, isTrial, isPremium } = useAccessControl();\n  const [, setLocation] = useLocation();\n\n  const trialFeatures = [\n    { text: 'Acesso por 5 dias', included: true },\n    { text: 'Apenas 1 sinal por dia', included: true, highlight: true },\n    { text: 'Recursos limitados', included: true },\n  ];\n\n  const primeFeatures = [\n    { text: 'Acesso ilimitado', included: true },\n    { text: 'Sinais ilimitados no dia', included: true, highlight: true },\n    { text: 'Alertas push em tempo real', included: true },\n    { text: 'IA sempre atualizada', included: true },\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-black via-[#0a0a0a] to-[#121212] text-white\">\n      {/* Header */}\n      <div className=\"border-b border-[#33b864]/20 bg-black/50 backdrop-blur-xl sticky top-0 z-50\">\n        <div className=\"max-w-7xl mx-auto px-4 py-4 flex items-center justify-between\">\n          <Link href={user ? \"/app\" : \"/\"}>\n            <button className=\"flex items-center gap-2 text-[#33b864] hover:text-[#2ea558] transition-colors\">\n              <ArrowRight className=\"w-5 h-5 rotate-180\" />\n              <span className=\"font-bold\">Voltar</span>\n            </button>\n          </Link>\n          <h1 className=\"text-2xl font-black text-white tracking-[0.15em]\" style={{ fontFamily: 'Sora, sans-serif' }}>\n            TRUE SIGNAL\n          </h1>\n          <div className=\"w-20\" />\n        </div>\n      </div>\n\n      {/* Hero Section */}\n      <div className=\"max-w-7xl mx-auto px-4 py-16 text-center\">\n        <motion.div\n          initial={{ opacity: 0, y: 30 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.6 }}\n        >\n          <div className=\"inline-flex items-center gap-2 px-4 py-2 bg-[#33b864]/10 border border-[#33b864]/30 rounded-full mb-6\">\n            <Sparkles className=\"w-4 h-4 text-[#33b864]\" />\n            <span className=\"text-sm font-bold text-[#33b864]\">Planos e Pre√ßos</span>\n          </div>\n          \n          <h1 className=\"text-4xl md:text-5xl lg:text-6xl font-black text-white mb-6\" style={{ fontFamily: 'Sora, sans-serif' }}>\n            Escolha seu{' '}\n            <span className=\"text-transparent bg-clip-text bg-gradient-to-r from-[#33b864] to-[#2ea558]\">\n              plano ideal\n            </span>\n          </h1>\n          \n          <p className=\"text-xl text-gray-400 max-w-2xl mx-auto mb-8\">\n            Comece com 5 dias gratuitos e descubra o poder da intelig√™ncia artificial aplicada √†s apostas esportivas\n          </p>\n\n          {isTrial && (\n            <div className=\"inline-flex items-center gap-2 px-4 py-2 bg-yellow-600/10 border border-yellow-600/30 rounded-lg\">\n              <Clock className=\"w-4 h-4 text-yellow-500\" />\n              <span className=\"text-sm text-yellow-500\">\n                Voc√™ tem <strong>{daysRemaining} dias</strong> restantes no per√≠odo gratuito\n              </span>\n            </div>\n          )}\n\n          {isPremium && (\n            <div className=\"inline-flex items-center gap-2 px-4 py-2 bg-[#33b864]/10 border border-[#33b864]/30 rounded-lg\">\n              <Crown className=\"w-4 h-4 text-[#33b864]\" />\n              <span className=\"text-sm text-[#33b864] font-bold\">\n                Voc√™ j√° √© True Signal Prime! üéâ\n              </span>\n            </div>\n          )}\n        </motion.div>\n      </div>\n\n      {/* Pricing Cards */}\n      <div className=\"max-w-7xl mx-auto px-4 pb-20\">\n        <div className=\"grid md:grid-cols-2 gap-8 max-w-5xl mx-auto\">\n          \n          {/* Trial Card */}\n          <motion.div\n            initial={{ opacity: 0, x: -50 }}\n            animate={{ opacity: 1, x: 0 }}\n            transition={{ duration: 0.6, delay: 0.2 }}\n            className=\"relative group\"\n          >\n            <div className=\"absolute inset-0 bg-gradient-to-br from-gray-600/20 to-gray-800/20 rounded-3xl blur-xl opacity-50\" />\n            \n            <div className=\"relative bg-gradient-to-br from-white/5 to-black/50 backdrop-blur-xl border border-white/10 rounded-3xl p-8 h-full\">\n              <div className=\"flex items-center gap-3 mb-6\">\n                <div className=\"w-12 h-12 rounded-full bg-gray-600/20 flex items-center justify-center\">\n                  <Zap className=\"w-6 h-6 text-gray-400\" />\n                </div>\n                <div>\n                  <h3 className=\"text-2xl font-black text-white\" style={{ fontFamily: 'Sora, sans-serif' }}>\n                    Per√≠odo Gratuito\n                  </h3>\n                  <p className=\"text-sm text-gray-400\">Experimente sem compromisso</p>\n                </div>\n              </div>\n\n              <div className=\"mb-8\">\n                <div className=\"flex items-baseline gap-2\">\n                  <span className=\"text-5xl font-black text-white\">R$ 0</span>\n                  <span className=\"text-gray-400\">/5 dias</span>\n                </div>\n                <p className=\"text-sm text-gray-500 mt-2\">Sem cart√£o de cr√©dito necess√°rio</p>\n              </div>\n\n              <ul className=\"space-y-3 mb-8\">\n                {trialFeatures.map((feature, i) => (\n                  <li key={i} className=\"flex items-start gap-3\">\n                    {feature.included ? (\n                      <Check className={`w-5 h-5 flex-shrink-0 mt-0.5 ${feature.highlight ? 'text-yellow-500' : 'text-gray-400'}`} />\n                    ) : (\n                      <X className=\"w-5 h-5 text-gray-600 flex-shrink-0 mt-0.5\" />\n                    )}\n                    <span className={`text-sm ${feature.included ? (feature.highlight ? 'text-yellow-500 font-semibold' : 'text-gray-300') : 'text-gray-600 line-through'}`}>\n                      {feature.text}\n                    </span>\n                  </li>\n                ))}\n              </ul>\n\n              {!user && (\n                <Link href=\"/auth\">\n                  <button className=\"w-full py-4 bg-white/10 hover:bg-white/20 border border-white/20 text-white font-bold rounded-xl transition-all\">\n                    Come√ßar Gr√°tis\n                  </button>\n                </Link>\n              )}\n\n              {user && isTrial && (\n                <div className=\"py-4 bg-[#33b864]/5 border border-[#33b864]/20 text-[#33b864] font-bold rounded-xl text-center\">\n                  Plano Atual\n                </div>\n              )}\n            </div>\n          </motion.div>\n\n          {/* True Signal Prime Card */}\n          <motion.div\n            initial={{ opacity: 0, x: 50 }}\n            animate={{ opacity: 1, x: 0 }}\n            transition={{ duration: 0.6, delay: 0.3 }}\n            className=\"relative group\"\n          >\n            {/* Popular Badge */}\n            <div className=\"absolute -top-4 left-1/2 -translate-x-1/2 z-10\">\n              <div className=\"px-6 py-2 bg-gradient-to-r from-[#33b864] to-[#2ea558] rounded-full text-black font-black text-sm shadow-xl shadow-[#33b864]/50\">\n                MAIS POPULAR\n              </div>\n            </div>\n\n            <div className=\"absolute inset-0 bg-gradient-to-br from-[#33b864]/30 to-[#2ea558]/20 rounded-3xl blur-xl opacity-60 group-hover:opacity-90 transition-opacity\" />\n            \n            <div className=\"relative bg-gradient-to-br from-[#33b864]/10 via-[#0a0a0a] to-black border-2 border-[#33b864]/30 rounded-3xl p-8 h-full\">\n              <div className=\"flex items-center gap-3 mb-6\">\n                <div className=\"w-12 h-12 rounded-full bg-[#33b864]/30 flex items-center justify-center\">\n                  <Crown className=\"w-6 h-6 text-[#33b864]\" />\n                </div>\n                <div>\n                  <h3 className=\"text-2xl font-black text-white\" style={{ fontFamily: 'Sora, sans-serif' }}>\n                    True Signal Prime\n                  </h3>\n                  <p className=\"text-sm text-[#33b864]\">Acesso completo ilimitado</p>\n                </div>\n              </div>\n\n              <div className=\"mb-8\">\n                <div className=\"flex items-center gap-3 mb-2\">\n                  <span className=\"text-xl text-gray-500 line-through\">R$ 99,87</span>\n                  <span className=\"px-2 py-1 bg-red-500/20 text-red-400 text-xs font-bold rounded animate-pulse\">BLACK FRIDAY -52%</span>\n                </div>\n                <div className=\"flex items-baseline gap-2\">\n                  <span className=\"text-5xl font-black text-[#33b864]\">R$ 47,90</span>\n                  <span className=\"text-gray-400\">/m√™s</span>\n                </div>\n                <p className=\"text-sm text-gray-500 mt-2\">Cancele quando quiser, sem multas</p>\n              </div>\n\n              <ul className=\"space-y-3 mb-8\">\n                {primeFeatures.map((feature, i) => (\n                  <li key={i} className=\"flex items-start gap-3\">\n                    <Check className={`w-5 h-5 flex-shrink-0 mt-0.5 ${feature.highlight ? 'text-[#33b864]' : 'text-[#33b864]/70'}`} />\n                    <span className={`text-sm ${feature.highlight ? 'text-[#33b864] font-semibold' : 'text-gray-300'}`}>\n                      {feature.text}\n                    </span>\n                  </li>\n                ))}\n              </ul>\n\n              {isPremium ? (\n                <div className=\"py-4 bg-[#33b864]/10 border border-[#33b864]/30 text-[#33b864] font-bold rounded-xl text-center\">\n                  ‚úì Plano Ativo\n                </div>\n              ) : (\n                <a\n                  href={CHECKOUT_URL}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className=\"block\"\n                >\n                  <button className=\"w-full py-4 bg-[#33b864] hover:bg-[#2ea558] text-black font-black rounded-xl transition-all shadow-xl shadow-[#33b864]/50 hover:shadow-[#33b864]/70 flex items-center justify-center gap-2 group\">\n                    <Sparkles className=\"w-5 h-5 group-hover:rotate-12 transition-transform\" />\n                    Assinar True Signal Prime\n                    <ArrowRight className=\"w-5 h-5 group-hover:translate-x-1 transition-transform\" />\n                  </button>\n                </a>\n              )}\n\n              <p className=\"text-xs text-center text-gray-500 mt-4\">\n                Garantia de reembolso de 5 dias\n              </p>\n            </div>\n          </motion.div>\n\n        </div>\n\n        {/* FAQ / Additional Info */}\n        <motion.div\n          initial={{ opacity: 0, y: 30 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.6, delay: 0.5 }}\n          className=\"mt-16 max-w-3xl mx-auto text-center\"\n        >\n          <div className=\"p-6 bg-white/5 border border-white/10 rounded-2xl\">\n            <h3 className=\"text-xl font-bold text-white mb-4\">üí° Perguntas Frequentes</h3>\n            <div className=\"space-y-4 text-left\">\n              <div>\n                <p className=\"text-sm font-semibold text-[#33b864] mb-1\">O que acontece ap√≥s o per√≠odo gratuito?</p>\n                <p className=\"text-sm text-gray-400\">\n                  Ap√≥s 5 dias, seu acesso ser√° bloqueado. Voc√™ pode assinar o True Signal Prime a qualquer momento para continuar.\n                </p>\n              </div>\n              <div>\n                <p className=\"text-sm font-semibold text-[#33b864] mb-1\">Posso cancelar a qualquer momento?</p>\n                <p className=\"text-sm text-gray-400\">\n                  Sim! N√£o h√° per√≠odo m√≠nimo de contrato. Cancele quando quiser, sem multas ou taxas adicionais.\n                </p>\n              </div>\n              <div>\n                <p className=\"text-sm font-semibold text-[#33b864] mb-1\">Como funciona a garantia de reembolso?</p>\n                <p className=\"text-sm text-gray-400\">\n                  Se n√£o ficar satisfeito com a plataforma nos primeiros 5 dias, devolvemos 100% do seu investimento.\n                </p>\n              </div>\n            </div>\n          </div>\n        </motion.div>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":12346,"size_tokens":null},"client/src/components/install-app-banner.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Smartphone, Download, X, ChevronDown, ChevronUp } from \"lucide-react\";\nimport { useLanguage } from \"@/hooks/use-language\";\n\ninterface BeforeInstallPromptEvent extends Event {\n  prompt(): Promise<void>;\n  userChoice: Promise<{ outcome: 'accepted' | 'dismissed' }>;\n}\n\nexport function InstallAppBanner() {\n  const { t } = useLanguage();\n  const [deferredPrompt, setDeferredPrompt] = useState<BeforeInstallPromptEvent | null>(null);\n  const [isIOS, setIsIOS] = useState(false);\n  const [isAndroid, setIsAndroid] = useState(false);\n  const [showBanner, setShowBanner] = useState(false);\n  const [isInstalled, setIsInstalled] = useState(false);\n  const [showIOSInstructions, setShowIOSInstructions] = useState(false);\n  const [showAndroidInstructions, setShowAndroidInstructions] = useState(false);\n\n  useEffect(() => {\n    // Detect platform\n    const userAgent = window.navigator.userAgent.toLowerCase();\n    const isIOSDevice = /iphone|ipad|ipod/.test(userAgent);\n    const isAndroidDevice = /android/.test(userAgent);\n    const isInStandaloneMode = window.matchMedia('(display-mode: standalone)').matches;\n\n    console.log('üì± [Install Banner] User Agent:', userAgent);\n    console.log('üì± [Install Banner] iOS:', isIOSDevice, '| Android:', isAndroidDevice, '| Standalone:', isInStandaloneMode);\n\n    setIsIOS(isIOSDevice);\n    setIsAndroid(isAndroidDevice);\n    setIsInstalled(isInStandaloneMode);\n\n    // ALWAYS show banner for testing (remove this condition in production)\n    // Production: if (!isInStandaloneMode && (isIOSDevice || isAndroidDevice))\n    setShowBanner(true);\n    console.log('üì± [Install Banner] Banner visible:', true);\n\n    // Listen for beforeinstallprompt event (Android/Chrome)\n    const handleBeforeInstallPrompt = (e: Event) => {\n      e.preventDefault();\n      setDeferredPrompt(e as BeforeInstallPromptEvent);\n      setShowBanner(true);\n    };\n\n    window.addEventListener('beforeinstallprompt', handleBeforeInstallPrompt);\n\n    return () => {\n      window.removeEventListener('beforeinstallprompt', handleBeforeInstallPrompt);\n    };\n  }, []);\n\n  const handleInstallClick = async () => {\n    if (!deferredPrompt) {\n      // For iOS or if prompt is not available, show instructions\n      if (isIOS) {\n        setShowIOSInstructions(!showIOSInstructions);\n      } else if (isAndroid) {\n        setShowAndroidInstructions(!showAndroidInstructions);\n      }\n      return;\n    }\n\n    // Android/Chrome - trigger native install prompt\n    deferredPrompt.prompt();\n    const { outcome } = await deferredPrompt.userChoice;\n    \n    if (outcome === 'accepted') {\n      setShowBanner(false);\n    }\n    \n    setDeferredPrompt(null);\n  };\n\n  const handleDismiss = () => {\n    setShowBanner(false);\n    // Remember dismissal in localStorage (optional - expires in 7 days)\n    localStorage.setItem('pwa_banner_dismissed', Date.now().toString());\n  };\n\n  // Temporarily disabled check for testing - always show banner\n  // Production: if (!showBanner || isInstalled) return null;\n  if (!showBanner) {\n    return null;\n  }\n\n  return (\n    <div className=\"bg-gradient-to-r from-[#121212] to-[#0a0a0a] border border-[#33b864]/20 rounded-2xl p-5 shadow-lg shadow-[#33b864]/5 relative overflow-hidden\">\n      {/* Decorative gradient */}\n      <div className=\"absolute top-0 left-0 w-1 h-full bg-[#33b864]\"></div>\n      \n      {/* Close button */}\n      <button\n        onClick={handleDismiss}\n        className=\"absolute top-3 right-3 w-7 h-7 rounded-lg bg-white/5 hover:bg-white/10 flex items-center justify-center transition-colors\"\n        data-testid=\"button-dismiss-install\"\n      >\n        <X className=\"w-4 h-4 text-gray-400\" />\n      </button>\n\n      {/* Header */}\n      <div className=\"flex items-start gap-4 mb-3\">\n        <div className=\"w-12 h-12 rounded-xl bg-[#33b864]/10 border border-[#33b864]/20 flex items-center justify-center flex-shrink-0\">\n          <Smartphone className=\"w-6 h-6 text-[#33b864]\" />\n        </div>\n        <div className=\"flex-1\">\n          <h3 className=\"text-lg font-sora font-bold text-white mb-1\">\n            Adicione √† tela inicial!\n          </h3>\n          <p className=\"text-sm text-gray-300\">\n            Acesse a TRUE SIGNAL mais r√°pido, como se fosse um aplicativo nativo.\n            {isIOS && \" Dispon√≠vel no Safari.\"}\n            {isAndroid && \" Instala√ß√£o em um toque.\"}\n            {!isIOS && !isAndroid && \" Acesse do celular para instalar.\"}\n          </p>\n        </div>\n      </div>\n\n      {/* Install Button */}\n      <button\n        onClick={handleInstallClick}\n        className=\"w-full mt-4 px-5 py-3 bg-[#33b864] hover:bg-[#2da055] text-black font-bold rounded-xl transition-all duration-200 flex items-center justify-center gap-2 shadow-lg shadow-[#33b864]/20\"\n        data-testid=\"button-install-app\"\n      >\n        <Download className=\"w-5 h-5\" />\n        {isIOS ? \"Ver instru√ß√µes\" : \"Adicionar √† tela inicial\"}\n        {isIOS && (\n          showIOSInstructions ? <ChevronUp className=\"w-4 h-4\" /> : <ChevronDown className=\"w-4 h-4\" />\n        )}\n      </button>\n\n      {/* iOS Instructions */}\n      {isIOS && showIOSInstructions && (\n        <div className=\"mt-4 pt-4 border-t border-white/10 animate-in fade-in slide-in-from-top-2 duration-200\">\n          <p className=\"text-xs font-bold text-[#33b864] mb-3 uppercase tracking-wider\">\n            Passo a passo para iOS\n          </p>\n          <ol className=\"space-y-2 text-sm text-gray-300\">\n            <li className=\"flex items-start gap-2\">\n              <span className=\"font-bold text-[#33b864] flex-shrink-0\">1.</span>\n              <span>Toque no bot√£o <strong>Compartilhar</strong> (√≠cone quadrado com seta para cima) na parte inferior do Safari</span>\n            </li>\n            <li className=\"flex items-start gap-2\">\n              <span className=\"font-bold text-[#33b864] flex-shrink-0\">2.</span>\n              <span>Role para baixo e selecione <strong>\"Adicionar √† Tela Inicial\"</strong></span>\n            </li>\n            <li className=\"flex items-start gap-2\">\n              <span className=\"font-bold text-[#33b864] flex-shrink-0\">3.</span>\n              <span>Toque em <strong>\"Adicionar\"</strong>. O √≠cone da TRUE SIGNAL aparecer√° na sua tela inicial!</span>\n            </li>\n          </ol>\n        </div>\n      )}\n\n      {/* Android Instructions (fallback if prompt not available) */}\n      {isAndroid && showAndroidInstructions && !deferredPrompt && (\n        <div className=\"mt-4 pt-4 border-t border-white/10 animate-in fade-in slide-in-from-top-2 duration-200\">\n          <p className=\"text-xs font-bold text-[#33b864] mb-3 uppercase tracking-wider\">\n            Passo a passo para Android\n          </p>\n          <ol className=\"space-y-2 text-sm text-gray-300\">\n            <li className=\"flex items-start gap-2\">\n              <span className=\"font-bold text-[#33b864] flex-shrink-0\">1.</span>\n              <span>Toque no menu (tr√™s pontos) no canto superior direito do navegador</span>\n            </li>\n            <li className=\"flex items-start gap-2\">\n              <span className=\"font-bold text-[#33b864] flex-shrink-0\">2.</span>\n              <span>Selecione <strong>\"Adicionar √† tela inicial\"</strong> ou <strong>\"Instalar aplicativo\"</strong></span>\n            </li>\n            <li className=\"flex items-start gap-2\">\n              <span className=\"font-bold text-[#33b864] flex-shrink-0\">3.</span>\n              <span>Confirme tocando em <strong>\"Adicionar\"</strong>. Pronto!</span>\n            </li>\n          </ol>\n        </div>\n      )}\n    </div>\n  );\n}\n","path":null,"size_bytes":7618,"size_tokens":null},"client/src/pages/checkout.tsx":{"content":"import { Layout } from \"@/components/layout\";\nimport React, { useState, useEffect, useCallback, useMemo, memo } from \"react\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { useLanguage } from \"@/hooks/use-language\";\nimport { CreditCard, Check, Sparkles, Shield, Zap, TrendingUp, Clock, Gift, Lock, Users, Star, CheckCircle2, AlertCircle, User, Mail, Phone, FileText, QrCode, Copy, Loader2, RefreshCw } from \"lucide-react\";\nimport { useAccessControl } from \"@/hooks/use-access-control\";\nimport { toast } from \"sonner\";\nimport axios from \"axios\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { initMercadoPago, CardPayment } from '@mercadopago/sdk-react';\nimport { analytics, fbPixel, ga4 } from \"@/lib/analytics\";\nimport { Logo } from \"@/components/logo\";\nimport { PaymentMethods } from \"@/components/PaymentMethods\";\n\n// Isolated CardPayment component using refs to prevent re-renders\nconst CardPaymentWrapper = memo(function CardPaymentWrapper({\n  onPaymentSubmit,\n  onPaymentError,\n}: {\n  onPaymentSubmit: (formData: any) => Promise<void>;\n  onPaymentError: (error: any) => void;\n}) {\n  const [isMounted, setIsMounted] = React.useState(false);\n  const readyRef = React.useRef(false);\n  const submitRef = React.useRef(onPaymentSubmit);\n  const errorRef = React.useRef(onPaymentError);\n  \n  // Delay mounting to ensure DOM is ready\n  React.useEffect(() => {\n    const timer = setTimeout(() => {\n      setIsMounted(true);\n    }, 100);\n    return () => clearTimeout(timer);\n  }, []);\n  \n  // Update refs on prop changes without causing re-render\n  React.useEffect(() => {\n    submitRef.current = onPaymentSubmit;\n    errorRef.current = onPaymentError;\n  }, [onPaymentSubmit, onPaymentError]);\n\n  const handleReady = React.useCallback(() => {\n    if (!readyRef.current) {\n      console.log('Card payment form ready');\n      readyRef.current = true;\n    }\n  }, []);\n\n  const handleSubmit = React.useCallback(async (formData: any) => {\n    return submitRef.current(formData);\n  }, []);\n\n  const handleError = React.useCallback((error: any) => {\n    console.error('Card payment form error:', error);\n    // Only report critical errors, not setup issues\n    if (error?.type !== 'critical') {\n      errorRef.current(error);\n    }\n  }, []);\n\n  if (!isMounted) {\n    return (\n      <div className=\"min-h-[300px] flex items-center justify-center\">\n        <div className=\"flex items-center gap-2 text-gray-400\">\n          <Loader2 className=\"w-5 h-5 animate-spin\" />\n          <span>Carregando formul√°rio...</span>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <CardPayment\n      initialization={{ amount: 47.90 }}\n      customization={{\n        paymentMethods: {\n          maxInstallments: 1,\n        },\n        visual: {\n          style: {\n            theme: 'dark',\n          },\n        },\n      }}\n      onSubmit={handleSubmit}\n      onReady={handleReady}\n      onError={handleError}\n    />\n  );\n}, () => true); // Always return true to prevent re-renders\n\n// Testimonials data - International users from around the world\nconst testimonials = [\n  // Brazil\n  { name: \"Carlos Mendes\", age: 34, city: \"S√£o Paulo, Brasil üáßüá∑\", text: \"Incr√≠vel! Consegui dobrar minha banca em 2 meses seguindo os sinais. Plataforma muito profissional.\", initials: \"CM\" },\n  { name: \"Fernanda Lima\", age: 28, city: \"Rio de Janeiro, Brasil üáßüá∑\", text: \"A assertividade dos sinais impressiona. N√£o fico mais perdida procurando apostas. Vale cada centavo.\", initials: \"FL\" },\n  // Portugal\n  { name: \"Jo√£o Rodrigues\", age: 41, city: \"Lisboa, Portugal üáµüáπ\", text: \"Fant√°stico! Uso h√° 4 meses e os resultados s√£o consistentes. Muito bom para futebol europeu.\", initials: \"JR\" },\n  { name: \"Sofia Ferreira\", age: 29, city: \"Porto, Portugal üáµüáπ\", text: \"Excelente plataforma! Os sinais chegam sempre a tempo e a taxa de acerto √© impressionante.\", initials: \"SF\" },\n  // Spain\n  { name: \"Alejandro Garc√≠a\", age: 32, city: \"Madrid, Espa√±a üá™üá∏\", text: \"¬°Incre√≠ble plataforma! Los se√±ales son muy precisos y el soporte responde r√°pido. Muy recomendable.\", initials: \"AG\" },\n  { name: \"Mar√≠a Rodr√≠guez\", age: 26, city: \"Barcelona, Espa√±a üá™üá∏\", text: \"Llevo 3 meses usando True Signal y mis ganancias han sido constantes. ¬°Gracias!\", initials: \"MR\" },\n  // USA\n  { name: \"Michael Johnson\", age: 35, city: \"New York, USA üá∫üá∏\", text: \"Best betting signals I've ever used. The accuracy is incredible and the platform is very professional.\", initials: \"MJ\" },\n  { name: \"Sarah Williams\", age: 28, city: \"Los Angeles, USA üá∫üá∏\", text: \"Amazing platform! I was skeptical at first but the results speak for themselves. Highly recommend!\", initials: \"SW\" },\n  // UK\n  { name: \"James Wilson\", age: 38, city: \"London, UK üá¨üáß\", text: \"Brilliant service! The signals are spot on and the bankroll management feature is fantastic.\", initials: \"JW\" },\n  { name: \"Emma Thompson\", age: 31, city: \"Manchester, UK üá¨üáß\", text: \"Been using True Signal for 2 months now. Consistent profits and excellent customer support.\", initials: \"ET\" },\n  // Germany\n  { name: \"Maximilian M√ºller\", age: 33, city: \"Berlin, Deutschland üá©üá™\", text: \"Ausgezeichnete Plattform! Die Signale sind sehr genau und der Support ist erstklassig.\", initials: \"MM\" },\n  { name: \"Hannah Schmidt\", age: 27, city: \"M√ºnchen, Deutschland üá©üá™\", text: \"Sehr zufrieden mit True Signal. Die Trefferquote ist beeindruckend!\", initials: \"HS\" },\n  // France\n  { name: \"Lucas Dubois\", age: 30, city: \"Paris, France üá´üá∑\", text: \"Excellente plateforme! Les signaux sont tr√®s pr√©cis et j'ai doubl√© ma bankroll en 2 mois.\", initials: \"LD\" },\n  { name: \"Camille Martin\", age: 25, city: \"Lyon, France üá´üá∑\", text: \"Je recommande vivement True Signal. Service professionnel et r√©sultats constants.\", initials: \"CM\" },\n  // Italy\n  { name: \"Marco Rossi\", age: 36, city: \"Milano, Italia üáÆüáπ\", text: \"Piattaforma eccellente! I segnali sono molto precisi e il supporto √® velocissimo.\", initials: \"MR\" },\n  { name: \"Giulia Bianchi\", age: 29, city: \"Roma, Italia üáÆüáπ\", text: \"Uso True Signal da 3 mesi e sono molto soddisfatta. Risultati costanti!\", initials: \"GB\" },\n  // Argentina\n  { name: \"Mart√≠n Gonz√°lez\", age: 34, city: \"Buenos Aires, Argentina üá¶üá∑\", text: \"¬°Excelente! Las se√±ales son muy precisas y el equipo de traders sabe lo que hace.\", initials: \"MG\" },\n  // Mexico\n  { name: \"Diego Hern√°ndez\", age: 31, city: \"Ciudad de M√©xico, M√©xico üá≤üáΩ\", text: \"¬°Incre√≠ble plataforma! He tenido ganancias consistentes desde que me suscrib√≠.\", initials: \"DH\" },\n  // Japan\n  { name: \"Takeshi Yamamoto\", age: 28, city: \"Tokyo, Japan üáØüáµ\", text: \"Á¥†Êô¥„Çâ„Åó„ÅÑ„Éó„É©„ÉÉ„Éà„Éï„Ç©„Éº„É†ÔºÅ„Ç∑„Ç∞„Éä„É´„ÅØÈùûÂ∏∏„Å´Ê≠£Á¢∫„Åß„ÄÅ„Çµ„Éù„Éº„Éà„ÇÇËøÖÈÄü„Åß„Åô„ÄÇ\", initials: \"TY\" },\n  // Australia\n  { name: \"Liam Mitchell\", age: 32, city: \"Sydney, Australia üá¶üá∫\", text: \"Top-notch signals and excellent platform. My betting game has completely changed!\", initials: \"LM\" },\n];\n\n// Testimonials Slider Component\nconst TestimonialsSlider = memo(function TestimonialsSlider() {\n  const [currentIndex, setCurrentIndex] = React.useState(0);\n  const [isAnimating, setIsAnimating] = React.useState(false);\n\n  React.useEffect(() => {\n    const interval = setInterval(() => {\n      setIsAnimating(true);\n      setTimeout(() => {\n        setCurrentIndex((prev) => (prev + 1) % testimonials.length);\n        setIsAnimating(false);\n      }, 300);\n    }, 4000);\n    return () => clearInterval(interval);\n  }, []);\n\n  const visibleTestimonials = React.useMemo(() => {\n    const items = [];\n    for (let i = 0; i < 3; i++) {\n      items.push(testimonials[(currentIndex + i) % testimonials.length]);\n    }\n    return items;\n  }, [currentIndex]);\n\n  const goToSlide = (index: number) => {\n    setIsAnimating(true);\n    setTimeout(() => {\n      setCurrentIndex(index);\n      setIsAnimating(false);\n    }, 300);\n  };\n\n  return (\n    <div className=\"bg-card border border-white/10 rounded-xl p-8 mb-12\">\n      <div className=\"text-center mb-6\">\n        <h3 className=\"font-sora font-bold text-white text-xl mb-2\">O que dizem nossos assinantes</h3>\n        <p className=\"text-sm text-gray-400\">Mais de 12.000 pessoas do mundo todo confiam na TRUE SIGNAL</p>\n      </div>\n      \n      <div className={`grid md:grid-cols-3 gap-6 transition-opacity duration-300 ${isAnimating ? 'opacity-0' : 'opacity-100'}`}>\n        {visibleTestimonials.map((testimonial, i) => (\n          <div key={`${currentIndex}-${i}`} className=\"bg-white/5 rounded-xl p-5 border border-white/10\">\n            <div className=\"flex items-start gap-3 mb-4\">\n              <div className=\"w-12 h-12 rounded-full bg-gradient-to-br from-[#33b864] to-emerald-600 flex items-center justify-center text-white font-bold text-sm flex-shrink-0\">\n                {testimonial.initials}\n              </div>\n              <div>\n                <p className=\"font-medium text-white\">{testimonial.name}, {testimonial.age}</p>\n                <p className=\"text-xs text-gray-500\">{testimonial.city}</p>\n                <div className=\"flex gap-0.5 mt-1\">\n                  {[...Array(5)].map((_, j) => (\n                    <Star key={j} className=\"w-3 h-3 fill-yellow-500 text-yellow-500\" />\n                  ))}\n                </div>\n              </div>\n            </div>\n            <p className=\"text-sm text-gray-300 italic leading-relaxed\">\"{testimonial.text}\"</p>\n          </div>\n        ))}\n      </div>\n      \n      {/* Dots Navigation */}\n      <div className=\"flex items-center justify-center gap-2 mt-6\">\n        {Array.from({ length: Math.ceil(testimonials.length / 3) }).map((_, i) => (\n          <button\n            key={i}\n            onClick={() => goToSlide(i * 3)}\n            className={`w-2 h-2 rounded-full transition-all ${\n              Math.floor(currentIndex / 3) === i \n                ? 'bg-[#33b864] w-6' \n                : 'bg-white/20 hover:bg-white/40'\n            }`}\n            data-testid={`testimonial-dot-${i}`}\n          />\n        ))}\n      </div>\n      \n      {/* Counter */}\n      <p className=\"text-center text-xs text-gray-500 mt-4\">\n        Mostrando {currentIndex + 1}-{Math.min(currentIndex + 3, testimonials.length)} de {testimonials.length} avalia√ß√µes\n      </p>\n    </div>\n  );\n});\n\ntype PaymentMethod = 'card' | 'pix';\ntype CardPaymentStatus = 'idle' | 'processing' | 'success' | 'error';\n\nconst checkoutSchema = z.object({\n  fullName: z.string().min(3, \"Nome completo √© obrigat√≥rio\"),\n  email: z.string().email(\"Email inv√°lido\"),\n  phone: z.string().min(10, \"Telefone inv√°lido (m√≠nimo 10 d√≠gitos)\"),\n  document: z.string().min(11, \"CPF/CNPJ inv√°lido (m√≠nimo 11 d√≠gitos)\"),\n  acceptTerms: z.boolean().refine(val => val === true, \"Voc√™ deve aceitar os termos\"),\n});\n\ntype CheckoutFormData = z.infer<typeof checkoutSchema>;\n\ninterface PixPaymentData {\n  qrCode: string;\n  qrCodeBase64: string;\n  paymentId: string;\n  expirationDate?: string;\n}\n\nexport default function CheckoutPage() {\n  const { user } = useAuth();\n  const { t } = useLanguage();\n  const { daysRemaining, isPremium } = useAccessControl();\n  const [isLoading, setIsLoading] = useState(false);\n  const [onlineUsers, setOnlineUsers] = useState(127);\n  const [paymentMethod, setPaymentMethod] = useState<PaymentMethod>('card');\n  const [pixData, setPixData] = useState<PixPaymentData | null>(null);\n  const [pixStatus, setPixStatus] = useState<'pending' | 'approved' | 'expired'>('pending');\n  const [copied, setCopied] = useState(false);\n  const [mpReady, setMpReady] = useState(false);\n  const [cardPaymentStatus, setCardPaymentStatus] = useState<CardPaymentStatus>('idle');\n  const [publicKey, setPublicKey] = useState<string | null>(null);\n  const [showCardForm, setShowCardForm] = useState(false);\n\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n  } = useForm<CheckoutFormData>({\n    resolver: zodResolver(checkoutSchema),\n    defaultValues: {\n      fullName: user?.firstName || \"\",\n      email: user?.email || \"\",\n      phone: \"\",\n      document: \"\",\n      acceptTerms: false,\n    },\n  });\n\n  // Initialize Mercado Pago SDK\n  useEffect(() => {\n    const initMP = async () => {\n      try {\n        const response = await axios.get('/api/mercadopago/config');\n        if (response.data.configured && response.data.publicKey) {\n          setPublicKey(response.data.publicKey);\n          initMercadoPago(response.data.publicKey, { locale: 'pt-BR' });\n          setMpReady(true);\n        }\n      } catch (error) {\n        console.error('Error initializing Mercado Pago:', error);\n      }\n    };\n    initMP();\n  }, []);\n\n  // Simular contador de usu√°rios online (varia entre 120-150)\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setOnlineUsers(prev => {\n        const change = Math.random() > 0.5 ? 1 : -1;\n        const newValue = prev + change;\n        return Math.max(120, Math.min(150, newValue));\n      });\n    }, 5000);\n    return () => clearInterval(interval);\n  }, []);\n\n  // Check PIX payment status periodically\n  useEffect(() => {\n    if (!pixData?.paymentId || !user?.id) return;\n\n    const checkStatus = async () => {\n      try {\n        const response = await axios.post('/api/mercadopago/payment-status', {\n          paymentId: pixData.paymentId,\n          userId: user.id,\n        });\n        const status = response.data.status;\n        \n        if (status === 'approved') {\n          setPixStatus('approved');\n          toast.success(\"Pagamento confirmado! Redirecionando...\");\n          setTimeout(() => {\n            window.location.href = '/obrigado';\n          }, 2000);\n        } else if (status === 'cancelled' || status === 'rejected') {\n          setPixStatus('expired');\n        }\n      } catch (error) {\n        console.error(\"Error checking payment status:\", error);\n      }\n    };\n\n    // Check immediately, then every 5 seconds\n    checkStatus();\n    const interval = setInterval(checkStatus, 5000);\n    return () => clearInterval(interval);\n  }, [pixData?.paymentId, user?.id]);\n\n  const copyPixCode = () => {\n    if (pixData?.qrCode) {\n      navigator.clipboard.writeText(pixData.qrCode);\n      setCopied(true);\n      toast.success(\"C√≥digo PIX copiado!\");\n      setTimeout(() => setCopied(false), 3000);\n    }\n  };\n\n  // Handle card payment submission from Mercado Pago SDK\n  const onCardPaymentSubmit = useCallback(async (formData: any) => {\n    if (!user) {\n      toast.error(\"Voc√™ precisa estar logado para assinar\");\n      return;\n    }\n\n    setCardPaymentStatus('processing');\n    \n    try {\n      const response = await axios.post('/api/mercadopago/card-payment', {\n        token: formData.token,\n        issuerId: formData.issuer_id,\n        paymentMethodId: formData.payment_method_id,\n        transactionAmount: 47.90,\n        installments: formData.installments || 1,\n        userId: user.id,\n        userEmail: user.email,\n        payer: {\n          email: user.email,\n          identification: {\n            type: formData.payer?.identification?.type || 'CPF',\n            number: formData.payer?.identification?.number || '',\n          }\n        }\n      });\n\n      if (response.data.success && response.data.status === 'approved') {\n        setCardPaymentStatus('success');\n        // Track successful purchase\n        analytics.trackPurchase(response.data.paymentId || Date.now().toString(), 49.93);\n        toast.success(\"Pagamento aprovado! Redirecionando...\");\n        setTimeout(() => {\n          window.location.href = '/obrigado';\n        }, 2000);\n      } else if (response.data.status === 'in_process' || response.data.status === 'pending') {\n        toast.info(\"Pagamento em an√°lise. Voc√™ ser√° notificado quando aprovado.\");\n        setCardPaymentStatus('idle');\n      } else {\n        setCardPaymentStatus('error');\n        toast.error(response.data.statusDetail || \"Pagamento recusado. Tente outro cart√£o.\");\n      }\n    } catch (error: any) {\n      console.error('Card payment error:', error);\n      setCardPaymentStatus('error');\n      toast.error(error.response?.data?.error || \"Erro ao processar pagamento\");\n    }\n  }, [user]);\n\n  const onCardPaymentError = useCallback((error: any) => {\n    console.error('Card payment form error:', error);\n    toast.error(\"Erro no formul√°rio de pagamento\");\n  }, []);\n\n  const onCardPaymentReady = useCallback(() => {\n    console.log('Card payment form ready');\n  }, []);\n\n  const onSubmit = async (data: CheckoutFormData) => {\n    if (!user) {\n      toast.error(\"Voc√™ precisa estar logado para assinar\");\n      return;\n    }\n\n    // Track checkout initiation\n    analytics.trackCheckoutStart();\n    fbPixel.addPaymentInfo({ value: 49.93, currency: 'BRL' });\n    ga4.addPaymentInfo(49.93, paymentMethod);\n\n    setIsLoading(true);\n    try {\n      if (paymentMethod === 'pix') {\n        // Create PIX payment directly (transparent checkout)\n        const response = await axios.post(\"/api/mercadopago/pix\", {\n          userId: user.id,\n          userEmail: data.email,\n          amount: 47.90,\n          firstName: data.fullName.split(' ')[0],\n          lastName: data.fullName.split(' ').slice(1).join(' ') || 'Usuario',\n          document: data.document.replace(/\\D/g, ''),\n        });\n\n        if (response.data.success) {\n          setPixData({\n            qrCode: response.data.qrCode,\n            qrCodeBase64: response.data.qrCodeBase64,\n            paymentId: response.data.payment.id,\n          });\n          setPixStatus('pending');\n          toast.success(\"QR Code PIX gerado! Escaneie para pagar.\");\n        } else {\n          toast.error(\"Erro ao gerar PIX. Tente novamente.\");\n        }\n      } else {\n        // Show card payment form (transparent checkout)\n        if (mpReady) {\n          setShowCardForm(true);\n          toast.info(\"Preencha os dados do cart√£o abaixo\");\n        } else {\n          toast.error(\"Sistema de pagamento n√£o est√° dispon√≠vel. Tente novamente.\");\n        }\n      }\n    } catch (error: any) {\n      console.error(\"Erro ao criar pagamento:\", error);\n      toast.error(error.response?.data?.error || \"Erro ao processar pagamento\");\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  if (isPremium) {\n    return (\n      <Layout>\n        <div className=\"max-w-2xl mx-auto text-center py-20\">\n          <div className=\"w-20 h-20 bg-[#33b864]/10 rounded-full flex items-center justify-center mx-auto mb-6\">\n            <Check className=\"w-10 h-10 text-[#33b864]\" />\n          </div>\n          <h1 className=\"text-3xl font-sora font-bold text-white mb-4\">\n            Voc√™ j√° √© True Signal Prime!\n          </h1>\n          <p className=\"text-gray-300 mb-8\">\n            Aproveite todos os benef√≠cios da sua assinatura premium.\n          </p>\n        </div>\n      </Layout>\n    );\n  }\n\n  // Show Card Payment Form when card is selected\n  if (showCardForm && mpReady) {\n    return (\n      <Layout>\n        <div className=\"max-w-md mx-auto py-10\">\n          <div className=\"bg-card border border-white/10 rounded-xl p-8\">\n            {/* Header */}\n            <div className=\"text-center mb-6\">\n              <div className=\"w-16 h-16 bg-[#33b864]/10 rounded-full flex items-center justify-center mx-auto mb-4\">\n                {cardPaymentStatus === 'success' ? (\n                  <Check className=\"w-8 h-8 text-[#33b864]\" />\n                ) : cardPaymentStatus === 'processing' ? (\n                  <Loader2 className=\"w-8 h-8 text-[#33b864] animate-spin\" />\n                ) : (\n                  <CreditCard className=\"w-8 h-8 text-[#33b864]\" />\n                )}\n              </div>\n              <h2 className=\"text-2xl font-sora font-bold text-white mb-2\">\n                {cardPaymentStatus === 'success' \n                  ? 'Pagamento Aprovado!' \n                  : cardPaymentStatus === 'processing'\n                  ? 'Processando...'\n                  : 'Pagamento com Cart√£o'}\n              </h2>\n              <p className=\"text-gray-400\">\n                {cardPaymentStatus === 'success'\n                  ? 'Redirecionando para sua conta...'\n                  : cardPaymentStatus === 'processing'\n                  ? 'Aguarde, estamos processando seu pagamento'\n                  : 'Preencha os dados do cart√£o abaixo'}\n              </p>\n            </div>\n\n            {cardPaymentStatus !== 'success' && cardPaymentStatus !== 'processing' && (\n              <>\n                {/* Mercado Pago Card Payment Brick */}\n                <div className=\"mb-6\">\n                  <CardPaymentWrapper\n                    onPaymentSubmit={onCardPaymentSubmit}\n                    onPaymentError={onCardPaymentError}\n                  />\n                </div>\n\n                {/* Back Button */}\n                <button\n                  onClick={() => setShowCardForm(false)}\n                  className=\"w-full py-3 px-4 bg-white/10 hover:bg-white/20 text-white font-medium rounded-xl transition-all flex items-center justify-center gap-2\"\n                >\n                  Voltar\n                </button>\n              </>\n            )}\n\n            {/* Value */}\n            <div className=\"mt-6 pt-6 border-t border-white/10\">\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-gray-400\">Valor:</span>\n                <span className=\"text-2xl font-bold text-[#33b864]\">R$ 47,90</span>\n              </div>\n              <p className=\"text-xs text-gray-500 mt-2\">\n                Acesso por 30 dias ao True Signal Prime\n              </p>\n            </div>\n\n            {/* Security Badge */}\n            <div className=\"mt-6 flex items-center justify-center gap-2 text-xs text-gray-500\">\n              <Shield className=\"w-4 h-4\" />\n              <span>Pagamento seguro via Mercado Pago</span>\n            </div>\n          </div>\n        </div>\n      </Layout>\n    );\n  }\n\n  // Show PIX QR Code screen when PIX payment is generated\n  if (pixData) {\n    return (\n      <Layout>\n        <div className=\"max-w-md mx-auto py-10\">\n          <div className=\"bg-card border border-white/10 rounded-xl p-8 text-center\">\n            {/* Header */}\n            <div className=\"mb-6\">\n              <div className=\"w-16 h-16 bg-[#33b864]/10 rounded-full flex items-center justify-center mx-auto mb-4\">\n                {pixStatus === 'approved' ? (\n                  <Check className=\"w-8 h-8 text-[#33b864]\" />\n                ) : pixStatus === 'expired' ? (\n                  <AlertCircle className=\"w-8 h-8 text-red-500\" />\n                ) : (\n                  <QrCode className=\"w-8 h-8 text-[#33b864]\" />\n                )}\n              </div>\n              <h2 className=\"text-2xl font-sora font-bold text-white mb-2\">\n                {pixStatus === 'approved' \n                  ? 'Pagamento Confirmado!' \n                  : pixStatus === 'expired'\n                  ? 'PIX Expirado'\n                  : 'Pague com PIX'}\n              </h2>\n              <p className=\"text-gray-400\">\n                {pixStatus === 'approved'\n                  ? 'Sua assinatura foi ativada com sucesso!'\n                  : pixStatus === 'expired'\n                  ? 'O c√≥digo PIX expirou. Gere um novo.'\n                  : 'Escaneie o QR Code ou copie o c√≥digo'}\n              </p>\n            </div>\n\n            {pixStatus === 'pending' && (\n              <>\n                {/* QR Code */}\n                <div className=\"bg-white p-4 rounded-xl mb-6 inline-block\">\n                  <img \n                    src={`data:image/png;base64,${pixData.qrCodeBase64}`}\n                    alt=\"QR Code PIX\"\n                    className=\"w-48 h-48\"\n                    data-testid=\"img-pix-qrcode\"\n                  />\n                </div>\n\n                {/* Timer */}\n                <div className=\"flex items-center justify-center gap-2 text-gray-400 mb-6\">\n                  <Loader2 className=\"w-4 h-4 animate-spin\" />\n                  <span className=\"text-sm\">Aguardando pagamento...</span>\n                </div>\n\n                {/* Copy Code Button */}\n                <div className=\"space-y-3\">\n                  <button\n                    onClick={copyPixCode}\n                    className=\"w-full py-3 px-4 bg-[#33b864] hover:bg-[#2da055] text-black font-bold rounded-xl transition-all flex items-center justify-center gap-2\"\n                    data-testid=\"button-copy-pix\"\n                  >\n                    {copied ? (\n                      <>\n                        <Check className=\"w-5 h-5\" />\n                        Copiado!\n                      </>\n                    ) : (\n                      <>\n                        <Copy className=\"w-5 h-5\" />\n                        Copiar c√≥digo PIX\n                      </>\n                    )}\n                  </button>\n\n                  {/* PIX Code Display */}\n                  <div className=\"bg-white/5 border border-white/10 rounded-lg p-3\">\n                    <p className=\"text-xs text-gray-500 mb-1\">C√≥digo Copia e Cola:</p>\n                    <p className=\"text-xs text-gray-300 break-all font-mono max-h-20 overflow-y-auto\">\n                      {pixData.qrCode}\n                    </p>\n                  </div>\n                </div>\n\n                {/* Value */}\n                <div className=\"mt-6 pt-6 border-t border-white/10\">\n                  <div className=\"flex justify-between items-center\">\n                    <span className=\"text-gray-400\">Valor:</span>\n                    <span className=\"text-2xl font-bold text-[#33b864]\">R$ 47,90</span>\n                  </div>\n                  <p className=\"text-xs text-gray-500 mt-2\">\n                    Acesso por 30 dias ao True Signal Prime\n                  </p>\n                </div>\n              </>\n            )}\n\n            {pixStatus === 'expired' && (\n              <button\n                onClick={() => {\n                  setPixData(null);\n                  setPixStatus('pending');\n                }}\n                className=\"w-full py-3 px-4 bg-[#33b864] hover:bg-[#2da055] text-black font-bold rounded-xl transition-all flex items-center justify-center gap-2\"\n              >\n                <RefreshCw className=\"w-5 h-5\" />\n                Gerar novo PIX\n              </button>\n            )}\n\n            {/* Security Badge */}\n            <div className=\"mt-6 flex items-center justify-center gap-2 text-xs text-gray-500\">\n              <Shield className=\"w-4 h-4\" />\n              <span>Pagamento processado pelo Mercado Pago</span>\n            </div>\n          </div>\n        </div>\n      </Layout>\n    );\n  }\n\n  return (\n    <Layout>\n      <div className=\"pt-4 pb-8\">\n        <div className=\"max-w-7xl mx-auto px-4\">\n          {/* Hero Section */}\n          <div className=\"text-center mb-10\">\n            <div className=\"flex justify-center mb-2\">\n              <Logo size=\"lg\" />\n            </div>\n            <div className=\"flex items-center justify-center gap-4 mb-6\">\n              <div className=\"flex items-center gap-1.5 text-[#33b864]\">\n                <Lock className=\"w-4 h-4\" />\n                <span className=\"text-xs font-semibold\">Checkout Seguro</span>\n              </div>\n              <div className=\"flex items-center gap-1.5 text-[#33b864]\">\n                <CheckCircle2 className=\"w-4 h-4\" />\n                <span className=\"text-xs font-semibold\">7 Dias de Garantia</span>\n              </div>\n            </div>\n            \n            {/* Urgency Banner - Full Width */}\n            <div className=\"w-full max-w-2xl mx-auto flex items-center justify-between gap-4 px-6 py-3 bg-gradient-to-r from-red-500/20 via-orange-500/20 to-red-500/20 rounded-2xl border border-red-500/40 mb-5\">\n              <div className=\"flex items-center gap-2\">\n                <Zap className=\"w-5 h-5 text-yellow-400\" />\n                <div className=\"text-center\">\n                  <span className=\"text-xs font-bold text-yellow-400 block\">PROMO√á√ÉO</span>\n                  <span className=\"text-sm font-bold text-white\">DE FIM DE ANO</span>\n                </div>\n              </div>\n              <div className=\"h-10 w-px bg-white/20\"></div>\n              <div className=\"text-center\">\n                <span className=\"text-lg font-bold text-red-400 block animate-pulse\">52% OFF</span>\n                <span className=\"text-xs font-medium text-gray-300\">At√© 31/12</span>\n              </div>\n            </div>\n            \n            <h1 className=\"text-xl md:text-2xl lg:text-3xl font-sora font-bold text-white mb-4 text-center whitespace-nowrap\">\n              Acesse os <span className=\"text-[#33b864]\">Sinais Premium</span>\n            </h1>\n            <p className=\"text-lg text-gray-400 max-w-2xl mx-auto mb-6\">\n              {daysRemaining > 0 \n                ? `Restam apenas ${daysRemaining} dias do seu per√≠odo de teste. Garanta seu acesso ilimitado!`\n                : \"Junte-se a mais de 12.000 traders lucrativos do mundo inteiro e receba sinais exclusivos todos os dias\"\n              }\n            </p>\n            \n            {/* Social Proof Quick Stats */}\n            <div className=\"flex flex-wrap items-center justify-center gap-6 mb-8\">\n              <div className=\"flex items-center gap-2\">\n                <div className=\"flex -space-x-2\">\n                  {[1,2,3,4].map((i) => (\n                    <div key={i} className=\"w-8 h-8 rounded-full bg-gradient-to-br from-[#33b864] to-emerald-600 border-2 border-black flex items-center justify-center\">\n                      <User className=\"w-4 h-4 text-white\" />\n                    </div>\n                  ))}\n                </div>\n                <span className=\"text-sm text-gray-400\">+12.000 assinantes no mundo</span>\n              </div>\n              <div className=\"flex items-center gap-1\">\n                {[...Array(5)].map((_, i) => (\n                  <Star key={i} className=\"w-4 h-4 fill-yellow-500 text-yellow-500\" />\n                ))}\n                <span className=\"text-sm text-gray-400 ml-1\">4.9/5 (847 avalia√ß√µes)</span>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"grid lg:grid-cols-2 gap-8 items-start max-w-6xl mx-auto\">\n            {/* Left Column - Benefits & Trust */}\n            <div className=\"order-2 lg:order-1 space-y-6\">\n              \n              {/* Price Card */}\n              <div className=\"bg-gradient-to-br from-[#33b864]/20 to-emerald-600/10 border-2 border-[#33b864]/50 rounded-3xl p-6 relative overflow-hidden\">\n                <div className=\"absolute top-0 right-0 bg-red-500 text-white text-xs font-bold px-4 py-1.5 rounded-bl-xl\">\n                  -52% OFF\n                </div>\n                <div className=\"text-center\">\n                  <p className=\"text-gray-400 text-sm mb-1\">De <span className=\"line-through\">R$ 99,87</span>/m√™s</p>\n                  <div className=\"flex items-baseline justify-center gap-1 mb-2\">\n                    <span className=\"text-lg text-gray-400\">R$</span>\n                    <span className=\"text-5xl font-bold text-white\">47</span>\n                    <span className=\"text-2xl font-bold text-white\">,90</span>\n                    <span className=\"text-gray-400\">/m√™s</span>\n                  </div>\n                  <p className=\"text-[#33b864] text-sm font-medium\">Economize R$ 51,97 por m√™s!</p>\n                </div>\n              </div>\n\n              {/* What You Get */}\n              <div className=\"bg-card/50 backdrop-blur border border-white/10 rounded-2xl p-6\">\n                <h3 className=\"font-sora font-bold text-white mb-4 flex items-center gap-2\">\n                  <Sparkles className=\"w-5 h-5 text-[#33b864]\" />\n                  Tudo que voc√™ recebe:\n                </h3>\n                <div className=\"space-y-3\">\n                  {[\n                    { icon: TrendingUp, text: \"Sinais di√°rios de 20+ traders experts\", highlight: true },\n                    { icon: Zap, text: \"Notifica√ß√µes push instant√¢neas\" },\n                    { icon: Shield, text: \"Gest√£o de banca profissional\" },\n                    { icon: TrendingUp, text: \"83% de taxa de assertividade\" },\n                    { icon: Users, text: \"Comunidade exclusiva de traders\" },\n                    { icon: Gift, text: \"Suporte VIP via WhatsApp\" },\n                  ].map((item, i) => (\n                    <div key={i} className={`flex items-center gap-3 p-3 rounded-xl ${item.highlight ? 'bg-[#33b864]/10 border border-[#33b864]/30' : 'bg-white/5'}`}>\n                      <div className={`w-8 h-8 rounded-lg flex items-center justify-center ${item.highlight ? 'bg-[#33b864]/20' : 'bg-white/10'}`}>\n                        <item.icon className={`w-4 h-4 ${item.highlight ? 'text-[#33b864]' : 'text-gray-400'}`} />\n                      </div>\n                      <span className={`text-sm ${item.highlight ? 'text-white font-medium' : 'text-gray-300'}`}>{item.text}</span>\n                    </div>\n                  ))}\n                </div>\n              </div>\n\n              {/* Money Back Guarantee */}\n              <div className=\"bg-gradient-to-r from-emerald-500/10 via-[#33b864]/10 to-emerald-500/10 border border-[#33b864]/40 rounded-2xl p-5\">\n                <div className=\"flex items-center gap-4\">\n                  <div className=\"relative\">\n                    <div className=\"w-16 h-16 bg-[#33b864]/20 rounded-full flex items-center justify-center\">\n                      <Shield className=\"w-8 h-8 text-[#33b864]\" />\n                    </div>\n                    <div className=\"absolute -bottom-1 -right-1 w-6 h-6 bg-[#33b864] rounded-full flex items-center justify-center\">\n                      <Check className=\"w-4 h-4 text-black\" />\n                    </div>\n                  </div>\n                  <div>\n                    <h4 className=\"font-bold text-white text-lg\">Garantia de 7 Dias</h4>\n                    <p className=\"text-sm text-gray-400\">\n                      100% do seu dinheiro de volta se n√£o ficar satisfeito. Zero risco!\n                    </p>\n                  </div>\n                </div>\n              </div>\n\n              {/* Stats Row */}\n              <div className=\"grid grid-cols-3 gap-3\">\n                <div className=\"bg-card border border-white/10 rounded-xl p-4 text-center\">\n                  <div className=\"text-2xl font-bold text-[#33b864]\">83%</div>\n                  <div className=\"text-xs text-gray-500\">Assertividade</div>\n                </div>\n                <div className=\"bg-card border border-white/10 rounded-xl p-4 text-center\">\n                  <div className=\"text-2xl font-bold text-[#33b864]\">12K+</div>\n                  <div className=\"text-xs text-gray-500\">Assinantes</div>\n                </div>\n                <div className=\"bg-card border border-white/10 rounded-xl p-4 text-center\">\n                  <div className=\"text-2xl font-bold text-[#33b864]\">7+</div>\n                  <div className=\"text-xs text-gray-500\">Anos exp.</div>\n                </div>\n              </div>\n            </div>\n\n            {/* Right Column - Payment Form */}\n            <div className=\"order-1 lg:order-2\">\n              <div className=\"bg-gradient-to-b from-card to-card/80 border border-white/10 rounded-3xl p-6 md:p-8 shadow-2xl shadow-black/50\">\n                {/* Form Header */}\n                <div className=\"flex items-center justify-between mb-6\">\n                  <h2 className=\"font-sora font-bold text-xl text-white\">Finalizar Compra</h2>\n                  <div className=\"flex items-center gap-2 text-xs text-gray-400\">\n                    <Lock className=\"w-4 h-4 text-[#33b864]\" />\n                    <span>Ambiente Seguro</span>\n                  </div>\n                </div>\n\n                <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-5\">\n                  {/* Payment Method Selection */}\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-300 mb-3\">Forma de Pagamento</label>\n                    <div className=\"grid grid-cols-2 gap-3\">\n                      <button\n                        type=\"button\"\n                        onClick={() => setPaymentMethod('card')}\n                        className={`p-4 rounded-xl border-2 transition-all duration-300 flex flex-col items-center gap-2 ${\n                          paymentMethod === 'card'\n                            ? 'border-[#33b864] bg-[#33b864]/10 shadow-lg shadow-[#33b864]/20'\n                            : 'border-white/10 bg-white/5 hover:border-white/30 hover:bg-white/10'\n                        }`}\n                        data-testid=\"button-payment-card\"\n                      >\n                        <div className={`w-10 h-10 rounded-full flex items-center justify-center ${paymentMethod === 'card' ? 'bg-[#33b864]/20' : 'bg-white/10'}`}>\n                          <CreditCard className={`w-5 h-5 ${paymentMethod === 'card' ? 'text-[#33b864]' : 'text-gray-400'}`} />\n                        </div>\n                        <span className={`text-sm font-medium ${paymentMethod === 'card' ? 'text-[#33b864]' : 'text-gray-300'}`}>\n                          Cart√£o de Cr√©dito\n                        </span>\n                        <span className=\"text-xs text-gray-500\">Cobran√ßa mensal</span>\n                      </button>\n                      <button\n                        type=\"button\"\n                        onClick={() => setPaymentMethod('pix')}\n                        className={`p-4 rounded-xl border-2 transition-all duration-300 flex flex-col items-center gap-2 ${\n                          paymentMethod === 'pix'\n                            ? 'border-[#33b864] bg-[#33b864]/10 shadow-lg shadow-[#33b864]/20'\n                            : 'border-white/10 bg-white/5 hover:border-white/30 hover:bg-white/10'\n                        }`}\n                        data-testid=\"button-payment-pix\"\n                      >\n                        <div className={`w-10 h-10 rounded-full flex items-center justify-center ${paymentMethod === 'pix' ? 'bg-[#33b864]/20' : 'bg-white/10'}`}>\n                          <QrCode className={`w-5 h-5 ${paymentMethod === 'pix' ? 'text-[#33b864]' : 'text-gray-400'}`} />\n                        </div>\n                        <span className={`text-sm font-medium ${paymentMethod === 'pix' ? 'text-[#33b864]' : 'text-gray-300'}`}>\n                          PIX\n                        </span>\n                        <span className=\"text-xs text-gray-500\">Pagamento √∫nico</span>\n                      </button>\n                    </div>\n                  </div>\n\n                  {/* Payment Info Badge */}\n                  <div className={`p-4 rounded-xl text-sm flex items-center gap-3 ${paymentMethod === 'card' ? 'bg-blue-500/10 border border-blue-500/20' : 'bg-[#33b864]/10 border border-[#33b864]/20'}`}>\n                    <div className={`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 ${paymentMethod === 'card' ? 'bg-blue-500/20' : 'bg-[#33b864]/20'}`}>\n                      {paymentMethod === 'card' ? (\n                        <CreditCard className=\"w-5 h-5 text-blue-400\" />\n                      ) : (\n                        <Zap className=\"w-5 h-5 text-[#33b864]\" />\n                      )}\n                    </div>\n                    <div>\n                      {paymentMethod === 'card' ? (\n                        <>\n                          <p className=\"text-white font-medium\">Assinatura Recorrente</p>\n                          <p className=\"text-blue-300 text-xs\">R$ 47,90/m√™s</p>\n                          <p className=\"text-gray-400 text-xs\">Cancele quando quiser</p>\n                        </>\n                      ) : (\n                        <>\n                          <p className=\"text-white font-medium\">Pagamento Instant√¢neo</p>\n                          <p className=\"text-[#33b864] text-xs\">R$ 47,90 - Acesso por 30 dias</p>\n                        </>\n                      )}\n                    </div>\n                  </div>\n\n              {/* Card Payment Form - Mercado Pago */}\n              {paymentMethod === 'card' && mpReady && (\n                <div className=\"pt-4\">\n                  <h3 className=\"font-sora font-bold text-white mb-4\">Dados do Cart√£o</h3>\n                  <div className=\"min-h-[300px] [&_.mp-sdk-container]:!max-w-full [&_form]:!max-w-full [&_.mp-card-payment-container]:!max-w-full [&_input]:!w-full [&_select]:!w-full [&_.mp-form-input]:!w-full\">\n                    <CardPaymentWrapper\n                      onPaymentSubmit={onCardPaymentSubmit}\n                      onPaymentError={onCardPaymentError}\n                    />\n                  </div>\n                  {cardPaymentStatus === 'processing' && (\n                    <div className=\"mt-4 flex items-center justify-center gap-2 text-[#33b864]\">\n                      <Loader2 className=\"w-5 h-5 animate-spin\" />\n                      <span>Processando pagamento...</span>\n                    </div>\n                  )}\n                  {cardPaymentStatus === 'success' && (\n                    <div className=\"mt-4 flex items-center justify-center gap-2 text-green-500\">\n                      <CheckCircle2 className=\"w-5 h-5\" />\n                      <span>Pagamento aprovado!</span>\n                    </div>\n                  )}\n                  {cardPaymentStatus === 'error' && (\n                    <div className=\"mt-4 flex items-center justify-center gap-2 text-red-500\">\n                      <AlertCircle className=\"w-5 h-5\" />\n                      <span>Erro no pagamento. Tente novamente.</span>\n                    </div>\n                  )}\n                </div>\n              )}\n\n              {paymentMethod === 'card' && !mpReady && (\n                <div className=\"pt-4 flex items-center justify-center gap-2 text-gray-400\">\n                  <Loader2 className=\"w-5 h-5 animate-spin\" />\n                  <span>Carregando formul√°rio de pagamento...</span>\n                </div>\n              )}\n\n              <h3 className=\"font-sora font-bold text-white pt-4\">Complete seus dados</h3>\n\n              {/* Full Name */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n                  Nome completo *\n                </label>\n                <div className=\"relative\">\n                  <User className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500\" />\n                  <input\n                    type=\"text\"\n                    {...register(\"fullName\")}\n                    placeholder=\"Seu nome completo\"\n                    className=\"w-full pl-11 pr-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder:text-gray-500 focus:border-[#33b864] focus:ring-1 focus:ring-[#33b864] transition-all\"\n                    data-testid=\"input-fullname\"\n                  />\n                </div>\n                {errors.fullName && (\n                  <p className=\"text-red-500 text-xs mt-1 flex items-center gap-1\">\n                    <AlertCircle className=\"w-3 h-3\" />\n                    {errors.fullName.message}\n                  </p>\n                )}\n              </div>\n\n              {/* Email */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n                  Email *\n                </label>\n                <div className=\"relative\">\n                  <Mail className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500\" />\n                  <input\n                    type=\"email\"\n                    {...register(\"email\")}\n                    placeholder=\"seu@email.com\"\n                    className=\"w-full pl-11 pr-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder:text-gray-500 focus:border-[#33b864] focus:ring-1 focus:ring-[#33b864] transition-all\"\n                    data-testid=\"input-email\"\n                  />\n                </div>\n                {errors.email && (\n                  <p className=\"text-red-500 text-xs mt-1 flex items-center gap-1\">\n                    <AlertCircle className=\"w-3 h-3\" />\n                    {errors.email.message}\n                  </p>\n                )}\n              </div>\n\n              {/* Phone */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n                  Telefone/WhatsApp *\n                </label>\n                <div className=\"relative\">\n                  <Phone className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500\" />\n                  <input\n                    type=\"tel\"\n                    {...register(\"phone\")}\n                    placeholder=\"(00) 00000-0000\"\n                    className=\"w-full pl-11 pr-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder:text-gray-500 focus:border-[#33b864] focus:ring-1 focus:ring-[#33b864] transition-all\"\n                    data-testid=\"input-phone\"\n                  />\n                </div>\n                {errors.phone && (\n                  <p className=\"text-red-500 text-xs mt-1 flex items-center gap-1\">\n                    <AlertCircle className=\"w-3 h-3\" />\n                    {errors.phone.message}\n                  </p>\n                )}\n              </div>\n\n              {/* Document (CPF/CNPJ) */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n                  CPF/CNPJ *\n                </label>\n                <div className=\"relative\">\n                  <FileText className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500\" />\n                  <input\n                    type=\"text\"\n                    {...register(\"document\")}\n                    placeholder=\"000.000.000-00\"\n                    className=\"w-full pl-11 pr-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder:text-gray-500 focus:border-[#33b864] focus:ring-1 focus:ring-[#33b864] transition-all\"\n                    data-testid=\"input-document\"\n                  />\n                </div>\n                {errors.document && (\n                  <p className=\"text-red-500 text-xs mt-1 flex items-center gap-1\">\n                    <AlertCircle className=\"w-3 h-3\" />\n                    {errors.document.message}\n                  </p>\n                )}\n              </div>\n\n              {/* Order Summary */}\n              <div className=\"pt-6 border-t border-white/10\">\n                <div className=\"space-y-3 mb-4\">\n                  <div className=\"flex justify-between text-sm\">\n                    <span className=\"text-gray-400\">True Signal Prime (mensal)</span>\n                    <div className=\"text-right\">\n                      <span className=\"text-gray-500 line-through text-xs mr-2\">R$ 99,87</span>\n                      <span className=\"text-[#33b864]\">R$ 47,90</span>\n                    </div>\n                  </div>\n                  <div className=\"flex justify-between text-sm\">\n                    <span className=\"text-gray-400\">Taxa de processamento</span>\n                    <span className=\"text-[#33b864]\">R$ 0,00</span>\n                  </div>\n                  <div className=\"flex justify-between text-sm\">\n                    <span className=\"text-gray-400\">Promo√ß√£o Fim de Ano</span>\n                    <span className=\"text-red-400 font-bold\">-52% OFF</span>\n                  </div>\n                  <div className=\"flex justify-between pt-3 border-t border-white/10\">\n                    <span className=\"font-bold text-white\">Total</span>\n                    <span className=\"font-bold text-xl text-[#33b864]\">R$ 47,90</span>\n                  </div>\n                </div>\n              </div>\n\n              {/* Accept Terms */}\n              <div className=\"flex items-start gap-3\">\n                <input\n                  type=\"checkbox\"\n                  {...register(\"acceptTerms\")}\n                  id=\"acceptTerms\"\n                  className=\"mt-1 w-4 h-4 rounded border-white/10 bg-white/5 text-[#33b864] focus:ring-[#33b864]\"\n                  data-testid=\"checkbox-accept-terms\"\n                />\n                <label htmlFor=\"acceptTerms\" className=\"text-xs text-gray-400 leading-relaxed cursor-pointer\">\n                  Eu aceito os <a href=\"/terms\" target=\"_blank\" className=\"text-[#33b864] hover:underline\">termos de uso</a>, <a href=\"/privacy\" target=\"_blank\" className=\"text-[#33b864] hover:underline\">pol√≠tica de privacidade</a> e <a href=\"/risk-disclaimer\" target=\"_blank\" className=\"text-[#33b864] hover:underline\">aviso de risco</a>\n                </label>\n              </div>\n              {errors.acceptTerms && (\n                <p className=\"text-red-500 text-xs flex items-center gap-1\">\n                  <AlertCircle className=\"w-3 h-3\" />\n                  {errors.acceptTerms.message}\n                </p>\n              )}\n\n              {/* Submit Button */}\n              <button\n                type=\"submit\"\n                disabled={isLoading}\n                className=\"w-full py-4 bg-[#33b864] hover:bg-[#2da055] text-black font-bold text-lg rounded-xl transition-all duration-200 flex items-center justify-center gap-3 shadow-lg shadow-[#33b864]/30 disabled:opacity-50 disabled:cursor-not-allowed\"\n                data-testid=\"button-checkout-submit\"\n              >\n                {isLoading ? (\n                  <>\n                    <div className=\"w-5 h-5 border-2 border-black/20 border-t-black rounded-full animate-spin\"></div>\n                    Processando...\n                  </>\n                ) : (\n                  <>\n                    <Lock className=\"w-5 h-5\" />\n                    Finalizar Pagamento Seguro\n                  </>\n                )}\n              </button>\n\n              {/* Payment Methods Footer */}\n              <PaymentMethods />\n            </form>\n          </div>\n          </div>\n        </div>\n\n        {/* Trust Section */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-12 mt-12\">\n          <div className=\"bg-card border border-white/10 rounded-xl p-6 text-center\">\n            <div className=\"w-12 h-12 bg-[#33b864]/10 rounded-full flex items-center justify-center mx-auto mb-3\">\n              <Shield className=\"w-6 h-6 text-[#33b864]\" />\n            </div>\n            <h3 className=\"font-bold text-white mb-2\">Pagamento seguro</h3>\n            <p className=\"text-sm text-gray-400\">Seus dados protegidos via Mercado Pago</p>\n          </div>\n          <div className=\"bg-card border border-white/10 rounded-xl p-6 text-center\">\n            <div className=\"w-12 h-12 bg-[#33b864]/10 rounded-full flex items-center justify-center mx-auto mb-3\">\n              <TrendingUp className=\"w-6 h-6 text-[#33b864]\" />\n            </div>\n            <h3 className=\"font-bold text-white mb-2\">83% de Assertividade</h3>\n            <p className=\"text-sm text-gray-400\">Taxa comprovada pelos nossos usu√°rios</p>\n          </div>\n          <div className=\"bg-card border border-white/10 rounded-xl p-6 text-center\">\n            <div className=\"w-12 h-12 bg-[#33b864]/10 rounded-full flex items-center justify-center mx-auto mb-3\">\n              <Users className=\"w-6 h-6 text-[#33b864]\" />\n            </div>\n            <h3 className=\"font-bold text-white mb-2\">+12.000 Assinantes</h3>\n            <p className=\"text-sm text-gray-400\">Do mundo todo confiam na TRUE SIGNAL</p>\n          </div>\n        </div>\n\n        {/* Testimonials Slider */}\n        <TestimonialsSlider />\n\n        {/* FAQ */}\n        <div className=\"bg-card border border-white/10 rounded-xl p-8\">\n          <h3 className=\"font-sora font-bold text-white text-center mb-8\">Perguntas frequentes</h3>\n          <div className=\"space-y-4 max-w-3xl mx-auto\">\n            <div className=\"bg-white/5 rounded-lg p-4\">\n              <h4 className=\"font-bold text-white mb-2 flex items-center gap-2\">\n                <AlertCircle className=\"w-4 h-4 text-[#33b864]\" />\n                Meus dados est√£o seguros?\n              </h4>\n              <p className=\"text-sm text-gray-400\">\n                Sim! Utilizamos criptografia SSL de 256 bits e estamos em conformidade com a LGPD. Seus dados s√£o processados pelo Mercado Pago, uma das plataformas de pagamento mais seguras do Brasil.\n              </p>\n            </div>\n            <div className=\"bg-white/5 rounded-lg p-4\">\n              <h4 className=\"font-bold text-white mb-2 flex items-center gap-2\">\n                <AlertCircle className=\"w-4 h-4 text-[#33b864]\" />\n                Posso cancelar quando quiser?\n              </h4>\n              <p className=\"text-sm text-gray-400\">\n                Sim! N√£o h√° per√≠odo m√≠nimo de contrato. Voc√™ pode cancelar sua assinatura a qualquer momento, sem multas ou taxas adicionais. Se cancelar nos primeiros 7 dias, devolvemos 100% do valor.\n              </p>\n            </div>\n            <div className=\"bg-white/5 rounded-lg p-4\">\n              <h4 className=\"font-bold text-white mb-2 flex items-center gap-2\">\n                <AlertCircle className=\"w-4 h-4 text-[#33b864]\" />\n                Como funciona a cobran√ßa?\n              </h4>\n              <p className=\"text-sm text-gray-400\">\n                A cobran√ßa √© mensal e recorrente de R$ 47,90 (promo√ß√£o v√°lida at√© 31/12, de R$ 99,87). Voc√™ ser√° notificado antes de cada renova√ß√£o e pode cancelar a qualquer momento.\n              </p>\n            </div>\n          </div>\n        </div>\n\n        {/* Footer Legal Info */}\n        <div className=\"text-center mt-12 pt-8 border-t border-white/10\">\n          <p className=\"text-xs text-gray-500 mb-2\">\n            TRUE SIGNAL - CNPJ: 00.000.000/0001-00\n          </p>\n          <p className=\"text-xs text-gray-500\">\n            Ao finalizar o pagamento, voc√™ concorda com nossos{\" \"}\n            <a href=\"/terms\" className=\"text-[#33b864] hover:underline\">Termos de Uso</a> e{\" \"}\n            <a href=\"/privacy\" className=\"text-[#33b864] hover:underline\">Pol√≠tica de Privacidade</a>\n          </p>\n        </div>\n        </div>\n      </div>\n    </Layout>\n  );\n}\n","path":null,"size_bytes":54234,"size_tokens":null},"client/src/components/loading-screen.tsx":{"content":"import { motion } from 'framer-motion';\n\nexport function LoadingScreen() {\n  return (\n    <div className=\"fixed inset-0 bg-black z-[100] flex items-center justify-center overflow-hidden\">\n      {/* Background Gradient Glow */}\n      <motion.div\n        className=\"absolute inset-0 bg-gradient-to-b from-[#33b864]/20 via-black to-black\"\n        animate={{\n          opacity: [0.3, 0.6, 0.3],\n        }}\n        transition={{\n          duration: 3,\n          repeat: Infinity,\n          ease: \"easeInOut\",\n        }}\n      />\n\n      {/* Animated Logo */}\n      <div className=\"relative z-10 flex flex-col items-center gap-8\">\n        {/* Signal Monolith Logo - Animated */}\n        <motion.svg\n          width={100}\n          height={120}\n          viewBox=\"0 0 40 48\"\n          fill=\"none\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          initial={{ scale: 0.8, opacity: 0 }}\n          animate={{ \n            scale: [0.9, 1, 0.9],\n            opacity: [0.8, 1, 0.8],\n          }}\n          transition={{\n            duration: 2,\n            repeat: Infinity,\n            ease: \"easeInOut\",\n          }}\n        >\n          <defs>\n            <linearGradient id=\"loading-monolith-gradient\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\n              <stop offset=\"0%\" stopColor=\"#4ade80\" />\n              <stop offset=\"100%\" stopColor=\"#33b864\" />\n            </linearGradient>\n            <filter id=\"loading-monolith-glow\" x=\"-50%\" y=\"-50%\" width=\"200%\" height=\"200%\">\n              <feGaussianBlur stdDeviation=\"2\" result=\"blur\" />\n              <feMerge>\n                <feMergeNode in=\"blur\" />\n                <feMergeNode in=\"SourceGraphic\" />\n              </feMerge>\n            </filter>\n          </defs>\n          \n          {/* Shield monolith shape */}\n          <motion.path \n            d=\"M4 6 L4 32 Q4 40 20 46 Q36 40 36 32 L36 6 Q36 2 32 2 L8 2 Q4 2 4 6 Z\" \n            fill=\"none\"\n            stroke=\"url(#loading-monolith-gradient)\"\n            strokeWidth=\"2.5\"\n            filter=\"url(#loading-monolith-glow)\"\n            animate={{ strokeOpacity: [0.6, 1, 0.6] }}\n            transition={{ duration: 2, repeat: Infinity }}\n          />\n          \n          {/* Precision pulse/signal line cutting through */}\n          <motion.path \n            d=\"M8 24 L14 24 L17 18 L20 30 L23 22 L26 26 L32 26\" \n            stroke=\"#33b864\" \n            strokeWidth=\"2.5\" \n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            fill=\"none\"\n            initial={{ pathLength: 0 }}\n            animate={{ pathLength: [0, 1, 0] }}\n            transition={{ duration: 2, repeat: Infinity, ease: \"easeInOut\" }}\n          />\n          \n          {/* Active signal dot */}\n          <motion.circle \n            cx=\"32\" \n            cy=\"26\" \n            r=\"3\" \n            fill=\"#33b864\"\n            animate={{ \n              opacity: [0, 1, 0],\n              scale: [0.5, 1.2, 0.5]\n            }}\n            transition={{ duration: 2, repeat: Infinity }}\n          />\n        </motion.svg>\n\n        {/* Brand Text */}\n        <motion.div\n          className=\"flex items-baseline gap-2\"\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.8, delay: 0.3 }}\n        >\n          <motion.span\n            className=\"font-semibold tracking-tight text-white/70 text-3xl\"\n            style={{ fontFamily: 'Inter, system-ui, sans-serif' }}\n          >\n            TRUE\n          </motion.span>\n          <motion.span\n            className=\"font-bold tracking-tight text-white text-3xl\"\n            style={{ fontFamily: 'Inter, system-ui, sans-serif' }}\n            animate={{\n              textShadow: [\n                '0 0 10px rgba(51, 184, 100, 0.3)',\n                '0 0 20px rgba(51, 184, 100, 0.6)',\n                '0 0 10px rgba(51, 184, 100, 0.3)',\n              ],\n            }}\n            transition={{\n              duration: 2,\n              repeat: Infinity,\n            }}\n          >\n            SIGNAL\n          </motion.span>\n        </motion.div>\n\n        {/* Loading Dots */}\n        <motion.div\n          className=\"flex items-center gap-2\"\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          transition={{ duration: 0.5, delay: 0.6 }}\n        >\n          {[0, 1, 2].map((i) => (\n            <motion.div\n              key={i}\n              className=\"w-2 h-2 bg-[#33b864] rounded-full\"\n              animate={{\n                y: [0, -10, 0],\n                opacity: [0.5, 1, 0.5],\n              }}\n              transition={{\n                duration: 1,\n                repeat: Infinity,\n                delay: i * 0.2,\n              }}\n            />\n          ))}\n        </motion.div>\n\n        {/* Loading Text */}\n        <motion.p\n          className=\"text-gray-500 text-sm font-medium\"\n          initial={{ opacity: 0 }}\n          animate={{ opacity: [0.5, 1, 0.5] }}\n          transition={{\n            duration: 1.5,\n            repeat: Infinity,\n          }}\n        >\n          Carregando plataforma...\n        </motion.p>\n      </div>\n\n      {/* Radial Pulse Effect */}\n      <motion.div\n        className=\"absolute inset-0 bg-[#33b864]/10 rounded-full blur-[100px]\"\n        style={{\n          width: '400px',\n          height: '400px',\n          left: '50%',\n          top: '50%',\n          transform: 'translate(-50%, -50%)',\n        }}\n        animate={{\n          scale: [1, 1.5, 1],\n          opacity: [0.1, 0.3, 0.1],\n        }}\n        transition={{\n          duration: 3,\n          repeat: Infinity,\n          ease: \"easeInOut\",\n        }}\n      />\n    </div>\n  );\n}\n","path":null,"size_bytes":5627,"size_tokens":null},"server/mercadopago-service.ts":{"content":"import axios from 'axios';\n\nconst MP_API_BASE_URL = 'https://api.mercadopago.com';\n\ninterface MercadoPagoConfig {\n  accessToken: string;\n  publicKey: string;\n}\n\ninterface CreateSubscriptionPlanParams {\n  reason: string;\n  auto_recurring: {\n    frequency: number;\n    frequency_type: 'months' | 'days' | 'weeks';\n    transaction_amount: number;\n    currency_id: string;\n    free_trial?: {\n      frequency: number;\n      frequency_type: 'months' | 'days';\n    };\n  };\n  back_url: string;\n}\n\ninterface CreateSubscriptionParams {\n  preapproval_plan_id: string;\n  reason: string;\n  external_reference: string;\n  payer_email: string;\n  back_url: string;\n}\n\nexport class MercadoPagoService {\n  private config: MercadoPagoConfig;\n\n  constructor() {\n    const accessToken = process.env.MERCADOPAGO_ACCESS_TOKEN;\n    const publicKey = process.env.MERCADOPAGO_PUBLIC_KEY;\n\n    if (!accessToken || !publicKey) {\n      console.warn('‚ö†Ô∏è Mercado Pago credentials not configured');\n      this.config = { accessToken: '', publicKey: '' };\n    } else {\n      this.config = { accessToken, publicKey };\n      console.log('‚úÖ Mercado Pago service initialized');\n    }\n  }\n\n  private get headers() {\n    return {\n      'Authorization': `Bearer ${this.config.accessToken}`,\n      'Content-Type': 'application/json',\n    };\n  }\n\n  isConfigured(): boolean {\n    return Boolean(this.config.accessToken && this.config.publicKey);\n  }\n\n  getPublicKey(): string {\n    return this.config.publicKey;\n  }\n\n  /**\n   * Create a subscription plan for True Signal Pro\n   * BLACK FRIDAY: R$ 99,87 ‚Üí R$ 47,90 (52% OFF) with 5-day trial\n   */\n  async createSubscriptionPlan(): Promise<any> {\n    if (!this.isConfigured()) {\n      throw new Error('Mercado Pago not configured');\n    }\n\n    const planData: CreateSubscriptionPlanParams = {\n      reason: 'True Signal Pro - Assinatura Mensal (BLACK FRIDAY)',\n      auto_recurring: {\n        frequency: 1,\n        frequency_type: 'months',\n        transaction_amount: 47.90,\n        currency_id: 'BRL',\n        free_trial: {\n          frequency: 5,\n          frequency_type: 'days',\n        },\n      },\n      back_url: process.env.REPLIT_DEV_DOMAIN \n        ? `https://${process.env.REPLIT_DEV_DOMAIN}/obrigado`\n        : 'http://localhost:5000/obrigado',\n    };\n\n    try {\n      const response = await axios.post(\n        `${MP_API_BASE_URL}/preapproval_plan`,\n        planData,\n        { headers: this.headers }\n      );\n\n      console.log('‚úÖ Subscription plan created:', response.data.id);\n      console.log('üìä Plan response:', JSON.stringify(response.data, null, 2));\n      return response.data;\n    } catch (error: any) {\n      console.error('‚ùå Error creating subscription plan:', error.response?.data || error.message);\n      throw error;\n    }\n  }\n\n  /**\n   * Create a subscription for a user\n   */\n  async createSubscription(params: {\n    planId: string;\n    userEmail: string;\n    userId: string;\n  }): Promise<any> {\n    if (!this.isConfigured()) {\n      throw new Error('Mercado Pago not configured');\n    }\n\n    const subscriptionData: CreateSubscriptionParams = {\n      preapproval_plan_id: params.planId,\n      reason: 'True Signal Pro - Assinatura Mensal',\n      external_reference: params.userId,\n      payer_email: params.userEmail,\n      back_url: process.env.REPLIT_DEV_DOMAIN \n        ? `https://${process.env.REPLIT_DEV_DOMAIN}/obrigado`\n        : 'http://localhost:5000/obrigado',\n    };\n\n    try {\n      const response = await axios.post(\n        `${MP_API_BASE_URL}/preapproval`,\n        subscriptionData,\n        { headers: this.headers }\n      );\n\n      console.log('‚úÖ Subscription created:', response.data.id);\n      return response.data;\n    } catch (error: any) {\n      console.error('‚ùå Error creating subscription:', error.response?.data || error.message);\n      throw error;\n    }\n  }\n\n  /**\n   * Get subscription details\n   */\n  async getSubscription(subscriptionId: string): Promise<any> {\n    if (!this.isConfigured()) {\n      throw new Error('Mercado Pago not configured');\n    }\n\n    try {\n      const response = await axios.get(\n        `${MP_API_BASE_URL}/preapproval/${subscriptionId}`,\n        { headers: this.headers }\n      );\n\n      return response.data;\n    } catch (error: any) {\n      console.error('‚ùå Error fetching subscription:', error.response?.data || error.message);\n      throw error;\n    }\n  }\n\n  /**\n   * Cancel a subscription\n   */\n  async cancelSubscription(subscriptionId: string): Promise<any> {\n    if (!this.isConfigured()) {\n      throw new Error('Mercado Pago not configured');\n    }\n\n    try {\n      const response = await axios.put(\n        `${MP_API_BASE_URL}/preapproval/${subscriptionId}`,\n        { status: 'cancelled' },\n        { headers: this.headers }\n      );\n\n      console.log('‚úÖ Subscription cancelled:', subscriptionId);\n      return response.data;\n    } catch (error: any) {\n      console.error('‚ùå Error cancelling subscription:', error.response?.data || error.message);\n      throw error;\n    }\n  }\n\n  /**\n   * Pause a subscription\n   */\n  async pauseSubscription(subscriptionId: string): Promise<any> {\n    if (!this.isConfigured()) {\n      throw new Error('Mercado Pago not configured');\n    }\n\n    try {\n      const response = await axios.put(\n        `${MP_API_BASE_URL}/preapproval/${subscriptionId}`,\n        { status: 'paused' },\n        { headers: this.headers }\n      );\n\n      console.log('‚úÖ Subscription paused:', subscriptionId);\n      return response.data;\n    } catch (error: any) {\n      console.error('‚ùå Error pausing subscription:', error.response?.data || error.message);\n      throw error;\n    }\n  }\n\n  /**\n   * Create a payment preference with PIX and other payment methods\n   * Supports: PIX, Credit Card, Debit Card, Bank Slip\n   */\n  async createPreference(params: {\n    title: string;\n    amount: number;\n    quantity: number;\n    userId: string;\n    userEmail: string;\n  }): Promise<any> {\n    if (!this.isConfigured()) {\n      throw new Error('Mercado Pago not configured');\n    }\n\n    const baseUrl = process.env.REPLIT_DEV_DOMAIN \n      ? `https://${process.env.REPLIT_DEV_DOMAIN}`\n      : 'http://localhost:5000';\n\n    const preferenceData = {\n      items: [\n        {\n          id: 'truesignal-pro-monthly',\n          title: params.title,\n          description: 'Acesso mensal √† plataforma True Signal Pro com sinais de apostas esportivas',\n          category_id: 'services',\n          unit_price: params.amount,\n          quantity: params.quantity,\n          currency_id: 'BRL',\n        },\n      ],\n      payer: {\n        email: params.userEmail,\n      },\n      external_reference: params.userId,\n      back_urls: {\n        success: `${baseUrl}/obrigado`,\n        failure: `${baseUrl}/checkout/failure`,\n        pending: `${baseUrl}/obrigado`,\n      },\n      auto_return: 'approved',\n      notification_url: `${baseUrl}/api/mercadopago/webhook`,\n      payment_methods: {\n        excluded_payment_types: [],\n        installments: 1,\n        default_installments: 1,\n      },\n      statement_descriptor: 'TRUE SIGNAL PRO',\n      binary_mode: false,\n    };\n\n    try {\n      const response = await axios.post(\n        `${MP_API_BASE_URL}/checkout/preferences`,\n        preferenceData,\n        { headers: this.headers }\n      );\n\n      console.log('‚úÖ Payment preference created with PIX enabled:', response.data.id);\n      return response.data;\n    } catch (error: any) {\n      console.error('‚ùå Error creating preference:', error.response?.data || error.message);\n      throw error;\n    }\n  }\n\n  /**\n   * Create a PIX payment directly (instant payment - transparent checkout)\n   */\n  async createPixPayment(params: {\n    amount: number;\n    userId: string;\n    userEmail: string;\n    description: string;\n    firstName?: string;\n    lastName?: string;\n    document?: string;\n  }): Promise<any> {\n    if (!this.isConfigured()) {\n      throw new Error('Mercado Pago not configured');\n    }\n\n    const paymentData: any = {\n      transaction_amount: params.amount,\n      description: params.description,\n      payment_method_id: 'pix',\n      payer: {\n        email: params.userEmail,\n        first_name: params.firstName || 'Usuario',\n        last_name: params.lastName || 'True Signal',\n      },\n      external_reference: params.userId,\n      notification_url: process.env.REPLIT_DEV_DOMAIN \n        ? `https://${process.env.REPLIT_DEV_DOMAIN}/api/mercadopago/webhook`\n        : 'http://localhost:5000/api/mercadopago/webhook',\n    };\n\n    // Add CPF if provided\n    if (params.document) {\n      paymentData.payer.identification = {\n        type: 'CPF',\n        number: params.document,\n      };\n    }\n\n    // Generate unique idempotency key for this payment\n    const idempotencyKey = `pix-${params.userId}-${Date.now()}-${Math.random().toString(36).substring(7)}`;\n\n    try {\n      const response = await axios.post(\n        `${MP_API_BASE_URL}/v1/payments`,\n        paymentData,\n        { \n          headers: {\n            ...this.headers,\n            'X-Idempotency-Key': idempotencyKey,\n          }\n        }\n      );\n\n      console.log('‚úÖ PIX payment created:', response.data.id);\n      return response.data;\n    } catch (error: any) {\n      console.error('‚ùå Error creating PIX payment:', error.response?.data || error.message);\n      throw error;\n    }\n  }\n\n  /**\n   * Search payments by external reference (userId)\n   */\n  async searchPayments(externalReference: string): Promise<any> {\n    if (!this.isConfigured()) {\n      throw new Error('Mercado Pago not configured');\n    }\n\n    try {\n      const response = await axios.get(\n        `${MP_API_BASE_URL}/v1/payments/search`,\n        {\n          params: {\n            external_reference: externalReference,\n            status: 'approved',\n            limit: 50,\n          },\n          headers: this.headers,\n        }\n      );\n\n      return response.data.results;\n    } catch (error: any) {\n      console.error('‚ùå Error searching payments:', error.response?.data || error.message);\n      throw error;\n    }\n  }\n\n  /**\n   * Create a card payment (transparent checkout with tokenized card)\n   */\n  async createCardPayment(params: {\n    token: string;\n    issuerId: string;\n    paymentMethodId: string;\n    transactionAmount: number;\n    installments: number;\n    userId: string;\n    userEmail: string;\n    payer: {\n      email: string;\n      identification: {\n        type: string;\n        number: string;\n      };\n    };\n  }): Promise<any> {\n    if (!this.isConfigured()) {\n      throw new Error('Mercado Pago not configured');\n    }\n\n    const baseUrl = process.env.REPLIT_DEV_DOMAIN \n      ? `https://${process.env.REPLIT_DEV_DOMAIN}`\n      : 'http://localhost:5000';\n\n    const paymentData = {\n      token: params.token,\n      issuer_id: params.issuerId,\n      payment_method_id: params.paymentMethodId,\n      transaction_amount: params.transactionAmount,\n      installments: params.installments,\n      description: 'True Signal Pro - Assinatura Mensal',\n      payer: {\n        email: params.payer.email,\n        identification: params.payer.identification,\n      },\n      external_reference: params.userId,\n      notification_url: `${baseUrl}/api/mercadopago/webhook`,\n      statement_descriptor: 'TRUE SIGNAL PRO',\n      binary_mode: false,\n    };\n\n    // Generate unique idempotency key for this payment\n    const idempotencyKey = `card-${params.userId}-${Date.now()}-${Math.random().toString(36).substring(7)}`;\n\n    try {\n      const response = await axios.post(\n        `${MP_API_BASE_URL}/v1/payments`,\n        paymentData,\n        { \n          headers: {\n            ...this.headers,\n            'X-Idempotency-Key': idempotencyKey,\n          }\n        }\n      );\n\n      console.log('‚úÖ Card payment created:', response.data.id, 'Status:', response.data.status);\n      return response.data;\n    } catch (error: any) {\n      console.error('‚ùå Error creating card payment:', error.response?.data || error.message);\n      throw error;\n    }\n  }\n}\n\n// Singleton instance\nexport const mercadoPagoService = new MercadoPagoService();\n","path":null,"size_bytes":12049,"size_tokens":null},"client/src/hooks/use-unread-tips.tsx":{"content":"import { useEffect, useState } from 'react';\nimport { useAuth } from './use-auth';\n\nconst STORAGE_KEY = 'vantage_viewed_tips';\n\ninterface ViewedTips {\n  [userId: string]: string[]; // userId -> array of viewed tip IDs\n}\n\nexport function useUnreadTips(allTipIds: string[]) {\n  const { user } = useAuth();\n  const [unreadCount, setUnreadCount] = useState(0);\n\n  useEffect(() => {\n    if (!user || allTipIds.length === 0) {\n      setUnreadCount(0);\n      return;\n    }\n\n    // Get viewed tips from localStorage\n    const stored = localStorage.getItem(STORAGE_KEY);\n    const viewedTips: ViewedTips = stored ? JSON.parse(stored) : {};\n    const userViewedTips = viewedTips[user.id] || [];\n\n    // Calculate unread count\n    const unread = allTipIds.filter(id => !userViewedTips.includes(id));\n    setUnreadCount(unread.length);\n  }, [user, allTipIds]);\n\n  const markAsViewed = (tipIds: string[]) => {\n    if (!user) return;\n\n    // Get current viewed tips\n    const stored = localStorage.getItem(STORAGE_KEY);\n    const viewedTips: ViewedTips = stored ? JSON.parse(stored) : {};\n    const userViewedTips = viewedTips[user.id] || [];\n\n    // Add new tip IDs (remove duplicates)\n    const combined = [...userViewedTips, ...tipIds];\n    const uniqueSet = new Set(combined);\n    const updatedViewedTips = Array.from(uniqueSet);\n    viewedTips[user.id] = updatedViewedTips;\n\n    // Save to localStorage\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(viewedTips));\n\n    // Update unread count\n    const unread = allTipIds.filter(id => !updatedViewedTips.includes(id));\n    setUnreadCount(unread.length);\n  };\n\n  const markAllAsViewed = () => {\n    if (!user || allTipIds.length === 0) return;\n    markAsViewed(allTipIds);\n  };\n\n  return {\n    unreadCount,\n    markAsViewed,\n    markAllAsViewed,\n  };\n}\n","path":null,"size_bytes":1798,"size_tokens":null},"client/src/components/landing/time-comparison.tsx":{"content":"import { Zap } from 'lucide-react';\n\nexport function TimeComparison() {\n  return (\n    <div className=\"w-full max-w-3xl mx-auto mt-12 mb-4 lg:mb-0\">\n      \n      <div className=\"relative bg-[#121212] border border-[#33b864]/20 rounded-2xl p-6 md:p-8 flex flex-col items-center justify-center gap-4 shadow-[0_0_40px_rgba(51,184,100,0.05)]\">\n        \n        <div className=\"flex flex-col items-center text-center relative\">\n          <div className=\"absolute -inset-4 bg-[#33b864]/10 blur-xl rounded-full opacity-50 pointer-events-none\"></div>\n          \n          <div className=\"flex items-center gap-2 mb-2 text-[#33b864]\">\n            <span className=\"font-bold text-xs uppercase tracking-wider\" style={{ fontFamily: 'Sora, sans-serif' }}>Com TRUE SIGNAL</span>\n            <Zap className=\"w-5 h-5 fill-current\" />\n          </div>\n          <span className=\"text-3xl md:text-5xl font-black text-white drop-shadow-[0_0_10px_rgba(51,184,100,0.5)]\" style={{ fontFamily: 'Sora, sans-serif' }}>\n            30 Segundos\n          </span>\n          <p className=\"text-xs text-gray-400 mt-2 max-w-[200px]\">\n            Recebeu a notifica√ß√£o?<br />\n            <span className=\"text-white font-bold\">Copiou. Colou.</span>\n          </p>\n        </div>\n\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":1281,"size_tokens":null},"client/src/components/pregame-stats-modal.tsx":{"content":"import { Dialog, DialogContent, DialogTitle, DialogDescription } from \"@/components/ui/dialog\";\nimport { footballService, FootballMatch, PregameInsights, TeamAverages } from \"@/lib/football-service\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { X, Target, AlertTriangle, Loader2, CornerUpRight, Square } from \"lucide-react\";\nimport { format } from \"date-fns\";\nimport { ptBR } from \"date-fns/locale\";\n\ninterface PregameStatsModalProps {\n  match: FootballMatch | null;\n  open: boolean;\n  onClose: () => void;\n}\n\nfunction StatCompare({ \n  label, \n  homeValue, \n  awayValue,\n  icon: Icon,\n}: { \n  label: string; \n  homeValue: string | number; \n  awayValue: string | number;\n  icon?: React.ComponentType<{ className?: string }>;\n}) {\n  const homeNum = typeof homeValue === 'string' ? parseFloat(homeValue) : homeValue;\n  const awayNum = typeof awayValue === 'string' ? parseFloat(awayValue) : awayValue;\n  const homeWins = homeNum > awayNum;\n  const awayWins = awayNum > homeNum;\n  \n  return (\n    <div className=\"flex items-center justify-between py-2.5 border-b border-white/5 last:border-0\">\n      <span className={`text-base font-bold ${homeWins ? 'text-[#33b864]' : 'text-white'}`}>\n        {homeValue}\n      </span>\n      <div className=\"flex items-center gap-2 text-gray-400\">\n        {Icon && <Icon className=\"w-3.5 h-3.5\" />}\n        <span className=\"text-[10px] uppercase tracking-wider\">{label}</span>\n      </div>\n      <span className={`text-base font-bold ${awayWins ? 'text-[#33b864]' : 'text-white'}`}>\n        {awayValue}\n      </span>\n    </div>\n  );\n}\n\nfunction StatsSection({ \n  title, \n  homeAverages, \n  awayAverages,\n  matchCount,\n}: { \n  title: string; \n  homeAverages: TeamAverages | null; \n  awayAverages: TeamAverages | null;\n  matchCount?: string;\n}) {\n  if (!homeAverages || !awayAverages) {\n    return (\n      <div className=\"bg-[#121212] rounded-xl p-4 border border-white/5\">\n        <div className=\"text-center mb-3\">\n          <span className=\"text-xs text-primary font-bold uppercase tracking-wider\">{title}</span>\n        </div>\n        <p className=\"text-center text-gray-500 text-sm py-4\">Dados insuficientes</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-[#121212] rounded-xl p-4 border border-white/5\">\n      <div className=\"text-center mb-3\">\n        <span className=\"text-xs text-primary font-bold uppercase tracking-wider\">{title}</span>\n        {matchCount && <span className=\"text-[10px] text-gray-500 ml-2\">({matchCount})</span>}\n      </div>\n      <StatCompare \n        label=\"Gols Marcados\" \n        homeValue={homeAverages.goalsFor} \n        awayValue={awayAverages.goalsFor}\n        icon={Target}\n      />\n      <StatCompare \n        label=\"Gols Sofridos\" \n        homeValue={homeAverages.goalsAgainst} \n        awayValue={awayAverages.goalsAgainst}\n      />\n      <StatCompare \n        label=\"Escanteios\" \n        homeValue={homeAverages.corners} \n        awayValue={awayAverages.corners}\n        icon={CornerUpRight}\n      />\n      <StatCompare \n        label=\"Cart√µes Amarelos\" \n        homeValue={homeAverages.yellowCards} \n        awayValue={awayAverages.yellowCards}\n        icon={Square}\n      />\n      <StatCompare \n        label=\"Cart√µes Vermelhos\" \n        homeValue={homeAverages.redCards} \n        awayValue={awayAverages.redCards}\n      />\n    </div>\n  );\n}\n\nexport function PregameStatsModal({ match, open, onClose }: PregameStatsModalProps) {\n  const { data: insights, isLoading } = useQuery({\n    queryKey: ['pregame-insights', match?.teams.home.id, match?.teams.away.id, match?.league.id, match?.league.season],\n    queryFn: () => footballService.getPregameInsights(\n      match!.teams.home.id, \n      match!.teams.away.id, \n      match!.league.id, \n      match!.league.season\n    ),\n    enabled: open && !!match,\n    staleTime: 5 * 60 * 1000,\n  });\n\n  if (!match) return null;\n\n  const hasData = insights?.recentForm?.home?.averages || insights?.recentForm?.away?.averages;\n\n  return (\n    <Dialog open={open} onOpenChange={(isOpen) => !isOpen && onClose()}>\n      <DialogContent className=\"max-w-lg max-h-[90vh] overflow-y-auto bg-[#0a0a0a] border-primary/20 p-0\">\n        <DialogTitle className=\"sr-only\">\n          {match.teams.home.name} vs {match.teams.away.name}\n        </DialogTitle>\n        <DialogDescription className=\"sr-only\">\n          Estat√≠sticas dos √∫ltimos jogos e confrontos diretos\n        </DialogDescription>\n        \n        {/* Header */}\n        <div className=\"sticky top-0 bg-[#121212] border-b border-primary/20 p-5 z-10\">\n          <button\n            onClick={onClose}\n            className=\"absolute right-4 top-4 text-muted-foreground hover:text-white\"\n            data-testid=\"button-close-pregame-modal\"\n          >\n            <X className=\"w-5 h-5\" />\n          </button>\n\n          {/* Match Info */}\n          <div className=\"text-center mb-4\">\n            <span className=\"text-xs text-primary font-bold uppercase\">{match.league.name}</span>\n            <div className=\"text-xs text-gray-500 mt-1\">\n              {format(new Date(match.fixture.date), \"EEEE, dd 'de' MMMM ‚Ä¢ HH:mm\", { locale: ptBR })}\n            </div>\n          </div>\n\n          {/* Teams */}\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex flex-col items-center gap-2 flex-1\">\n              <img \n                src={match.teams.home.logo} \n                alt={match.teams.home.name} \n                className=\"w-14 h-14 object-contain\"\n              />\n              <span className=\"text-sm font-bold text-white text-center max-w-[100px] truncate\">\n                {match.teams.home.name}\n              </span>\n            </div>\n\n            <div className=\"px-4\">\n              <span className=\"text-2xl font-black text-gray-600\">VS</span>\n            </div>\n\n            <div className=\"flex flex-col items-center gap-2 flex-1\">\n              <img \n                src={match.teams.away.logo} \n                alt={match.teams.away.name} \n                className=\"w-14 h-14 object-contain\"\n              />\n              <span className=\"text-sm font-bold text-white text-center max-w-[100px] truncate\">\n                {match.teams.away.name}\n              </span>\n            </div>\n          </div>\n        </div>\n\n        {/* Stats Content */}\n        <div className=\"p-5 space-y-4\">\n          {isLoading ? (\n            <div className=\"flex flex-col items-center justify-center py-12\">\n              <Loader2 className=\"w-8 h-8 text-primary animate-spin mb-4\" />\n              <p className=\"text-gray-400 text-sm\">Carregando estat√≠sticas...</p>\n            </div>\n          ) : !hasData ? (\n            <div className=\"text-center py-12\">\n              <AlertTriangle className=\"w-12 h-12 text-gray-600 mx-auto mb-4\" />\n              <p className=\"text-gray-400\">Estat√≠sticas indispon√≠veis para esta partida</p>\n            </div>\n          ) : (\n            <>\n              {/* Last 5 Matches */}\n              <StatsSection \n                title=\"√öltimos 5 jogos\" \n                homeAverages={insights?.recentForm?.home?.averages || null}\n                awayAverages={insights?.recentForm?.away?.averages || null}\n                matchCount={`m√©dia por jogo`}\n              />\n\n              {/* H2H - Last 3 Matches */}\n              <StatsSection \n                title=\"√öltimos 3 confrontos diretos\" \n                homeAverages={insights?.headToHead?.home?.averages || null}\n                awayAverages={insights?.headToHead?.away?.averages || null}\n                matchCount={`H2H`}\n              />\n            </>\n          )}\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","path":null,"size_bytes":7678,"size_tokens":null},"client/src/lib/image-upload-service.ts":{"content":"import { supabase, isSupabaseConfigured } from './supabase';\n\nconst BUCKET_NAME = 'tip-images';\n\nexport interface UploadResult {\n  success: boolean;\n  url?: string;\n  error?: string;\n}\n\nexport const imageUploadService = {\n  async uploadTipImage(file: File): Promise<UploadResult> {\n    if (!isSupabaseConfigured()) {\n      return { success: false, error: 'Supabase n√£o configurado' };\n    }\n\n    try {\n      const fileExt = file.name.split('.').pop();\n      const fileName = `${Date.now()}-${Math.random().toString(36).substring(7)}.${fileExt}`;\n      const filePath = `tips/${fileName}`;\n\n      const { data, error } = await supabase.storage\n        .from(BUCKET_NAME)\n        .upload(filePath, file, {\n          cacheControl: '3600',\n          upsert: false\n        });\n\n      if (error) {\n        console.error('Upload error:', error);\n        return { success: false, error: error.message };\n      }\n\n      const { data: urlData } = supabase.storage\n        .from(BUCKET_NAME)\n        .getPublicUrl(filePath);\n\n      return { success: true, url: urlData.publicUrl };\n    } catch (error: any) {\n      console.error('Upload exception:', error);\n      return { success: false, error: error.message || 'Erro ao fazer upload' };\n    }\n  },\n\n  async deleteTipImage(imageUrl: string): Promise<boolean> {\n    if (!isSupabaseConfigured()) return false;\n\n    try {\n      const urlParts = imageUrl.split(`${BUCKET_NAME}/`);\n      if (urlParts.length < 2) return false;\n\n      const filePath = urlParts[1];\n      const { error } = await supabase.storage\n        .from(BUCKET_NAME)\n        .remove([filePath]);\n\n      return !error;\n    } catch {\n      return false;\n    }\n  }\n};\n","path":null,"size_bytes":1672,"size_tokens":null},"client/src/hooks/use-tips-stats.ts":{"content":"import { useQuery } from '@tanstack/react-query';\n\ninterface TipsStats {\n  greens: number;\n  reds: number;\n  pending: number;\n  totalEntries: number;\n  totalResolved: number;\n  assertivity: number;\n  averageOdd: number;\n  growthPercentage: number;\n  profitUnits: number;\n  monthName: string;\n  monthTotalTips: number;\n}\n\nconst MONTH_NAMES = [\n  'Janeiro', 'Fevereiro', 'Mar√ßo', 'Abril', 'Maio', 'Junho',\n  'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'\n];\n\nasync function fetchTipsStats(): Promise<TipsStats> {\n  const response = await fetch('/api/tips/stats');\n  if (!response.ok) {\n    throw new Error('Failed to fetch tips stats');\n  }\n  const data = await response.json();\n  \n  const currentMonth = new Date().getMonth();\n  const monthName = MONTH_NAMES[currentMonth];\n  \n  return {\n    greens: data.greenTips || 0,\n    reds: data.redTips || 0,\n    pending: data.pendingTips || 0,\n    totalEntries: data.totalTips || 0,\n    totalResolved: data.settledTips || 0,\n    assertivity: data.assertivity || 0,\n    averageOdd: data.avgOddGreen || 0,\n    growthPercentage: data.roi || 0,\n    profitUnits: data.totalProfit || 0,\n    monthName,\n    monthTotalTips: data.totalTips || 0,\n  };\n}\n\nexport function useTipsStats() {\n  return useQuery({\n    queryKey: ['tips-stats'],\n    queryFn: fetchTipsStats,\n    refetchInterval: 30000,\n    staleTime: 10000,\n  });\n}\n","path":null,"size_bytes":1375,"size_tokens":null},"client/src/pages/coming-soon.tsx":{"content":"import { Link } from \"wouter\";\nimport { Construction, ArrowLeft, Sparkles } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\n\nexport default function ComingSoon() {\n  return (\n    <div className=\"min-h-screen bg-[#0a0a0a] flex items-center justify-center p-6\">\n      <div className=\"max-w-md w-full text-center\">\n        \n        <div className=\"relative mb-8\">\n          <div className=\"w-24 h-24 mx-auto bg-[#33b864]/10 rounded-full flex items-center justify-center border border-[#33b864]/30 animate-pulse\">\n            <Construction className=\"w-12 h-12 text-[#33b864]\" />\n          </div>\n          <div className=\"absolute -top-2 -right-8 animate-bounce\">\n            <Sparkles className=\"w-6 h-6 text-yellow-500\" />\n          </div>\n        </div>\n\n        <h1 \n          className=\"text-3xl font-bold text-white mb-4\"\n          style={{ fontFamily: 'Sora, sans-serif' }}\n        >\n          Em Desenvolvimento\n        </h1>\n        \n        <p className=\"text-gray-400 mb-8 leading-relaxed\">\n          Estamos trabalhando para trazer essa funcionalidade para voc√™ em breve. \n          Fique ligado nas novidades!\n        </p>\n\n        <div className=\"bg-[#121212] border border-[#33b864]/20 rounded-2xl p-6 mb-8\">\n          <div className=\"flex items-center justify-center gap-3 mb-4\">\n            <div className=\"w-2 h-2 bg-[#33b864] rounded-full animate-pulse\"></div>\n            <span className=\"text-sm text-[#33b864] font-medium\">Previs√£o de lan√ßamento</span>\n          </div>\n          <p className=\"text-2xl font-bold text-white\" style={{ fontFamily: 'Sora, sans-serif' }}>\n            Em breve\n          </p>\n        </div>\n\n        <Link href=\"/app\">\n          <Button \n            variant=\"outline\" \n            className=\"border-[#33b864]/30 text-[#33b864] hover:bg-[#33b864]/10 hover:border-[#33b864]/50\"\n            data-testid=\"button-back-home\"\n          >\n            <ArrowLeft className=\"w-4 h-4 mr-2\" />\n            Voltar para Home\n          </Button>\n        </Link>\n\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":2052,"size_tokens":null},"client/src/pages/subscription.tsx":{"content":"import { Layout } from \"@/components/layout\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { useAccessControl } from \"@/hooks/use-access-control\";\nimport { Crown, Calendar, Clock, RefreshCw, CheckCircle, AlertTriangle, XCircle, Sparkles, Shield, Zap, ExternalLink } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { differenceInDays, format, addDays } from \"date-fns\";\nimport { ptBR } from \"date-fns/locale\";\nimport { useState } from \"react\";\nimport { toast } from \"sonner\";\n\nconst CHECKOUT_URL = '/checkout';\n\nexport default function SubscriptionPage() {\n  const { user } = useAuth();\n  const { isPremium, isTrial, isExpired, daysRemaining } = useAccessControl();\n  const [isRenewing, setIsRenewing] = useState(false);\n\n  const subscriptionEndsAt = user?.subscriptionEndsAt ? new Date(user.subscriptionEndsAt) : null;\n  const subscriptionActivatedAt = user?.subscriptionActivatedAt ? new Date(user.subscriptionActivatedAt) : null;\n\n  const handleRenew = () => {\n    window.location.href = CHECKOUT_URL;\n  };\n\n  const getStatusInfo = () => {\n    if (isPremium) {\n      return {\n        icon: <CheckCircle className=\"w-6 h-6\" />,\n        title: \"True Signal Prime Ativo\",\n        subtitle: \"Voc√™ tem acesso completo a todos os bilhetes\",\n        color: \"text-[#33b864]\",\n        bgColor: \"bg-[#33b864]/10\",\n        borderColor: \"border-[#33b864]/30\",\n      };\n    }\n    if (isTrial) {\n      return {\n        icon: <Clock className=\"w-6 h-6\" />,\n        title: \"Per√≠odo de Teste\",\n        subtitle: `Restam ${daysRemaining} dias de teste gratuito`,\n        color: \"text-yellow-500\",\n        bgColor: \"bg-yellow-500/10\",\n        borderColor: \"border-yellow-500/30\",\n      };\n    }\n    return {\n      icon: <XCircle className=\"w-6 h-6\" />,\n      title: \"Assinatura Expirada\",\n      subtitle: \"Renove agora para continuar acessando\",\n      color: \"text-red-500\",\n      bgColor: \"bg-red-500/10\",\n      borderColor: \"border-red-500/30\",\n    };\n  };\n\n  const statusInfo = getStatusInfo();\n\n  // Calculate days until expiration for Prime users\n  const daysUntilExpiration = subscriptionEndsAt \n    ? Math.max(0, differenceInDays(subscriptionEndsAt, new Date()))\n    : 0;\n\n  const isAboutToExpire = isPremium && daysUntilExpiration <= 7;\n\n  return (\n    <Layout>\n      <div className=\"max-w-2xl mx-auto space-y-6\">\n        {/* Header */}\n        <div className=\"flex items-center gap-3 mb-6\">\n          <div className=\"p-2 bg-[#33b864]/10 rounded-lg border border-[#33b864]/20\">\n            <Crown className=\"w-6 h-6 text-[#33b864]\" />\n          </div>\n          <div>\n            <h1 className=\"text-2xl font-bold text-white\" style={{ fontFamily: 'Sora, sans-serif' }}>\n              Minha Assinatura\n            </h1>\n            <p className=\"text-gray-400 text-sm\">Gerencie seu plano True Signal Prime</p>\n          </div>\n        </div>\n\n        {/* Status Card */}\n        <div className={`${statusInfo.bgColor} border ${statusInfo.borderColor} rounded-2xl p-6`} data-testid=\"subscription-status-card\">\n          <div className=\"flex items-start gap-4\">\n            <div className={`p-3 rounded-xl ${statusInfo.bgColor} ${statusInfo.color}`}>\n              {statusInfo.icon}\n            </div>\n            <div className=\"flex-1\">\n              <h2 className={`text-xl font-bold ${statusInfo.color}`} style={{ fontFamily: 'Sora, sans-serif' }}>\n                {statusInfo.title}\n              </h2>\n              <p className=\"text-gray-400 mt-1\">{statusInfo.subtitle}</p>\n            </div>\n          </div>\n\n          {/* Prime Details */}\n          {isPremium && subscriptionEndsAt && (\n            <div className=\"mt-6 pt-6 border-t border-white/10\">\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <p className=\"text-gray-500 text-xs uppercase tracking-wider mb-1\">Ativado em</p>\n                  <p className=\"text-white font-medium\">\n                    {subscriptionActivatedAt \n                      ? format(subscriptionActivatedAt, \"dd 'de' MMMM, yyyy\", { locale: ptBR })\n                      : \"‚Äî\"\n                    }\n                  </p>\n                </div>\n                <div>\n                  <p className=\"text-gray-500 text-xs uppercase tracking-wider mb-1\">V√°lido at√©</p>\n                  <p className=\"text-white font-medium\">\n                    {format(subscriptionEndsAt, \"dd 'de' MMMM, yyyy\", { locale: ptBR })}\n                  </p>\n                </div>\n              </div>\n\n              {/* Days Counter */}\n              <div className=\"mt-6 bg-white/5 rounded-xl p-4 border border-white/10\">\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center gap-3\">\n                    <Calendar className=\"w-5 h-5 text-[#33b864]\" />\n                    <span className=\"text-gray-300\">Dias restantes</span>\n                  </div>\n                  <div className={`text-2xl font-bold ${isAboutToExpire ? 'text-yellow-500' : 'text-[#33b864]'}`}>\n                    {daysUntilExpiration}\n                  </div>\n                </div>\n                \n                {/* Progress Bar */}\n                <div className=\"mt-3 h-2 bg-white/10 rounded-full overflow-hidden\">\n                  <div \n                    className={`h-full rounded-full transition-all ${isAboutToExpire ? 'bg-yellow-500' : 'bg-[#33b864]'}`}\n                    style={{ width: `${Math.min(100, (daysUntilExpiration / 30) * 100)}%` }}\n                  />\n                </div>\n              </div>\n\n              {/* Renewal Warning */}\n              {isAboutToExpire && (\n                <div className=\"mt-4 bg-yellow-500/10 border border-yellow-500/30 rounded-xl p-4 flex items-start gap-3\">\n                  <AlertTriangle className=\"w-5 h-5 text-yellow-500 shrink-0 mt-0.5\" />\n                  <div>\n                    <p className=\"text-yellow-500 font-medium\">Sua assinatura est√° acabando!</p>\n                    <p className=\"text-gray-400 text-sm mt-1\">\n                      Renove agora para n√£o perder acesso aos bilhetes premium.\n                    </p>\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n\n        {/* Action Buttons */}\n        <div className=\"space-y-3\">\n          {!isPremium && (\n            <Button\n              onClick={handleRenew}\n              className=\"w-full h-14 bg-[#33b864] hover:bg-[#289a54] text-black font-bold text-lg rounded-xl gap-2 shadow-lg shadow-[#33b864]/30\"\n              data-testid=\"button-subscribe\"\n            >\n              <Sparkles className=\"w-5 h-5\" />\n              {isExpired ? \"Renovar Assinatura\" : \"Assinar True Signal Prime\"}\n            </Button>\n          )}\n\n          {isPremium && isAboutToExpire && (\n            <Button\n              onClick={handleRenew}\n              className=\"w-full h-14 bg-[#33b864] hover:bg-[#289a54] text-black font-bold text-lg rounded-xl gap-2 shadow-lg shadow-[#33b864]/30\"\n              data-testid=\"button-renew\"\n            >\n              <RefreshCw className=\"w-5 h-5\" />\n              Renovar Agora\n            </Button>\n          )}\n        </div>\n\n        {/* Benefits */}\n        <div className=\"bg-[#121212] border border-white/10 rounded-2xl p-6\">\n          <h3 className=\"text-lg font-bold text-white mb-4\" style={{ fontFamily: 'Sora, sans-serif' }}>\n            Benef√≠cios do True Signal Prime\n          </h3>\n          \n          <div className=\"space-y-4\">\n            <div className=\"flex items-start gap-3\">\n              <div className=\"p-2 bg-[#33b864]/10 rounded-lg shrink-0\">\n                <CheckCircle className=\"w-4 h-4 text-[#33b864]\" />\n              </div>\n              <div>\n                <p className=\"text-white font-medium\">Acesso Ilimitado</p>\n                <p className=\"text-gray-500 text-sm\">Todos os bilhetes e sinais premium dispon√≠veis</p>\n              </div>\n            </div>\n            \n            <div className=\"flex items-start gap-3\">\n              <div className=\"p-2 bg-[#33b864]/10 rounded-lg shrink-0\">\n                <Shield className=\"w-4 h-4 text-[#33b864]\" />\n              </div>\n              <div>\n                <p className=\"text-white font-medium\">An√°lises Validadas</p>\n                <p className=\"text-gray-500 text-sm\">Por especialistas + IA de alta performance</p>\n              </div>\n            </div>\n            \n            <div className=\"flex items-start gap-3\">\n              <div className=\"p-2 bg-[#33b864]/10 rounded-lg shrink-0\">\n                <Zap className=\"w-4 h-4 text-[#33b864]\" />\n              </div>\n              <div>\n                <p className=\"text-white font-medium\">Notifica√ß√µes Instant√¢neas</p>\n                <p className=\"text-gray-500 text-sm\">Receba novos sinais em tempo real</p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Pricing */}\n        <div className=\"bg-gradient-to-br from-[#33b864]/10 to-[#33b864]/5 border border-[#33b864]/30 rounded-2xl p-6 text-center\">\n          <p className=\"text-gray-400 text-sm uppercase tracking-wider mb-2\">Investimento mensal</p>\n          <div className=\"flex items-baseline justify-center gap-1\">\n            <span className=\"text-gray-400 text-lg\">R$</span>\n            <span className=\"text-4xl font-bold text-white\" style={{ fontFamily: 'Sora, sans-serif' }}>2,00</span>\n            <span className=\"text-gray-400\">/m√™s</span>\n          </div>\n          <p className=\"text-[#33b864] text-sm mt-2\">30 dias de acesso completo</p>\n        </div>\n\n        {/* Support */}\n        <div className=\"text-center pt-4\">\n          <p className=\"text-gray-500 text-sm\">\n            D√∫vidas sobre sua assinatura?{\" \"}\n            <a \n              href=\"https://wa.me/5511999999999\" \n              target=\"_blank\" \n              rel=\"noopener noreferrer\"\n              className=\"text-[#33b864] hover:underline inline-flex items-center gap-1\"\n            >\n              Fale com o suporte\n              <ExternalLink className=\"w-3 h-3\" />\n            </a>\n          </p>\n        </div>\n      </div>\n    </Layout>\n  );\n}\n","path":null,"size_bytes":10162,"size_tokens":null},"client/src/pages/thank-you.tsx":{"content":"import { useEffect, useState, useCallback } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { CheckCircle2, Crown, Sparkles, ArrowRight, Ticket, Shield, Zap, Loader2 } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { analytics } from \"@/lib/analytics\";\n\nexport default function ThankYouPage() {\n  const [, setLocation] = useLocation();\n  const { user, reloadProfile } = useAuth();\n  const [showConfetti, setShowConfetti] = useState(true);\n  const [isVerifying, setIsVerifying] = useState(true);\n  const [pollCount, setPollCount] = useState(0);\n\n  const isPremium = user?.subscriptionStatus === 'active';\n\n  const pollSubscriptionStatus = useCallback(async () => {\n    if (isPremium) {\n      setIsVerifying(false);\n      return;\n    }\n\n    try {\n      await reloadProfile?.();\n      setPollCount(prev => prev + 1);\n    } catch (error) {\n      console.error('Error polling subscription status:', error);\n    }\n  }, [isPremium, reloadProfile]);\n\n  useEffect(() => {\n    pollSubscriptionStatus();\n    \n    // Track purchase conversion on thank you page\n    analytics.trackPurchase('thank_you_page', 49.93);\n    \n    const timer = setTimeout(() => setShowConfetti(false), 5000);\n    return () => clearTimeout(timer);\n  }, []);\n\n  useEffect(() => {\n    if (isPremium) {\n      setIsVerifying(false);\n      return;\n    }\n\n    if (pollCount >= 30) {\n      setIsVerifying(false);\n      return;\n    }\n\n    const pollInterval = setInterval(() => {\n      pollSubscriptionStatus();\n    }, 2000);\n\n    return () => clearInterval(pollInterval);\n  }, [isPremium, pollCount, pollSubscriptionStatus]);\n\n  return (\n    <div className=\"min-h-screen bg-[#0a0a0a] flex items-center justify-center p-4 relative overflow-hidden\">\n      {/* Background Glow */}\n      <div className=\"absolute inset-0 bg-gradient-to-br from-[#33b864]/10 via-transparent to-[#33b864]/5\" />\n      \n      {/* Animated circles */}\n      <div className=\"absolute top-1/4 left-1/4 w-96 h-96 bg-[#33b864]/10 rounded-full blur-3xl animate-pulse\" />\n      <div className=\"absolute bottom-1/4 right-1/4 w-80 h-80 bg-[#33b864]/5 rounded-full blur-3xl animate-pulse delay-1000\" />\n\n      {/* Confetti Effect */}\n      {showConfetti && (\n        <div className=\"absolute inset-0 pointer-events-none overflow-hidden\">\n          {[...Array(50)].map((_, i) => (\n            <div\n              key={i}\n              className=\"absolute animate-bounce\"\n              style={{\n                left: `${Math.random() * 100}%`,\n                top: `-${Math.random() * 20}%`,\n                animationDelay: `${Math.random() * 2}s`,\n                animationDuration: `${2 + Math.random() * 3}s`,\n              }}\n            >\n              <Sparkles className=\"w-4 h-4 text-[#33b864]\" style={{ opacity: Math.random() }} />\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* Main Card */}\n      <div className=\"relative z-10 max-w-lg w-full\" data-testid=\"thank-you-card\">\n        <div className=\"bg-[#121212] border-2 border-[#33b864]/50 rounded-3xl p-8 md:p-12 text-center shadow-2xl shadow-[#33b864]/20\">\n          \n          {/* Success Icon */}\n          <div className=\"relative mx-auto w-24 h-24 mb-6\">\n            <div className=\"absolute inset-0 bg-[#33b864]/20 rounded-full animate-ping\" />\n            <div className=\"relative w-full h-full bg-gradient-to-br from-[#33b864] to-[#289a54] rounded-full flex items-center justify-center\">\n              <CheckCircle2 className=\"w-12 h-12 text-black\" />\n            </div>\n          </div>\n\n          {/* Crown Badge */}\n          <div className=\"inline-flex items-center gap-2 bg-[#33b864]/10 border border-[#33b864]/30 rounded-full px-4 py-2 mb-6\">\n            <Crown className=\"w-5 h-5 text-[#33b864]\" />\n            <span className=\"text-[#33b864] font-bold text-sm uppercase tracking-wider\">True Signal Prime</span>\n          </div>\n\n          {/* Title */}\n          <h1 className=\"text-3xl md:text-4xl font-bold text-white mb-4\" style={{ fontFamily: 'Sora, sans-serif' }}>\n            Bem-vindo ao Prime! üéâ\n          </h1>\n\n          {/* Subtitle */}\n          <p className=\"text-gray-400 text-lg mb-8\">\n            {isVerifying ? (\n              <span className=\"flex items-center justify-center gap-2\">\n                <Loader2 className=\"w-5 h-5 animate-spin text-[#33b864]\" />\n                Verificando seu pagamento...\n              </span>\n            ) : isPremium ? (\n              <>Pagamento confirmado! Agora voc√™ tem acesso a <span className=\"text-[#33b864] font-semibold\">todos os bilhetes</span> por 30 dias!</>\n            ) : (\n              <>Seu pagamento est√° sendo processado. Voc√™ receber√° acesso em instantes.</>\n            )}\n          </p>\n\n          {/* Benefits */}\n          <div className=\"grid grid-cols-1 gap-3 mb-8\">\n            <div className=\"flex items-center gap-3 bg-white/5 rounded-xl p-4 border border-white/10\">\n              <div className=\"p-2 bg-[#33b864]/10 rounded-lg\">\n                <Ticket className=\"w-5 h-5 text-[#33b864]\" />\n              </div>\n              <div className=\"text-left\">\n                <p className=\"text-white font-medium\">Bilhetes Ilimitados</p>\n                <p className=\"text-gray-500 text-sm\">Acesso a todos os sinais premium</p>\n              </div>\n            </div>\n            \n            <div className=\"flex items-center gap-3 bg-white/5 rounded-xl p-4 border border-white/10\">\n              <div className=\"p-2 bg-[#33b864]/10 rounded-lg\">\n                <Shield className=\"w-5 h-5 text-[#33b864]\" />\n              </div>\n              <div className=\"text-left\">\n                <p className=\"text-white font-medium\">An√°lises Validadas</p>\n                <p className=\"text-gray-500 text-sm\">Por especialistas + IA de alta performance</p>\n              </div>\n            </div>\n            \n            <div className=\"flex items-center gap-3 bg-white/5 rounded-xl p-4 border border-white/10\">\n              <div className=\"p-2 bg-[#33b864]/10 rounded-lg\">\n                <Zap className=\"w-5 h-5 text-[#33b864]\" />\n              </div>\n              <div className=\"text-left\">\n                <p className=\"text-white font-medium\">Notifica√ß√µes em Tempo Real</p>\n                <p className=\"text-gray-500 text-sm\">Receba novos sinais instantaneamente</p>\n              </div>\n            </div>\n          </div>\n\n          {/* CTA Button */}\n          <Button\n            onClick={() => setLocation('/tips')}\n            className=\"w-full h-14 bg-[#33b864] hover:bg-[#289a54] text-black font-bold text-lg rounded-xl gap-2 shadow-lg shadow-[#33b864]/30 transition-all hover:scale-[1.02]\"\n            data-testid=\"button-go-to-tips\"\n          >\n            Ver Bilhetes Premium\n            <ArrowRight className=\"w-5 h-5\" />\n          </Button>\n\n          {/* User Email */}\n          {user?.email && (\n            <p className=\"mt-6 text-gray-500 text-sm\">\n              Assinatura ativa para: <span className=\"text-gray-400\">{user.email}</span>\n            </p>\n          )}\n\n          {/* Status indicator */}\n          {isPremium && (\n            <div className=\"mt-4 inline-flex items-center gap-2 text-[#33b864] text-sm\">\n              <div className=\"w-2 h-2 rounded-full bg-[#33b864] animate-pulse\" />\n              Acesso Prime ativo\n            </div>\n          )}\n        </div>\n\n        {/* Footer Note */}\n        <p className=\"text-center text-gray-600 text-xs mt-6\">\n          Um email de confirma√ß√£o foi enviado para voc√™. <br />\n          D√∫vidas? Fale conosco pelo WhatsApp.\n        </p>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":7645,"size_tokens":null},"client/src/components/manual-ticket-form.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { footballService, FootballMatch } from \"@/lib/football-service\";\nimport { Calendar, Clock, Trophy, Search, ChevronRight, Send, Loader2, Plus, Trash2, PenLine } from \"lucide-react\";\nimport { toast } from \"sonner\";\nimport { format } from \"date-fns\";\nimport { ptBR } from \"date-fns/locale\";\n\ninterface BetLeg {\n  id: string;\n  market: string;\n}\n\ninterface StructuredLeg {\n  homeTeam: string;\n  awayTeam: string;\n  homeTeamLogo?: string;\n  awayTeamLogo?: string;\n  league: string;\n  market: string;\n  outcome?: string;\n  odd: number;\n  time?: string;\n}\n\ninterface ManualTicketFormProps {\n  onSubmit: (data: {\n    homeTeam: string;\n    awayTeam: string;\n    league: string;\n    matchTime: string;\n    market: string;\n    odd: number;\n    stake: number;\n    betLink: string;\n    homeTeamLogo?: string;\n    awayTeamLogo?: string;\n    fixtureId?: string;\n    isCombo?: boolean;\n    legs?: StructuredLeg[];\n    totalOdd?: number;\n  }) => void;\n  isSubmitting?: boolean;\n}\n\ninterface ManualMatchData {\n  homeTeam: string;\n  awayTeam: string;\n  league: string;\n  matchTime: string;\n}\n\nexport function ManualTicketForm({ onSubmit, isSubmitting }: ManualTicketFormProps) {\n  const [selectedDate, setSelectedDate] = useState(new Date().toISOString().split('T')[0]);\n  const [selectedMatch, setSelectedMatch] = useState<FootballMatch | null>(null);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [betLink, setBetLink] = useState(\"\");\n  \n  // Modo de entrada manual (quando n√£o encontra na API)\n  const [isManualMode, setIsManualMode] = useState(false);\n  const [manualData, setManualData] = useState<ManualMatchData>({\n    homeTeam: \"\",\n    awayTeam: \"\",\n    league: \"\",\n    matchTime: \"\",\n  });\n  \n  // M√∫ltiplas linhas do bilhete\n  const [legs, setLegs] = useState<BetLeg[]>([\n    { id: crypto.randomUUID(), market: \"\" }\n  ]);\n  \n  // Odd total √∫nica\n  const [totalOdd, setTotalOdd] = useState(\"\");\n  \n  // Stake (peso da tip em unidades)\n  const [stake, setStake] = useState(\"1.0\");\n\n  // Buscar jogos da API\n  const { data: fixtures = [], isLoading } = useQuery({\n    queryKey: ['fixtures', selectedDate],\n    queryFn: () => footballService.getFixturesByDate(selectedDate),\n  });\n\n  // Filtrar jogos pela busca\n  const filteredFixtures = fixtures.filter(match => {\n    if (!searchQuery.trim()) return true;\n    const query = searchQuery.toLowerCase();\n    return (\n      match.teams.home.name.toLowerCase().includes(query) ||\n      match.teams.away.name.toLowerCase().includes(query) ||\n      match.league.name.toLowerCase().includes(query)\n    );\n  });\n\n  const addLeg = () => {\n    setLegs([...legs, { id: crypto.randomUUID(), market: \"\" }]);\n  };\n\n  const removeLeg = (id: string) => {\n    if (legs.length === 1) return;\n    setLegs(legs.filter(leg => leg.id !== id));\n  };\n\n  const updateLeg = (id: string, field: keyof BetLeg, value: string) => {\n    setLegs(legs.map(leg => \n      leg.id === id ? { ...leg, [field]: value } : leg\n    ));\n  };\n\n  const handleSubmit = () => {\n    // Validar se tem jogo selecionado (API ou manual)\n    if (!selectedMatch && !isManualMode) {\n      toast.error(\"Selecione um jogo primeiro\");\n      return;\n    }\n\n    // Validar dados manuais se estiver em modo manual\n    if (isManualMode) {\n      if (!manualData.homeTeam.trim() || !manualData.awayTeam.trim()) {\n        toast.error(\"Preencha os nomes dos times\");\n        return;\n      }\n      if (!manualData.league.trim()) {\n        toast.error(\"Preencha o campeonato\");\n        return;\n      }\n      if (!manualData.matchTime.trim()) {\n        toast.error(\"Preencha o hor√°rio do jogo\");\n        return;\n      }\n    }\n\n    // Validar legs\n    for (const leg of legs) {\n      if (!leg.market.trim()) {\n        toast.error(\"Preencha todas as linhas do bilhete\");\n        return;\n      }\n    }\n    \n    // Validar odd total\n    if (!totalOdd || parseFloat(totalOdd) <= 0) {\n      toast.error(\"Preencha a odd total do bilhete\");\n      return;\n    }\n\n    // Combinar mercados com quebra de linha\n    const marketText = legs.map(leg => leg.market.trim()).filter(m => m).join('\\n');\n    const oddValue = parseFloat(totalOdd);\n    const stakeValue = parseFloat(stake) || 1.0;\n    const isComboTicket = legs.length > 1;\n    \n    // Calcular odd individual aproximada para cada leg (dividida igualmente)\n    const oddPerLeg = legs.length > 1 ? Math.pow(oddValue, 1 / legs.length) : oddValue;\n\n    if (isManualMode) {\n      // Construir array de legs estruturado para modo manual\n      const structuredLegs: StructuredLeg[] = legs.map(leg => ({\n        homeTeam: manualData.homeTeam.trim(),\n        awayTeam: manualData.awayTeam.trim(),\n        league: manualData.league.trim(),\n        market: leg.market.trim(),\n        outcome: leg.market.trim(),\n        odd: oddPerLeg,\n        time: manualData.matchTime.trim(),\n      }));\n\n      // Enviar dados manuais\n      onSubmit({\n        homeTeam: manualData.homeTeam.trim(),\n        awayTeam: manualData.awayTeam.trim(),\n        league: manualData.league.trim(),\n        matchTime: manualData.matchTime.trim(),\n        market: marketText,\n        odd: oddValue,\n        stake: stakeValue,\n        betLink: betLink,\n        isCombo: isComboTicket,\n        legs: isComboTicket ? structuredLegs : undefined,\n        totalOdd: isComboTicket ? oddValue : undefined,\n      });\n\n      // Reset\n      setIsManualMode(false);\n      setManualData({ homeTeam: \"\", awayTeam: \"\", league: \"\", matchTime: \"\" });\n    } else if (selectedMatch) {\n      // Formatar hor√°rio da API\n      const matchDate = new Date(selectedMatch.fixture.date);\n      const day = matchDate.getDate().toString().padStart(2, '0');\n      const month = (matchDate.getMonth() + 1).toString().padStart(2, '0');\n      const hours = matchDate.getHours().toString().padStart(2, '0');\n      const minutes = matchDate.getMinutes().toString().padStart(2, '0');\n      const matchTime = `${day}/${month} √†s ${hours}:${minutes}`;\n\n      // Construir array de legs estruturado para jogo da API\n      const structuredLegs: StructuredLeg[] = legs.map(leg => ({\n        homeTeam: selectedMatch.teams.home.name,\n        awayTeam: selectedMatch.teams.away.name,\n        homeTeamLogo: selectedMatch.teams.home.logo,\n        awayTeamLogo: selectedMatch.teams.away.logo,\n        league: selectedMatch.league.name,\n        market: leg.market.trim(),\n        outcome: leg.market.trim(),\n        odd: oddPerLeg,\n        time: matchTime,\n      }));\n\n      onSubmit({\n        homeTeam: selectedMatch.teams.home.name,\n        awayTeam: selectedMatch.teams.away.name,\n        league: selectedMatch.league.name,\n        matchTime: matchTime,\n        market: marketText,\n        odd: oddValue,\n        stake: stakeValue,\n        betLink: betLink,\n        homeTeamLogo: selectedMatch.teams.home.logo,\n        awayTeamLogo: selectedMatch.teams.away.logo,\n        fixtureId: selectedMatch.fixture.id.toString(),\n        isCombo: isComboTicket,\n        legs: isComboTicket ? structuredLegs : undefined,\n        totalOdd: isComboTicket ? oddValue : undefined,\n      });\n\n      // Reset\n      setSelectedMatch(null);\n    }\n    \n    setLegs([{ id: crypto.randomUUID(), market: \"\" }]);\n    setTotalOdd(\"\");\n    setStake(\"1.0\");\n    setBetLink(\"\");\n  };\n\n  // Formatar data do jogo\n  const formatMatchTime = (dateStr: string) => {\n    const date = new Date(dateStr);\n    return format(date, \"HH:mm\", { locale: ptBR });\n  };\n\n  return (\n    <div className=\"space-y-5\">\n      {/* Se n√£o selecionou jogo, mostrar seletor */}\n      {!selectedMatch ? (\n        <>\n          {/* Seletor de Data */}\n          <div className=\"space-y-2\">\n            <Label className=\"text-sm text-muted-foreground flex items-center gap-2\">\n              <Calendar className=\"w-4 h-4\" />\n              Data do Jogo\n            </Label>\n            <Input\n              type=\"date\"\n              value={selectedDate}\n              onChange={(e) => setSelectedDate(e.target.value)}\n              className=\"bg-background/50 border-border/50\"\n              data-testid=\"input-date\"\n            />\n          </div>\n\n          {/* Busca */}\n          <div className=\"relative\">\n            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\n            <Input\n              placeholder=\"Buscar time ou campeonato...\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              className=\"pl-10 bg-background/50 border-border/50\"\n              data-testid=\"input-search\"\n            />\n          </div>\n\n          {/* Lista de Jogos */}\n          <div className=\"space-y-2 max-h-[300px] overflow-y-auto pr-1\">\n            {isLoading ? (\n              <div className=\"flex items-center justify-center py-8\">\n                <Loader2 className=\"w-6 h-6 text-primary animate-spin\" />\n                <span className=\"ml-2 text-muted-foreground\">Carregando jogos...</span>\n              </div>\n            ) : filteredFixtures.length === 0 ? (\n              <div className=\"text-center py-6 text-muted-foreground\">\n                {searchQuery ? \"Nenhum jogo encontrado\" : \"Nenhum jogo nesta data\"}\n              </div>\n            ) : (\n              filteredFixtures.map((match) => (\n                <button\n                  key={match.fixture.id}\n                  onClick={() => setSelectedMatch(match)}\n                  className=\"w-full p-3 bg-background/30 hover:bg-primary/10 border border-border/30 hover:border-primary/30 rounded-lg transition-all text-left group\"\n                  data-testid={`match-${match.fixture.id}`}\n                >\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex-1\">\n                      {/* Campeonato e Hor√°rio */}\n                      <div className=\"flex items-center gap-2 text-xs text-muted-foreground mb-1.5\">\n                        <Trophy className=\"w-3 h-3\" />\n                        <span>{match.league.name}</span>\n                        <span className=\"text-primary\">‚Ä¢</span>\n                        <Clock className=\"w-3 h-3\" />\n                        <span>{formatMatchTime(match.fixture.date)}</span>\n                      </div>\n                      \n                      {/* Times */}\n                      <div className=\"flex items-center gap-3\">\n                        <div className=\"flex items-center gap-2\">\n                          {match.teams.home.logo && (\n                            <img src={match.teams.home.logo} alt=\"\" className=\"w-5 h-5\" />\n                          )}\n                          <span className=\"font-medium text-white text-sm\">{match.teams.home.name}</span>\n                        </div>\n                        <span className=\"text-primary font-bold text-xs\">vs</span>\n                        <div className=\"flex items-center gap-2\">\n                          {match.teams.away.logo && (\n                            <img src={match.teams.away.logo} alt=\"\" className=\"w-5 h-5\" />\n                          )}\n                          <span className=\"font-medium text-white text-sm\">{match.teams.away.name}</span>\n                        </div>\n                      </div>\n                    </div>\n                    <ChevronRight className=\"w-5 h-5 text-muted-foreground group-hover:text-primary transition-colors\" />\n                  </div>\n                </button>\n              ))\n            )}\n          </div>\n\n          {/* Bot√£o para digitar manualmente */}\n          <div className=\"pt-3 border-t border-border/30\">\n            <button\n              onClick={() => setIsManualMode(true)}\n              className=\"w-full p-3 bg-background/30 hover:bg-primary/5 border border-dashed border-border/50 hover:border-primary/30 rounded-lg transition-all flex items-center justify-center gap-2 text-muted-foreground hover:text-primary\"\n              data-testid=\"button-manual-mode\"\n            >\n              <PenLine className=\"w-4 h-4\" />\n              <span className=\"text-sm\">N√£o encontrou? Digite manualmente</span>\n            </button>\n          </div>\n        </>\n      ) : isManualMode ? (\n        /* Modo Manual - Digitar dados do jogo */\n        <>\n          <div className=\"space-y-4\">\n            {/* Voltar */}\n            <button \n              onClick={() => setIsManualMode(false)}\n              className=\"text-xs text-muted-foreground hover:text-white transition-colors flex items-center gap-1\"\n              data-testid=\"button-exit-manual\"\n            >\n              ‚Üê Voltar para busca\n            </button>\n            \n            {/* T√≠tulo */}\n            <div className=\"flex items-center gap-2 text-primary\">\n              <PenLine className=\"w-4 h-4\" />\n              <span className=\"text-sm font-medium\">Entrada Manual</span>\n            </div>\n\n            {/* Campeonato */}\n            <div className=\"space-y-1.5\">\n              <Label className=\"text-xs text-muted-foreground\">Campeonato</Label>\n              <Input\n                placeholder=\"Ex: Premier League\"\n                value={manualData.league}\n                onChange={(e) => setManualData({...manualData, league: e.target.value})}\n                className=\"bg-background/50 border-border/50 text-sm\"\n                data-testid=\"input-manual-league\"\n              />\n            </div>\n\n            {/* Times */}\n            <div className=\"grid grid-cols-5 gap-2 items-end\">\n              <div className=\"col-span-2 space-y-1.5\">\n                <Label className=\"text-xs text-muted-foreground\">Time Casa</Label>\n                <Input\n                  placeholder=\"Ex: Arsenal\"\n                  value={manualData.homeTeam}\n                  onChange={(e) => setManualData({...manualData, homeTeam: e.target.value})}\n                  className=\"bg-background/50 border-border/50 text-sm\"\n                  data-testid=\"input-manual-home\"\n                />\n              </div>\n              <div className=\"flex items-center justify-center pb-2\">\n                <span className=\"text-primary font-bold text-sm\">vs</span>\n              </div>\n              <div className=\"col-span-2 space-y-1.5\">\n                <Label className=\"text-xs text-muted-foreground\">Time Fora</Label>\n                <Input\n                  placeholder=\"Ex: Chelsea\"\n                  value={manualData.awayTeam}\n                  onChange={(e) => setManualData({...manualData, awayTeam: e.target.value})}\n                  className=\"bg-background/50 border-border/50 text-sm\"\n                  data-testid=\"input-manual-away\"\n                />\n              </div>\n            </div>\n\n            {/* Hor√°rio */}\n            <div className=\"space-y-1.5\">\n              <Label className=\"text-xs text-muted-foreground\">Data e Hor√°rio</Label>\n              <Input\n                placeholder=\"Ex: 28/11 √†s 16:00\"\n                value={manualData.matchTime}\n                onChange={(e) => setManualData({...manualData, matchTime: e.target.value})}\n                className=\"bg-background/50 border-border/50 text-sm\"\n                data-testid=\"input-manual-time\"\n              />\n            </div>\n          </div>\n\n          {/* Apostas */}\n          <div className=\"space-y-3 pt-4 border-t border-border/30\">\n            <div className=\"flex items-center justify-between\">\n              <Label className=\"text-sm text-muted-foreground\">Apostas</Label>\n              <Button\n                type=\"button\"\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={addLeg}\n                className=\"h-7 px-2 text-xs text-primary hover:text-primary/80\"\n                data-testid=\"button-add-leg-manual\"\n              >\n                <Plus className=\"w-3.5 h-3.5 mr-1\" />\n                Adicionar\n              </Button>\n            </div>\n            \n            {legs.map((leg, index) => (\n              <div key={leg.id} className=\"flex gap-2 items-start\">\n                <div className=\"flex-1\">\n                  <Input\n                    placeholder=\"Ex: Resultado Final - Vit√≥ria Casa\"\n                    value={leg.market}\n                    onChange={(e) => updateLeg(leg.id, \"market\", e.target.value)}\n                    className=\"bg-background/50 border-border/50 text-sm\"\n                    data-testid={`input-manual-market-${index}`}\n                  />\n                </div>\n                {legs.length > 1 && (\n                  <Button\n                    type=\"button\"\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    onClick={() => removeLeg(leg.id)}\n                    className=\"h-9 w-9 text-red-500 hover:text-red-400 hover:bg-red-500/10\"\n                    data-testid={`button-remove-manual-leg-${index}`}\n                  >\n                    <Trash2 className=\"w-4 h-4\" />\n                  </Button>\n                )}\n              </div>\n            ))}\n            \n            {/* Odd Total e Stake */}\n            <div className=\"pt-3 border-t border-border/20 flex gap-4\">\n              <div>\n                <Label className=\"text-sm text-muted-foreground mb-2 block\">Odd Total</Label>\n                <Input\n                  type=\"number\"\n                  step=\"0.01\"\n                  min=\"1\"\n                  placeholder=\"Ex: 2.50\"\n                  value={totalOdd}\n                  onChange={(e) => setTotalOdd(e.target.value)}\n                  className=\"bg-background/50 border-border/50 text-sm w-28\"\n                  data-testid=\"input-manual-total-odd\"\n                />\n              </div>\n              <div>\n                <Label className=\"text-sm text-muted-foreground mb-2 block\">Stake (unidades)</Label>\n                <Input\n                  type=\"number\"\n                  step=\"0.5\"\n                  min=\"0.5\"\n                  max=\"10\"\n                  placeholder=\"1.0\"\n                  value={stake}\n                  onChange={(e) => setStake(e.target.value)}\n                  className=\"bg-background/50 border-border/50 text-sm w-28\"\n                  data-testid=\"input-manual-stake\"\n                />\n              </div>\n            </div>\n          </div>\n\n          {/* Link (opcional) */}\n          <div className=\"space-y-2\">\n            <Label className=\"text-sm text-muted-foreground\">Link do Bilhete (opcional)</Label>\n            <Input\n              placeholder=\"https://...\"\n              value={betLink}\n              onChange={(e) => setBetLink(e.target.value)}\n              className=\"bg-background/50 border-border/50 text-sm\"\n              data-testid=\"input-manual-bet-link\"\n            />\n          </div>\n\n          {/* Resumo e Bot√£o */}\n          <div className=\"bg-primary/10 border border-primary/30 rounded-xl p-4\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <div>\n                <p className=\"text-xs text-muted-foreground\">Odd Total</p>\n                <p className=\"text-2xl font-bold text-primary\">{totalOdd || \"--\"}</p>\n              </div>\n              <div className=\"text-center\">\n                <p className=\"text-xs text-muted-foreground\">Stake</p>\n                <p className=\"text-lg font-bold text-white\">{stake}u</p>\n              </div>\n              <div className=\"text-right\">\n                <p className=\"text-xs text-muted-foreground\">Tipo</p>\n                <p className=\"text-sm font-semibold text-white\">\n                  {legs.length === 1 ? \"Simples\" : `M√∫ltipla (${legs.length})`}\n                </p>\n              </div>\n            </div>\n\n            <Button\n              type=\"button\"\n              onClick={handleSubmit}\n              disabled={isSubmitting}\n              className=\"w-full h-11 bg-primary hover:bg-primary/90 text-black font-bold gap-2\"\n              data-testid=\"button-submit-manual\"\n            >\n              {isSubmitting ? (\n                <>\n                  <Loader2 className=\"w-4 h-4 animate-spin\" />\n                  Enviando...\n                </>\n              ) : (\n                <>\n                  <Send className=\"w-4 h-4\" />\n                  Disparar Bilhete\n                </>\n              )}\n            </Button>\n          </div>\n        </>\n      ) : (\n        /* Jogo selecionado - Mostrar formul√°rio de mercado/odd */\n        <>\n          {/* Card do Jogo Selecionado */}\n          <div className=\"bg-gradient-to-br from-primary/10 to-primary/5 border border-primary/30 rounded-xl p-4\">\n            <div className=\"flex items-center justify-between mb-3\">\n              <div className=\"flex items-center gap-2 text-xs text-primary\">\n                <Trophy className=\"w-3.5 h-3.5\" />\n                <span className=\"font-medium\">{selectedMatch.league.name}</span>\n              </div>\n              <button \n                onClick={() => setSelectedMatch(null)}\n                className=\"text-xs text-muted-foreground hover:text-white transition-colors\"\n                data-testid=\"button-change-match\"\n              >\n                Trocar jogo\n              </button>\n            </div>\n            \n            {/* Times */}\n            <div className=\"flex items-center justify-center gap-4 mb-3\">\n              <div className=\"flex flex-col items-center gap-1.5\">\n                {selectedMatch.teams.home.logo && (\n                  <img src={selectedMatch.teams.home.logo} alt=\"\" className=\"w-10 h-10\" />\n                )}\n                <span className=\"font-bold text-white text-sm text-center\">{selectedMatch.teams.home.name}</span>\n              </div>\n              <span className=\"text-2xl font-bold text-primary\">vs</span>\n              <div className=\"flex flex-col items-center gap-1.5\">\n                {selectedMatch.teams.away.logo && (\n                  <img src={selectedMatch.teams.away.logo} alt=\"\" className=\"w-10 h-10\" />\n                )}\n                <span className=\"font-bold text-white text-sm text-center\">{selectedMatch.teams.away.name}</span>\n              </div>\n            </div>\n            \n            {/* Hor√°rio */}\n            <div className=\"flex items-center justify-center gap-2 text-sm text-muted-foreground\">\n              <Clock className=\"w-4 h-4\" />\n              <span>{format(new Date(selectedMatch.fixture.date), \"dd/MM '√†s' HH:mm\", { locale: ptBR })}</span>\n            </div>\n          </div>\n\n          {/* Apostas */}\n          <div className=\"space-y-3\">\n            <div className=\"flex items-center justify-between\">\n              <Label className=\"text-sm text-muted-foreground\">Apostas</Label>\n              <Button\n                type=\"button\"\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={addLeg}\n                className=\"h-7 px-2 text-xs text-primary hover:text-primary/80\"\n                data-testid=\"button-add-leg\"\n              >\n                <Plus className=\"w-3.5 h-3.5 mr-1\" />\n                Adicionar\n              </Button>\n            </div>\n            \n            {legs.map((leg, index) => (\n              <div key={leg.id} className=\"flex gap-2 items-start\">\n                <div className=\"flex-1\">\n                  <Input\n                    placeholder=\"Ex: Resultado Final - Vit√≥ria Casa\"\n                    value={leg.market}\n                    onChange={(e) => updateLeg(leg.id, \"market\", e.target.value)}\n                    className=\"bg-background/50 border-border/50 text-sm\"\n                    data-testid={`input-market-${index}`}\n                  />\n                </div>\n                {legs.length > 1 && (\n                  <Button\n                    type=\"button\"\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    onClick={() => removeLeg(leg.id)}\n                    className=\"h-9 w-9 text-red-500 hover:text-red-400 hover:bg-red-500/10\"\n                    data-testid={`button-remove-leg-${index}`}\n                  >\n                    <Trash2 className=\"w-4 h-4\" />\n                  </Button>\n                )}\n              </div>\n            ))}\n            \n            {/* Odd Total e Stake */}\n            <div className=\"pt-3 border-t border-border/20 flex gap-4\">\n              <div>\n                <Label className=\"text-sm text-muted-foreground mb-2 block\">Odd Total</Label>\n                <Input\n                  type=\"number\"\n                  step=\"0.01\"\n                  min=\"1\"\n                  placeholder=\"Ex: 2.50\"\n                  value={totalOdd}\n                  onChange={(e) => setTotalOdd(e.target.value)}\n                  className=\"bg-background/50 border-border/50 text-sm w-28\"\n                  data-testid=\"input-total-odd\"\n                />\n              </div>\n              <div>\n                <Label className=\"text-sm text-muted-foreground mb-2 block\">Stake (unidades)</Label>\n                <Input\n                  type=\"number\"\n                  step=\"0.5\"\n                  min=\"0.5\"\n                  max=\"10\"\n                  placeholder=\"1.0\"\n                  value={stake}\n                  onChange={(e) => setStake(e.target.value)}\n                  className=\"bg-background/50 border-border/50 text-sm w-28\"\n                  data-testid=\"input-stake\"\n                />\n              </div>\n            </div>\n          </div>\n\n          {/* Link (opcional) */}\n          <div className=\"space-y-2\">\n            <Label className=\"text-sm text-muted-foreground\">Link do Bilhete (opcional)</Label>\n            <Input\n              placeholder=\"https://...\"\n              value={betLink}\n              onChange={(e) => setBetLink(e.target.value)}\n              className=\"bg-background/50 border-border/50 text-sm\"\n              data-testid=\"input-bet-link\"\n            />\n          </div>\n\n          {/* Resumo e Bot√£o */}\n          <div className=\"bg-primary/10 border border-primary/30 rounded-xl p-4\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <div>\n                <p className=\"text-xs text-muted-foreground\">Odd Total</p>\n                <p className=\"text-2xl font-bold text-primary\">{totalOdd || \"--\"}</p>\n              </div>\n              <div className=\"text-center\">\n                <p className=\"text-xs text-muted-foreground\">Stake</p>\n                <p className=\"text-lg font-bold text-white\">{stake}u</p>\n              </div>\n              <div className=\"text-right\">\n                <p className=\"text-xs text-muted-foreground\">Tipo</p>\n                <p className=\"text-sm font-semibold text-white\">\n                  {legs.length === 1 ? \"Simples\" : `M√∫ltipla (${legs.length})`}\n                </p>\n              </div>\n            </div>\n\n            <Button\n              type=\"button\"\n              onClick={handleSubmit}\n              disabled={isSubmitting}\n              className=\"w-full h-11 bg-primary hover:bg-primary/90 text-black font-bold gap-2\"\n              data-testid=\"button-submit\"\n            >\n              {isSubmitting ? (\n                <>\n                  <Loader2 className=\"w-4 h-4 animate-spin\" />\n                  Enviando...\n                </>\n              ) : (\n                <>\n                  <Send className=\"w-4 h-4\" />\n                  Disparar Bilhete\n                </>\n              )}\n            </Button>\n          </div>\n        </>\n      )}\n    </div>\n  );\n}\n","path":null,"size_bytes":27517,"size_tokens":null},"client/src/components/ui/coupon-ticket.tsx":{"content":"import { motion } from 'framer-motion';\nimport { Ticket, Scissors, Copy, Check, Sparkles } from 'lucide-react';\nimport { useState } from 'react';\nimport { toast } from 'sonner';\n\ninterface CouponTicketProps {\n  code: string;\n  discount: string;\n  description?: string;\n  validUntil?: string;\n  onApply?: (code: string) => void;\n}\n\nexport function CouponTicket({ \n  code, \n  discount, \n  description = \"em qualquer plano\",\n  validUntil,\n  onApply \n}: CouponTicketProps) {\n  const [copied, setCopied] = useState(false);\n  const [isApplied, setIsApplied] = useState(false);\n\n  const handleCopy = () => {\n    navigator.clipboard.writeText(code);\n    setCopied(true);\n    toast.success(\"Cupom copiado!\");\n    setTimeout(() => setCopied(false), 2000);\n  };\n\n  const handleApply = () => {\n    setIsApplied(true);\n    onApply?.(code);\n    toast.success(`Cupom ${code} aplicado com sucesso!`);\n  };\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, scale: 0.9, rotateX: -10 }}\n      animate={{ opacity: 1, scale: 1, rotateX: 0 }}\n      transition={{ duration: 0.5, type: 'spring' }}\n      className=\"relative max-w-md mx-auto\"\n    >\n      {/* Glow effect */}\n      <div className=\"absolute inset-0 bg-gradient-to-r from-[#33b864]/30 via-[#33b864]/20 to-[#33b864]/30 rounded-2xl blur-xl opacity-60\" />\n      \n      {/* Main ticket container */}\n      <div className=\"relative flex\">\n        {/* Left side - Discount badge */}\n        <div className=\"relative bg-gradient-to-br from-[#33b864] via-[#2ea558] to-[#259b4a] rounded-l-2xl p-6 flex flex-col items-center justify-center min-w-[120px]\">\n          {/* Decorative circles (ticket holes) */}\n          <div className=\"absolute -right-3 top-1/2 -translate-y-1/2 w-6 h-6 bg-black rounded-full\" />\n          <div className=\"absolute -right-3 top-4 w-3 h-3 bg-black/50 rounded-full\" />\n          <div className=\"absolute -right-3 bottom-4 w-3 h-3 bg-black/50 rounded-full\" />\n          \n          {/* Vertical text */}\n          <div className=\"flex flex-col items-center\">\n            <Ticket className=\"w-8 h-8 text-black/80 mb-2 rotate-90\" />\n            <span \n              className=\"text-black font-black text-lg tracking-wider\"\n              style={{ \n                writingMode: 'vertical-rl', \n                textOrientation: 'mixed',\n                transform: 'rotate(180deg)',\n                fontFamily: 'Sora, sans-serif'\n              }}\n            >\n              CUPOM\n            </span>\n          </div>\n          \n          {/* Discount percentage - big */}\n          <div className=\"mt-4 text-center\">\n            <span className=\"text-4xl font-black text-black\" style={{ fontFamily: 'Sora, sans-serif' }}>\n              {discount}\n            </span>\n          </div>\n        </div>\n\n        {/* Dashed divider line */}\n        <div className=\"absolute left-[120px] top-0 bottom-0 w-0 border-l-2 border-dashed border-[#33b864]/30 z-10\" />\n        \n        {/* Scissors icon */}\n        <div className=\"absolute left-[108px] top-1/2 -translate-y-1/2 z-20\">\n          <div className=\"bg-black p-1 rounded-full\">\n            <Scissors className=\"w-4 h-4 text-[#33b864]\" />\n          </div>\n        </div>\n\n        {/* Right side - Code and details */}\n        <div className=\"flex-1 bg-gradient-to-br from-[#0f0f0f] via-[#0a0a0a] to-black border-2 border-l-0 border-[#33b864]/40 rounded-r-2xl p-6 pl-8\">\n          {/* Header badge */}\n          <div className=\"flex items-center gap-2 mb-4\">\n            <motion.div\n              animate={{ rotate: [0, 15, -15, 0] }}\n              transition={{ repeat: Infinity, duration: 2, repeatDelay: 3 }}\n            >\n              <Sparkles className=\"w-4 h-4 text-[#33b864]\" />\n            </motion.div>\n            <span className=\"text-xs font-bold text-[#33b864] uppercase tracking-widest\">\n              Cupom de Desconto\n            </span>\n          </div>\n\n          {/* Discount description */}\n          <p className=\"text-white font-bold text-lg mb-1\" style={{ fontFamily: 'Sora, sans-serif' }}>\n            {discount} OFF\n          </p>\n          <p className=\"text-gray-400 text-sm mb-4\">\n            {description}\n          </p>\n\n          {/* Code display */}\n          <div className=\"flex items-center gap-2 mb-4\">\n            <div className=\"flex-1 bg-[#33b864]/10 border border-[#33b864]/30 rounded-lg px-4 py-3\">\n              <code className=\"text-[#33b864] font-mono font-bold text-lg tracking-wider\">\n                {code}\n              </code>\n            </div>\n            <button\n              onClick={handleCopy}\n              className=\"p-3 bg-[#33b864]/10 hover:bg-[#33b864]/20 border border-[#33b864]/30 rounded-lg transition-all\"\n              data-testid=\"button-copy-coupon\"\n            >\n              {copied ? (\n                <Check className=\"w-5 h-5 text-[#33b864]\" />\n              ) : (\n                <Copy className=\"w-5 h-5 text-[#33b864]\" />\n              )}\n            </button>\n          </div>\n\n          {/* Apply button */}\n          {onApply && (\n            <button\n              onClick={handleApply}\n              disabled={isApplied}\n              className={`w-full py-3 font-bold rounded-lg transition-all ${\n                isApplied \n                  ? 'bg-[#33b864]/20 text-[#33b864] cursor-default'\n                  : 'bg-[#33b864] hover:bg-[#2ea558] text-black'\n              }`}\n              data-testid=\"button-apply-coupon\"\n            >\n              {isApplied ? '‚úì Cupom Aplicado' : 'Aplicar Cupom'}\n            </button>\n          )}\n\n          {/* Validity */}\n          {validUntil && (\n            <p className=\"text-xs text-gray-500 mt-3 text-center\">\n              V√°lido at√© {validUntil}\n            </p>\n          )}\n        </div>\n      </div>\n\n      {/* Bottom serrated edge effect */}\n      <div className=\"absolute -bottom-2 left-4 right-4 h-4 flex justify-between\">\n        {[...Array(20)].map((_, i) => (\n          <div \n            key={i} \n            className=\"w-2 h-2 bg-black rounded-full\"\n            style={{ marginTop: i % 2 === 0 ? '0' : '4px' }}\n          />\n        ))}\n      </div>\n    </motion.div>\n  );\n}\n\nexport function CouponBanner({ \n  code, \n  discount, \n  onApply \n}: { \n  code: string; \n  discount: string;\n  onApply?: (code: string) => void;\n}) {\n  const [copied, setCopied] = useState(false);\n\n  const handleCopy = () => {\n    navigator.clipboard.writeText(code);\n    setCopied(true);\n    toast.success(\"Cupom copiado!\");\n    setTimeout(() => setCopied(false), 2000);\n  };\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: -20 }}\n      animate={{ opacity: 1, y: 0 }}\n      className=\"relative overflow-hidden\"\n    >\n      {/* Animated background gradient */}\n      <motion.div\n        animate={{ \n          backgroundPosition: ['0% 50%', '100% 50%', '0% 50%'] \n        }}\n        transition={{ duration: 5, repeat: Infinity }}\n        className=\"absolute inset-0 bg-gradient-to-r from-[#33b864] via-[#2ea558] to-[#33b864] bg-[length:200%_100%]\"\n      />\n      \n      {/* Pattern overlay */}\n      <div \n        className=\"absolute inset-0 opacity-10\"\n        style={{\n          backgroundImage: `url(\"data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23000' fill-opacity='0.4'%3E%3Ccircle cx='3' cy='3' r='1'/%3E%3C/g%3E%3C/svg%3E\")`,\n        }}\n      />\n\n      <div className=\"relative flex items-center justify-center gap-4 py-3 px-4\">\n        <Ticket className=\"w-5 h-5 text-black hidden sm:block\" />\n        \n        <div className=\"flex items-center gap-3 flex-wrap justify-center\">\n          <span className=\"text-black font-bold text-sm sm:text-base\">\n            üéâ Use o cupom\n          </span>\n          \n          <button\n            onClick={handleCopy}\n            className=\"inline-flex items-center gap-2 bg-black/20 hover:bg-black/30 px-3 py-1.5 rounded-lg transition-all border border-black/20\"\n            data-testid=\"button-copy-banner-coupon\"\n          >\n            <code className=\"text-white font-mono font-bold tracking-wider\">\n              {code}\n            </code>\n            {copied ? (\n              <Check className=\"w-4 h-4 text-white\" />\n            ) : (\n              <Copy className=\"w-4 h-4 text-white/70\" />\n            )}\n          </button>\n          \n          <span className=\"text-black font-bold text-sm sm:text-base\">\n            e ganhe <span className=\"text-white font-black\">{discount} OFF</span>\n          </span>\n        </div>\n        \n        <Sparkles className=\"w-5 h-5 text-black hidden sm:block\" />\n      </div>\n    </motion.div>\n  );\n}\n","path":null,"size_bytes":8607,"size_tokens":null},"client/src/lib/analytics.ts":{"content":"// Facebook Pixel and Google Analytics tracking utilities\n\ndeclare global {\n  interface Window {\n    fbq: (...args: any[]) => void;\n    gtag: (...args: any[]) => void;\n  }\n}\n\n// Facebook Pixel Events\nexport const fbPixel = {\n  // Standard Events\n  pageView: () => {\n    if (typeof window !== 'undefined' && window.fbq) {\n      window.fbq('track', 'PageView');\n    }\n  },\n  \n  // User Registration\n  completeRegistration: (data?: { content_name?: string; currency?: string; value?: number }) => {\n    if (typeof window !== 'undefined' && window.fbq) {\n      window.fbq('track', 'CompleteRegistration', data);\n    }\n  },\n  \n  // User Login\n  login: () => {\n    if (typeof window !== 'undefined' && window.fbq) {\n      window.fbq('trackCustom', 'Login');\n    }\n  },\n  \n  // View Content (viewing a specific page/product)\n  viewContent: (data: { content_name: string; content_category?: string; content_ids?: string[]; value?: number; currency?: string }) => {\n    if (typeof window !== 'undefined' && window.fbq) {\n      window.fbq('track', 'ViewContent', data);\n    }\n  },\n  \n  // Initiate Checkout\n  initiateCheckout: (data?: { content_ids?: string[]; num_items?: number; value?: number; currency?: string }) => {\n    if (typeof window !== 'undefined' && window.fbq) {\n      window.fbq('track', 'InitiateCheckout', {\n        currency: 'BRL',\n        value: 49.93,\n        ...data\n      });\n    }\n  },\n  \n  // Add Payment Info\n  addPaymentInfo: (data?: { content_category?: string; content_ids?: string[]; currency?: string; value?: number }) => {\n    if (typeof window !== 'undefined' && window.fbq) {\n      window.fbq('track', 'AddPaymentInfo', {\n        currency: 'BRL',\n        ...data\n      });\n    }\n  },\n  \n  // Purchase (Subscription completed)\n  purchase: (data: { value: number; currency?: string; content_name?: string; content_ids?: string[] }) => {\n    if (typeof window !== 'undefined' && window.fbq) {\n      window.fbq('track', 'Purchase', {\n        currency: 'BRL',\n        ...data\n      });\n    }\n  },\n  \n  // Start Trial\n  startTrial: (data?: { value?: number; currency?: string; predicted_ltv?: number }) => {\n    if (typeof window !== 'undefined' && window.fbq) {\n      window.fbq('track', 'StartTrial', {\n        currency: 'BRL',\n        value: 0,\n        ...data\n      });\n    }\n  },\n  \n  // Subscribe\n  subscribe: (data: { value: number; currency?: string; predicted_ltv?: number }) => {\n    if (typeof window !== 'undefined' && window.fbq) {\n      window.fbq('track', 'Subscribe', {\n        currency: 'BRL',\n        ...data\n      });\n    }\n  },\n  \n  // Lead (user shows interest)\n  lead: (data?: { content_name?: string; content_category?: string; value?: number; currency?: string }) => {\n    if (typeof window !== 'undefined' && window.fbq) {\n      window.fbq('track', 'Lead', data);\n    }\n  },\n  \n  // Custom event\n  custom: (eventName: string, data?: Record<string, any>) => {\n    if (typeof window !== 'undefined' && window.fbq) {\n      window.fbq('trackCustom', eventName, data);\n    }\n  }\n};\n\n// Google Analytics 4 Events\nexport const ga4 = {\n  // Page View (usually automatic, but can be manual for SPAs)\n  pageView: (pagePath: string, pageTitle?: string) => {\n    if (typeof window !== 'undefined' && window.gtag) {\n      window.gtag('event', 'page_view', {\n        page_path: pagePath,\n        page_title: pageTitle\n      });\n    }\n  },\n  \n  // User Registration\n  signUp: (method?: string) => {\n    if (typeof window !== 'undefined' && window.gtag) {\n      window.gtag('event', 'sign_up', {\n        method: method || 'email'\n      });\n    }\n  },\n  \n  // User Login\n  login: (method?: string) => {\n    if (typeof window !== 'undefined' && window.gtag) {\n      window.gtag('event', 'login', {\n        method: method || 'email'\n      });\n    }\n  },\n  \n  // View Item (tip, signal)\n  viewItem: (item: { item_id: string; item_name: string; item_category?: string; price?: number }) => {\n    if (typeof window !== 'undefined' && window.gtag) {\n      window.gtag('event', 'view_item', {\n        currency: 'BRL',\n        items: [item]\n      });\n    }\n  },\n  \n  // Begin Checkout\n  beginCheckout: (value: number, items?: any[]) => {\n    if (typeof window !== 'undefined' && window.gtag) {\n      window.gtag('event', 'begin_checkout', {\n        currency: 'BRL',\n        value: value,\n        items: items || [{ item_id: 'true_signal_prime', item_name: 'True Signal Prime', price: value }]\n      });\n    }\n  },\n  \n  // Add Payment Info\n  addPaymentInfo: (value: number, paymentType?: string) => {\n    if (typeof window !== 'undefined' && window.gtag) {\n      window.gtag('event', 'add_payment_info', {\n        currency: 'BRL',\n        value: value,\n        payment_type: paymentType\n      });\n    }\n  },\n  \n  // Purchase\n  purchase: (transactionId: string, value: number, items?: any[]) => {\n    if (typeof window !== 'undefined' && window.gtag) {\n      window.gtag('event', 'purchase', {\n        transaction_id: transactionId,\n        currency: 'BRL',\n        value: value,\n        items: items || [{ item_id: 'true_signal_prime', item_name: 'True Signal Prime', price: value }]\n      });\n    }\n  },\n  \n  // Generate Lead\n  generateLead: (value?: number) => {\n    if (typeof window !== 'undefined' && window.gtag) {\n      window.gtag('event', 'generate_lead', {\n        currency: 'BRL',\n        value: value || 0\n      });\n    }\n  },\n  \n  // Custom Event\n  event: (eventName: string, params?: Record<string, any>) => {\n    if (typeof window !== 'undefined' && window.gtag) {\n      window.gtag('event', eventName, params);\n    }\n  },\n  \n  // Set User ID (for cross-device tracking)\n  setUserId: (userId: string) => {\n    if (typeof window !== 'undefined' && window.gtag) {\n      window.gtag('config', 'G-MV7TWK7WWN', {\n        user_id: userId\n      });\n    }\n  }\n};\n\n// Combined tracking helper\nexport const analytics = {\n  // Track registration on both platforms\n  trackRegistration: (email?: string) => {\n    fbPixel.completeRegistration({ content_name: 'True Signal Prime' });\n    ga4.signUp('email');\n  },\n  \n  // Track login on both platforms\n  trackLogin: () => {\n    fbPixel.login();\n    ga4.login('email');\n  },\n  \n  // Track checkout initiation\n  trackCheckoutStart: () => {\n    fbPixel.initiateCheckout({ value: 49.93, currency: 'BRL' });\n    ga4.beginCheckout(49.93);\n  },\n  \n  // Track successful purchase/subscription\n  trackPurchase: (transactionId: string, value: number) => {\n    fbPixel.purchase({ value, content_name: 'True Signal Prime' });\n    fbPixel.subscribe({ value });\n    ga4.purchase(transactionId, value);\n  },\n  \n  // Track trial start\n  trackTrialStart: () => {\n    fbPixel.startTrial({ value: 0 });\n    fbPixel.lead({ content_name: 'Trial Start' });\n    ga4.generateLead(0);\n  },\n  \n  // Track page view\n  trackPageView: (pagePath: string, pageTitle?: string) => {\n    fbPixel.pageView();\n    ga4.pageView(pagePath, pageTitle);\n  },\n  \n  // Set user for tracking\n  setUser: (userId: string) => {\n    ga4.setUserId(userId);\n  }\n};\n","path":null,"size_bytes":6983,"size_tokens":null},"client/src/components/bankroll-setup-modal.tsx":{"content":"import { useState } from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { Shield, Scale, Rocket, ArrowRight, ArrowLeft, Check, Wallet, HelpCircle, X, AlertTriangle } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { cn } from \"@/lib/utils\";\n\ninterface BankrollSetupModalProps {\n  isOpen: boolean;\n  onComplete: (data: { bankrollInitial: number; riskProfile: string; unitValue: number }) => void;\n}\n\nconst riskProfiles = [\n  {\n    id: \"conservador\",\n    name: \"Conservador\",\n    icon: Shield,\n    divisor: 100,\n    percentage: \"1%\",\n    description: \"Divide seu capital em 100 partes. Blindagem m√°xima contra sequ√™ncias ruins.\",\n    color: \"from-blue-500/20 to-blue-600/10\",\n    borderColor: \"border-blue-500/50\",\n    iconColor: \"text-blue-400\",\n    example: {\n      capital: 100,\n      unit: 1.00,\n      stakes: [\n        { stake: 1, value: 1.00 },\n        { stake: 0.5, value: 0.50 },\n        { stake: 0.25, value: 0.25 },\n      ],\n    },\n  },\n  {\n    id: \"moderado\",\n    name: \"Moderado\",\n    icon: Scale,\n    divisor: 50,\n    percentage: \"2%\",\n    description: \"Divide em 50 partes. O equil√≠brio ideal entre crescimento e seguran√ßa para nossa assertividade de 83%.\",\n    recommended: true,\n    color: \"from-[#33b864]/20 to-[#33b864]/10\",\n    borderColor: \"border-[#33b864]/50\",\n    iconColor: \"text-[#33b864]\",\n    example: {\n      capital: 100,\n      unit: 2.00,\n      stakes: [\n        { stake: 1, value: 2.00 },\n        { stake: 0.5, value: 1.00 },\n        { stake: 0.25, value: 0.50 },\n      ],\n    },\n  },\n  {\n    id: \"agressivo\",\n    name: \"Agressivo\",\n    icon: Rocket,\n    divisor: 30,\n    percentage: \"3.3%\",\n    description: \"Divide em 30 partes. Crescimento acelerado, mas com maior volatilidade.\",\n    color: \"from-orange-500/20 to-orange-600/10\",\n    borderColor: \"border-orange-500/50\",\n    iconColor: \"text-orange-400\",\n    example: {\n      capital: 100,\n      unit: 3.33,\n      stakes: [\n        { stake: 1, value: 3.33 },\n        { stake: 0.5, value: 1.67 },\n        { stake: 0.25, value: 0.83 },\n      ],\n    },\n  },\n];\n\nfunction ProfileExampleModal({ \n  profile, \n  onClose \n}: { \n  profile: typeof riskProfiles[0]; \n  onClose: () => void;\n}) {\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      exit={{ opacity: 0 }}\n      className=\"fixed inset-0 z-[200] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4\"\n      onClick={onClose}\n    >\n      <motion.div\n        initial={{ scale: 0.9, opacity: 0 }}\n        animate={{ scale: 1, opacity: 1 }}\n        exit={{ scale: 0.9, opacity: 0 }}\n        onClick={(e) => e.stopPropagation()}\n        className={cn(\n          \"w-full max-w-md bg-black rounded-2xl p-6 border-2\",\n          profile.borderColor\n        )}\n      >\n        <div className=\"flex items-center justify-between mb-6\">\n          <div className=\"flex items-center gap-3\">\n            <div className={cn(\"p-2.5 rounded-xl bg-white/5\", profile.iconColor)}>\n              <profile.icon className=\"w-5 h-5\" />\n            </div>\n            <h3 className=\"font-bold text-white text-lg\">{profile.name}</h3>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"p-2 rounded-full hover:bg-white/10 transition-colors\"\n          >\n            <X className=\"w-5 h-5 text-gray-400\" />\n          </button>\n        </div>\n\n        <div className=\"bg-white/5 rounded-xl p-4 mb-4\">\n          <p className=\"text-sm text-gray-300 mb-4\">\n            <strong className=\"text-white\">Exemplo pr√°tico:</strong> Se voc√™ depositar{\" \"}\n            <span className={profile.iconColor}>R$ {profile.example.capital},00</span>, \n            sua unidade ser√° de{\" \"}\n            <span className={cn(\"font-bold\", profile.iconColor)}>\n              R$ {profile.example.unit.toFixed(2).replace(\".\", \",\")}\n            </span>\n          </p>\n\n          <div className=\"space-y-2\">\n            {profile.example.stakes.map((s, i) => (\n              <div \n                key={i}\n                className=\"grid grid-cols-[1fr_auto_auto] items-center gap-3 bg-black/40 rounded-lg px-4 py-3\"\n              >\n                <span className=\"text-sm text-gray-400\">Se o bilhete indicar</span>\n                <div className={cn(\"text-center min-w-[60px]\", profile.iconColor)}>\n                  <span className=\"text-lg font-bold\">{s.stake}</span>\n                  <span className=\"text-xs block -mt-1\">stake{s.stake !== 1 ? 's' : ''}</span>\n                </div>\n                <div className=\"text-right min-w-[80px]\">\n                  <span className=\"text-xs text-gray-500 block\">aposte</span>\n                  <span className=\"text-lg font-bold text-white\">\n                    R$ {s.value.toFixed(2).replace(\".\", \",\")}\n                  </span>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        <div className=\"bg-yellow-500/10 border border-yellow-500/30 rounded-xl p-4 flex items-start gap-3\">\n          <AlertTriangle className=\"w-5 h-5 text-yellow-500 flex-shrink-0 mt-0.5\" />\n          <p className=\"text-sm text-yellow-400\">\n            <strong>Stakes menores (0.5 ou 0.25)</strong> podem aparecer em bilhetes de SUPER ODD. \n            S√£o apostas de alta probabilidade de acerto, mas com risco maior por conta da odd elevada.\n          </p>\n        </div>\n\n        <Button\n          onClick={onClose}\n          className=\"w-full mt-4 h-12 bg-white/10 hover:bg-white/20 text-white\"\n        >\n          Entendi\n        </Button>\n      </motion.div>\n    </motion.div>\n  );\n}\n\nexport function BankrollSetupModal({ isOpen, onComplete }: BankrollSetupModalProps) {\n  const [step, setStep] = useState(1);\n  const [bankrollAmount, setBankrollAmount] = useState(\"\");\n  const [selectedProfile, setSelectedProfile] = useState<string | null>(null);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [showExampleFor, setShowExampleFor] = useState<string | null>(null);\n\n  const formatCurrency = (value: string) => {\n    const numbers = value.replace(/\\D/g, \"\");\n    const amount = parseInt(numbers || \"0\") / 100;\n    return new Intl.NumberFormat(\"pt-BR\", {\n      style: \"currency\",\n      currency: \"BRL\",\n    }).format(amount);\n  };\n\n  const handleAmountChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = e.target.value.replace(/\\D/g, \"\");\n    setBankrollAmount(value);\n  };\n\n  const getNumericAmount = () => {\n    return parseInt(bankrollAmount || \"0\") / 100;\n  };\n\n  const calculateUnitValue = () => {\n    if (!selectedProfile) return 0;\n    const profile = riskProfiles.find((p) => p.id === selectedProfile);\n    if (!profile) return 0;\n    return getNumericAmount() / profile.divisor;\n  };\n\n  const handleNext = () => {\n    if (step === 1 && getNumericAmount() >= 50) {\n      setStep(2);\n    } else if (step === 2 && selectedProfile) {\n      setStep(3);\n    }\n  };\n\n  const handleBack = () => {\n    if (step > 1) {\n      setStep(step - 1);\n    }\n  };\n\n  const handleConfirm = async () => {\n    if (!selectedProfile) return;\n    \n    setIsSubmitting(true);\n    const unitValue = calculateUnitValue();\n    \n    await onComplete({\n      bankrollInitial: getNumericAmount(),\n      riskProfile: selectedProfile,\n      unitValue: unitValue,\n    });\n    \n    setIsSubmitting(false);\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-[100] bg-black flex items-center justify-center\">\n      <div className=\"w-full h-full max-w-lg mx-auto flex flex-col p-4 md:p-6 overflow-y-auto\">\n        {/* Progress Bar */}\n        <div className=\"flex gap-2 mb-8\">\n          {[1, 2, 3].map((s) => (\n            <div\n              key={s}\n              className={cn(\n                \"h-1 flex-1 rounded-full transition-all duration-300\",\n                s <= step ? \"bg-[#33b864]\" : \"bg-white/10\"\n              )}\n            />\n          ))}\n        </div>\n\n        <AnimatePresence mode=\"wait\">\n          {/* Step 1: Capital */}\n          {step === 1 && (\n            <motion.div\n              key=\"step1\"\n              initial={{ opacity: 0, x: 20 }}\n              animate={{ opacity: 1, x: 0 }}\n              exit={{ opacity: 0, x: -20 }}\n              className=\"flex-1 flex flex-col\"\n            >\n              <div className=\"flex-1\">\n                <div className=\"w-16 h-16 rounded-2xl bg-[#33b864]/20 flex items-center justify-center mb-6\">\n                  <Wallet className=\"w-8 h-8 text-[#33b864]\" />\n                </div>\n                \n                <h1 className=\"text-2xl md:text-3xl font-bold text-white mb-2\" style={{ fontFamily: \"Sora, sans-serif\" }}>\n                  Configure sua Banca\n                </h1>\n                <p className=\"text-gray-400 text-sm mb-5\">\n                  Para calcularmos o valor ideal de cada aposta, informe seu capital dispon√≠vel.\n                </p>\n\n                <div className=\"mb-5\">\n                  <Input\n                    type=\"text\"\n                    inputMode=\"numeric\"\n                    value={bankrollAmount ? formatCurrency(bankrollAmount) : \"\"}\n                    onChange={handleAmountChange}\n                    placeholder=\"R$ 0,00\"\n                    className=\"h-16 text-2xl md:text-3xl font-bold text-center bg-white/5 border-white/10 text-white placeholder:text-gray-600\"\n                    data-testid=\"input-bankroll-amount\"\n                  />\n                  <p className=\"text-center text-xs text-gray-500 mt-2\">M√≠nimo: R$ 50,00</p>\n                </div>\n\n                <p className=\"text-xs text-gray-500 uppercase tracking-wider mb-3\">Entenda o passo a passo</p>\n                \n                <div className=\"space-y-3 mb-4\">\n                  <div className=\"flex items-start gap-3 bg-white/5 border border-white/10 rounded-xl p-3\">\n                    <div className=\"w-8 h-8 rounded-full bg-[#33b864] flex items-center justify-center flex-shrink-0 text-black font-bold text-sm\">1</div>\n                    <div>\n                      <p className=\"text-white text-sm font-medium mb-1\">Informe quanto voc√™ tem para apostar</p>\n                      <p className=\"text-gray-400 text-xs leading-relaxed\">\n                        Digite acima o valor total que voc√™ separou exclusivamente para apostas. \n                        Por exemplo: se voc√™ tem R$ 500 dispon√≠veis, coloque R$ 500. \n                        <span className=\"text-gray-300\"> Esse √© seu \"capital de opera√ß√£o\".</span>\n                      </p>\n                    </div>\n                  </div>\n                  \n                  <div className=\"flex items-start gap-3 bg-white/5 border border-white/10 rounded-xl p-3\">\n                    <div className=\"w-8 h-8 rounded-full bg-[#33b864] flex items-center justify-center flex-shrink-0 text-black font-bold text-sm\">2</div>\n                    <div>\n                      <p className=\"text-white text-sm font-medium mb-1\">N√≥s calculamos o valor de cada aposta</p>\n                      <p className=\"text-gray-400 text-xs leading-relaxed\">\n                        Com base no seu capital, dividimos em partes iguais para voc√™ nunca arriscar demais. \n                        <span className=\"text-gray-300\"> Por exemplo: R$ 500 dividido em 50 partes = R$ 10 por aposta.</span> \n                        Assim voc√™ protege sua banca de perdas grandes.\n                      </p>\n                    </div>\n                  </div>\n                  \n                  <div className=\"flex items-start gap-3 bg-white/5 border border-white/10 rounded-xl p-3\">\n                    <div className=\"w-8 h-8 rounded-full bg-[#33b864] flex items-center justify-center flex-shrink-0 text-black font-bold text-sm\">3</div>\n                    <div>\n                      <p className=\"text-white text-sm font-medium mb-1\">Voc√™ v√™ exatamente quanto apostar</p>\n                      <p className=\"text-gray-400 text-xs leading-relaxed\">\n                        Em cada bilhete que enviarmos, voc√™ ver√° algo como: <span className=\"text-[#33b864] font-medium\">\"1 Stake = R$ 10,00\"</span>. \n                        <span className=\"text-gray-300\"> Basta ir na casa de apostas e colocar exatamente esse valor.</span> \n                        Sem precisar fazer contas!\n                      </p>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"bg-yellow-500/10 border border-yellow-500/30 rounded-xl p-3\">\n                  <p className=\"text-yellow-400 text-xs\">\n                    <strong>Aten√ß√£o:</strong> Use apenas dinheiro que voc√™ pode perder. Apostas envolvem risco.\n                  </p>\n                </div>\n              </div>\n\n              <Button\n                onClick={handleNext}\n                disabled={getNumericAmount() < 50}\n                className=\"w-full h-14 bg-[#33b864] hover:bg-[#289a54] text-black font-bold text-lg mt-8\"\n                data-testid=\"button-next-step1\"\n              >\n                Continuar\n                <ArrowRight className=\"w-5 h-5 ml-2\" />\n              </Button>\n            </motion.div>\n          )}\n\n          {/* Step 2: Risk Profile */}\n          {step === 2 && (\n            <motion.div\n              key=\"step2\"\n              initial={{ opacity: 0, x: 20 }}\n              animate={{ opacity: 1, x: 0 }}\n              exit={{ opacity: 0, x: -20 }}\n              className=\"flex-1 flex flex-col\"\n            >\n              <div className=\"flex-1\">\n                <h1 className=\"text-2xl md:text-3xl font-bold text-white mb-2\" style={{ fontFamily: \"Sora, sans-serif\" }}>\n                  Escolha sua Exposi√ß√£o ao Risco\n                </h1>\n                <p className=\"text-gray-400 mb-6\">\n                  Cada perfil divide seu capital de forma diferente para proteger sua banca.\n                </p>\n\n                <div className=\"space-y-4\">\n                  {riskProfiles.map((profile) => (\n                    <div\n                      key={profile.id}\n                      onClick={() => setSelectedProfile(profile.id)}\n                      className={cn(\n                        \"w-full p-4 rounded-2xl border-2 text-left transition-all cursor-pointer\",\n                        `bg-gradient-to-br ${profile.color}`,\n                        selectedProfile === profile.id\n                          ? `${profile.borderColor} scale-[1.02]`\n                          : \"border-white/10 hover:border-white/20\"\n                      )}\n                      data-testid={`button-profile-${profile.id}`}\n                    >\n                      <div className=\"flex items-start gap-4\">\n                        <div className={cn(\"p-3 rounded-xl bg-black/30 flex-shrink-0\", profile.iconColor)}>\n                          <profile.icon className=\"w-6 h-6\" />\n                        </div>\n                        <div className=\"flex-1 min-w-0\">\n                          <div className=\"flex items-center gap-2 mb-1\">\n                            <span className=\"font-bold text-white\">{profile.name}</span>\n                            <span className=\"text-xs text-gray-400\">({profile.percentage})</span>\n                          </div>\n                          {profile.recommended && (\n                            <span className=\"inline-block px-2 py-0.5 bg-[#33b864] text-black text-[10px] font-bold rounded-full mb-2\">\n                              RECOMENDADO\n                            </span>\n                          )}\n                          <p className=\"text-sm text-gray-400 mb-3\">{profile.description}</p>\n                          \n                          {/* Bot√£o Entenda */}\n                          <button\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              setShowExampleFor(profile.id);\n                            }}\n                            className={cn(\n                              \"px-3 py-1.5 rounded-full bg-black/40 hover:bg-black/60 transition-colors flex items-center gap-1.5 w-fit\",\n                              profile.iconColor\n                            )}\n                            data-testid={`button-example-${profile.id}`}\n                          >\n                            <HelpCircle className=\"w-3.5 h-3.5\" />\n                            <span className=\"text-[11px] font-medium\">Entenda o {profile.name}</span>\n                          </button>\n\n                          {selectedProfile === profile.id && (\n                            <div className=\"mt-3 pt-3 border-t border-white/10\">\n                              <p className=\"text-sm text-white\">\n                                Sua unidade ser√°:{\" \"}\n                                <span className=\"font-bold text-[#33b864]\">\n                                  {new Intl.NumberFormat(\"pt-BR\", {\n                                    style: \"currency\",\n                                    currency: \"BRL\",\n                                  }).format(getNumericAmount() / profile.divisor)}\n                                </span>\n                              </p>\n                            </div>\n                          )}\n                        </div>\n                        {selectedProfile === profile.id && (\n                          <div className=\"p-1 rounded-full bg-[#33b864] flex-shrink-0\">\n                            <Check className=\"w-4 h-4 text-black\" />\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n\n              <div className=\"flex gap-3 mt-8\">\n                <Button\n                  onClick={handleBack}\n                  variant=\"outline\"\n                  className=\"flex-1 h-14 border-white/20 text-white hover:bg-white/5\"\n                  data-testid=\"button-back-step2\"\n                >\n                  <ArrowLeft className=\"w-5 h-5 mr-2\" />\n                  Voltar\n                </Button>\n                <Button\n                  onClick={handleNext}\n                  disabled={!selectedProfile}\n                  className=\"flex-1 h-14 bg-[#33b864] hover:bg-[#289a54] text-black font-bold\"\n                  data-testid=\"button-next-step2\"\n                >\n                  Continuar\n                  <ArrowRight className=\"w-5 h-5 ml-2\" />\n                </Button>\n              </div>\n            </motion.div>\n          )}\n\n          {/* Step 3: Confirmation */}\n          {step === 3 && (\n            <motion.div\n              key=\"step3\"\n              initial={{ opacity: 0, x: 20 }}\n              animate={{ opacity: 1, x: 0 }}\n              exit={{ opacity: 0, x: -20 }}\n              className=\"flex-1 flex flex-col\"\n            >\n              <div className=\"flex-1\">\n                <div className=\"w-16 h-16 rounded-full bg-[#33b864]/20 flex items-center justify-center mb-6 mx-auto\">\n                  <Check className=\"w-8 h-8 text-[#33b864]\" />\n                </div>\n                \n                <h1 className=\"text-2xl md:text-3xl font-bold text-white mb-2 text-center\" style={{ fontFamily: \"Sora, sans-serif\" }}>\n                  Confirma√ß√£o da Estrat√©gia\n                </h1>\n                <p className=\"text-gray-400 mb-8 text-center\">\n                  Revise sua configura√ß√£o antes de confirmar\n                </p>\n\n                <div className=\"bg-white/5 rounded-2xl p-6 space-y-4 mb-6\">\n                  <div className=\"flex justify-between items-center\">\n                    <span className=\"text-gray-400\">Capital Inicial</span>\n                    <span className=\"font-bold text-white\">\n                      {new Intl.NumberFormat(\"pt-BR\", {\n                        style: \"currency\",\n                        currency: \"BRL\",\n                      }).format(getNumericAmount())}\n                    </span>\n                  </div>\n                  <div className=\"flex justify-between items-center\">\n                    <span className=\"text-gray-400\">Perfil de Risco</span>\n                    <span className=\"font-bold text-white capitalize\">{selectedProfile}</span>\n                  </div>\n                  <div className=\"h-px bg-white/10\" />\n                  <div className=\"flex justify-between items-center\">\n                    <span className=\"text-gray-400\">Sua Unidade Padr√£o</span>\n                    <span className=\"font-bold text-2xl text-[#33b864]\">\n                      {new Intl.NumberFormat(\"pt-BR\", {\n                        style: \"currency\",\n                        currency: \"BRL\",\n                      }).format(calculateUnitValue())}\n                    </span>\n                  </div>\n                </div>\n\n                <div className=\"bg-[#33b864]/10 border border-[#33b864]/30 rounded-xl p-4\">\n                  <p className=\"text-[#33b864] text-sm text-center\">\n                    Em cada bilhete, voc√™ ver√° o valor exato a apostar baseado nesta configura√ß√£o.\n                  </p>\n                </div>\n              </div>\n\n              <div className=\"flex gap-3 mt-8\">\n                <Button\n                  onClick={handleBack}\n                  variant=\"outline\"\n                  className=\"flex-1 h-14 border-white/20 text-white hover:bg-white/5\"\n                  data-testid=\"button-back-step3\"\n                >\n                  <ArrowLeft className=\"w-5 h-5 mr-2\" />\n                  Voltar\n                </Button>\n                <Button\n                  onClick={handleConfirm}\n                  disabled={isSubmitting}\n                  className=\"flex-1 h-14 bg-[#33b864] hover:bg-[#289a54] text-black font-bold\"\n                  data-testid=\"button-confirm-strategy\"\n                >\n                  {isSubmitting ? \"Salvando...\" : \"CONFIRMAR ESTRAT√âGIA\"}\n                </Button>\n              </div>\n            </motion.div>\n          )}\n        </AnimatePresence>\n\n        {/* Example Modal */}\n        <AnimatePresence>\n          {showExampleFor && (\n            <ProfileExampleModal\n              profile={riskProfiles.find((p) => p.id === showExampleFor)!}\n              onClose={() => setShowExampleFor(null)}\n            />\n          )}\n        </AnimatePresence>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":22325,"size_tokens":null},"client/src/pages/gestao.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { useLocation, Link } from \"wouter\";\nimport { motion } from \"framer-motion\";\nimport { PieChart, Pie, Cell, ResponsiveContainer } from \"recharts\";\nimport { Wallet, RefreshCw, Shield, TrendingUp, BookOpen, Ticket, ArrowRight, ArrowLeft } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { BankrollSetupModal } from \"@/components/bankroll-setup-modal\";\nimport { toast } from \"sonner\";\n\nexport default function GestaoPage() {\n  const { user, isLoading } = useAuth();\n  const [, navigate] = useLocation();\n  const [showSetupModal, setShowSetupModal] = useState(false);\n  const [isLoadingData, setIsLoadingData] = useState(true);\n  const [bankrollData, setBankrollData] = useState<{\n    bankrollInitial: number | null;\n    riskProfile: string | null;\n    unitValue: number | null;\n  }>({\n    bankrollInitial: null,\n    riskProfile: null,\n    unitValue: null,\n  });\n\n  useEffect(() => {\n    if (!isLoading && !user) {\n      navigate(\"/login\");\n      return;\n    }\n\n    if (user) {\n      fetchBankrollData();\n    }\n  }, [user, isLoading]);\n\n  const fetchBankrollData = async () => {\n    setIsLoadingData(true);\n    try {\n      const response = await fetch(`/api/profile/${user?.id}/bankroll`);\n      if (response.ok) {\n        const data = await response.json();\n        setBankrollData({\n          bankrollInitial: data.bankrollInitial ? parseFloat(data.bankrollInitial) : null,\n          riskProfile: data.riskProfile,\n          unitValue: data.unitValue ? parseFloat(data.unitValue) : null,\n        });\n\n        if (!data.unitValue) {\n          setShowSetupModal(true);\n        }\n      }\n    } catch (error) {\n      console.error(\"Erro ao buscar dados de bankroll:\", error);\n    } finally {\n      setIsLoadingData(false);\n    }\n  };\n\n  const handleSetupComplete = async (data: {\n    bankrollInitial: number;\n    riskProfile: string;\n    unitValue: number;\n  }) => {\n    try {\n      const response = await fetch(`/api/profile/${user?.id}/bankroll`, {\n        method: \"PUT\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(data),\n      });\n\n      if (response.ok) {\n        setBankrollData(data);\n        setShowSetupModal(false);\n        toast.success(\"Estrat√©gia configurada com sucesso!\");\n      } else {\n        toast.error(\"Erro ao salvar configura√ß√£o\");\n      }\n    } catch (error) {\n      console.error(\"Erro ao salvar bankroll:\", error);\n      toast.error(\"Erro ao salvar configura√ß√£o\");\n    }\n  };\n\n  const formatCurrency = (value: number) => {\n    return new Intl.NumberFormat(\"pt-BR\", {\n      style: \"currency\",\n      currency: \"BRL\",\n    }).format(value);\n  };\n\n  const getRiskProfileInfo = (profile: string | null) => {\n    switch (profile) {\n      case \"conservador\":\n        return { name: \"Conservador\", divisor: 100, color: \"#3b82f6\" };\n      case \"moderado\":\n        return { name: \"Moderado\", divisor: 50, color: \"#33b864\" };\n      case \"agressivo\":\n        return { name: \"Agressivo\", divisor: 30, color: \"#f97316\" };\n      default:\n        return { name: \"-\", divisor: 50, color: \"#33b864\" };\n    }\n  };\n\n  const profileInfo = getRiskProfileInfo(bankrollData.riskProfile);\n\n  const pieData = [\n    { name: \"Capital Livre\", value: 85, color: \"#33b864\" },\n    { name: \"Em Jogo\", value: 15, color: \"#f97316\" },\n  ];\n\n  if (isLoading || isLoadingData) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <div className=\"animate-spin w-8 h-8 border-2 border-[#33b864] border-t-transparent rounded-full\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background pb-24\">\n      <BankrollSetupModal\n        isOpen={showSetupModal}\n        onComplete={handleSetupComplete}\n      />\n\n      <div className=\"max-w-lg mx-auto px-4 py-6\">\n        {/* Back Button */}\n        <motion.button\n          initial={{ opacity: 0, x: -10 }}\n          animate={{ opacity: 1, x: 0 }}\n          onClick={() => window.history.back()}\n          className=\"flex items-center gap-2 text-muted-foreground hover:text-foreground transition-colors mb-4 group\"\n          data-testid=\"button-back\"\n        >\n          <ArrowLeft className=\"w-5 h-5 group-hover:-translate-x-1 transition-transform\" />\n          <span className=\"text-sm\">Voltar</span>\n        </motion.button>\n\n        {/* Header */}\n        <motion.div\n          initial={{ opacity: 0, y: -20 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"mb-8\"\n        >\n          <h1 className=\"text-2xl font-bold text-foreground mb-1\" style={{ fontFamily: \"Sora, sans-serif\" }}>\n            Gest√£o de Banca\n          </h1>\n          <p className=\"text-muted-foreground text-sm\">\n            Controle inteligente do seu capital\n          </p>\n        </motion.div>\n\n        {bankrollData.unitValue ? (\n          <>\n            {/* Main Stats Card */}\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              className=\"bg-gradient-to-br from-[#33b864]/10 to-card border border-[#33b864]/30 rounded-2xl p-6 mb-6\"\n            >\n              <div className=\"flex items-center justify-between mb-4\">\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"w-12 h-12 rounded-xl bg-[#33b864]/20 flex items-center justify-center\">\n                    <Wallet className=\"w-6 h-6 text-[#33b864]\" />\n                  </div>\n                  <div>\n                    <p className=\"text-muted-foreground text-xs\">Sua Unidade Padr√£o</p>\n                    <p className=\"text-3xl font-bold text-[#33b864]\">\n                      {formatCurrency(bankrollData.unitValue)}\n                    </p>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"grid grid-cols-2 gap-4 pt-4 border-t border-border\">\n                <div>\n                  <p className=\"text-muted-foreground text-xs mb-1\">Capital Inicial</p>\n                  <p className=\"text-foreground font-bold\">\n                    {bankrollData.bankrollInitial\n                      ? formatCurrency(bankrollData.bankrollInitial)\n                      : \"-\"}\n                  </p>\n                </div>\n                <div>\n                  <p className=\"text-muted-foreground text-xs mb-1\">Perfil de Risco</p>\n                  <p className=\"text-foreground font-bold capitalize\">\n                    {profileInfo.name}\n                  </p>\n                </div>\n              </div>\n            </motion.div>\n\n            {/* Chart Card */}\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: 0.1 }}\n              className=\"bg-card border border-border rounded-2xl p-6 mb-6\"\n            >\n              <h3 className=\"text-foreground font-bold mb-4 flex items-center gap-2\">\n                <TrendingUp className=\"w-5 h-5 text-[#33b864]\" />\n                Distribui√ß√£o do Capital\n              </h3>\n              \n              <div className=\"flex items-center gap-6\">\n                <div className=\"w-32 h-32\">\n                  <ResponsiveContainer width=\"100%\" height=\"100%\">\n                    <PieChart>\n                      <Pie\n                        data={pieData}\n                        cx=\"50%\"\n                        cy=\"50%\"\n                        innerRadius={35}\n                        outerRadius={50}\n                        paddingAngle={2}\n                        dataKey=\"value\"\n                      >\n                        {pieData.map((entry, index) => (\n                          <Cell key={`cell-${index}`} fill={entry.color} />\n                        ))}\n                      </Pie>\n                    </PieChart>\n                  </ResponsiveContainer>\n                </div>\n                <div className=\"flex-1 space-y-2\">\n                  {pieData.map((item) => (\n                    <div key={item.name} className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center gap-2\">\n                        <div\n                          className=\"w-3 h-3 rounded-full\"\n                          style={{ backgroundColor: item.color }}\n                        />\n                        <span className=\"text-muted-foreground text-sm\">{item.name}</span>\n                      </div>\n                      <span className=\"text-foreground font-bold\">{item.value}%</span>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </motion.div>\n\n            {/* Golden Rule Card */}\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: 0.2 }}\n              className=\"bg-yellow-500/10 border border-yellow-500/30 rounded-2xl p-6 mb-6\"\n            >\n              <div className=\"flex items-start gap-4\">\n                <div className=\"w-12 h-12 rounded-xl bg-yellow-500/20 flex items-center justify-center flex-shrink-0\">\n                  <BookOpen className=\"w-6 h-6 text-yellow-400\" />\n                </div>\n                <div>\n                  <h3 className=\"text-yellow-400 font-bold mb-2\">A Regra de Ouro</h3>\n                  <p className=\"text-yellow-400/80 text-sm leading-relaxed\">\n                    \"Sua banca √© sua empresa. Sua unidade √© seu estoque. \n                    Nunca fuja da gest√£o sugerida nos bilhetes. \n                    A matem√°tica vence no longo prazo.\"\n                  </p>\n                </div>\n              </div>\n            </motion.div>\n\n            {/* Access Tips Button */}\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: 0.3 }}\n            >\n              <Link href=\"/tips\">\n                <Button\n                  className=\"w-full h-14 bg-[#33b864] hover:bg-[#289a54] text-black font-bold\"\n                  data-testid=\"button-access-tips\"\n                >\n                  <Ticket className=\"w-5 h-5 mr-2\" />\n                  Acessar Bilhetes Dispon√≠veis\n                  <ArrowRight className=\"w-5 h-5 ml-2\" />\n                </Button>\n              </Link>\n            </motion.div>\n\n            {/* Reconfigure Button */}\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: 0.4 }}\n              className=\"mt-3\"\n            >\n              <Button\n                onClick={() => setShowSetupModal(true)}\n                variant=\"outline\"\n                className=\"w-full h-12 border-border text-muted-foreground hover:bg-muted/50 text-sm\"\n                data-testid=\"button-reconfigure-bankroll\"\n              >\n                <RefreshCw className=\"w-4 h-4 mr-2\" />\n                Recalcular Banca / Novo Aporte\n              </Button>\n            </motion.div>\n          </>\n        ) : (\n          /* Empty State */\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            className=\"text-center py-12\"\n          >\n            <div className=\"w-20 h-20 rounded-full bg-[#33b864]/20 flex items-center justify-center mx-auto mb-6\">\n              <Shield className=\"w-10 h-10 text-[#33b864]\" />\n            </div>\n            <h2 className=\"text-xl font-bold text-foreground mb-2\">\n              Configure sua Gest√£o de Banca\n            </h2>\n            <p className=\"text-muted-foreground mb-8 max-w-sm mx-auto\">\n              Defina seu capital e perfil de risco para receber recomenda√ß√µes \n              personalizadas de entrada em cada bilhete.\n            </p>\n            <Button\n              onClick={() => setShowSetupModal(true)}\n              className=\"h-14 px-8 bg-[#33b864] hover:bg-[#289a54] text-black font-bold\"\n              data-testid=\"button-setup-bankroll\"\n            >\n              Configurar Agora\n            </Button>\n          </motion.div>\n        )}\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":12198,"size_tokens":null},"client/src/components/page-header.tsx":{"content":"import { ArrowLeft } from \"lucide-react\";\nimport { useLocation } from \"wouter\";\n\ninterface PageHeaderProps {\n  title: string;\n  subtitle?: string;\n  icon?: React.ReactNode;\n}\n\nexport function PageHeader({ title, subtitle, icon }: PageHeaderProps) {\n  const [, navigate] = useLocation();\n\n  const handleBack = () => {\n    if (window.history.length > 1) {\n      window.history.back();\n    } else {\n      navigate(\"/app\");\n    }\n  };\n\n  return (\n    <div className=\"mb-6\">\n      <button\n        onClick={handleBack}\n        className=\"flex items-center gap-2 text-gray-400 hover:text-white transition-colors mb-4 group\"\n        data-testid=\"button-back\"\n      >\n        <ArrowLeft className=\"w-5 h-5 group-hover:-translate-x-1 transition-transform\" />\n        <span className=\"text-sm\">Voltar</span>\n      </button>\n      \n      <div className=\"flex items-center gap-3\">\n        {icon && (\n          <div className=\"w-10 h-10 rounded-lg bg-[#33b864]/10 border border-[#33b864]/20 flex items-center justify-center\">\n            {icon}\n          </div>\n        )}\n        <div>\n          <h1 className=\"text-2xl font-display font-bold text-white\">{title}</h1>\n          {subtitle && <p className=\"text-muted-foreground text-sm\">{subtitle}</p>}\n        </div>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":1285,"size_tokens":null},"client/src/components/onboarding-tour.tsx":{"content":"import { motion, AnimatePresence } from \"framer-motion\";\nimport { ChevronLeft, ChevronRight, X, Rocket, ArrowRight, Home, Ticket, Play, Calendar, Wallet, Settings } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { useOnboarding } from \"@/hooks/use-onboarding\";\nimport { Logo } from \"@/components/logo\";\n\nconst STEP_ICONS: Record<string, React.ReactNode> = {\n  \"welcome\": <Home className=\"w-8 h-8 text-white\" />,\n  \"tips\": <Ticket className=\"w-8 h-8 text-white\" />,\n  \"live\": <Play className=\"w-8 h-8 text-white\" />,\n  \"pregame\": <Calendar className=\"w-8 h-8 text-white\" />,\n  \"gestao\": <Wallet className=\"w-8 h-8 text-white\" />,\n  \"settings\": <Settings className=\"w-8 h-8 text-white\" />,\n};\n\ninterface OnboardingTourProps {\n  showTour: boolean;\n  currentStep: number;\n  totalSteps: number;\n  currentStepData: {\n    id: string;\n    title: string;\n    description: string;\n    icon: string;\n  };\n  onNext: () => void;\n  onPrev: () => void;\n  onSkip: () => void;\n  onComplete: () => void;\n}\n\nexport function OnboardingTour({\n  showTour,\n  currentStep,\n  totalSteps,\n  currentStepData,\n  onNext,\n  onPrev,\n  onSkip,\n  onComplete,\n}: OnboardingTourProps) {\n  const isFirstStep = currentStep === 0;\n  const isLastStep = currentStep === totalSteps - 1;\n\n  return (\n    <AnimatePresence>\n      {showTour && (\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          exit={{ opacity: 0 }}\n          className=\"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm p-4\"\n        >\n          <motion.div\n            initial={{ scale: 0.9, opacity: 0, y: 20 }}\n            animate={{ scale: 1, opacity: 1, y: 0 }}\n            exit={{ scale: 0.9, opacity: 0, y: 20 }}\n            transition={{ type: \"spring\", duration: 0.5 }}\n            className=\"w-full max-w-md bg-gradient-to-b from-[#1a1a1a] to-[#0d0d0d] rounded-2xl border border-[#33b864]/30 shadow-2xl shadow-[#33b864]/20 overflow-hidden\"\n          >\n            {/* Header with Skip */}\n            <div className=\"flex items-center justify-between px-6 pt-5\">\n              <div className=\"flex items-center gap-2\">\n                {[...Array(totalSteps)].map((_, i) => (\n                  <div\n                    key={i}\n                    className={`h-1.5 rounded-full transition-all duration-300 ${\n                      i === currentStep\n                        ? \"w-6 bg-[#33b864]\"\n                        : i < currentStep\n                        ? \"w-1.5 bg-[#33b864]/50\"\n                        : \"w-1.5 bg-white/20\"\n                    }`}\n                  />\n                ))}\n              </div>\n              <button\n                onClick={onSkip}\n                className=\"text-gray-400 hover:text-white transition-colors text-sm flex items-center gap-1\"\n                data-testid=\"button-skip-tour\"\n              >\n                Pular <X className=\"w-4 h-4\" />\n              </button>\n            </div>\n\n            {/* Content */}\n            <div className=\"px-6 py-8\">\n              <AnimatePresence mode=\"wait\">\n                <motion.div\n                  key={currentStep}\n                  initial={{ opacity: 0, x: 20 }}\n                  animate={{ opacity: 1, x: 0 }}\n                  exit={{ opacity: 0, x: -20 }}\n                  transition={{ duration: 0.3 }}\n                  className=\"text-center\"\n                >\n                  {/* Icon */}\n                  <motion.div\n                    initial={{ scale: 0 }}\n                    animate={{ scale: 1 }}\n                    transition={{ type: \"spring\", delay: 0.1 }}\n                    className=\"w-20 h-20 mx-auto mb-6 rounded-2xl bg-gradient-to-br from-[#33b864]/20 to-[#33b864]/5 border border-[#33b864]/30 flex items-center justify-center\"\n                  >\n                    <span className=\"text-4xl\">{currentStepData.icon}</span>\n                  </motion.div>\n\n                  {/* Step Number */}\n                  <div className=\"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-[#33b864]/10 border border-[#33b864]/20 mb-4\">\n                    <span className=\"text-[#33b864] text-xs font-medium\">\n                      {currentStep + 1} de {totalSteps}\n                    </span>\n                  </div>\n\n                  {/* Title */}\n                  <h2 \n                    className=\"text-2xl font-bold text-white mb-3\"\n                    style={{ fontFamily: \"Sora, sans-serif\" }}\n                  >\n                    {currentStepData.title}\n                  </h2>\n\n                  {/* Description */}\n                  <p className=\"text-gray-400 text-sm leading-relaxed max-w-xs mx-auto\">\n                    {currentStepData.description}\n                  </p>\n                </motion.div>\n              </AnimatePresence>\n            </div>\n\n            {/* Navigation Buttons */}\n            <div className=\"px-6 pb-6 flex gap-3\">\n              {!isFirstStep && (\n                <Button\n                  variant=\"outline\"\n                  onClick={onPrev}\n                  className=\"flex-1 h-12 border-white/10 text-white hover:bg-white/5\"\n                  data-testid=\"button-tour-prev\"\n                >\n                  <ChevronLeft className=\"w-4 h-4 mr-1\" />\n                  Anterior\n                </Button>\n              )}\n              \n              <Button\n                onClick={isLastStep ? onComplete : onNext}\n                className={`${isFirstStep ? \"w-full\" : \"flex-1\"} h-12 bg-[#33b864] hover:bg-[#2ea558] text-black font-bold`}\n                data-testid=\"button-tour-next\"\n              >\n                {isLastStep ? (\n                  <>\n                    Come√ßar <Rocket className=\"w-4 h-4 ml-1\" />\n                  </>\n                ) : (\n                  <>\n                    Pr√≥ximo <ChevronRight className=\"w-4 h-4 ml-1\" />\n                  </>\n                )}\n              </Button>\n            </div>\n          </motion.div>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n}\n\nexport function WelcomeModal({\n  isOpen,\n  onStartTour,\n  onSkip,\n}: {\n  isOpen: boolean;\n  onStartTour: () => void;\n  onSkip: () => void;\n}) {\n  return (\n    <AnimatePresence>\n      {isOpen && (\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          exit={{ opacity: 0 }}\n          className=\"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm p-4\"\n        >\n          <motion.div\n            initial={{ scale: 0.9, opacity: 0, y: 20 }}\n            animate={{ scale: 1, opacity: 1, y: 0 }}\n            exit={{ scale: 0.9, opacity: 0, y: 20 }}\n            transition={{ type: \"spring\", duration: 0.5 }}\n            className=\"w-full max-w-md bg-gradient-to-b from-[#1a1a1a] to-[#0d0d0d] rounded-2xl border border-[#33b864]/30 shadow-2xl shadow-[#33b864]/20 overflow-hidden\"\n          >\n            {/* Animated Background Effect */}\n            <div className=\"absolute inset-0 overflow-hidden pointer-events-none\">\n              <div className=\"absolute top-0 left-1/2 -translate-x-1/2 w-64 h-64 bg-[#33b864]/10 rounded-full blur-3xl\" />\n            </div>\n\n            {/* Content */}\n            <div className=\"relative px-6 py-10 text-center\">\n              {/* Welcome Icon - Professional Shield */}\n              <motion.div\n                initial={{ scale: 0 }}\n                animate={{ scale: 1 }}\n                transition={{ type: \"spring\", delay: 0.2, duration: 0.6 }}\n                className=\"w-20 h-20 mx-auto mb-6\"\n              >\n                <svg viewBox=\"0 0 80 96\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" className=\"w-full h-full\">\n                  <defs>\n                    <linearGradient id=\"welcome-gradient\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\n                      <stop offset=\"0%\" stopColor=\"#4ade80\" />\n                      <stop offset=\"100%\" stopColor=\"#33b864\" />\n                    </linearGradient>\n                    <filter id=\"welcome-glow\" x=\"-50%\" y=\"-50%\" width=\"200%\" height=\"200%\">\n                      <feGaussianBlur stdDeviation=\"3\" result=\"blur\" />\n                      <feMerge>\n                        <feMergeNode in=\"blur\" />\n                        <feMergeNode in=\"SourceGraphic\" />\n                      </feMerge>\n                    </filter>\n                  </defs>\n                  <path \n                    d=\"M8 12 L8 64 Q8 80 40 92 Q72 80 72 64 L72 12 Q72 4 64 4 L16 4 Q8 4 8 12 Z\" \n                    fill=\"none\"\n                    stroke=\"url(#welcome-gradient)\"\n                    strokeWidth=\"3\"\n                    filter=\"url(#welcome-glow)\"\n                  />\n                  <path \n                    d=\"M16 48 L28 48 L34 36 L40 60 L46 44 L52 52 L64 52\" \n                    stroke=\"#33b864\" \n                    strokeWidth=\"3\" \n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    fill=\"none\"\n                  >\n                    <animate attributeName=\"stroke-dasharray\" values=\"0,200;100,200\" dur=\"1.5s\" fill=\"freeze\" />\n                  </path>\n                  <circle cx=\"64\" cy=\"52\" r=\"4\" fill=\"#33b864\">\n                    <animate attributeName=\"opacity\" values=\"0;1\" dur=\"1.5s\" fill=\"freeze\" />\n                  </circle>\n                </svg>\n              </motion.div>\n\n              {/* Title */}\n              <motion.div\n                initial={{ opacity: 0, y: 10 }}\n                animate={{ opacity: 1, y: 0 }}\n                transition={{ delay: 0.3 }}\n                className=\"mb-2\"\n              >\n                <h1 \n                  className=\"text-2xl font-bold text-white mb-4\"\n                  style={{ fontFamily: \"Sora, sans-serif\" }}\n                >\n                  Bem-Vindo ao\n                </h1>\n                <div className=\"flex justify-center\">\n                  <Logo size=\"xl\" />\n                </div>\n              </motion.div>\n\n              {/* Subtitle */}\n              <motion.p\n                initial={{ opacity: 0, y: 10 }}\n                animate={{ opacity: 1, y: 0 }}\n                transition={{ delay: 0.4 }}\n                className=\"text-gray-400 mb-8 max-w-xs mx-auto\"\n              >\n                Vamos fazer um tour r√°pido para voc√™ conhecer todas as funcionalidades do app?\n              </motion.p>\n\n              {/* Buttons */}\n              <motion.div\n                initial={{ opacity: 0, y: 10 }}\n                animate={{ opacity: 1, y: 0 }}\n                transition={{ delay: 0.5 }}\n                className=\"space-y-3\"\n              >\n                <Button\n                  onClick={onStartTour}\n                  className=\"w-full h-14 bg-[#33b864] hover:bg-[#2ea558] text-black font-bold text-base\"\n                  data-testid=\"button-start-tour\"\n                >\n                  Fazer o Tour <ArrowRight className=\"w-5 h-5 ml-2\" />\n                </Button>\n                \n                <button\n                  onClick={onSkip}\n                  className=\"w-full py-3 text-gray-400 hover:text-white transition-colors text-sm\"\n                  data-testid=\"button-skip-welcome\"\n                >\n                  N√£o, obrigado. J√° sei usar.\n                </button>\n              </motion.div>\n            </div>\n          </motion.div>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n}\n","path":null,"size_bytes":11419,"size_tokens":null},"client/src/hooks/use-content-protection.tsx":{"content":"import { useEffect, useState } from 'react';\n\nexport function useContentProtection() {\n  const [isBlurred, setIsBlurred] = useState(false);\n\n  useEffect(() => {\n    // 2. Blur quando perde foco (tentativa de screenshot)\n    const handleVisibilityChange = () => {\n      if (document.hidden) {\n        setIsBlurred(true);\n      }\n    };\n\n    const handleBlur = () => {\n      setIsBlurred(true);\n    };\n\n    const handleFocus = () => {\n      // Pequeno delay para evitar flash\n      setTimeout(() => setIsBlurred(false), 100);\n    };\n\n    // 3. Bloquear tecla PrintScreen\n    const handleKeyDown = (e: KeyboardEvent) => {\n      // Detecta PrintScreen\n      if (e.key === 'PrintScreen') {\n        e.preventDefault();\n        // Limpa o clipboard\n        navigator.clipboard.writeText('').catch(() => {});\n        setIsBlurred(true);\n        setTimeout(() => setIsBlurred(false), 500);\n      }\n      \n      // Bloqueia Ctrl+P (print)\n      if ((e.ctrlKey || e.metaKey) && e.key === 'p') {\n        e.preventDefault();\n      }\n      \n      // Bloqueia Ctrl+Shift+S (screenshot no Windows)\n      if ((e.ctrlKey || e.metaKey) && e.shiftKey && e.key === 's') {\n        e.preventDefault();\n      }\n    };\n\n    const handleKeyUp = (e: KeyboardEvent) => {\n      if (e.key === 'PrintScreen') {\n        // Tenta limpar clipboard novamente ap√≥s a captura\n        navigator.clipboard.writeText('Conte√∫do protegido - True Signal').catch(() => {});\n      }\n    };\n\n    // 4. Bloquear menu de contexto (right-click)\n    const handleContextMenu = (e: MouseEvent) => {\n      e.preventDefault();\n      return false;\n    };\n\n    // Adiciona listeners\n    document.addEventListener('visibilitychange', handleVisibilityChange);\n    window.addEventListener('blur', handleBlur);\n    window.addEventListener('focus', handleFocus);\n    document.addEventListener('keydown', handleKeyDown);\n    document.addEventListener('keyup', handleKeyUp);\n    document.addEventListener('contextmenu', handleContextMenu);\n\n    // Cleanup\n    return () => {\n      document.removeEventListener('visibilitychange', handleVisibilityChange);\n      window.removeEventListener('blur', handleBlur);\n      window.removeEventListener('focus', handleFocus);\n      document.removeEventListener('keydown', handleKeyDown);\n      document.removeEventListener('keyup', handleKeyUp);\n      document.removeEventListener('contextmenu', handleContextMenu);\n    };\n  }, []);\n\n  return { isBlurred };\n}\n","path":null,"size_bytes":2438,"size_tokens":null},"client/src/components/spotlight-tour.tsx":{"content":"import { motion, AnimatePresence } from \"framer-motion\";\nimport { ChevronLeft, ChevronRight, X, Rocket, Home, Ticket, Play, Calendar, Wallet, Settings } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { useState, useEffect, useCallback } from \"react\";\nimport { TourStep } from \"@/hooks/use-onboarding\";\n\nconst STEP_ICONS: Record<string, React.ReactNode> = {\n  \"welcome\": <Home className=\"w-6 h-6 text-white\" />,\n  \"tips\": <Ticket className=\"w-6 h-6 text-white\" />,\n  \"live\": <Play className=\"w-6 h-6 text-white\" />,\n  \"pregame\": <Calendar className=\"w-6 h-6 text-white\" />,\n  \"gestao\": <Wallet className=\"w-6 h-6 text-white\" />,\n  \"settings\": <Settings className=\"w-6 h-6 text-white\" />,\n};\n\ninterface SpotlightTourProps {\n  isOpen: boolean;\n  currentStep: number;\n  totalSteps: number;\n  stepData: TourStep;\n  onNext: () => void;\n  onPrev: () => void;\n  onSkip: () => void;\n  onComplete: () => void;\n}\n\ninterface ElementPosition {\n  top: number;\n  left: number;\n  width: number;\n  height: number;\n  centerX: number;\n  centerY: number;\n}\n\nexport function SpotlightTour({\n  isOpen,\n  currentStep,\n  totalSteps,\n  stepData,\n  onNext,\n  onPrev,\n  onSkip,\n  onComplete,\n}: SpotlightTourProps) {\n  const [elementPosition, setElementPosition] = useState<ElementPosition | null>(null);\n  const [tooltipPosition, setTooltipPosition] = useState({ top: 0, left: 0 });\n  const isFirstStep = currentStep === 0;\n  const isLastStep = currentStep === totalSteps - 1;\n\n  const updatePosition = useCallback(() => {\n    if (!stepData?.selector) return;\n    \n    const element = document.querySelector(stepData.selector);\n    if (element) {\n      const rect = element.getBoundingClientRect();\n      const padding = 8;\n      \n      const pos: ElementPosition = {\n        top: rect.top - padding,\n        left: rect.left - padding,\n        width: rect.width + padding * 2,\n        height: rect.height + padding * 2,\n        centerX: rect.left + rect.width / 2,\n        centerY: rect.top + rect.height / 2,\n      };\n      \n      setElementPosition(pos);\n\n      const tooltipWidth = 300;\n      const tooltipHeight = 200;\n      const margin = 16;\n      \n      let tooltipTop = 0;\n      let tooltipLeft = 0;\n\n      switch (stepData.placement) {\n        case \"top\":\n          tooltipTop = pos.top - tooltipHeight - margin;\n          tooltipLeft = pos.centerX - tooltipWidth / 2;\n          break;\n        case \"bottom\":\n          tooltipTop = pos.top + pos.height + margin;\n          tooltipLeft = pos.centerX - tooltipWidth / 2;\n          break;\n        case \"left\":\n          tooltipTop = pos.centerY - tooltipHeight / 2;\n          tooltipLeft = pos.left - tooltipWidth - margin;\n          break;\n        case \"right\":\n          tooltipTop = pos.centerY - tooltipHeight / 2;\n          tooltipLeft = pos.left + pos.width + margin;\n          break;\n        default:\n          tooltipTop = pos.top - tooltipHeight - margin;\n          tooltipLeft = pos.centerX - tooltipWidth / 2;\n      }\n\n      tooltipLeft = Math.max(margin, Math.min(tooltipLeft, window.innerWidth - tooltipWidth - margin));\n      tooltipTop = Math.max(margin, Math.min(tooltipTop, window.innerHeight - tooltipHeight - margin));\n\n      setTooltipPosition({ top: tooltipTop, left: tooltipLeft });\n    }\n  }, [stepData]);\n\n  useEffect(() => {\n    if (isOpen) {\n      const timer = setTimeout(updatePosition, 100);\n      window.addEventListener(\"resize\", updatePosition);\n      window.addEventListener(\"scroll\", updatePosition);\n      \n      return () => {\n        clearTimeout(timer);\n        window.removeEventListener(\"resize\", updatePosition);\n        window.removeEventListener(\"scroll\", updatePosition);\n      };\n    }\n  }, [isOpen, updatePosition, currentStep]);\n\n  if (!isOpen || !elementPosition) return null;\n\n  return (\n    <AnimatePresence>\n      <motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        exit={{ opacity: 0 }}\n        className=\"fixed inset-0 z-[200]\"\n      >\n        <svg\n          className=\"absolute inset-0 w-full h-full\"\n          style={{ pointerEvents: \"none\" }}\n        >\n          <defs>\n            <mask id=\"spotlight-mask\">\n              <rect x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" fill=\"white\" />\n              <rect\n                x={elementPosition.left}\n                y={elementPosition.top}\n                width={elementPosition.width}\n                height={elementPosition.height}\n                rx=\"12\"\n                fill=\"black\"\n              />\n            </mask>\n          </defs>\n          <rect\n            x=\"0\"\n            y=\"0\"\n            width=\"100%\"\n            height=\"100%\"\n            fill=\"rgba(0,0,0,0.85)\"\n            mask=\"url(#spotlight-mask)\"\n          />\n        </svg>\n\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          className=\"absolute pointer-events-none\"\n          style={{\n            top: elementPosition.top,\n            left: elementPosition.left,\n            width: elementPosition.width,\n            height: elementPosition.height,\n          }}\n        >\n          <div className=\"absolute inset-0 rounded-xl border-2 border-[#33b864] shadow-[0_0_20px_rgba(51,184,100,0.5)]\" />\n          <div className=\"absolute inset-0 rounded-xl animate-ping border-2 border-[#33b864]/30\" style={{ animationDuration: \"2s\" }} />\n        </motion.div>\n\n        <motion.div\n          initial={{ opacity: 0, scale: 0.9, y: 10 }}\n          animate={{ opacity: 1, scale: 1, y: 0 }}\n          exit={{ opacity: 0, scale: 0.9, y: 10 }}\n          transition={{ type: \"spring\", duration: 0.4 }}\n          className=\"absolute w-[300px] bg-gradient-to-b from-[#1a1a1a] to-[#0d0d0d] rounded-2xl border border-[#33b864]/40 shadow-2xl shadow-[#33b864]/30 overflow-hidden\"\n          style={{\n            top: tooltipPosition.top,\n            left: tooltipPosition.left,\n          }}\n        >\n          <div className=\"flex items-center justify-between px-4 pt-4\">\n            <div className=\"flex items-center gap-1.5\">\n              {[...Array(totalSteps)].map((_, i) => (\n                <div\n                  key={i}\n                  className={`h-1.5 rounded-full transition-all duration-300 ${\n                    i === currentStep\n                      ? \"w-5 bg-[#33b864]\"\n                      : i < currentStep\n                      ? \"w-1.5 bg-[#33b864]/50\"\n                      : \"w-1.5 bg-white/20\"\n                  }`}\n                />\n              ))}\n            </div>\n            <button\n              onClick={onSkip}\n              className=\"text-gray-400 hover:text-white transition-colors text-xs flex items-center gap-1\"\n              data-testid=\"button-skip-spotlight\"\n            >\n              Pular <X className=\"w-3 h-3\" />\n            </button>\n          </div>\n\n          <div className=\"px-4 py-4\">\n            <div className=\"flex items-center gap-3 mb-3\">\n              <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-[#33b864] to-[#1a8f4a] border border-[#33b864]/30 flex items-center justify-center shadow-lg shadow-[#33b864]/30\">\n                {STEP_ICONS[stepData.id] || <Home className=\"w-6 h-6 text-white\" />}\n              </div>\n              <div>\n                <div className=\"text-[10px] text-[#33b864] font-medium mb-0.5\">\n                  Passo {currentStep + 1} de {totalSteps}\n                </div>\n                <h3 \n                  className=\"text-lg font-bold text-white\"\n                  style={{ fontFamily: \"Sora, sans-serif\" }}\n                >\n                  {stepData.title}\n                </h3>\n              </div>\n            </div>\n\n            <p className=\"text-gray-400 text-sm leading-relaxed mb-4\">\n              {stepData.description}\n            </p>\n\n            <div className=\"flex gap-2\">\n              {!isFirstStep && (\n                <Button\n                  variant=\"outline\"\n                  onClick={onPrev}\n                  className=\"flex-1 h-10 border-white/10 text-white hover:bg-white/5 text-sm\"\n                  data-testid=\"button-spotlight-prev\"\n                >\n                  <ChevronLeft className=\"w-4 h-4 mr-1\" />\n                  Voltar\n                </Button>\n              )}\n              \n              <Button\n                onClick={isLastStep ? onComplete : onNext}\n                className={`${isFirstStep ? \"w-full\" : \"flex-1\"} h-10 bg-[#33b864] hover:bg-[#2ea558] text-black font-bold text-sm`}\n                data-testid=\"button-spotlight-next\"\n              >\n                {isLastStep ? (\n                  <>\n                    Concluir <Rocket className=\"w-4 h-4 ml-1\" />\n                  </>\n                ) : (\n                  <>\n                    Pr√≥ximo <ChevronRight className=\"w-4 h-4 ml-1\" />\n                  </>\n                )}\n              </Button>\n            </div>\n          </div>\n        </motion.div>\n      </motion.div>\n    </AnimatePresence>\n  );\n}\n","path":null,"size_bytes":8949,"size_tokens":null},"client/src/hooks/use-onboarding.tsx":{"content":"import { useState, useEffect, useCallback } from \"react\";\nimport { useAuth } from \"./use-auth\";\nimport { useLocation } from \"wouter\";\n\nexport interface TourStep {\n  id: string;\n  title: string;\n  description: string;\n  icon: string;\n  selector: string;\n  route?: string;\n  placement?: \"top\" | \"bottom\" | \"left\" | \"right\";\n}\n\nconst TOUR_STEPS: TourStep[] = [\n  {\n    id: \"welcome\",\n    title: \"Painel Principal\",\n    description: \"Este √© seu centro de comando! Aqui voc√™ v√™ todos os sinais e m√©tricas importantes.\",\n    icon: \"üè†\",\n    selector: \"[data-tour='home-icon']\",\n    route: \"/app\",\n    placement: \"top\"\n  },\n  {\n    id: \"tips\",\n    title: \"Sinais Premium\",\n    description: \"Toque aqui para ver os bilhetes analisados pela nossa equipe com odds e valor de entrada.\",\n    icon: \"üé´\",\n    selector: \"[data-tour='tips-icon']\",\n    route: \"/app\",\n    placement: \"top\"\n  },\n  {\n    id: \"live\",\n    title: \"Jogos Ao Vivo\",\n    description: \"Acompanhe partidas em tempo real com estat√≠sticas e placares atualizados.\",\n    icon: \"‚öΩ\",\n    selector: \"[data-tour='live-icon']\",\n    route: \"/app\",\n    placement: \"top\"\n  },\n  {\n    id: \"pregame\",\n    title: \"Pr√©-Jogo\",\n    description: \"Analise as pr√≥ximas partidas antes do in√≠cio. Ideal para planejar suas entradas.\",\n    icon: \"üìÖ\",\n    selector: \"[data-tour='pregame-icon']\",\n    route: \"/app\",\n    placement: \"top\"\n  },\n  {\n    id: \"gestao\",\n    title: \"Gest√£o de Banca\",\n    description: \"Configure seu capital e perfil de risco para receber valores exatos de entrada.\",\n    icon: \"üí∞\",\n    selector: \"[data-tour='gestao-icon']\",\n    route: \"/app\",\n    placement: \"top\"\n  },\n  {\n    id: \"settings\",\n    title: \"Configura√ß√µes\",\n    description: \"Toque no √≠cone de engrenagem para acessar configura√ß√µes, idioma e sua assinatura.\",\n    icon: \"‚öôÔ∏è\",\n    selector: \"[data-tour='settings-icon']\",\n    route: \"/app\",\n    placement: \"bottom\"\n  }\n];\n\nexport function useOnboarding() {\n  const { user } = useAuth();\n  const [, navigate] = useLocation();\n  const [showWelcome, setShowWelcome] = useState(false);\n  const [showTour, setShowTour] = useState(false);\n  const [currentStep, setCurrentStep] = useState(0);\n  const [hasChecked, setHasChecked] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  const [showBankrollSetup, setShowBankrollSetup] = useState(false);\n\n  useEffect(() => {\n    const checkOnboardingStatus = async () => {\n      if (!user?.id || hasChecked) return;\n\n      setIsLoading(true);\n      try {\n        const response = await fetch(`/api/profile/${user.id}/onboarding`);\n        if (response.ok) {\n          const data = await response.json();\n          if (!data.hasCompletedTour) {\n            setShowWelcome(true);\n          }\n        }\n      } catch (error) {\n        console.error(\"Error checking onboarding status:\", error);\n      } finally {\n        setIsLoading(false);\n        setHasChecked(true);\n      }\n    };\n\n    checkOnboardingStatus();\n  }, [user?.id, hasChecked]);\n\n  const startTour = useCallback(() => {\n    setShowWelcome(false);\n    setCurrentStep(0);\n    const firstStep = TOUR_STEPS[0];\n    if (firstStep.route) {\n      navigate(firstStep.route);\n    }\n    setTimeout(() => {\n      setShowTour(true);\n    }, 300);\n  }, [navigate]);\n\n  const nextStep = useCallback(() => {\n    if (currentStep < TOUR_STEPS.length - 1) {\n      const nextStepData = TOUR_STEPS[currentStep + 1];\n      if (nextStepData.route) {\n        navigate(nextStepData.route);\n      }\n      setCurrentStep(prev => prev + 1);\n    } else {\n      completeTour();\n    }\n  }, [currentStep, navigate]);\n\n  const prevStep = useCallback(() => {\n    if (currentStep > 0) {\n      const prevStepData = TOUR_STEPS[currentStep - 1];\n      if (prevStepData.route) {\n        navigate(prevStepData.route);\n      }\n      setCurrentStep(prev => prev - 1);\n    }\n  }, [currentStep, navigate]);\n\n  const skipTour = useCallback(async () => {\n    setShowWelcome(false);\n    setShowTour(false);\n    if (user?.id) {\n      try {\n        await fetch(`/api/profile/${user.id}/tour-completed`, {\n          method: \"PUT\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({ completed: true }),\n        });\n        setShowBankrollSetup(true);\n      } catch (error) {\n        console.error(\"Error marking tour as completed:\", error);\n      }\n    }\n  }, [user?.id]);\n\n  const completeTour = useCallback(async () => {\n    setShowTour(false);\n    if (user?.id) {\n      try {\n        await fetch(`/api/profile/${user.id}/tour-completed`, {\n          method: \"PUT\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({ completed: true }),\n        });\n        setShowBankrollSetup(true);\n      } catch (error) {\n        console.error(\"Error marking tour as completed:\", error);\n      }\n    }\n  }, [user?.id]);\n\n  const closeBankrollSetup = useCallback(() => {\n    setShowBankrollSetup(false);\n  }, []);\n\n  return {\n    showWelcome,\n    showTour,\n    showBankrollSetup,\n    currentStep,\n    totalSteps: TOUR_STEPS.length,\n    currentStepData: TOUR_STEPS[currentStep],\n    steps: TOUR_STEPS,\n    isLoading,\n    startTour,\n    nextStep,\n    prevStep,\n    skipTour,\n    completeTour,\n    closeBankrollSetup,\n    setShowTour,\n    setShowWelcome,\n  };\n}\n","path":null,"size_bytes":5299,"size_tokens":null},"client/src/hooks/use-favorites.tsx":{"content":"import { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { useAuth } from \"./use-auth\";\nimport { toast } from \"sonner\";\n\ninterface Favorite {\n  id: number;\n  userId: string;\n  tipId: string;\n  createdAt: string;\n}\n\nexport function useFavorites() {\n  const { user } = useAuth();\n  const queryClient = useQueryClient();\n  const userId = user?.id;\n\n  const { data: favorites = [], isLoading } = useQuery<Favorite[]>({\n    queryKey: ['favorites', userId],\n    queryFn: async () => {\n      if (!userId) return [];\n      const response = await fetch(`/api/favorites/${userId}`);\n      if (!response.ok) throw new Error('Failed to fetch favorites');\n      const data = await response.json();\n      return data.favorites;\n    },\n    enabled: !!userId,\n  });\n\n  const addFavorite = useMutation({\n    mutationFn: async (tipId: string) => {\n      if (!userId) throw new Error('User not authenticated');\n      const response = await fetch('/api/favorites', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ userId, tipId }),\n      });\n      if (!response.ok) throw new Error('Failed to add favorite');\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['favorites', userId] });\n      toast.success('Adicionado aos favoritos!');\n    },\n    onError: () => {\n      toast.error('Erro ao favoritar');\n    },\n  });\n\n  const removeFavorite = useMutation({\n    mutationFn: async (tipId: string) => {\n      if (!userId) throw new Error('User not authenticated');\n      const response = await fetch(`/api/favorites/${userId}/${tipId}`, {\n        method: 'DELETE',\n      });\n      if (!response.ok) throw new Error('Failed to remove favorite');\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['favorites', userId] });\n      toast.success('Removido dos favoritos');\n    },\n    onError: () => {\n      toast.error('Erro ao remover');\n    },\n  });\n\n  const isFavorite = (tipId: string) => {\n    return favorites.some(fav => fav.tipId === tipId);\n  };\n\n  const toggleFavorite = async (tipId: string) => {\n    if (isFavorite(tipId)) {\n      await removeFavorite.mutateAsync(tipId);\n    } else {\n      await addFavorite.mutateAsync(tipId);\n    }\n  };\n\n  return {\n    favorites,\n    isLoading,\n    isFavorite,\n    toggleFavorite,\n    addFavorite: addFavorite.mutate,\n    removeFavorite: removeFavorite.mutate,\n    isPending: addFavorite.isPending || removeFavorite.isPending,\n  };\n}\n","path":null,"size_bytes":2564,"size_tokens":null},"client/src/hooks/use-pwa-install.tsx":{"content":"import { useState, useEffect } from 'react';\n\ninterface BeforeInstallPromptEvent extends Event {\n  prompt: () => Promise<void>;\n  userChoice: Promise<{ outcome: 'accepted' | 'dismissed' }>;\n}\n\nexport function usePWAInstall() {\n  const [deferredPrompt, setDeferredPrompt] = useState<BeforeInstallPromptEvent | null>(null);\n  const [isInstallable, setIsInstallable] = useState(false);\n  const [isInstalled, setIsInstalled] = useState(false);\n  const [showPrompt, setShowPrompt] = useState(false);\n\n  useEffect(() => {\n    // Verifica se j√° est√° instalado\n    const isStandalone = window.matchMedia('(display-mode: standalone)').matches \n      || (window.navigator as any).standalone === true;\n    \n    if (isStandalone) {\n      setIsInstalled(true);\n      return;\n    }\n\n    // Verifica se o usu√°rio j√° descartou o prompt recentemente\n    const dismissedAt = localStorage.getItem('pwa-prompt-dismissed');\n    if (dismissedAt) {\n      const hoursSinceDismiss = (Date.now() - parseInt(dismissedAt)) / (1000 * 60 * 60);\n      if (hoursSinceDismiss < 24) {\n        return; // N√£o mostra por 24h ap√≥s descarte\n      }\n    }\n\n    const handler = (e: Event) => {\n      e.preventDefault();\n      setDeferredPrompt(e as BeforeInstallPromptEvent);\n      setIsInstallable(true);\n      \n      // Mostra o prompt ap√≥s 3 segundos na p√°gina\n      setTimeout(() => {\n        setShowPrompt(true);\n      }, 3000);\n    };\n\n    window.addEventListener('beforeinstallprompt', handler);\n\n    // Detecta quando foi instalado\n    window.addEventListener('appinstalled', () => {\n      setIsInstalled(true);\n      setIsInstallable(false);\n      setShowPrompt(false);\n      setDeferredPrompt(null);\n    });\n\n    return () => {\n      window.removeEventListener('beforeinstallprompt', handler);\n    };\n  }, []);\n\n  const install = async () => {\n    if (!deferredPrompt) return false;\n\n    try {\n      await deferredPrompt.prompt();\n      const { outcome } = await deferredPrompt.userChoice;\n      \n      if (outcome === 'accepted') {\n        setIsInstalled(true);\n        setShowPrompt(false);\n      }\n      \n      setDeferredPrompt(null);\n      setIsInstallable(false);\n      return outcome === 'accepted';\n    } catch (error) {\n      console.error('PWA install error:', error);\n      return false;\n    }\n  };\n\n  const dismiss = () => {\n    setShowPrompt(false);\n    localStorage.setItem('pwa-prompt-dismissed', Date.now().toString());\n  };\n\n  return {\n    isInstallable,\n    isInstalled,\n    showPrompt,\n    install,\n    dismiss,\n  };\n}\n","path":null,"size_bytes":2516,"size_tokens":null},"client/src/components/pwa-install-prompt.tsx":{"content":"import { motion, AnimatePresence } from \"framer-motion\";\nimport { Download, X, Smartphone, Share } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { usePWAInstall } from \"@/hooks/use-pwa-install\";\nimport { useState, useEffect } from \"react\";\n\nexport function PWAInstallPrompt() {\n  const { showPrompt, install, dismiss, isInstalled, isInstallable } = usePWAInstall();\n  const [showManualPrompt, setShowManualPrompt] = useState(false);\n  const [isIOS, setIsIOS] = useState(false);\n  const [isMobile, setIsMobile] = useState(false);\n\n  useEffect(() => {\n    const iOS = /iPad|iPhone|iPod/.test(navigator.userAgent);\n    const mobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n    setIsIOS(iOS);\n    setIsMobile(mobile);\n\n    if (mobile && !isInstalled) {\n      const dismissed = localStorage.getItem('pwa-manual-dismissed');\n      if (!dismissed || Date.now() - parseInt(dismissed) > 24 * 60 * 60 * 1000) {\n        const timer = setTimeout(() => {\n          if (!showPrompt) {\n            setShowManualPrompt(true);\n          }\n        }, 3000);\n        return () => clearTimeout(timer);\n      }\n    }\n  }, [isInstalled, showPrompt]);\n\n  const dismissManual = () => {\n    setShowManualPrompt(false);\n    localStorage.setItem('pwa-manual-dismissed', Date.now().toString());\n  };\n\n  if (isInstalled) return null;\n\n  if (showPrompt && isInstallable) {\n    return (\n      <AnimatePresence>\n        <motion.div\n          initial={{ opacity: 0, y: 100 }}\n          animate={{ opacity: 1, y: 0 }}\n          exit={{ opacity: 0, y: 100 }}\n          transition={{ type: \"spring\", damping: 25, stiffness: 300 }}\n          className=\"fixed bottom-24 md:bottom-6 left-4 right-4 md:left-auto md:right-6 md:w-[360px] z-[90]\"\n        >\n          <div className=\"bg-gradient-to-br from-[#1a1a1a] to-[#0d0d0d] rounded-2xl border border-[#33b864]/30 shadow-2xl shadow-[#33b864]/20 overflow-hidden\">\n            <div className=\"relative p-4 pb-0\">\n              <button\n                onClick={dismiss}\n                className=\"absolute top-3 right-3 p-1.5 rounded-lg bg-white/5 hover:bg-white/10 transition-colors\"\n                data-testid=\"button-dismiss-pwa\"\n              >\n                <X className=\"w-4 h-4 text-gray-400\" />\n              </button>\n              \n              <div className=\"flex items-start gap-4\">\n                <div className=\"w-14 h-14 rounded-2xl bg-gradient-to-br from-[#33b864] to-[#1a8f4a] flex items-center justify-center shadow-lg shadow-[#33b864]/30 flex-shrink-0\">\n                  <Smartphone className=\"w-7 h-7 text-white\" />\n                </div>\n                \n                <div className=\"flex-1 pr-6\">\n                  <h3 className=\"text-white font-bold text-base mb-1\" style={{ fontFamily: \"Sora, sans-serif\" }}>\n                    Instalar True Signal\n                  </h3>\n                  <p className=\"text-gray-400 text-xs leading-relaxed\">\n                    Adicione na sua tela inicial para acesso r√°pido\n                  </p>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"px-4 py-3\">\n              <div className=\"flex gap-2 text-[10px] text-gray-500\">\n                <span className=\"px-2 py-1 rounded-full bg-white/5\">Acesso r√°pido</span>\n                <span className=\"px-2 py-1 rounded-full bg-white/5\">Notifica√ß√µes</span>\n                <span className=\"px-2 py-1 rounded-full bg-white/5\">Tela cheia</span>\n              </div>\n            </div>\n\n            <div className=\"p-4 pt-0\">\n              <Button\n                onClick={install}\n                className=\"w-full h-12 bg-[#33b864] hover:bg-[#2ea558] text-black font-bold text-sm\"\n                data-testid=\"button-install-pwa\"\n              >\n                <Download className=\"w-5 h-5 mr-2\" />\n                Instalar Agora\n              </Button>\n            </div>\n          </div>\n        </motion.div>\n      </AnimatePresence>\n    );\n  }\n\n  if (showManualPrompt && isMobile) {\n    return (\n      <AnimatePresence>\n        <motion.div\n          initial={{ opacity: 0, y: 100 }}\n          animate={{ opacity: 1, y: 0 }}\n          exit={{ opacity: 0, y: 100 }}\n          transition={{ type: \"spring\", damping: 25, stiffness: 300 }}\n          className=\"fixed bottom-24 md:bottom-6 left-4 right-4 md:left-auto md:right-6 md:w-[360px] z-[90]\"\n        >\n          <div className=\"bg-gradient-to-br from-[#1a1a1a] to-[#0d0d0d] rounded-2xl border border-[#33b864]/30 shadow-2xl shadow-[#33b864]/20 overflow-hidden\">\n            <div className=\"relative p-4 pb-0\">\n              <button\n                onClick={dismissManual}\n                className=\"absolute top-3 right-3 p-1.5 rounded-lg bg-white/5 hover:bg-white/10 transition-colors\"\n                data-testid=\"button-dismiss-pwa-manual\"\n              >\n                <X className=\"w-4 h-4 text-gray-400\" />\n              </button>\n              \n              <div className=\"flex items-start gap-4\">\n                <div className=\"w-14 h-14 rounded-2xl bg-gradient-to-br from-[#33b864] to-[#1a8f4a] flex items-center justify-center shadow-lg shadow-[#33b864]/30 flex-shrink-0\">\n                  <Smartphone className=\"w-7 h-7 text-white\" />\n                </div>\n                \n                <div className=\"flex-1 pr-6\">\n                  <h3 className=\"text-white font-bold text-base mb-1\" style={{ fontFamily: \"Sora, sans-serif\" }}>\n                    Instalar True Signal\n                  </h3>\n                  <p className=\"text-gray-400 text-xs leading-relaxed\">\n                    Tenha acesso r√°pido direto da sua tela inicial\n                  </p>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"p-4 pt-3\">\n              {isIOS ? (\n                <div className=\"space-y-3\">\n                  <div className=\"flex items-center gap-3 text-sm text-gray-300\">\n                    <div className=\"w-6 h-6 rounded-full bg-[#33b864]/20 flex items-center justify-center text-xs font-bold text-[#33b864]\">1</div>\n                    <span>Toque em <Share className=\"w-4 h-4 inline mx-1\" /> (compartilhar)</span>\n                  </div>\n                  <div className=\"flex items-center gap-3 text-sm text-gray-300\">\n                    <div className=\"w-6 h-6 rounded-full bg-[#33b864]/20 flex items-center justify-center text-xs font-bold text-[#33b864]\">2</div>\n                    <span>Escolha \"Adicionar √† Tela de In√≠cio\"</span>\n                  </div>\n                  <div className=\"flex items-center gap-3 text-sm text-gray-300\">\n                    <div className=\"w-6 h-6 rounded-full bg-[#33b864]/20 flex items-center justify-center text-xs font-bold text-[#33b864]\">3</div>\n                    <span>Toque em \"Adicionar\"</span>\n                  </div>\n                </div>\n              ) : (\n                <div className=\"space-y-3\">\n                  <div className=\"flex items-center gap-3 text-sm text-gray-300\">\n                    <div className=\"w-6 h-6 rounded-full bg-[#33b864]/20 flex items-center justify-center text-xs font-bold text-[#33b864]\">1</div>\n                    <span>Toque no menu (‚ãÆ) do navegador</span>\n                  </div>\n                  <div className=\"flex items-center gap-3 text-sm text-gray-300\">\n                    <div className=\"w-6 h-6 rounded-full bg-[#33b864]/20 flex items-center justify-center text-xs font-bold text-[#33b864]\">2</div>\n                    <span>Escolha \"Adicionar √† tela inicial\"</span>\n                  </div>\n                  <div className=\"flex items-center gap-3 text-sm text-gray-300\">\n                    <div className=\"w-6 h-6 rounded-full bg-[#33b864]/20 flex items-center justify-center text-xs font-bold text-[#33b864]\">3</div>\n                    <span>Confirme a instala√ß√£o</span>\n                  </div>\n                </div>\n              )}\n            </div>\n\n            <div className=\"px-4 pb-4\">\n              <Button\n                onClick={dismissManual}\n                variant=\"outline\"\n                className=\"w-full h-10 border-[#33b864]/30 text-[#33b864] hover:bg-[#33b864]/10\"\n                data-testid=\"button-dismiss-pwa-manual-ok\"\n              >\n                Entendi\n              </Button>\n            </div>\n          </div>\n        </motion.div>\n      </AnimatePresence>\n    );\n  }\n\n  return null;\n}\n","path":null,"size_bytes":8430,"size_tokens":null},"client/src/components/PaymentMethods.tsx":{"content":"import { Lock } from \"lucide-react\";\n\nexport function PaymentMethods() {\n  return (\n    <div className=\"flex flex-col items-center gap-4 mt-8 opacity-60 hover:opacity-100 transition-opacity\">\n      \n      <span className=\"text-[10px] uppercase tracking-widest text-gray-500 font-sora\">\n        Pagamento Seguro via Mercado Pago\n      </span>\n\n      <div className=\"flex items-center gap-4\">\n        {/* PIX */}\n        <div className=\"h-6 flex items-center justify-center border border-white/20 rounded px-2\">\n          <svg className=\"h-4 w-4 fill-white\" viewBox=\"0 0 512 512\">\n            <path d=\"M242.4 292.5C247.8 287.1 257.1 287.1 262.5 292.5L339.5 369.5C353.7 383.7 372.6 391.5 392.6 391.5H407.7L310.6 488.6C280.3 518.9 231.1 518.9 200.8 488.6L103.3 391.2H112.6C132.6 391.2 151.5 383.4 165.7 369.2L242.4 292.5zM262.5 218.9C257.1 224.4 247.9 224.4 242.4 218.9L165.7 142.2C151.5 128 132.6 120.2 112.6 120.2H103.3L200.2 23.3C230.5-7.1 279.7-7.1 310 23.3L407.7 120.9H392.6C372.6 120.9 353.7 128.7 339.5 142.9L262.5 218.9zM112.6 142.7C126.4 142.7 139.1 148.3 148.7 157.9L225.4 234.6C243.6 252.8 267.8 252.8 286 234.6L362.7 157.9C372.3 148.3 385 142.7 398.8 142.7H430.3L488.6 200.9C518.9 231.2 518.9 280.4 488.6 310.7L430.3 369H398.8C385 369 372.3 363.4 362.7 353.8L286 277.1C267.8 258.9 243.6 258.9 225.4 277.1L148.7 353.8C139.1 363.4 126.4 369 112.6 369H80.9L23.3 310.7C-7 280.4-7 231.2 23.3 200.9L80.9 142.7H112.6z\"/>\n          </svg>\n          <span className=\"text-xs font-bold text-white ml-1.5\">PIX</span>\n        </div>\n\n        {/* Visa */}\n        <svg className=\"h-5 w-auto fill-white\" viewBox=\"0 0 750 471\">\n          <path d=\"M278.198 334.228l33.36-195.763h53.358l-33.384 195.763h-53.334zm246.101-191.54c-10.57-3.966-27.135-8.222-47.822-8.222-52.726 0-89.863 26.551-90.18 64.604-.297 28.129 26.515 43.822 46.754 53.185 20.77 9.597 27.752 15.716 27.654 24.283-.133 13.123-16.586 19.116-31.924 19.116-21.355 0-32.701-2.966-50.225-10.274l-6.878-3.112-7.487 43.823c12.463 5.466 35.508 10.199 59.438 10.445 56.09 0 92.502-26.248 92.916-66.884.199-22.27-14.016-39.215-44.801-53.188-18.65-9.056-30.072-15.099-29.951-24.269 0-8.137 9.668-16.838 30.56-16.838 17.446-.271 30.089 3.527 39.936 7.496l4.781 2.259 7.229-42.424zm137.311-4.223h-41.23c-12.773 0-22.332 3.486-27.941 16.234l-79.245 179.404h56.031s9.16-24.121 11.232-29.418c6.123 0 60.555.084 68.336.084 1.596 6.854 6.492 29.334 6.492 29.334h49.512l-43.187-195.638zm-65.417 126.408c4.414-11.279 21.26-54.724 21.26-54.724-.314.521 4.381-11.334 7.074-18.684l3.607 16.878s10.217 46.729 12.352 56.527h-44.293v.003zm-363.792-126.408l-52.239 133.496-5.567-27.129c-9.726-31.274-40.025-65.157-73.898-82.12l47.767 171.203 56.455-.063 84.004-195.386-56.522-.001\"/>\n        </svg>\n\n        {/* Mastercard */}\n        <svg className=\"h-5 w-auto fill-white\" viewBox=\"0 0 131.39 86.9\">\n          <circle cx=\"41.5\" cy=\"43.45\" r=\"41.5\" fillOpacity=\"0.6\"/>\n          <circle cx=\"89.89\" cy=\"43.45\" r=\"41.5\" fillOpacity=\"0.8\"/>\n        </svg>\n\n        {/* Amex */}\n        <svg className=\"h-5 w-auto fill-white\" viewBox=\"0 0 50 50\">\n          <path d=\"M 4 7 C 1.800781 7 0 8.800781 0 11 L 0 39 C 0 41.199219 1.800781 43 4 43 L 46 43 C 48.199219 43 50 41.199219 50 39 L 50 11 C 50 8.800781 48.199219 7 46 7 Z M 37.226563 12.984375 L 40.238281 12.984375 L 44.40625 18.335938 L 48.683594 12.984375 L 51.683594 12.984375 L 45.835938 20.164063 L 51.683594 27.347656 L 48.554688 27.347656 L 44.261719 21.871094 L 39.890625 27.347656 L 36.878906 27.347656 L 42.816406 20.042969 Z M 11.980469 12.984375 L 23.242188 12.984375 L 25.328125 17.039063 L 27.429688 12.984375 L 49.820313 12.984375 L 49.820313 14.796875 L 47.535156 17.335938 L 49.820313 19.886719 L 49.820313 20.042969 L 45.703125 20.042969 L 44.261719 21.871094 L 42.816406 20.042969 L 27.109375 20.042969 L 25.316406 23.839844 L 23.472656 20.042969 L 15.460938 20.042969 L 15.460938 18.746094 L 16.625 16.230469 L 11.980469 16.230469 Z\"/>\n        </svg>\n\n        {/* Elo */}\n        <div className=\"h-5 flex items-center\">\n          <span className=\"text-sm font-bold text-white tracking-tight\">elo</span>\n        </div>\n\n        {/* Hipercard */}\n        <div className=\"h-5 flex items-center\">\n          <span className=\"text-[10px] font-bold text-white tracking-tight\">HIPER</span>\n        </div>\n      </div>\n\n      <div className=\"flex items-center gap-2 text-[10px] text-gray-600\">\n        <Lock className=\"w-3 h-3\" />\n        <span>Dados Criptografados (256-bit SSL)</span>\n      </div>\n\n    </div>\n  );\n}\n","path":null,"size_bytes":4509,"size_tokens":null},"server/ai-prediction-engine.ts":{"content":"import axios from 'axios';\nimport { db } from './db';\nimport { teamMatchStats, aiTickets, aiAnalysisCache } from '@shared/schema';\nimport { eq, and, gte, desc, sql } from 'drizzle-orm';\nimport { validateComboLegs } from './combo-utils';\n\nconst FOOTBALL_API_KEY = process.env.FOOTBALL_API_KEY;\nconst API_BASE_URL = 'https://v3.football.api-sports.io';\n\ninterface FixtureData {\n  fixture: {\n    id: number;\n    date: string;\n    timestamp: number;\n    status: { short: string };\n  };\n  league: {\n    id: number;\n    name: string;\n    season: number;\n  };\n  teams: {\n    home: { id: number; name: string; logo: string; winner: boolean | null };\n    away: { id: number; name: string; logo: string; winner: boolean | null };\n  };\n  goals: { home: number | null; away: number | null };\n  score: {\n    halftime: { home: number | null; away: number | null };\n    fulltime: { home: number | null; away: number | null };\n  };\n}\n\ninterface TeamStats {\n  teamId: string;\n  teamName: string;\n  teamLogo: string;\n  leagueId: string;\n  leagueName: string;\n  season: string;\n  matchesAnalyzed: number;\n  goalsScored: number;\n  goalsConceded: number;\n  goalsScoredHome: number;\n  goalsConcededHome: number;\n  goalsScoredAway: number;\n  goalsConcededAway: number;\n  over05Pct: number;\n  over15Pct: number;\n  over25Pct: number;\n  over35Pct: number;\n  bttsPct: number;\n  cleanSheetPct: number;\n  failedToScorePct: number;\n  goalsFirstHalf: number;\n  goalsConcededFirstHalf: number;\n  formWins: number;\n  formDraws: number;\n  formLosses: number;\n  formPoints: number;\n  avgCorners: number;\n  avgCornersHT: number;\n  avgCards: number;\n  avgCardsHT: number;\n  avgShotsOnTarget: number;\n  avgShotsOnTargetHT: number;\n  avgTotalShots: number;\n  avgFouls: number;\n  avgOffsides: number;\n  cornersOver45Pct: number;\n  cornersOver55Pct: number;\n  cornersOver65Pct: number;\n  cornersOver85Pct: number;\n  cardsOver15Pct: number;\n  cardsOver25Pct: number;\n  cardsOver35Pct: number;\n  shotsOnTargetOver25Pct: number;\n  shotsOnTargetOver35Pct: number;\n  shotsOnTargetOver45Pct: number;\n  bothTeamsCardPct: number;\n  goalsFirstHalfOver05Pct: number;\n  goalsFirstHalfOver15Pct: number;\n  sourceFixtureIds: string[];\n}\n\ninterface FixtureStatistics {\n  fixtureId: number;\n  homeStats: {\n    shotsOnGoal: number;\n    shotsOffGoal: number;\n    totalShots: number;\n    corners: number;\n    fouls: number;\n    yellowCards: number;\n    redCards: number;\n    offsides: number;\n  };\n  awayStats: {\n    shotsOnGoal: number;\n    shotsOffGoal: number;\n    totalShots: number;\n    corners: number;\n    fouls: number;\n    yellowCards: number;\n    redCards: number;\n    offsides: number;\n  };\n}\n\ninterface PredictionResult {\n  market: string;\n  predictedOutcome: string;\n  probability: number;\n  confidence: number;\n  suggestedOdd: number;\n  suggestedStake: number;\n  rationale: string[];\n}\n\nclass AIPredictionEngine {\n  private apiHeaders = { 'x-apisports-key': FOOTBALL_API_KEY };\n  \n  async getCachedData(cacheKey: string): Promise<any | null> {\n    try {\n      const cached = await db.select()\n        .from(aiAnalysisCache)\n        .where(and(\n          eq(aiAnalysisCache.cacheKey, cacheKey),\n          gte(aiAnalysisCache.expiresAt, new Date())\n        ))\n        .limit(1);\n      \n      if (cached.length > 0) {\n        return JSON.parse(cached[0].data);\n      }\n      return null;\n    } catch (error) {\n      console.error('[AI Engine] Cache read error:', error);\n      return null;\n    }\n  }\n\n  async setCachedData(cacheKey: string, cacheType: string, data: any, hoursToExpire: number = 6): Promise<void> {\n    try {\n      const expiresAt = new Date(Date.now() + hoursToExpire * 60 * 60 * 1000);\n      \n      await db.insert(aiAnalysisCache)\n        .values({\n          cacheKey,\n          cacheType: cacheType as any,\n          data: JSON.stringify(data),\n          expiresAt,\n        })\n        .onConflictDoUpdate({\n          target: aiAnalysisCache.cacheKey,\n          set: {\n            data: JSON.stringify(data),\n            expiresAt,\n          }\n        });\n    } catch (error) {\n      console.error('[AI Engine] Cache write error:', error);\n    }\n  }\n\n  // Fetch Bet365 odds for a fixture\n  async fetchBet365Odds(fixtureId: number): Promise<Record<string, Record<string, number>> | null> {\n    const cacheKey = `bet365_odds_${fixtureId}`;\n    const cached = await this.getCachedData(cacheKey);\n    if (cached) return cached;\n\n    try {\n      const response = await axios.get(`${API_BASE_URL}/odds`, {\n        params: {\n          fixture: fixtureId,\n          bookmaker: 8 // Bet365 ID\n        },\n        headers: this.apiHeaders\n      });\n\n      const oddsData = response.data.response?.[0];\n      if (!oddsData) return null;\n\n      const bet365 = oddsData.bookmakers?.find((b: any) => b.id === 8) || oddsData.bookmakers?.[0];\n      if (!bet365) return null;\n\n      const markets: Record<string, Record<string, number>> = {};\n      bet365.bets?.forEach((bet: any) => {\n        const marketName = bet.name;\n        const values: Record<string, number> = {};\n        bet.values?.forEach((v: any) => {\n          values[v.value] = parseFloat(v.odd);\n        });\n        markets[marketName] = values;\n      });\n\n      // Cache for 2 hours (odds change frequently)\n      await this.setCachedData(cacheKey, 'odds', markets, 2);\n      console.log(`[AI Engine] Fetched Bet365 odds for fixture ${fixtureId}:`);\n      console.log(`[AI Engine] Available markets:`, JSON.stringify(markets, null, 2));\n      return markets;\n    } catch (error) {\n      console.error(`[AI Engine] Failed to fetch Bet365 odds for fixture ${fixtureId}:`, error);\n      return null;\n    }\n  }\n\n  // Get Bet365 odd for a specific market (handles dynamic lines like Over X.5)\n  getBet365OddForMarket(odds: Record<string, Record<string, number>> | null, market: string, outcome: string): number | null {\n    if (!odds) return null;\n\n    // Parse dynamic market names to extract the line and market type\n    // Examples: \"Over 2.5 Gols FT\", \"Over 6.5 Escanteios FT\", \"Over 3.5 Cart√µes FT\"\n    \n    // Goals markets\n    const goalsMatch = market.match(/Over (\\d+\\.?\\d*) Gols (FT|HT|1T)/i);\n    if (goalsMatch) {\n      const line = goalsMatch[1];\n      const period = goalsMatch[2].toUpperCase();\n      const bet365Name = period === 'FT' ? 'Goals Over/Under' : 'Goals Over/Under First Half';\n      const bet365Market = odds[bet365Name];\n      if (bet365Market) {\n        return bet365Market[`Over ${line}`] || null;\n      }\n    }\n    \n    // BTTS market\n    if (market.includes('BTTS') || market.includes('Ambas Marcam')) {\n      const bet365Market = odds['Both Teams Score'];\n      if (bet365Market) {\n        return bet365Market['Yes'] || null;\n      }\n    }\n    \n    // Corners markets\n    const cornersMatch = market.match(/Over (\\d+\\.?\\d*) Escanteios/i);\n    if (cornersMatch) {\n      const line = cornersMatch[1];\n      const bet365Market = odds['Total Corners'] || odds['Corners Over/Under'];\n      if (bet365Market) {\n        return bet365Market[`Over ${line}`] || null;\n      }\n    }\n    \n    // Cards markets\n    const cardsMatch = market.match(/Over (\\d+\\.?\\d*) Cart/i);\n    if (cardsMatch) {\n      const line = cardsMatch[1];\n      const bet365Market = odds['Total Cards'] || odds['Cards Over/Under'];\n      if (bet365Market) {\n        return bet365Market[`Over ${line}`] || null;\n      }\n    }\n    \n    // Shots on target\n    const shotsMatch = market.match(/Over (\\d+\\.?\\d*) Chutes/i);\n    if (shotsMatch) {\n      const line = shotsMatch[1];\n      const bet365Market = odds['Shots on Target'] || odds['Total Shots'];\n      if (bet365Market) {\n        return bet365Market[`Over ${line}`] || null;\n      }\n    }\n    \n    // Match result (1X2)\n    if (market.includes('Vit√≥ria')) {\n      const bet365Market = odds['Match Winner'] || odds['1X2'];\n      if (bet365Market) {\n        if (market.includes('Casa') || outcome.includes('Home')) {\n          return bet365Market['Home'] || bet365Market['1'] || null;\n        }\n        if (market.includes('Fora') || outcome.includes('Away')) {\n          return bet365Market['Away'] || bet365Market['2'] || null;\n        }\n      }\n    }\n    \n    return null;\n  }\n\n  async fetchTeamLastMatches(teamId: number, season: number = 2024): Promise<FixtureData[]> {\n    const cacheKey = `team_fixtures_${teamId}_${season}`;\n    const cached = await this.getCachedData(cacheKey);\n    if (cached) return cached;\n\n    try {\n      const response = await axios.get(`${API_BASE_URL}/fixtures`, {\n        params: {\n          team: teamId,\n          season,\n          last: 10,\n          status: 'FT'\n        },\n        headers: this.apiHeaders\n      });\n\n      const fixtures = response.data?.response || [];\n      await this.setCachedData(cacheKey, 'team_fixtures', fixtures);\n      return fixtures;\n    } catch (error: any) {\n      console.error(`[AI Engine] Error fetching last matches for team ${teamId}:`, error.message);\n      return [];\n    }\n  }\n\n  async fetchH2H(homeTeamId: number, awayTeamId: number): Promise<FixtureData[]> {\n    const cacheKey = `h2h_${homeTeamId}_${awayTeamId}`;\n    const cached = await this.getCachedData(cacheKey);\n    if (cached) return cached;\n\n    try {\n      const response = await axios.get(`${API_BASE_URL}/fixtures/headtohead`, {\n        params: {\n          h2h: `${homeTeamId}-${awayTeamId}`,\n          last: 10\n        },\n        headers: this.apiHeaders\n      });\n\n      const fixtures = response.data?.response || [];\n      await this.setCachedData(cacheKey, 'h2h', fixtures);\n      return fixtures;\n    } catch (error: any) {\n      console.error(`[AI Engine] Error fetching H2H for ${homeTeamId} vs ${awayTeamId}:`, error.message);\n      return [];\n    }\n  }\n\n  async fetchFixtureStatistics(fixtureId: number): Promise<FixtureStatistics | null> {\n    const cacheKey = `fixture_stats_${fixtureId}`;\n    const cached = await this.getCachedData(cacheKey);\n    if (cached) return cached;\n\n    try {\n      const response = await axios.get(`${API_BASE_URL}/fixtures/statistics`, {\n        params: { fixture: fixtureId },\n        headers: this.apiHeaders\n      });\n\n      const stats = response.data?.response || [];\n      if (stats.length < 2) return null;\n\n      const parseStatValue = (statArray: any[], type: string): number => {\n        const stat = statArray.find((s: any) => s.type === type);\n        if (!stat) return 0;\n        const value = stat.value;\n        if (value === null || value === undefined) return 0;\n        if (typeof value === 'string') {\n          return parseInt(value.replace('%', '')) || 0;\n        }\n        return value;\n      };\n\n      const homeTeamStats = stats[0]?.statistics || [];\n      const awayTeamStats = stats[1]?.statistics || [];\n\n      const result: FixtureStatistics = {\n        fixtureId,\n        homeStats: {\n          shotsOnGoal: parseStatValue(homeTeamStats, 'Shots on Goal'),\n          shotsOffGoal: parseStatValue(homeTeamStats, 'Shots off Goal'),\n          totalShots: parseStatValue(homeTeamStats, 'Total Shots'),\n          corners: parseStatValue(homeTeamStats, 'Corner Kicks'),\n          fouls: parseStatValue(homeTeamStats, 'Fouls'),\n          yellowCards: parseStatValue(homeTeamStats, 'Yellow Cards'),\n          redCards: parseStatValue(homeTeamStats, 'Red Cards'),\n          offsides: parseStatValue(homeTeamStats, 'Offsides')\n        },\n        awayStats: {\n          shotsOnGoal: parseStatValue(awayTeamStats, 'Shots on Goal'),\n          shotsOffGoal: parseStatValue(awayTeamStats, 'Shots off Goal'),\n          totalShots: parseStatValue(awayTeamStats, 'Total Shots'),\n          corners: parseStatValue(awayTeamStats, 'Corner Kicks'),\n          fouls: parseStatValue(awayTeamStats, 'Fouls'),\n          yellowCards: parseStatValue(awayTeamStats, 'Yellow Cards'),\n          redCards: parseStatValue(awayTeamStats, 'Red Cards'),\n          offsides: parseStatValue(awayTeamStats, 'Offsides')\n        }\n      };\n\n      await this.setCachedData(cacheKey, 'fixture_statistics', result);\n      return result;\n    } catch (error: any) {\n      console.error(`[AI Engine] Error fetching statistics for fixture ${fixtureId}:`, error.message);\n      return null;\n    }\n  }\n\n  async fetchMultipleFixtureStatistics(fixtureIds: number[]): Promise<Map<number, FixtureStatistics>> {\n    const statsMap = new Map<number, FixtureStatistics>();\n    \n    for (const fixtureId of fixtureIds) {\n      const stats = await this.fetchFixtureStatistics(fixtureId);\n      if (stats) {\n        statsMap.set(fixtureId, stats);\n      }\n      await new Promise(resolve => setTimeout(resolve, 200));\n    }\n    \n    return statsMap;\n  }\n\n  calculateTeamStats(\n    fixtures: FixtureData[], \n    teamId: number,\n    fixtureStatsMap?: Map<number, FixtureStatistics>\n  ): TeamStats {\n    let totalGoalsScored = 0;\n    let totalGoalsConceded = 0;\n    let homeGoalsScored = 0;\n    let homeGoalsConceded = 0;\n    let awayGoalsScored = 0;\n    let awayGoalsConceded = 0;\n    let over05 = 0, over15 = 0, over25 = 0, over35 = 0;\n    let bttsCount = 0;\n    let cleanSheets = 0;\n    let failedToScore = 0;\n    let firstHalfGoals = 0;\n    let firstHalfConceded = 0;\n    let firstHalfOver05 = 0, firstHalfOver15 = 0;\n    let wins = 0, draws = 0, losses = 0;\n    \n    let totalCorners = 0, totalCornersHT = 0;\n    let totalCards = 0, totalCardsHT = 0;\n    let totalShotsOnTarget = 0, totalShotsOnTargetHT = 0;\n    let totalShots = 0;\n    let totalFouls = 0, totalOffsides = 0;\n    let cornersOver45 = 0, cornersOver55 = 0, cornersOver65 = 0, cornersOver85 = 0;\n    let cardsOver15 = 0, cardsOver25 = 0, cardsOver35 = 0;\n    let shotsOnTargetOver25 = 0, shotsOnTargetOver35 = 0, shotsOnTargetOver45 = 0;\n    let bothTeamsCard = 0;\n    let matchesWithStats = 0;\n    \n    const fixtureIds: string[] = [];\n    \n    let teamName = '';\n    let teamLogo = '';\n    let leagueId = '';\n    let leagueName = '';\n    let season = '';\n    let homeGames = 0;\n    let awayGames = 0;\n\n    for (const match of fixtures) {\n      const isHome = match.teams.home.id === teamId;\n      const homeGoals = match.goals.home ?? 0;\n      const awayGoals = match.goals.away ?? 0;\n      const totalGoals = homeGoals + awayGoals;\n      \n      if (!teamName) {\n        teamName = isHome ? match.teams.home.name : match.teams.away.name;\n        teamLogo = isHome ? match.teams.home.logo : match.teams.away.logo;\n        leagueId = String(match.league.id);\n        leagueName = match.league.name;\n        season = String(match.league.season);\n      }\n      \n      fixtureIds.push(String(match.fixture.id));\n      \n      const scored = isHome ? homeGoals : awayGoals;\n      const conceded = isHome ? awayGoals : homeGoals;\n      \n      totalGoalsScored += scored;\n      totalGoalsConceded += conceded;\n      \n      if (isHome) {\n        homeGoalsScored += scored;\n        homeGoalsConceded += conceded;\n        homeGames++;\n      } else {\n        awayGoalsScored += scored;\n        awayGoalsConceded += conceded;\n        awayGames++;\n      }\n      \n      if (totalGoals > 0.5) over05++;\n      if (totalGoals > 1.5) over15++;\n      if (totalGoals > 2.5) over25++;\n      if (totalGoals > 3.5) over35++;\n      \n      if (homeGoals > 0 && awayGoals > 0) bttsCount++;\n      if (conceded === 0) cleanSheets++;\n      if (scored === 0) failedToScore++;\n      \n      const htHome = match.score.halftime?.home ?? 0;\n      const htAway = match.score.halftime?.away ?? 0;\n      const htTotal = htHome + htAway;\n      firstHalfGoals += isHome ? htHome : htAway;\n      firstHalfConceded += isHome ? htAway : htHome;\n      if (htTotal > 0.5) firstHalfOver05++;\n      if (htTotal > 1.5) firstHalfOver15++;\n      \n      if (scored > conceded) wins++;\n      else if (scored === conceded) draws++;\n      else losses++;\n      \n      const fixtureStats = fixtureStatsMap?.get(match.fixture.id);\n      if (fixtureStats) {\n        matchesWithStats++;\n        const teamStatsData = isHome ? fixtureStats.homeStats : fixtureStats.awayStats;\n        const opponentStatsData = isHome ? fixtureStats.awayStats : fixtureStats.homeStats;\n        \n        const teamCorners = teamStatsData.corners;\n        const teamCardsCount = teamStatsData.yellowCards + teamStatsData.redCards;\n        const teamShotsOnGoal = teamStatsData.shotsOnGoal;\n        \n        const matchCorners = teamStatsData.corners + opponentStatsData.corners;\n        const matchCards = teamCardsCount + opponentStatsData.yellowCards + opponentStatsData.redCards;\n        const matchShotsOnTarget = teamShotsOnGoal + opponentStatsData.shotsOnGoal;\n        \n        totalCorners += teamCorners;\n        totalCornersHT += Math.round(teamCorners * 0.45);\n        totalCards += teamCardsCount;\n        totalCardsHT += Math.round(teamCardsCount * 0.35);\n        totalShotsOnTarget += teamShotsOnGoal;\n        totalShotsOnTargetHT += Math.round(teamShotsOnGoal * 0.45);\n        totalShots += teamStatsData.totalShots;\n        totalFouls += teamStatsData.fouls;\n        totalOffsides += teamStatsData.offsides;\n        \n        if (matchCorners > 4.5) cornersOver45++;\n        if (matchCorners > 5.5) cornersOver55++;\n        if (matchCorners > 6.5) cornersOver65++;\n        if (matchCorners > 8.5) cornersOver85++;\n        \n        if (matchCards > 1.5) cardsOver15++;\n        if (matchCards > 2.5) cardsOver25++;\n        if (matchCards > 3.5) cardsOver35++;\n        \n        if (matchShotsOnTarget > 2.5) shotsOnTargetOver25++;\n        if (matchShotsOnTarget > 3.5) shotsOnTargetOver35++;\n        if (matchShotsOnTarget > 4.5) shotsOnTargetOver45++;\n        \n        const opponentCards = opponentStatsData.yellowCards + opponentStatsData.redCards;\n        if (teamCardsCount > 0 && opponentCards > 0) bothTeamsCard++;\n      }\n    }\n    \n    const matchCount = fixtures.length || 1;\n    const statsCount = matchesWithStats || 1;\n    \n    return {\n      teamId: String(teamId),\n      teamName,\n      teamLogo,\n      leagueId,\n      leagueName,\n      season,\n      matchesAnalyzed: matchCount,\n      goalsScored: Number((totalGoalsScored / matchCount).toFixed(2)),\n      goalsConceded: Number((totalGoalsConceded / matchCount).toFixed(2)),\n      goalsScoredHome: homeGames ? Number((homeGoalsScored / homeGames).toFixed(2)) : 0,\n      goalsConcededHome: homeGames ? Number((homeGoalsConceded / homeGames).toFixed(2)) : 0,\n      goalsScoredAway: awayGames ? Number((awayGoalsScored / awayGames).toFixed(2)) : 0,\n      goalsConcededAway: awayGames ? Number((awayGoalsConceded / awayGames).toFixed(2)) : 0,\n      over05Pct: Number(((over05 / matchCount) * 100).toFixed(1)),\n      over15Pct: Number(((over15 / matchCount) * 100).toFixed(1)),\n      over25Pct: Number(((over25 / matchCount) * 100).toFixed(1)),\n      over35Pct: Number(((over35 / matchCount) * 100).toFixed(1)),\n      bttsPct: Number(((bttsCount / matchCount) * 100).toFixed(1)),\n      cleanSheetPct: Number(((cleanSheets / matchCount) * 100).toFixed(1)),\n      failedToScorePct: Number(((failedToScore / matchCount) * 100).toFixed(1)),\n      goalsFirstHalf: Number((firstHalfGoals / matchCount).toFixed(2)),\n      goalsConcededFirstHalf: Number((firstHalfConceded / matchCount).toFixed(2)),\n      formWins: wins,\n      formDraws: draws,\n      formLosses: losses,\n      formPoints: wins * 3 + draws,\n      avgCorners: Number((totalCorners / statsCount).toFixed(2)),\n      avgCornersHT: Number((totalCornersHT / statsCount).toFixed(2)),\n      avgCards: Number((totalCards / statsCount).toFixed(2)),\n      avgCardsHT: Number((totalCardsHT / statsCount).toFixed(2)),\n      avgShotsOnTarget: Number((totalShotsOnTarget / statsCount).toFixed(2)),\n      avgShotsOnTargetHT: Number((totalShotsOnTargetHT / statsCount).toFixed(2)),\n      avgTotalShots: Number((totalShots / statsCount).toFixed(2)),\n      avgFouls: Number((totalFouls / statsCount).toFixed(2)),\n      avgOffsides: Number((totalOffsides / statsCount).toFixed(2)),\n      cornersOver45Pct: Number(((cornersOver45 / statsCount) * 100).toFixed(1)),\n      cornersOver55Pct: Number(((cornersOver55 / statsCount) * 100).toFixed(1)),\n      cornersOver65Pct: Number(((cornersOver65 / statsCount) * 100).toFixed(1)),\n      cornersOver85Pct: Number(((cornersOver85 / statsCount) * 100).toFixed(1)),\n      cardsOver15Pct: Number(((cardsOver15 / statsCount) * 100).toFixed(1)),\n      cardsOver25Pct: Number(((cardsOver25 / statsCount) * 100).toFixed(1)),\n      cardsOver35Pct: Number(((cardsOver35 / statsCount) * 100).toFixed(1)),\n      shotsOnTargetOver25Pct: Number(((shotsOnTargetOver25 / statsCount) * 100).toFixed(1)),\n      shotsOnTargetOver35Pct: Number(((shotsOnTargetOver35 / statsCount) * 100).toFixed(1)),\n      shotsOnTargetOver45Pct: Number(((shotsOnTargetOver45 / statsCount) * 100).toFixed(1)),\n      bothTeamsCardPct: Number(((bothTeamsCard / statsCount) * 100).toFixed(1)),\n      goalsFirstHalfOver05Pct: Number(((firstHalfOver05 / matchCount) * 100).toFixed(1)),\n      goalsFirstHalfOver15Pct: Number(((firstHalfOver15 / matchCount) * 100).toFixed(1)),\n      sourceFixtureIds: fixtureIds\n    };\n  }\n\n  poissonProbability(lambda: number, k: number): number {\n    return (Math.pow(lambda, k) * Math.exp(-lambda)) / this.factorial(k);\n  }\n\n  factorial(n: number): number {\n    if (n <= 1) return 1;\n    return n * this.factorial(n - 1);\n  }\n\n  calculateGoalProbabilities(homeExpected: number, awayExpected: number): {\n    homeWin: number;\n    draw: number;\n    awayWin: number;\n    over05: number;\n    over15: number;\n    over25: number;\n    over35: number;\n    btts: number;\n  } {\n    let homeWin = 0, draw = 0, awayWin = 0;\n    let under05 = 0, under15 = 0, under25 = 0, under35 = 0;\n    let btts = 0;\n\n    for (let homeGoals = 0; homeGoals <= 10; homeGoals++) {\n      for (let awayGoals = 0; awayGoals <= 10; awayGoals++) {\n        const prob = this.poissonProbability(homeExpected, homeGoals) * \n                     this.poissonProbability(awayExpected, awayGoals);\n        \n        const totalGoals = homeGoals + awayGoals;\n        \n        if (homeGoals > awayGoals) homeWin += prob;\n        else if (homeGoals === awayGoals) draw += prob;\n        else awayWin += prob;\n        \n        if (totalGoals < 1) under05 += prob;\n        if (totalGoals < 2) under15 += prob;\n        if (totalGoals < 3) under25 += prob;\n        if (totalGoals < 4) under35 += prob;\n        \n        if (homeGoals > 0 && awayGoals > 0) btts += prob;\n      }\n    }\n\n    return {\n      homeWin: homeWin * 100,\n      draw: draw * 100,\n      awayWin: awayWin * 100,\n      over05: (1 - under05) * 100,\n      over15: (1 - under15) * 100,\n      over25: (1 - under25) * 100,\n      over35: (1 - under35) * 100,\n      btts: btts * 100\n    };\n  }\n\n  generatePredictions(\n    homeStats: TeamStats, \n    awayStats: TeamStats,\n    h2hStats: { homeWins: number; draws: number; awayWins: number; avgGoals: number; avgCorners: number; avgCards: number } | null,\n    bet365Odds: Record<string, Record<string, number>> | null = null\n  ): PredictionResult[] {\n    const predictions: PredictionResult[] = [];\n    const CONFIDENCE_THRESHOLD = 70; // Reduzido para gerar mais bilhetes (6-8/dia)\n    const MIN_EV_THRESHOLD = -2; // Aceitar EV levemente negativo para mais op√ß√µes\n    const SAFETY_MARGIN_SHOTS = 0.55; // Menos conservador\n    const SAFETY_MARGIN_CORNERS = 0.50;\n    const SAFETY_MARGIN_CARDS = 0.45;\n    const SAFETY_MARGIN_GOALS = 0.60;\n    \n    // Helper para calcular EV real\n    const calculateEV = (probability: number, odd: number): number => {\n      // EV = (probability * odd) - 1  (em formato decimal: 0.05 = 5%)\n      return ((probability / 100) * odd - 1) * 100;\n    };\n    \n    // Helper para obter odd da Bet365 ou calcular a \"justa\"\n    const getOddForMarket = (market: string, outcome: string, fairOdd: number): { odd: number; source: 'bet365' | 'calculated' } => {\n      if (bet365Odds) {\n        const bet365Odd = this.getBet365OddForMarket(bet365Odds, market, outcome);\n        if (bet365Odd && bet365Odd >= 1.10) {\n          return { odd: bet365Odd, source: 'bet365' };\n        }\n      }\n      return { odd: fairOdd, source: 'calculated' };\n    };\n    \n    const homeExpectedGoals = (homeStats.goalsScoredHome + awayStats.goalsConcededAway) / 2;\n    const awayExpectedGoals = (awayStats.goalsScoredAway + homeStats.goalsConcededHome) / 2;\n    const totalExpectedGoals = homeExpectedGoals + awayExpectedGoals;\n    \n    const poissonProbs = this.calculateGoalProbabilities(homeExpectedGoals, awayExpectedGoals);\n    \n    const historicalOver25 = (homeStats.over25Pct + awayStats.over25Pct) / 2;\n    const historicalBtts = (homeStats.bttsPct + awayStats.bttsPct) / 2;\n    \n    const combinedOver25 = (poissonProbs.over25 * 0.6) + (historicalOver25 * 0.4);\n    const combinedOver15 = (poissonProbs.over15 * 0.6) + ((homeStats.over15Pct + awayStats.over15Pct) / 2 * 0.4);\n    const combinedBtts = (poissonProbs.btts * 0.6) + (historicalBtts * 0.4);\n    \n    let h2hBonus = 0;\n    if (h2hStats && h2hStats.avgGoals > 2.5) h2hBonus = 5;\n\n    if (totalExpectedGoals >= 2.5 && combinedOver15 >= CONFIDENCE_THRESHOLD) {\n      predictions.push({\n        market: 'Over 0.5 Gols FT',\n        predictedOutcome: 'Pelo menos 1 gol na partida',\n        probability: poissonProbs.over05,\n        confidence: Math.min(95, poissonProbs.over05),\n        suggestedOdd: 1.05,\n        suggestedStake: 3,\n        rationale: [\n          `M√©dia de gols esperados: ${totalExpectedGoals.toFixed(2)}`,\n          `Probabilidade matem√°tica: ${poissonProbs.over05.toFixed(1)}%`,\n          `${homeStats.teamName} + ${awayStats.teamName} somam m√©dia de ${(homeStats.goalsScored + awayStats.goalsScored).toFixed(2)} gols`\n        ]\n      });\n    }\n    \n    if (combinedOver15 >= CONFIDENCE_THRESHOLD) {\n      const fairOdd = Number((100 / combinedOver15).toFixed(2));\n      const oddInfo = getOddForMarket('Over 1.5 Gols FT', 'Over 1.5', fairOdd);\n      const ev = calculateEV(combinedOver15, oddInfo.odd);\n      \n      if (ev >= MIN_EV_THRESHOLD) {\n        predictions.push({\n          market: 'Over 1.5 Gols FT',\n          predictedOutcome: 'Pelo menos 2 gols na partida',\n          probability: combinedOver15,\n          confidence: Math.min(95, combinedOver15),\n          suggestedOdd: oddInfo.odd,\n          suggestedStake: 2,\n          rationale: [\n            `M√©dia de gols esperados: ${totalExpectedGoals.toFixed(2)}`,\n            `${homeStats.teamName} Over 1.5: ${homeStats.over15Pct}%`,\n            `${awayStats.teamName} Over 1.5: ${awayStats.over15Pct}%`,\n            `Probabilidade: ${combinedOver15.toFixed(1)}%`,\n            oddInfo.source === 'bet365' ? `Odd Bet365: ${oddInfo.odd} | EV: ${ev > 0 ? '+' : ''}${ev.toFixed(1)}%` : `Odd calculada: ${oddInfo.odd}`\n          ]\n        });\n      }\n    }\n    \n    if (combinedOver25 + h2hBonus >= CONFIDENCE_THRESHOLD) {\n      const fairOdd = Number((100 / combinedOver25).toFixed(2));\n      const oddInfo = getOddForMarket('Over 2.5 Gols FT', 'Over 2.5', fairOdd);\n      const ev = calculateEV(combinedOver25, oddInfo.odd);\n      \n      if (ev >= MIN_EV_THRESHOLD) {\n        predictions.push({\n          market: 'Over 2.5 Gols FT',\n          predictedOutcome: 'Pelo menos 3 gols na partida',\n          probability: combinedOver25,\n          confidence: Math.min(95, combinedOver25 + h2hBonus),\n          suggestedOdd: oddInfo.odd,\n          suggestedStake: 2,\n          rationale: [\n            `M√©dia de gols esperados: ${totalExpectedGoals.toFixed(2)}`,\n            `${homeStats.teamName} marca ${homeStats.goalsScoredHome.toFixed(2)} gols em casa`,\n            `${awayStats.teamName} sofre ${awayStats.goalsConcededAway.toFixed(2)} gols fora`,\n            `Hist√≥rico Over 2.5: ${historicalOver25.toFixed(1)}%`,\n            h2hBonus > 0 ? `H2H: m√©dia de ${h2hStats?.avgGoals.toFixed(2)} gols` : '',\n            oddInfo.source === 'bet365' ? `Odd Bet365: ${oddInfo.odd} | EV: ${ev > 0 ? '+' : ''}${ev.toFixed(1)}%` : `Odd calculada: ${oddInfo.odd}`\n          ].filter(Boolean)\n        });\n      }\n    }\n    \n    const htGoalsProbability = (homeStats.goalsFirstHalfOver05Pct + awayStats.goalsFirstHalfOver05Pct) / 2;\n    if (htGoalsProbability >= CONFIDENCE_THRESHOLD) {\n      const fairOdd = Number((100 / htGoalsProbability).toFixed(2));\n      const oddInfo = getOddForMarket('Over 0.5 Gols 1T', 'Over 0.5', fairOdd);\n      const ev = calculateEV(htGoalsProbability, oddInfo.odd);\n      \n      if (ev >= MIN_EV_THRESHOLD) {\n        predictions.push({\n          market: 'Over 0.5 Gols HT',\n          predictedOutcome: 'Pelo menos 1 gol no 1¬∫ tempo',\n          probability: htGoalsProbability,\n          confidence: Math.min(95, htGoalsProbability),\n          suggestedOdd: oddInfo.odd,\n          suggestedStake: 2,\n          rationale: [\n            `${homeStats.teamName} gols 1¬∫T: ${homeStats.goalsFirstHalf.toFixed(2)} m√©dia`,\n            `${awayStats.teamName} gols 1¬∫T: ${awayStats.goalsFirstHalf.toFixed(2)} m√©dia`,\n            `Probabilidade: ${htGoalsProbability.toFixed(1)}%`,\n            oddInfo.source === 'bet365' ? `Odd Bet365: ${oddInfo.odd} | EV: ${ev > 0 ? '+' : ''}${ev.toFixed(1)}%` : `Odd calculada: ${oddInfo.odd}`\n          ]\n        });\n      }\n    }\n    \n    if (combinedBtts >= CONFIDENCE_THRESHOLD) {\n      const fairOdd = Number((100 / combinedBtts).toFixed(2));\n      const oddInfo = getOddForMarket('Ambas Marcam', 'Yes', fairOdd);\n      const ev = calculateEV(combinedBtts, oddInfo.odd);\n      \n      if (ev >= MIN_EV_THRESHOLD) {\n        predictions.push({\n          market: 'Ambas Marcam FT',\n          predictedOutcome: 'Sim - Ambos times marcam',\n          probability: combinedBtts,\n          confidence: Math.min(95, combinedBtts),\n          suggestedOdd: oddInfo.odd,\n          suggestedStake: 2,\n          rationale: [\n            `${homeStats.teamName} BTTS: ${homeStats.bttsPct}%`,\n            `${awayStats.teamName} BTTS: ${awayStats.bttsPct}%`,\n            `Probabilidade Poisson BTTS: ${poissonProbs.btts.toFixed(1)}%`,\n            `${homeStats.teamName} falha em marcar: ${homeStats.failedToScorePct}%`,\n            oddInfo.source === 'bet365' ? `Odd Bet365: ${oddInfo.odd} | EV: ${ev > 0 ? '+' : ''}${ev.toFixed(1)}%` : `Odd calculada: ${oddInfo.odd}`\n          ]\n        });\n      }\n    }\n\n    const avgShotsOnTarget = homeStats.avgShotsOnTarget + awayStats.avgShotsOnTarget;\n    if (avgShotsOnTarget >= 6) {\n      const safeLine = Math.floor(avgShotsOnTarget * SAFETY_MARGIN_SHOTS) + 0.5;\n      const historicalPct = (homeStats.shotsOnTargetOver35Pct + awayStats.shotsOnTargetOver35Pct) / 2;\n      const marketName = `Over ${safeLine} Chutes ao Gol FT`;\n      \n      if (historicalPct >= CONFIDENCE_THRESHOLD && safeLine >= 3.5) {\n        const fairOdd = Number((100 / historicalPct).toFixed(2));\n        const oddInfo = getOddForMarket(marketName, `Over ${safeLine}`, fairOdd);\n        const ev = calculateEV(historicalPct, oddInfo.odd);\n        \n        if (ev >= MIN_EV_THRESHOLD) {\n          predictions.push({\n            market: marketName,\n            predictedOutcome: `Pelo menos ${Math.ceil(safeLine)} chutes ao gol`,\n            probability: historicalPct,\n            confidence: Math.min(95, historicalPct),\n            suggestedOdd: oddInfo.odd,\n            suggestedStake: 2,\n            rationale: [\n              `M√©dia de chutes ao gol: ${avgShotsOnTarget.toFixed(1)}`,\n              `${homeStats.teamName}: ${homeStats.avgShotsOnTarget.toFixed(1)} chutes/jogo`,\n              `${awayStats.teamName}: ${awayStats.avgShotsOnTarget.toFixed(1)} chutes/jogo`,\n              `Linha segura (-40%): ${safeLine}`,\n              oddInfo.source === 'bet365' ? `Odd Bet365: ${oddInfo.odd} | EV: ${ev > 0 ? '+' : ''}${ev.toFixed(1)}%` : `Odd calculada: ${oddInfo.odd}`\n            ]\n          });\n        }\n      }\n    }\n\n    const avgCorners = homeStats.avgCorners + awayStats.avgCorners;\n    if (avgCorners >= 8) {\n      const safeLine = Math.floor(avgCorners * SAFETY_MARGIN_CORNERS) + 0.5;\n      const historicalPct = (homeStats.cornersOver55Pct + awayStats.cornersOver55Pct) / 2;\n      const marketName = `Over ${safeLine} Escanteios FT`;\n      \n      if (historicalPct >= CONFIDENCE_THRESHOLD && safeLine >= 4.5) {\n        const fairOdd = Number((100 / historicalPct).toFixed(2));\n        const oddInfo = getOddForMarket(marketName, `Over ${safeLine}`, fairOdd);\n        const ev = calculateEV(historicalPct, oddInfo.odd);\n        \n        if (ev >= MIN_EV_THRESHOLD) {\n          predictions.push({\n            market: marketName,\n            predictedOutcome: `Pelo menos ${Math.ceil(safeLine)} escanteios`,\n            probability: historicalPct,\n            confidence: Math.min(95, historicalPct),\n            suggestedOdd: oddInfo.odd,\n            suggestedStake: 2,\n            rationale: [\n              `M√©dia de escanteios: ${avgCorners.toFixed(1)}`,\n              `${homeStats.teamName}: ${homeStats.avgCorners.toFixed(1)} escanteios/jogo`,\n              `${awayStats.teamName}: ${awayStats.avgCorners.toFixed(1)} escanteios/jogo`,\n              `Linha segura (-45%): ${safeLine}`,\n              oddInfo.source === 'bet365' ? `Odd Bet365: ${oddInfo.odd} | EV: ${ev > 0 ? '+' : ''}${ev.toFixed(1)}%` : `Odd calculada: ${oddInfo.odd}`\n            ]\n          });\n        }\n      }\n      \n      const safeLineHT = Math.floor((avgCorners * 0.45) * SAFETY_MARGIN_CORNERS) + 0.5;\n      const marketNameHT = `Over ${safeLineHT} Escanteios HT`;\n      const htPct = historicalPct * 0.9;\n      if (safeLineHT >= 2.5 && historicalPct >= CONFIDENCE_THRESHOLD) {\n        const fairOdd = Number((100 / htPct).toFixed(2));\n        const oddInfo = getOddForMarket(marketNameHT, `Over ${safeLineHT}`, fairOdd);\n        const ev = calculateEV(htPct, oddInfo.odd);\n        \n        if (ev >= MIN_EV_THRESHOLD) {\n          predictions.push({\n            market: marketNameHT,\n            predictedOutcome: `Pelo menos ${Math.ceil(safeLineHT)} escanteios no 1¬∫ tempo`,\n            probability: htPct,\n            confidence: Math.min(92, htPct),\n            suggestedOdd: oddInfo.odd,\n            suggestedStake: 1.5,\n            rationale: [\n              `M√©dia de escanteios 1¬∫T estimada: ${(avgCorners * 0.45).toFixed(1)}`,\n              `Linha segura HT (-45%): ${safeLineHT}`,\n              oddInfo.source === 'bet365' ? `Odd Bet365: ${oddInfo.odd} | EV: ${ev > 0 ? '+' : ''}${ev.toFixed(1)}%` : `Odd calculada: ${oddInfo.odd}`\n            ]\n          });\n        }\n      }\n    }\n\n    const avgCards = homeStats.avgCards + awayStats.avgCards;\n    if (avgCards >= 3) {\n      const safeCardLine = Math.max(1.5, Math.floor(avgCards * SAFETY_MARGIN_CARDS) - 0.5 + 0.5);\n      const historicalPct = (homeStats.cardsOver15Pct + awayStats.cardsOver15Pct) / 2;\n      const marketName = `Over ${safeCardLine} Cart√µes FT`;\n      \n      if (historicalPct >= CONFIDENCE_THRESHOLD && safeCardLine >= 1.5) {\n        const fairOdd = Number((100 / historicalPct).toFixed(2));\n        const oddInfo = getOddForMarket(marketName, `Over ${safeCardLine}`, fairOdd);\n        const ev = calculateEV(historicalPct, oddInfo.odd);\n        \n        if (ev >= MIN_EV_THRESHOLD) {\n          predictions.push({\n            market: marketName,\n            predictedOutcome: `Pelo menos ${Math.ceil(safeCardLine)} cart√µes`,\n            probability: historicalPct,\n            confidence: Math.min(95, historicalPct),\n            suggestedOdd: oddInfo.odd,\n            suggestedStake: 2,\n            rationale: [\n              `M√©dia de cart√µes: ${avgCards.toFixed(1)}`,\n              `${homeStats.teamName}: ${homeStats.avgCards.toFixed(1)} cart√µes/jogo`,\n              `${awayStats.teamName}: ${awayStats.avgCards.toFixed(1)} cart√µes/jogo`,\n              `Linha segura (-50%): ${safeCardLine}`,\n              oddInfo.source === 'bet365' ? `Odd Bet365: ${oddInfo.odd} | EV: ${ev > 0 ? '+' : ''}${ev.toFixed(1)}%` : `Odd calculada: ${oddInfo.odd}`\n            ]\n          });\n        }\n      }\n      \n      const bothTeamsCardPct = (homeStats.bothTeamsCardPct + awayStats.bothTeamsCardPct) / 2;\n      if (bothTeamsCardPct >= CONFIDENCE_THRESHOLD) {\n        const fairOdd = Number((100 / bothTeamsCardPct).toFixed(2));\n        const oddInfo = getOddForMarket('Ambas Recebem Cart√£o FT', 'Yes', fairOdd);\n        const ev = calculateEV(bothTeamsCardPct, oddInfo.odd);\n        \n        if (ev >= MIN_EV_THRESHOLD) {\n          predictions.push({\n            market: 'Ambas Recebem Cart√£o FT',\n            predictedOutcome: 'Sim - Ambos times recebem cart√£o',\n            probability: bothTeamsCardPct,\n            confidence: Math.min(95, bothTeamsCardPct),\n            suggestedOdd: oddInfo.odd,\n            suggestedStake: 2,\n            rationale: [\n              `${homeStats.teamName} recebe cart√£o: ${homeStats.bothTeamsCardPct}% dos jogos`,\n              `${awayStats.teamName} recebe cart√£o: ${awayStats.bothTeamsCardPct}% dos jogos`,\n              oddInfo.source === 'bet365' ? `Odd Bet365: ${oddInfo.odd} | EV: ${ev > 0 ? '+' : ''}${ev.toFixed(1)}%` : `Odd calculada: ${oddInfo.odd}`\n            ]\n          });\n        }\n      }\n    }\n    \n    if (poissonProbs.homeWin >= 60 && homeStats.formPoints >= 10) {\n      const formBonus = (homeStats.formPoints - 9) * 2;\n      const confidence = Math.min(95, poissonProbs.homeWin + formBonus);\n      const fairOdd = Number((100 / poissonProbs.homeWin).toFixed(2));\n      const oddInfo = getOddForMarket(`Vit√≥ria ${homeStats.teamName}`, 'Home', fairOdd);\n      const ev = calculateEV(poissonProbs.homeWin, oddInfo.odd);\n      \n      if (confidence >= CONFIDENCE_THRESHOLD && ev >= MIN_EV_THRESHOLD) {\n        predictions.push({\n          market: 'Resultado Final',\n          predictedOutcome: `Vit√≥ria ${homeStats.teamName}`,\n          probability: poissonProbs.homeWin,\n          confidence: confidence,\n          suggestedOdd: oddInfo.odd,\n          suggestedStake: 2,\n          rationale: [\n            `${homeStats.teamName} forma: ${homeStats.formWins}V ${homeStats.formDraws}E ${homeStats.formLosses}D`,\n            `Probabilidade Poisson: ${poissonProbs.homeWin.toFixed(1)}%`,\n            `M√©dia gols casa: ${homeStats.goalsScoredHome.toFixed(2)}`,\n            `${awayStats.teamName} sofre ${awayStats.goalsConcededAway.toFixed(2)} gols fora`\n          ]\n        });\n      }\n    }\n    \n    if (poissonProbs.awayWin >= 50 && awayStats.formPoints >= 11) {\n      const formBonus = (awayStats.formPoints - 9) * 2;\n      const confidence = Math.min(95, poissonProbs.awayWin + formBonus);\n      const fairOdd = Number((100 / poissonProbs.awayWin).toFixed(2));\n      const oddInfo = getOddForMarket(`Vit√≥ria ${awayStats.teamName}`, 'Away', fairOdd);\n      const ev = calculateEV(poissonProbs.awayWin, oddInfo.odd);\n      \n      if (confidence >= CONFIDENCE_THRESHOLD && ev >= MIN_EV_THRESHOLD) {\n        predictions.push({\n          market: 'Resultado Final',\n          predictedOutcome: `Vit√≥ria ${awayStats.teamName}`,\n          probability: poissonProbs.awayWin,\n          confidence: confidence,\n          suggestedOdd: oddInfo.odd,\n          suggestedStake: 1.5,\n          rationale: [\n            `${awayStats.teamName} forma: ${awayStats.formWins}V ${awayStats.formDraws}E ${awayStats.formLosses}D`,\n            `Probabilidade vit√≥ria fora: ${poissonProbs.awayWin.toFixed(1)}%`,\n            `${awayStats.teamName} marca ${awayStats.goalsScoredAway.toFixed(2)} gols fora`,\n            oddInfo.source === 'bet365' ? `Odd Bet365: ${oddInfo.odd} | EV: ${ev > 0 ? '+' : ''}${ev.toFixed(1)}%` : `Odd calculada: ${oddInfo.odd}`\n          ]\n        });\n      }\n    }\n    \n    return predictions.filter(p => p.confidence >= CONFIDENCE_THRESHOLD);\n  }\n\n  async analyzeFixture(fixture: FixtureData): Promise<PredictionResult[]> {\n    console.log(`[AI Engine] Analyzing fixture: ${fixture.teams.home.name} vs ${fixture.teams.away.name}`);\n    \n    const homeTeamId = fixture.teams.home.id;\n    const awayTeamId = fixture.teams.away.id;\n    \n    const [homeMatches, awayMatches, h2hMatches, bet365Odds] = await Promise.all([\n      this.fetchTeamLastMatches(homeTeamId, fixture.league.season),\n      this.fetchTeamLastMatches(awayTeamId, fixture.league.season),\n      this.fetchH2H(homeTeamId, awayTeamId),\n      this.fetchBet365Odds(fixture.fixture.id)\n    ]);\n    \n    if (bet365Odds) {\n      console.log(`[AI Engine] Found Bet365 odds for fixture ${fixture.fixture.id}`);\n    }\n    \n    if (homeMatches.length < 5 || awayMatches.length < 5) {\n      console.log(`[AI Engine] Insufficient data for analysis (home: ${homeMatches.length}, away: ${awayMatches.length})`);\n      return [];\n    }\n    \n    const allFixtureIds = [\n      ...homeMatches.map(m => m.fixture.id),\n      ...awayMatches.map(m => m.fixture.id),\n      ...h2hMatches.map(m => m.fixture.id)\n    ];\n    const uniqueFixtureIds = Array.from(new Set(allFixtureIds));\n    \n    console.log(`[AI Engine] Fetching detailed statistics for ${uniqueFixtureIds.length} fixtures...`);\n    const fixtureStatsMap = await this.fetchMultipleFixtureStatistics(uniqueFixtureIds);\n    console.log(`[AI Engine] Got statistics for ${fixtureStatsMap.size} fixtures`);\n    \n    const homeStats = this.calculateTeamStats(homeMatches, homeTeamId, fixtureStatsMap);\n    const awayStats = this.calculateTeamStats(awayMatches, awayTeamId, fixtureStatsMap);\n    \n    let h2hAnalysis = null;\n    if (h2hMatches.length >= 3) {\n      let homeWins = 0, draws = 0, awayWins = 0, totalGoals = 0;\n      let totalCorners = 0, totalCards = 0;\n      \n      for (const match of h2hMatches) {\n        const homeGoals = match.goals.home ?? 0;\n        const awayGoals = match.goals.away ?? 0;\n        totalGoals += homeGoals + awayGoals;\n        \n        const matchStats = fixtureStatsMap.get(match.fixture.id);\n        if (matchStats) {\n          totalCorners += matchStats.homeStats.corners + matchStats.awayStats.corners;\n          totalCards += matchStats.homeStats.yellowCards + matchStats.homeStats.redCards + \n                        matchStats.awayStats.yellowCards + matchStats.awayStats.redCards;\n        }\n        \n        if (match.teams.home.id === homeTeamId) {\n          if (homeGoals > awayGoals) homeWins++;\n          else if (homeGoals === awayGoals) draws++;\n          else awayWins++;\n        } else {\n          if (awayGoals > homeGoals) homeWins++;\n          else if (homeGoals === awayGoals) draws++;\n          else awayWins++;\n        }\n      }\n      \n      h2hAnalysis = {\n        homeWins,\n        draws,\n        awayWins,\n        avgGoals: totalGoals / h2hMatches.length,\n        avgCorners: totalCorners / h2hMatches.length,\n        avgCards: totalCards / h2hMatches.length\n      };\n    }\n    \n    await Promise.all([\n      db.insert(teamMatchStats)\n        .values({\n          ...homeStats,\n          matchesAnalyzed: String(homeStats.matchesAnalyzed),\n          goalsScored: String(homeStats.goalsScored),\n          goalsConceded: String(homeStats.goalsConceded),\n          goalsScoredHome: String(homeStats.goalsScoredHome),\n          goalsConcededHome: String(homeStats.goalsConcededHome),\n          goalsScoredAway: String(homeStats.goalsScoredAway),\n          goalsConcededAway: String(homeStats.goalsConcededAway),\n          over05Pct: String(homeStats.over05Pct),\n          over15Pct: String(homeStats.over15Pct),\n          over25Pct: String(homeStats.over25Pct),\n          over35Pct: String(homeStats.over35Pct),\n          bttsPct: String(homeStats.bttsPct),\n          cleanSheetPct: String(homeStats.cleanSheetPct),\n          failedToScorePct: String(homeStats.failedToScorePct),\n          goalsFirstHalf: String(homeStats.goalsFirstHalf),\n          goalsConcededFirstHalf: String(homeStats.goalsConcededFirstHalf),\n          formWins: String(homeStats.formWins),\n          formDraws: String(homeStats.formDraws),\n          formLosses: String(homeStats.formLosses),\n          formPoints: String(homeStats.formPoints),\n          avgCorners: String(homeStats.avgCorners),\n          avgCards: String(homeStats.avgCards),\n          sourceFixtureIds: JSON.stringify(homeStats.sourceFixtureIds)\n        })\n        .onConflictDoNothing(),\n      db.insert(teamMatchStats)\n        .values({\n          ...awayStats,\n          matchesAnalyzed: String(awayStats.matchesAnalyzed),\n          goalsScored: String(awayStats.goalsScored),\n          goalsConceded: String(awayStats.goalsConceded),\n          goalsScoredHome: String(awayStats.goalsScoredHome),\n          goalsConcededHome: String(awayStats.goalsConcededHome),\n          goalsScoredAway: String(awayStats.goalsScoredAway),\n          goalsConcededAway: String(awayStats.goalsConcededAway),\n          over05Pct: String(awayStats.over05Pct),\n          over15Pct: String(awayStats.over15Pct),\n          over25Pct: String(awayStats.over25Pct),\n          over35Pct: String(awayStats.over35Pct),\n          bttsPct: String(awayStats.bttsPct),\n          cleanSheetPct: String(awayStats.cleanSheetPct),\n          failedToScorePct: String(awayStats.failedToScorePct),\n          goalsFirstHalf: String(awayStats.goalsFirstHalf),\n          goalsConcededFirstHalf: String(awayStats.goalsConcededFirstHalf),\n          formWins: String(awayStats.formWins),\n          formDraws: String(awayStats.formDraws),\n          formLosses: String(awayStats.formLosses),\n          formPoints: String(awayStats.formPoints),\n          avgCorners: String(awayStats.avgCorners),\n          avgCards: String(awayStats.avgCards),\n          sourceFixtureIds: JSON.stringify(awayStats.sourceFixtureIds)\n        })\n        .onConflictDoNothing()\n    ]);\n    \n    const predictions = this.generatePredictions(homeStats, awayStats, h2hAnalysis, bet365Odds);\n    \n    // Filtrar previs√µes com alta confian√ßa (>= 70%) e odd m√≠nima 1.30\n    const highConfPredictions = predictions.filter(p => p.confidence >= 70 && p.suggestedOdd >= 1.30);\n    \n    // PRIORIZAR COMBOS: Se tiver 2+ linhas de alta confian√ßa, criar bilhete combinado\n    if (highConfPredictions.length >= 2) {\n      // Ordenar por confian√ßa e pegar at√© 4 linhas\n      highConfPredictions.sort((a, b) => b.confidence - a.confidence);\n      const legsForCombo = highConfPredictions.slice(0, 4);\n      \n      // Calcular odd total e probabilidade combinada\n      const totalOdd = legsForCombo.reduce((acc, p) => acc * p.suggestedOdd, 1);\n      const avgConfidence = legsForCombo.reduce((acc, p) => acc + p.confidence, 0) / legsForCombo.length;\n      \n      // Calcular probabilidade combinada real (multiplicar probabilidades em decimal, depois converter para %)\n      // Exemplo: 90% * 88% * 85% = 0.90 * 0.88 * 0.85 = 0.6732 = 67.32%\n      const combinedProbability = legsForCombo.reduce((acc, p) => acc * (p.probability / 100), 1) * 100;\n      \n      // Criar legs com detalhes de cada linha\n      const legs = legsForCombo.map(p => ({\n        homeTeam: fixture.teams.home.name,\n        awayTeam: fixture.teams.away.name,\n        homeTeamLogo: fixture.teams.home.logo,\n        awayTeamLogo: fixture.teams.away.logo,\n        league: fixture.league.name,\n        fixtureId: String(fixture.fixture.id),\n        market: p.market,\n        outcome: p.predictedOutcome,\n        odd: p.suggestedOdd,\n        probability: p.probability,\n        confidence: p.confidence,\n        rationale: p.rationale,\n        time: new Date(fixture.fixture.timestamp * 1000).toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' })\n      }));\n      \n      const comboDescription = legs.map(l => `${l.market} (${l.probability.toFixed(0)}%)`).join(' + ');\n      \n      // Inserir bilhete combinado\n      await db.insert(aiTickets).values({\n        fixtureId: String(fixture.fixture.id),\n        league: fixture.league.name,\n        leagueId: String(fixture.league.id),\n        homeTeam: fixture.teams.home.name,\n        awayTeam: fixture.teams.away.name,\n        homeTeamId: String(homeTeamId),\n        awayTeamId: String(awayTeamId),\n        homeTeamLogo: fixture.teams.home.logo,\n        awayTeamLogo: fixture.teams.away.logo,\n        matchTime: new Date(fixture.fixture.timestamp * 1000),\n        market: `Combo ${legs.length} Linhas`,\n        predictedOutcome: comboDescription,\n        suggestedOdd: String(totalOdd.toFixed(2)),\n        suggestedStake: '2.0',\n        isCombo: true,\n        legs: JSON.stringify(legs),\n        totalOdd: String(totalOdd.toFixed(2)),\n        confidence: String(avgConfidence.toFixed(0)),\n        probability: String(combinedProbability.toFixed(1)),\n        expectedValue: String(((combinedProbability / 100) * totalOdd - 1) * 100),\n        analysisRationale: JSON.stringify(legsForCombo.flatMap(p => p.rationale)),\n        homeTeamStats: JSON.stringify(homeStats),\n        awayTeamStats: JSON.stringify(awayStats),\n        h2hAnalysis: h2hAnalysis ? JSON.stringify(h2hAnalysis) : null,\n        formScore: String(avgConfidence),\n        status: 'draft'\n      });\n      \n      console.log(`[AI Engine] Created COMBO ${legs.length} legs (odd ${totalOdd.toFixed(2)}, prob ${combinedProbability.toFixed(1)}%): ${fixture.teams.home.name} vs ${fixture.teams.away.name}`);\n      console.log(`[AI Engine] Legs: ${legs.map(l => `${l.market} @${l.odd} (${l.probability.toFixed(0)}%)`).join(' | ')}`);\n    }\n    \n    // Criar entradas simples APENAS quando N√ÉO h√° combo suficiente\n    // Prioridade: COMBO > SINGLE - queremos mais combos multi-linhas\n    const usedInCombo = new Set(highConfPredictions.slice(0, 4).map(p => `${p.market}_${p.predictedOutcome}`));\n    \n    for (const prediction of predictions) {\n      // S√≥ criar simples se:\n      // 1. N√£o tem combo para este jogo (< 2 previs√µes de alta confian√ßa)\n      // 2. OU √© uma previs√£o de confian√ßa MUITO alta (>= 88%) que vale sozinha\n      const isInCombo = usedInCombo.has(`${prediction.market}_${prediction.predictedOutcome}`);\n      const shouldCreateSingle = (\n        (highConfPredictions.length < 2 && prediction.confidence >= 70 && prediction.suggestedOdd >= 1.30) ||\n        (prediction.confidence >= 88 && prediction.suggestedOdd >= 1.40 && !isInCombo)\n      );\n      \n      if (shouldCreateSingle) {\n        await db.insert(aiTickets)\n          .values({\n            fixtureId: String(fixture.fixture.id),\n            league: fixture.league.name,\n            leagueId: String(fixture.league.id),\n            homeTeam: fixture.teams.home.name,\n            awayTeam: fixture.teams.away.name,\n            homeTeamId: String(homeTeamId),\n            awayTeamId: String(awayTeamId),\n            homeTeamLogo: fixture.teams.home.logo,\n            awayTeamLogo: fixture.teams.away.logo,\n            matchTime: new Date(fixture.fixture.timestamp * 1000),\n            market: prediction.market,\n            predictedOutcome: prediction.predictedOutcome,\n            suggestedOdd: String(prediction.suggestedOdd),\n            suggestedStake: String(prediction.suggestedStake),\n            confidence: String(prediction.confidence),\n            probability: String(prediction.probability),\n            expectedValue: String(((prediction.probability / 100) * prediction.suggestedOdd - 1) * 100),\n            analysisRationale: JSON.stringify(prediction.rationale),\n            homeTeamStats: JSON.stringify(homeStats),\n            awayTeamStats: JSON.stringify(awayStats),\n            h2hAnalysis: h2hAnalysis ? JSON.stringify(h2hAnalysis) : null,\n            formScore: String(((homeStats.formPoints + awayStats.formPoints) / 30) * 100),\n            goalTrendScore: String(((homeStats.goalsScored + awayStats.goalsScored) / 4) * 100),\n            h2hScore: h2hAnalysis ? String(50) : null,\n            status: 'draft'\n          });\n      }\n    }\n    \n    const combosCreated = highConfPredictions.length >= 2 ? 1 : 0;\n    console.log(`[AI Engine] Generated ${predictions.length} predictions (${combosCreated} combos) for ${fixture.teams.home.name} vs ${fixture.teams.away.name}`);\n    return predictions;\n  }\n\n  async analyzeUpcomingFixtures(date: string): Promise<{ analyzed: number; predictions: number }> {\n    console.log(`[AI Engine] Starting analysis for fixtures on ${date}`);\n    \n    try {\n      // Buscar apenas jogos do dia selecionado usando timezone de S√£o Paulo\n      const response = await axios.get(`${API_BASE_URL}/fixtures`, {\n        params: { \n          date,\n          timezone: 'America/Sao_Paulo' // Usar timezone brasileiro para filtrar corretamente\n        },\n        headers: this.apiHeaders\n      });\n      \n      const allFixtures: FixtureData[] = response.data?.response || [];\n      \n      // Filtrar apenas jogos que ainda n√£o come√ßaram (NS = Not Started, TBD = To Be Defined)\n      const now = Date.now();\n      const fixtures = allFixtures.filter(f => {\n        const fixtureTime = f.fixture.timestamp * 1000;\n        const status = f.fixture.status.short;\n        return fixtureTime > now || status === 'NS' || status === 'TBD';\n      });\n      \n      console.log(`[AI Engine] Found ${fixtures.length} upcoming fixtures for ${date} (from ${allFixtures.length} total)`);\n      \n      const majorLeagues = [39, 140, 78, 135, 61, 71, 72, 94, 88, 253, 2, 3, 848, 128, 13, 11, 144, 179, 40, 203, 307, 235, 262, 169, 119, 113, 103];\n      const filteredFixtures = fixtures.filter(f => majorLeagues.includes(f.league.id));\n      \n      console.log(`[AI Engine] Analyzing ${filteredFixtures.length} major league fixtures`);\n      \n      // META DI√ÅRIA: Analisar mais jogos para gerar 6-8 bilhetes/dia\n      const MAX_FIXTURES = 25; // Aumentado para gerar mais bilhetes\n      let totalPredictions = 0;\n      \n      for (const fixture of filteredFixtures.slice(0, MAX_FIXTURES)) {\n        try {\n          const predictions = await this.analyzeFixture(fixture);\n          totalPredictions += predictions.length;\n          \n          await new Promise(resolve => setTimeout(resolve, 1000));\n        } catch (error: any) {\n          console.error(`[AI Engine] Error analyzing fixture ${fixture.fixture.id}:`, error.message);\n        }\n      }\n      \n      return {\n        analyzed: filteredFixtures.length,\n        predictions: totalPredictions\n      };\n    } catch (error: any) {\n      console.error('[AI Engine] Error fetching fixtures:', error.message);\n      return { analyzed: 0, predictions: 0 };\n    }\n  }\n\n  async getDraftTickets(): Promise<any[]> {\n    return db.select()\n      .from(aiTickets)\n      .where(eq(aiTickets.status, 'draft'))\n      .orderBy(desc(aiTickets.confidence));\n  }\n\n  /**\n   * Gera bilhetes combinados (combos) com odd m√≠nima de 1.50\n   * Agrupa previs√µes de alta confian√ßa em combos de 2-3 sele√ß√µes\n   */\n  async generateComboPredictions(predictions: Array<{\n    fixtureId: string;\n    league: string;\n    homeTeam: string;\n    awayTeam: string;\n    homeTeamLogo: string;\n    awayTeamLogo: string;\n    matchTime: Date;\n    market: string;\n    predictedOutcome: string;\n    suggestedOdd: number;\n    confidence: number;\n    probability: number;\n    rationale: string[];\n    homeStats: any;\n    awayStats: any;\n  }>): Promise<number> {\n    const MIN_TOTAL_ODD = 1.45; // Reduzido para gerar mais combos\n    const MIN_INDIVIDUAL_ODD = 1.30; // Reduzido para 1.30\n    const MIN_CONFIDENCE = 70; // Reduzido para 70% - meta 6-8 bilhetes/dia\n    const MAX_LEGS = 4; // Aumentado para 4 linhas m√°x\n    \n    // Filtrar previs√µes v√°lidas (confian√ßa >= 70%, odd >= 1.30)\n    const validPredictions = predictions.filter(p => \n      p.confidence >= MIN_CONFIDENCE && \n      p.suggestedOdd >= MIN_INDIVIDUAL_ODD\n    );\n    \n    console.log(`[AI Combos] ${validPredictions.length} previs√µes v√°lidas de ${predictions.length} total`);\n    \n    if (validPredictions.length === 0) return 0;\n    \n    // Ordenar por confian√ßa (maior primeiro)\n    validPredictions.sort((a, b) => b.confidence - a.confidence);\n    \n    let combosCreated = 0;\n    const usedPredictions = new Set<string>();\n    \n    // Estrat√©gia 1: Combos do mesmo jogo (diferentes mercados)\n    const byFixture = new Map<string, typeof validPredictions>();\n    for (const pred of validPredictions) {\n      const key = pred.fixtureId;\n      if (!byFixture.has(key)) byFixture.set(key, []);\n      byFixture.get(key)!.push(pred);\n    }\n    \n    for (const [fixtureId, fixturePreds] of Array.from(byFixture.entries())) {\n      if (fixturePreds.length >= 2) {\n        // Pegar 2-3 mercados do mesmo jogo\n        const legsForCombo = fixturePreds.slice(0, MAX_LEGS);\n        const totalOdd = legsForCombo.reduce((acc: number, p: any) => acc * p.suggestedOdd, 1);\n        \n        if (totalOdd >= MIN_TOTAL_ODD) {\n          // Criar legs com market e outcome separados corretamente\n          const legs = legsForCombo.map((p: any) => ({\n            homeTeam: p.homeTeam,\n            awayTeam: p.awayTeam,\n            homeTeamLogo: p.homeTeamLogo,\n            awayTeamLogo: p.awayTeamLogo,\n            league: p.league,\n            fixtureId: p.fixtureId,\n            market: p.market, // Nome do mercado (Over 1.5, BTTS, etc)\n            outcome: p.predictedOutcome, // Resultado predito (Sim, N√£o, etc)\n            odd: p.suggestedOdd,\n            time: new Date(p.matchTime).toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' })\n          }));\n          \n          // Validar combo usando fun√ß√£o centralizada\n          const validation = validateComboLegs(legs);\n          if (!validation.valid) {\n            console.warn(`[AI Combos] Combo inv√°lido: ${validation.error}`);\n            continue;\n          }\n          \n          // Calcular confian√ßa m√©dia\n          const avgConfidence = legsForCombo.reduce((acc: number, p: any) => acc + p.confidence, 0) / legsForCombo.length;\n          const avgProbability = legsForCombo.reduce((acc: number, p: any) => acc + p.probability, 0) / legsForCombo.length;\n          \n          // Formatar descri√ß√£o do combo\n          const comboDescription = legs.map((l: any) => `${l.market}`).join(' + ');\n          \n          // Criar combo - IMPORTANTE: suggestedOdd = totalOdd para combos\n          await db.insert(aiTickets).values({\n            fixtureId: legsForCombo[0].fixtureId,\n            league: 'M√∫ltipla',\n            homeTeam: legsForCombo[0].homeTeam,\n            awayTeam: legsForCombo[0].awayTeam,\n            homeTeamId: legsForCombo[0].fixtureId.split('_')[0] || '0',\n            awayTeamId: legsForCombo[0].fixtureId.split('_')[1] || '0',\n            homeTeamLogo: legsForCombo[0].homeTeamLogo,\n            awayTeamLogo: legsForCombo[0].awayTeamLogo,\n            matchTime: new Date(legsForCombo[0].matchTime),\n            market: `Combo ${legs.length} Sele√ß√µes`,\n            predictedOutcome: comboDescription,\n            suggestedOdd: String(totalOdd.toFixed(2)), // TOTAL ODD, n√£o individual\n            suggestedStake: '1.0',\n            isCombo: true,\n            legs: JSON.stringify(legs),\n            totalOdd: String(totalOdd.toFixed(2)),\n            confidence: String(avgConfidence.toFixed(0)),\n            probability: String(avgProbability.toFixed(0)),\n            expectedValue: String(((avgProbability / 100) * totalOdd - 1) * 100),\n            analysisRationale: JSON.stringify(legsForCombo.flatMap((p: any) => p.rationale)),\n            homeTeamStats: JSON.stringify(legsForCombo[0].homeStats),\n            awayTeamStats: JSON.stringify(legsForCombo[0].awayStats),\n            formScore: String(avgConfidence),\n            status: 'draft'\n          });\n          \n          legsForCombo.forEach((p: any) => usedPredictions.add(`${p.fixtureId}_${p.market}`));\n          combosCreated++;\n          console.log(`[AI Combos] Criado combo ${legs.length} legs (odd ${totalOdd.toFixed(2)}): ${legsForCombo[0].homeTeam} vs ${legsForCombo[0].awayTeam}`);\n        }\n      }\n    }\n    \n    // Estrat√©gia 2: Combos de jogos diferentes (mesma liga ou tier similar)\n    const remainingPreds = validPredictions.filter(p => \n      !usedPredictions.has(`${p.fixtureId}_${p.market}`)\n    );\n    \n    // Agrupar por data/hor√°rio similar (¬±2 horas)\n    for (let i = 0; i < remainingPreds.length; i++) {\n      const pred1 = remainingPreds[i];\n      if (usedPredictions.has(`${pred1.fixtureId}_${pred1.market}`)) continue;\n      \n      const candidates: typeof remainingPreds = [pred1];\n      \n      for (let j = i + 1; j < remainingPreds.length && candidates.length < MAX_LEGS; j++) {\n        const pred2 = remainingPreds[j];\n        if (usedPredictions.has(`${pred2.fixtureId}_${pred2.market}`)) continue;\n        if (pred2.fixtureId === pred1.fixtureId) continue; // Diferentes jogos\n        \n        // Verificar hor√°rio similar (¬±3 horas)\n        const timeDiff = Math.abs(new Date(pred2.matchTime).getTime() - new Date(pred1.matchTime).getTime());\n        if (timeDiff <= 3 * 60 * 60 * 1000) {\n          candidates.push(pred2);\n        }\n      }\n      \n      if (candidates.length >= 2) {\n        const totalOdd = candidates.reduce((acc: number, p: any) => acc * p.suggestedOdd, 1);\n        \n        if (totalOdd >= MIN_TOTAL_ODD) {\n          // Criar legs com market e outcome separados corretamente\n          const legs = candidates.map((p: any) => ({\n            homeTeam: p.homeTeam,\n            awayTeam: p.awayTeam,\n            homeTeamLogo: p.homeTeamLogo,\n            awayTeamLogo: p.awayTeamLogo,\n            league: p.league,\n            fixtureId: p.fixtureId,\n            market: p.market, // Nome do mercado\n            outcome: p.predictedOutcome, // Resultado predito\n            odd: p.suggestedOdd,\n            time: new Date(p.matchTime).toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' })\n          }));\n          \n          // Validar combo usando fun√ß√£o centralizada\n          const validation = validateComboLegs(legs);\n          if (!validation.valid) {\n            console.warn(`[AI Combos] Combo multi-jogo inv√°lido: ${validation.error}`);\n            continue;\n          }\n          \n          const avgConfidence = candidates.reduce((acc: number, p: any) => acc + p.confidence, 0) / candidates.length;\n          const avgProbability = candidates.reduce((acc: number, p: any) => acc + p.probability, 0) / candidates.length;\n          \n          // Formatar descri√ß√£o do combo\n          const comboDescription = legs.map((l: any) => `${l.homeTeam.substring(0,3).toUpperCase()} ${l.market}`).join(' + ');\n          \n          await db.insert(aiTickets).values({\n            fixtureId: candidates[0].fixtureId,\n            league: 'M√∫ltipla',\n            homeTeam: candidates[0].homeTeam,\n            awayTeam: candidates[0].awayTeam,\n            homeTeamId: candidates[0].fixtureId.split('_')[0] || '0',\n            awayTeamId: candidates[0].fixtureId.split('_')[1] || '0',\n            homeTeamLogo: candidates[0].homeTeamLogo,\n            awayTeamLogo: candidates[0].awayTeamLogo,\n            matchTime: new Date(candidates[0].matchTime),\n            market: `M√∫ltipla ${legs.length} Jogos`,\n            predictedOutcome: comboDescription,\n            suggestedOdd: String(totalOdd.toFixed(2)), // TOTAL ODD, n√£o individual\n            suggestedStake: '1.0',\n            isCombo: true,\n            legs: JSON.stringify(legs),\n            totalOdd: String(totalOdd.toFixed(2)),\n            confidence: String(avgConfidence.toFixed(0)),\n            probability: String(avgProbability.toFixed(0)),\n            expectedValue: String(((avgProbability / 100) * totalOdd - 1) * 100),\n            analysisRationale: JSON.stringify(candidates.flatMap((p: any) => p.rationale)),\n            homeTeamStats: JSON.stringify(candidates[0].homeStats),\n            awayTeamStats: JSON.stringify(candidates[0].awayStats),\n            formScore: String(avgConfidence),\n            status: 'draft'\n          });\n          \n          candidates.forEach((p: any) => usedPredictions.add(`${p.fixtureId}_${p.market}`));\n          combosCreated++;\n          console.log(`[AI Combos] Criado m√∫ltipla ${legs.length} jogos (odd ${totalOdd.toFixed(2)})`);\n        }\n      }\n    }\n    \n    console.log(`[AI Combos] Total de ${combosCreated} combos criados`);\n    return combosCreated;\n  }\n\n  async approveTicket(ticketId: string, reviewerId: string, notes?: string): Promise<void> {\n    await db.update(aiTickets)\n      .set({\n        status: 'approved',\n        reviewedBy: reviewerId,\n        reviewedAt: new Date(),\n        reviewNotes: notes,\n        updatedAt: new Date()\n      })\n      .where(eq(aiTickets.id, ticketId));\n  }\n\n  async rejectTicket(ticketId: string, reviewerId: string, notes?: string): Promise<void> {\n    await db.update(aiTickets)\n      .set({\n        status: 'rejected',\n        reviewedBy: reviewerId,\n        reviewedAt: new Date(),\n        reviewNotes: notes,\n        updatedAt: new Date()\n      })\n      .where(eq(aiTickets.id, ticketId));\n  }\n\n  // ==========================================\n  // SELETOR TOP 6-8 JOGOS DO DIA\n  // ==========================================\n  \n  // Ligas priorit√°rias com maior liquidez e dados confi√°veis\n  private readonly TOP_LEAGUES = [\n    { id: 39, name: 'Premier League', tier: 1 },\n    { id: 140, name: 'La Liga', tier: 1 },\n    { id: 135, name: 'Serie A', tier: 1 },\n    { id: 78, name: 'Bundesliga', tier: 1 },\n    { id: 61, name: 'Ligue 1', tier: 1 },\n    { id: 2, name: 'Champions League', tier: 1 },\n    { id: 3, name: 'Europa League', tier: 1 },\n    { id: 848, name: 'Conference League', tier: 1 },\n    { id: 71, name: 'Brasileir√£o S√©rie A', tier: 2 },\n    { id: 72, name: 'Brasileir√£o S√©rie B', tier: 2 },\n    { id: 94, name: 'Primeira Liga', tier: 2 },\n    { id: 88, name: 'Eredivisie', tier: 2 },\n    { id: 128, name: 'Argentina Primera', tier: 2 },\n    { id: 13, name: 'Libertadores', tier: 2 },\n    { id: 11, name: 'Copa Sudamericana', tier: 2 },\n    { id: 144, name: 'Belgium Pro League', tier: 2 },\n    { id: 179, name: 'Scottish Premiership', tier: 2 },\n    { id: 40, name: 'Championship', tier: 3 },\n    { id: 203, name: 'S√ºper Lig', tier: 3 },\n    { id: 307, name: 'Saudi Pro League', tier: 3 },\n    { id: 235, name: 'Russia Premier', tier: 3 },\n    { id: 253, name: 'MLS', tier: 3 },\n    { id: 262, name: 'Mexico Liga MX', tier: 3 },\n    { id: 169, name: 'Chinese Super League', tier: 3 },\n    { id: 119, name: 'Denmark Superliga', tier: 3 },\n    { id: 113, name: 'Sweden Allsvenskan', tier: 3 },\n    { id: 103, name: 'Norway Eliteserien', tier: 3 },\n  ];\n\n  // Ligas a excluir (baixa qualidade de dados ou liquidez)\n  private readonly EXCLUDED_PATTERNS = [\n    'U19', 'U20', 'U21', 'U23', 'Youth', 'Junior', 'Reserve',\n    'Friendly', 'Amistoso', 'Women', 'Feminino'\n  ];\n\n  private isLeagueExcluded(leagueName: string): boolean {\n    const upper = leagueName.toUpperCase();\n    return this.EXCLUDED_PATTERNS.some(p => upper.includes(p.toUpperCase()));\n  }\n\n  private getLeagueTier(leagueId: number): number {\n    const league = this.TOP_LEAGUES.find(l => l.id === leagueId);\n    return league?.tier || 4;\n  }\n\n  /**\n   * Calcula a import√¢ncia de um jogo baseado em contexto\n   * Fatores: fase da competi√ß√£o, dist√¢ncia na tabela, sequ√™ncia de resultados\n   */\n  private async calculateMatchImportance(\n    fixture: FixtureData,\n    homeStats: TeamStats,\n    awayStats: TeamStats\n  ): Promise<{ score: number; factors: string[] }> {\n    let score = 50; // Base\n    const factors: string[] = [];\n\n    // 1. Liga tier (maior tier = mais importante)\n    const tier = this.getLeagueTier(fixture.league.id);\n    const tierBonus = (5 - tier) * 10; // Tier 1 = +40, Tier 2 = +30, etc.\n    score += tierBonus;\n    if (tier === 1) factors.push('Liga de elite (Tier 1)');\n\n    // 2. Forma recente dos times (times em boa forma = jogo mais interessante)\n    const homeForm = (homeStats.formPoints / 15) * 100; // Max 15 pontos em 5 jogos\n    const awayForm = (awayStats.formPoints / 15) * 100;\n    const avgForm = (homeForm + awayForm) / 2;\n    \n    if (avgForm >= 60) {\n      score += 15;\n      factors.push('Ambos times em boa forma');\n    } else if (avgForm >= 40) {\n      score += 5;\n    }\n\n    // 3. Potencial ofensivo (times que marcam = jogos melhores para apostas)\n    const homeGoalsPer90 = homeStats.goalsScored / Math.max(1, homeStats.matchesAnalyzed);\n    const awayGoalsPer90 = awayStats.goalsScored / Math.max(1, awayStats.matchesAnalyzed);\n    \n    if (homeGoalsPer90 >= 1.5 && awayGoalsPer90 >= 1.5) {\n      score += 20;\n      factors.push('Ambos times muito ofensivos');\n    } else if (homeGoalsPer90 >= 1.2 || awayGoalsPer90 >= 1.2) {\n      score += 10;\n      factors.push('Pelo menos um time ofensivo');\n    }\n\n    // 4. Taxa de BTTS alta (indica jogos abertos)\n    const avgBTTS = (homeStats.bttsPct + awayStats.bttsPct) / 2;\n    if (avgBTTS >= 55) {\n      score += 15;\n      factors.push(`Alta taxa BTTS (${avgBTTS.toFixed(0)}%)`);\n    }\n\n    // 5. Hist√≥rico de Over 2.5\n    const avgOver25 = (homeStats.over25Pct + awayStats.over25Pct) / 2;\n    if (avgOver25 >= 55) {\n      score += 10;\n      factors.push(`Tend√™ncia Over 2.5 (${avgOver25.toFixed(0)}%)`);\n    }\n\n    // 6. Penaliza√ß√£o por times defensivos demais\n    const homeCleanSheet = homeStats.cleanSheetPct;\n    const awayCleanSheet = awayStats.cleanSheetPct;\n    if (homeCleanSheet >= 50 && awayCleanSheet >= 50) {\n      score -= 15;\n      factors.push('Ambos times muito defensivos (risco)');\n    }\n\n    return {\n      score: Math.min(100, Math.max(0, score)),\n      factors\n    };\n  }\n\n  /**\n   * Score composto para ranquear jogos\n   * 40% forma/motiva√ß√£o + 30% estat√≠stica + 20% mercado + 10% risco\n   */\n  private calculateCompositeScore(\n    homeStats: TeamStats,\n    awayStats: TeamStats,\n    importanceScore: number,\n    leagueTier: number\n  ): { score: number; breakdown: Record<string, number> } {\n    // 1. FORMA/MOTIVA√á√ÉO (40%)\n    const homeForm = (homeStats.formPoints / 15) * 100;\n    const awayForm = (awayStats.formPoints / 15) * 100;\n    const formScore = ((homeForm + awayForm) / 2 + importanceScore) / 2;\n\n    // 2. ESTAT√çSTICA (30%) - Previsibilidade dos padr√µes\n    const homeOver25 = homeStats.over25Pct;\n    const awayOver25 = awayStats.over25Pct;\n    const homeBTTS = homeStats.bttsPct;\n    const awayBTTS = awayStats.bttsPct;\n    \n    // Quanto mais extremo (alto ou baixo), mais previs√≠vel\n    const goalsPredict = Math.abs(50 - (homeOver25 + awayOver25) / 2) * 2;\n    const bttsPredict = Math.abs(50 - (homeBTTS + awayBTTS) / 2) * 2;\n    const statsScore = (goalsPredict + bttsPredict) / 2;\n\n    // 3. MERCADO (20%) - Liga tier afeta liquidez\n    const marketScore = (5 - leagueTier) * 25; // Tier 1 = 100, Tier 4 = 25\n\n    // 4. RISCO (10%) - Menor vari√¢ncia √© melhor\n    const homeVariance = Math.abs(homeStats.goalsScored - homeStats.goalsConceded) / Math.max(1, homeStats.matchesAnalyzed);\n    const awayVariance = Math.abs(awayStats.goalsScored - awayStats.goalsConceded) / Math.max(1, awayStats.matchesAnalyzed);\n    const riskScore = 100 - (homeVariance + awayVariance) * 20;\n\n    // Compor score final\n    const compositeScore = \n      (formScore * 0.40) +\n      (statsScore * 0.30) +\n      (marketScore * 0.20) +\n      (Math.max(0, riskScore) * 0.10);\n\n    return {\n      score: Math.min(100, Math.max(0, compositeScore)),\n      breakdown: {\n        form: formScore,\n        stats: statsScore,\n        market: marketScore,\n        risk: riskScore\n      }\n    };\n  }\n\n  /**\n   * Seleciona os TOP 6-8 melhores jogos do dia\n   * Baseado em score composto >= 0.78 (78%)\n   */\n  async selectTopMatchesOfDay(date: string, maxMatches: number = 8): Promise<{\n    matches: Array<{\n      fixture: FixtureData;\n      compositeScore: number;\n      importanceScore: number;\n      breakdown: Record<string, number>;\n      factors: string[];\n      tier: string;\n    }>;\n    totalAnalyzed: number;\n  }> {\n    console.log(`[AI Selector] Selecionando top ${maxMatches} jogos para ${date}...`);\n\n    try {\n      const response = await axios.get(`${API_BASE_URL}/fixtures`, {\n        params: { date, status: 'NS' },\n        headers: this.apiHeaders\n      });\n\n      const allFixtures: FixtureData[] = response.data?.response || [];\n      console.log(`[AI Selector] ${allFixtures.length} jogos encontrados`);\n\n      // Filtrar ligas ruins\n      const cleanFixtures = allFixtures.filter(f => \n        !this.isLeagueExcluded(f.league.name)\n      );\n      console.log(`[AI Selector] ${cleanFixtures.length} ap√≥s filtro de qualidade`);\n\n      // Priorizar ligas top\n      const topLeagueIds = this.TOP_LEAGUES.map(l => l.id);\n      const prioritizedFixtures = cleanFixtures.filter(f => \n        topLeagueIds.includes(f.league.id)\n      );\n      console.log(`[AI Selector] ${prioritizedFixtures.length} de ligas priorit√°rias`);\n\n      // Analisar cada jogo\n      const scoredMatches: Array<{\n        fixture: FixtureData;\n        compositeScore: number;\n        importanceScore: number;\n        breakdown: Record<string, number>;\n        factors: string[];\n        tier: string;\n      }> = [];\n\n      for (const fixture of prioritizedFixtures.slice(0, 50)) { // Limitar an√°lise\n        try {\n          const [homeMatches, awayMatches] = await Promise.all([\n            this.fetchTeamLastMatches(fixture.teams.home.id, fixture.league.season),\n            this.fetchTeamLastMatches(fixture.teams.away.id, fixture.league.season)\n          ]);\n\n          if (homeMatches.length < 5 || awayMatches.length < 5) {\n            continue; // Pular jogos sem dados suficientes\n          }\n\n          const allFixtureIds = Array.from(new Set([\n            ...homeMatches.map(m => m.fixture.id),\n            ...awayMatches.map(m => m.fixture.id)\n          ]));\n          \n          const statsMap = await this.fetchMultipleFixtureStatistics(allFixtureIds);\n          \n          const homeStats = this.calculateTeamStats(homeMatches, fixture.teams.home.id, statsMap);\n          const awayStats = this.calculateTeamStats(awayMatches, fixture.teams.away.id, statsMap);\n\n          const importance = await this.calculateMatchImportance(fixture, homeStats, awayStats);\n          const leagueTier = this.getLeagueTier(fixture.league.id);\n          const composite = this.calculateCompositeScore(homeStats, awayStats, importance.score, leagueTier);\n\n          // Determinar tier de confian√ßa\n          let tier = 'LOW';\n          if (composite.score >= 85) tier = 'PRIME';\n          else if (composite.score >= 80) tier = 'CORE';\n          else if (composite.score >= 75) tier = 'WATCH';\n\n          scoredMatches.push({\n            fixture,\n            compositeScore: composite.score,\n            importanceScore: importance.score,\n            breakdown: composite.breakdown,\n            factors: importance.factors,\n            tier\n          });\n\n          await new Promise(r => setTimeout(r, 500)); // Rate limiting\n        } catch (err: any) {\n          console.error(`[AI Selector] Erro analisando ${fixture.teams.home.name}:`, err.message);\n        }\n      }\n\n      // Ordenar por score composto e pegar os top N\n      const topMatches = scoredMatches\n        .sort((a, b) => b.compositeScore - a.compositeScore)\n        .filter(m => m.compositeScore >= 75) // M√≠nimo 75% de score\n        .slice(0, maxMatches);\n\n      console.log(`[AI Selector] ${topMatches.length} jogos selecionados com score >= 75%`);\n\n      return {\n        matches: topMatches,\n        totalAnalyzed: scoredMatches.length\n      };\n    } catch (error: any) {\n      console.error('[AI Selector] Erro:', error.message);\n      return { matches: [], totalAnalyzed: 0 };\n    }\n  }\n\n  // =====================================================\n  // AN√ÅLISE COMPLETA COM EV\n  // =====================================================\n  \n  /**\n   * Gera an√°lise completa para um jogo, incluindo:\n   * - Probabilidades de gols\n   * - An√°lise de escanteios  \n   * - Confrontos diretos (H2H)\n   * - Insights t√°ticos\n   * - Recomenda√ß√µes de mercado com EV calculado\n   */\n  async generateFullAnalysis(fixtureId: number): Promise<{\n    goalsAnalysis: any;\n    cornersAnalysis: any;\n    h2hAnalysis: any;\n    climateAnalysis: any;\n    tacticalInsights: any[];\n    finalRecommendation: string;\n    marketRecommendations: any[];\n  } | null> {\n    try {\n      console.log(`[AI Analysis] Gerando an√°lise completa para fixture ${fixtureId}`);\n      \n      // 1. Buscar dados do jogo\n      const cacheKey = `fixture_${fixtureId}`;\n      let fixtureData = await this.getCachedData(cacheKey);\n      \n      if (!fixtureData) {\n        const response = await axios.get(`${API_BASE_URL}/fixtures`, {\n          headers: this.apiHeaders,\n          params: { id: fixtureId }\n        });\n        \n        if (!response.data?.response?.[0]) {\n          console.error('[AI Analysis] Fixture n√£o encontrado');\n          return null;\n        }\n        \n        fixtureData = response.data.response[0];\n        await this.setCachedData(cacheKey, 'fixture', fixtureData, 1);\n      }\n      \n      const homeTeamId = fixtureData.teams.home.id;\n      const awayTeamId = fixtureData.teams.away.id;\n      const season = fixtureData.league.season;\n      \n      // 2. Buscar √∫ltimos jogos de ambos os times\n      const [homeMatches, awayMatches, h2hMatches, bet365Odds] = await Promise.all([\n        this.fetchTeamLastMatches(homeTeamId, season),\n        this.fetchTeamLastMatches(awayTeamId, season),\n        this.fetchH2H(homeTeamId, awayTeamId),\n        this.fetchBet365Odds(fixtureId)\n      ]);\n      \n      if (homeMatches.length < 5 || awayMatches.length < 5) {\n        console.log('[AI Analysis] Dados insuficientes para an√°lise completa');\n        return null;\n      }\n      \n      // 3. Calcular estat√≠sticas de cada time\n      const allFixtureIds = Array.from(new Set([\n        ...homeMatches.map(m => m.fixture.id),\n        ...awayMatches.map(m => m.fixture.id),\n        ...h2hMatches.map(m => m.fixture.id)\n      ]));\n      \n      const statsMap = await this.fetchMultipleFixtureStatistics(allFixtureIds);\n      const homeStats = this.calculateTeamStats(homeMatches, homeTeamId, statsMap);\n      const awayStats = this.calculateTeamStats(awayMatches, awayTeamId, statsMap);\n      \n      // Processar H2H matches em an√°lise estruturada\n      let h2hData: { totalGames: number; homeWins: number; awayWins: number; draws: number; avgGoals: number; avgCorners: number } | null = null;\n      if (h2hMatches.length >= 1) {\n        let homeWins = 0, draws = 0, awayWins = 0, totalGoals = 0, totalCorners = 0;\n        \n        for (const match of h2hMatches) {\n          const hGoals = match.goals.home ?? 0;\n          const aGoals = match.goals.away ?? 0;\n          totalGoals += hGoals + aGoals;\n          \n          const matchStats = statsMap.get(match.fixture.id);\n          if (matchStats) {\n            totalCorners += matchStats.homeStats.corners + matchStats.awayStats.corners;\n          }\n          \n          if (match.teams.home.id === homeTeamId) {\n            if (hGoals > aGoals) homeWins++;\n            else if (hGoals === aGoals) draws++;\n            else awayWins++;\n          } else {\n            if (aGoals > hGoals) homeWins++;\n            else if (hGoals === aGoals) draws++;\n            else awayWins++;\n          }\n        }\n        \n        h2hData = {\n          totalGames: h2hMatches.length,\n          homeWins,\n          draws,\n          awayWins,\n          avgGoals: totalGoals / h2hMatches.length,\n          avgCorners: totalCorners / h2hMatches.length\n        };\n      }\n      \n      // 4. Gerar an√°lise de GOLS\n      const homeExpectedGoals = (homeStats.goalsScoredHome + awayStats.goalsConcededAway) / 2;\n      const awayExpectedGoals = (awayStats.goalsScoredAway + homeStats.goalsConcededHome) / 2;\n      const totalExpectedGoals = homeExpectedGoals + awayExpectedGoals;\n      \n      const poissonProbs = this.calculateGoalProbabilities(homeExpectedGoals, awayExpectedGoals);\n      \n      const goalsAnalysis = {\n        over15Pct: Math.round(poissonProbs.over15),\n        over25Pct: Math.round(poissonProbs.over25),\n        over35Pct: Math.round(poissonProbs.over35),\n        avgGoalsHome: Number(homeStats.goalsScoredHome.toFixed(2)),\n        avgGoalsAway: Number(awayStats.goalsScoredAway.toFixed(2)),\n        avgGoalsTotal: Number(totalExpectedGoals.toFixed(2)),\n        reasoning: `As probabilidades indicam que jogos com ${totalExpectedGoals < 2.5 ? 'poucos' : 'muitos'} gols s√£o esperados. ` +\n          `A chance de mais de 2.5 gols √© de apenas ${poissonProbs.over25.toFixed(0)}%, ` +\n          `enquanto mais de 1.5 gols √© de ${poissonProbs.over15.toFixed(0)}%.`\n      };\n      \n      // 5. Gerar an√°lise de ESCANTEIOS\n      const avgCornersTotal = homeStats.avgCorners + awayStats.avgCorners;\n      const over85CornersChance = Math.min(95, ((homeStats.cornersOver45Pct + awayStats.cornersOver45Pct) / 2) + 20);\n      const over95CornersChance = Math.min(90, ((homeStats.cornersOver55Pct + awayStats.cornersOver55Pct) / 2) + 10);\n      const over105CornersChance = Math.min(85, (homeStats.cornersOver65Pct + awayStats.cornersOver65Pct) / 2);\n      \n      const cornersAnalysis = {\n        over85Pct: Math.round(over85CornersChance),\n        over95Pct: Math.round(over95CornersChance),\n        over105Pct: Math.round(over105CornersChance),\n        avgCornersHome: Number(homeStats.avgCorners.toFixed(1)),\n        avgCornersAway: Number(awayStats.avgCorners.toFixed(1)),\n        avgCornersTotal: Number(avgCornersTotal.toFixed(1)),\n        reasoning: `A probabilidade de mais de 8.5 escanteios √© de ${over85CornersChance.toFixed(0)}%, ` +\n          `sugerindo um jogo com ${avgCornersTotal > 10 ? 'quantidade razo√°vel' : 'poucos'} escanteios.`\n      };\n      \n      // 6. Gerar an√°lise de H2H\n      let h2hAnalysis = {\n        totalMatches: 0,\n        homeWins: 0,\n        awayWins: 0,\n        draws: 0,\n        avgGoals: 0,\n        avgCorners: 0,\n        trends: [] as string[],\n        reasoning: 'N√£o h√° hist√≥rico de confrontos diretos suficiente para an√°lise.'\n      };\n      \n      if (h2hData && h2hData.totalGames > 0) {\n        h2hAnalysis = {\n          totalMatches: h2hData.totalGames,\n          homeWins: h2hData.homeWins,\n          awayWins: h2hData.awayWins,\n          draws: h2hData.draws,\n          avgGoals: h2hData.avgGoals,\n          avgCorners: h2hData.avgCorners,\n          trends: this.generateH2HTrends(h2hData),\n          reasoning: this.generateH2HReasoning(h2hData, fixtureData.teams.home.name, fixtureData.teams.away.name)\n        };\n      }\n      \n      // 7. Clima (placeholder - API n√£o fornece)\n      const climateAnalysis = {\n        impact: 'none' as const,\n        reasoning: 'N√£o foram fornecidas informa√ß√µes sobre as condi√ß√µes clim√°ticas para o dia do jogo. Portanto, n√£o √© poss√≠vel avaliar o impacto clim√°tico.'\n      };\n      \n      // 8. Gerar INSIGHTS T√ÅTICOS\n      const tacticalInsights = this.generateTacticalInsights(homeStats, awayStats, h2hData, totalExpectedGoals);\n      \n      // 9. Gerar RECOMENDA√á√ïES DE MERCADO com EV\n      const marketRecommendations = this.generateMarketRecommendationsWithEV(\n        homeStats, \n        awayStats, \n        poissonProbs, \n        bet365Odds,\n        fixtureData.teams.home.name,\n        fixtureData.teams.away.name\n      );\n      \n      // 10. Gerar RECOMENDA√á√ÉO FINAL\n      const finalRecommendation = this.generateFinalRecommendation(\n        goalsAnalysis,\n        cornersAnalysis,\n        marketRecommendations\n      );\n      \n      return {\n        goalsAnalysis,\n        cornersAnalysis,\n        h2hAnalysis,\n        climateAnalysis,\n        tacticalInsights,\n        finalRecommendation,\n        marketRecommendations\n      };\n      \n    } catch (error: any) {\n      console.error('[AI Analysis] Erro:', error.message);\n      return null;\n    }\n  }\n  \n  private generateH2HTrends(h2h: any): string[] {\n    const trends: string[] = [];\n    \n    if (h2h.avgGoals > 2.5) {\n      trends.push('Hist√≥rico de jogos com muitos gols');\n    } else if (h2h.avgGoals < 2) {\n      trends.push('Hist√≥rico de jogos com poucos gols');\n    }\n    \n    if (h2h.draws / h2h.totalGames > 0.35) {\n      trends.push('Alta tend√™ncia a empates nos confrontos diretos');\n    }\n    \n    if (h2h.avgCorners > 10) {\n      trends.push('M√©dia alta de escanteios no H2H');\n    }\n    \n    return trends;\n  }\n  \n  private generateH2HReasoning(h2h: any, homeTeam: string, awayTeam: string): string {\n    if (h2h.totalGames === 0) {\n      return 'N√£o h√° hist√≥rico de confrontos diretos entre as equipes.';\n    }\n    \n    const winRate = h2h.homeWins / h2h.totalGames * 100;\n    const drawRate = h2h.draws / h2h.totalGames * 100;\n    \n    let reasoning = `Nos √∫ltimos ${h2h.totalGames} confrontos: `;\n    reasoning += `${homeTeam} venceu ${h2h.homeWins}x, ${awayTeam} venceu ${h2h.awayWins}x, `;\n    reasoning += `${h2h.draws} empates. M√©dia de ${h2h.avgGoals.toFixed(1)} gols por jogo.`;\n    \n    if (drawRate > 35) {\n      reasoning += ` Alta tend√™ncia a empates (${drawRate.toFixed(0)}%).`;\n    }\n    \n    return reasoning;\n  }\n  \n  private generateTacticalInsights(\n    homeStats: TeamStats, \n    awayStats: TeamStats, \n    h2h: any,\n    expectedGoals: number\n  ): any[] {\n    const insights: any[] = [];\n    \n    // Equil√≠brio e Cautela\n    const homeDrawPct = homeStats.formDraws / 5 * 100;\n    const awayDrawPct = awayStats.formDraws / 5 * 100;\n    \n    if (homeDrawPct > 30 || awayDrawPct > 30 || expectedGoals < 2.3) {\n      insights.push({\n        title: 'Equil√≠brio e Cautela',\n        description: 'Ambos os times apresentam um padr√£o de muitos empates e poucos gols em seus √∫ltimos jogos. ' +\n          'Isso sugere uma abordagem t√°tica cautelosa, focada na defesa e na minimiza√ß√£o de riscos.',\n        highlighted: true,\n        sentiment: 'neutral'\n      });\n    }\n    \n    // Dificuldade Ofensiva\n    if (homeStats.goalsScoredHome < 1.2 && awayStats.goalsScoredAway < 1.0) {\n      insights.push({\n        title: 'Dificuldade Ofensiva',\n        description: 'A falta de gols marcados em muitos dos jogos recentes para ambos os times indica ' +\n          'uma poss√≠vel dificuldade na cria√ß√£o de chances claras de gol ou na convers√£o das mesmas.',\n        highlighted: false,\n        sentiment: 'negative'\n      });\n    }\n    \n    // Paridade\n    if (Math.abs(homeStats.formPoints - awayStats.formPoints) <= 3) {\n      insights.push({\n        title: 'Paridade',\n        description: `Ambos os times t√™m formas recentes similares (${homeStats.formWins}V/${homeStats.formDraws}E/${homeStats.formLosses}D vs ` +\n          `${awayStats.formWins}V/${awayStats.formDraws}E/${awayStats.formLosses}D). ` +\n          'Isso contribui para a alta probabilidade de empate e jogos equilibrados.',\n        highlighted: false,\n        sentiment: 'neutral'\n      });\n    }\n    \n    // Estrat√©gia de Meio-Campo\n    if (expectedGoals < 2.5 && homeStats.avgShotsOnTarget < 4 && awayStats.avgShotsOnTarget < 4) {\n      insights.push({\n        title: 'Estrat√©gia de Meio-Campo',\n        description: 'Com a expectativa de poucos gols, o controle de meio-campo e a solidez defensiva ser√£o cruciais. ' +\n          '√â prov√°vel que o jogo seja disputado, com poucas oportunidades de contra-ataque.',\n        highlighted: false,\n        sentiment: 'neutral'\n      });\n    }\n    \n    // Potencial Ofensivo\n    if (expectedGoals > 2.8) {\n      insights.push({\n        title: 'Alto Potencial Ofensivo',\n        description: `Com m√©dia esperada de ${expectedGoals.toFixed(2)} gols, este confronto tem grande potencial para um jogo aberto. ` +\n          `${homeStats.teamName} marca ${homeStats.goalsScoredHome.toFixed(2)} em casa e ` +\n          `${awayStats.teamName} sofre ${awayStats.goalsConcededAway.toFixed(2)} fora.`,\n        highlighted: true,\n        sentiment: 'positive'\n      });\n    }\n    \n    return insights;\n  }\n  \n  private generateMarketRecommendationsWithEV(\n    homeStats: TeamStats,\n    awayStats: TeamStats,\n    poissonProbs: any,\n    bet365Odds: Record<string, Record<string, number>> | null,\n    homeTeam: string,\n    awayTeam: string\n  ): any[] {\n    const recommendations: any[] = [];\n    \n    const calculateEV = (probability: number, odd: number): number => {\n      return ((probability / 100) * odd - 1) * 100;\n    };\n    \n    const getEvRating = (ev: number): string => {\n      if (ev < -5) return 'negative';\n      if (ev < 5) return 'neutral';\n      if (ev < 15) return 'positive';\n      return 'excellent';\n    };\n    \n    const getKellyStake = (probability: number, odd: number): number => {\n      // Kelly Criterion: (bp - q) / b, where b = odd - 1, p = probability, q = 1 - p\n      const b = odd - 1;\n      const p = probability / 100;\n      const q = 1 - p;\n      const kelly = (b * p - q) / b;\n      return Math.max(0, Math.min(5, kelly * 100)); // Cap at 5 units\n    };\n    \n    // OVER 1.5 GOLS\n    const over15Prob = poissonProbs.over15;\n    const over15Odd = bet365Odds ? this.getBet365OddForMarket(bet365Odds, 'Over 1.5 Gols', 'Over 1.5') || (100 / over15Prob) : (100 / over15Prob);\n    const over15EV = calculateEV(over15Prob, over15Odd);\n    \n    if (over15Prob >= 65) {\n      recommendations.push({\n        marketType: 'over_15',\n        marketLabel: 'Mais de 1.5 Gols',\n        selection: 'Over 1.5',\n        bookmakerOdd: over15Odd.toFixed(2),\n        modelProbability: over15Prob.toFixed(1),\n        fairOdd: (100 / over15Prob).toFixed(2),\n        evPercent: over15EV.toFixed(2),\n        evRating: getEvRating(over15EV),\n        suggestedStake: '1.0',\n        kellyStake: getKellyStake(over15Prob, over15Odd).toFixed(2),\n        rationale: [\n          `Probabilidade matem√°tica: ${over15Prob.toFixed(1)}%`,\n          `${homeTeam} marca ${homeStats.goalsScoredHome.toFixed(2)} gols/jogo em casa`,\n          `${awayTeam} sofre ${awayStats.goalsConcededAway.toFixed(2)} gols/jogo fora`\n        ],\n        confidenceLevel: over15Prob >= 80 ? 'high' : 'medium',\n        isMainPick: false,\n        isValueBet: over15EV > 5\n      });\n    }\n    \n    // OVER 2.5 GOLS\n    const over25Prob = poissonProbs.over25;\n    const over25Odd = bet365Odds ? this.getBet365OddForMarket(bet365Odds, 'Over 2.5 Gols', 'Over 2.5') || (100 / over25Prob) : (100 / over25Prob);\n    const over25EV = calculateEV(over25Prob, over25Odd);\n    \n    if (over25Prob >= 50) {\n      recommendations.push({\n        marketType: 'over_25',\n        marketLabel: 'Mais de 2.5 Gols',\n        selection: 'Over 2.5',\n        bookmakerOdd: over25Odd.toFixed(2),\n        modelProbability: over25Prob.toFixed(1),\n        fairOdd: (100 / over25Prob).toFixed(2),\n        evPercent: over25EV.toFixed(2),\n        evRating: getEvRating(over25EV),\n        suggestedStake: over25EV > 10 ? '2.0' : '1.0',\n        kellyStake: getKellyStake(over25Prob, over25Odd).toFixed(2),\n        rationale: [\n          `Probabilidade matem√°tica: ${over25Prob.toFixed(1)}%`,\n          `Hist√≥rico Over 2.5: ${homeTeam} ${homeStats.over25Pct}%, ${awayTeam} ${awayStats.over25Pct}%`\n        ],\n        confidenceLevel: over25Prob >= 65 ? 'high' : 'medium',\n        isMainPick: over25EV > 10,\n        isValueBet: over25EV > 5\n      });\n    }\n    \n    // UNDER 2.5 GOLS\n    const under25Prob = 100 - poissonProbs.over25;\n    const under25Odd = bet365Odds ? this.getBet365OddForMarket(bet365Odds, 'Under 2.5 Gols', 'Under 2.5') || (100 / under25Prob) : (100 / under25Prob);\n    const under25EV = calculateEV(under25Prob, under25Odd);\n    \n    if (under25Prob >= 55) {\n      recommendations.push({\n        marketType: 'under_25',\n        marketLabel: 'Menos de 2.5 Gols',\n        selection: 'Under 2.5',\n        bookmakerOdd: under25Odd.toFixed(2),\n        modelProbability: under25Prob.toFixed(1),\n        fairOdd: (100 / under25Prob).toFixed(2),\n        evPercent: under25EV.toFixed(2),\n        evRating: getEvRating(under25EV),\n        suggestedStake: '1.0',\n        kellyStake: getKellyStake(under25Prob, under25Odd).toFixed(2),\n        rationale: [\n          `Probabilidade matem√°tica: ${under25Prob.toFixed(1)}%`,\n          'Baixa m√©dia de gols esperados neste confronto'\n        ],\n        confidenceLevel: under25Prob >= 65 ? 'high' : 'medium',\n        isMainPick: under25EV > 10,\n        isValueBet: under25EV > 5\n      });\n    }\n    \n    // BTTS\n    const bttsProb = poissonProbs.btts;\n    const bttsOdd = bet365Odds ? this.getBet365OddForMarket(bet365Odds, 'Ambas Marcam', 'Sim') || (100 / bttsProb) : (100 / bttsProb);\n    const bttsEV = calculateEV(bttsProb, bttsOdd);\n    \n    if (bttsProb >= 50) {\n      recommendations.push({\n        marketType: 'btts_yes',\n        marketLabel: 'Ambas Marcam - Sim',\n        selection: 'BTTS Yes',\n        bookmakerOdd: bttsOdd.toFixed(2),\n        modelProbability: bttsProb.toFixed(1),\n        fairOdd: (100 / bttsProb).toFixed(2),\n        evPercent: bttsEV.toFixed(2),\n        evRating: getEvRating(bttsEV),\n        suggestedStake: '1.0',\n        kellyStake: getKellyStake(bttsProb, bttsOdd).toFixed(2),\n        rationale: [\n          `Probabilidade BTTS: ${bttsProb.toFixed(1)}%`,\n          `${homeTeam} BTTS hist√≥rico: ${homeStats.bttsPct.toFixed(0)}%`,\n          `${awayTeam} BTTS hist√≥rico: ${awayStats.bttsPct.toFixed(0)}%`\n        ],\n        confidenceLevel: bttsProb >= 60 ? 'high' : 'medium',\n        isMainPick: false,\n        isValueBet: bttsEV > 5\n      });\n    }\n    \n    // EMPATE\n    const drawProb = poissonProbs.draw;\n    const drawOdd = bet365Odds ? this.getBet365OddForMarket(bet365Odds, 'Resultado Final', 'Empate') || (100 / drawProb) : (100 / drawProb);\n    const drawEV = calculateEV(drawProb, drawOdd);\n    \n    if (drawProb >= 28) {\n      recommendations.push({\n        marketType: 'draw',\n        marketLabel: 'Empate',\n        selection: 'Draw',\n        bookmakerOdd: drawOdd.toFixed(2),\n        modelProbability: drawProb.toFixed(1),\n        fairOdd: (100 / drawProb).toFixed(2),\n        evPercent: drawEV.toFixed(2),\n        evRating: getEvRating(drawEV),\n        suggestedStake: '0.5',\n        kellyStake: getKellyStake(drawProb, drawOdd).toFixed(2),\n        rationale: [\n          `Probabilidade de empate: ${drawProb.toFixed(1)}%`,\n          'Paridade entre os times'\n        ],\n        confidenceLevel: drawProb >= 35 ? 'high' : 'medium',\n        isMainPick: false,\n        isValueBet: drawEV > 5\n      });\n    }\n    \n    // Ordenar por EV (melhor valor primeiro)\n    return recommendations.sort((a, b) => parseFloat(b.evPercent) - parseFloat(a.evPercent));\n  }\n  \n  private generateFinalRecommendation(\n    goalsAnalysis: any,\n    cornersAnalysis: any,\n    marketRecommendations: any[]\n  ): string {\n    const valueBets = marketRecommendations.filter(m => m.isValueBet);\n    const topPick = marketRecommendations[0];\n    \n    let recommendation = `Recomenda√ß√£o Final: `;\n    \n    if (goalsAnalysis.avgGoalsTotal < 2.3) {\n      recommendation += `Dada a paridade e a baixa m√©dia de gols esperada, o mercado de \"Menos de 2.5 Gols\" ou \"Empate\" `;\n      recommendation += `(se as odds forem favor√°veis) podem ser considerados, embora o empate seja de alto risco sem probabilidades espec√≠ficas. `;\n    } else {\n      recommendation += `Com expectativa de ${goalsAnalysis.avgGoalsTotal.toFixed(2)} gols, mercados de \"Mais de 1.5 Gols\" ou \"Mais de 2.5 Gols\" `;\n      recommendation += `s√£o mais atrativos. `;\n    }\n    \n    if (valueBets.length > 0) {\n      const bestValue = valueBets[0];\n      recommendation += `O mercado de \"${bestValue.marketLabel}\" apresenta EV positivo de ${bestValue.evPercent}% e pode ser a aposta mais segura.`;\n    } else if (topPick) {\n      recommendation += `O mercado de \"${topPick.marketLabel}\" apresenta a melhor probabilidade de acerto.`;\n    }\n    \n    return recommendation;\n  }\n\n  /**\n   * PATTERN SCANNER - Analisa os √∫ltimos 10 jogos para encontrar padr√µes com >= 80% probabilidade\n   * Implementa \"The 10-Game Rule\" para sugest√µes matem√°ticas\n   */\n  async scanDailyOpportunities(date?: string): Promise<PatternOpportunity[]> {\n    const targetDate = date || new Date().toISOString().split('T')[0];\n    console.log(`[Pattern Scanner] Scanning opportunities for ${targetDate}...`);\n    \n    const PRIORITY_LEAGUES = [39, 140, 135, 78, 61, 71, 2, 3, 94, 88, 128, 13]; // Top leagues\n    const PATTERN_THRESHOLD = 80; // Minimum 80% to create opportunity\n    \n    const opportunities: PatternOpportunity[] = [];\n    \n    try {\n      // Buscar jogos do dia nas ligas priorit√°rias\n      const response = await axios.get(`${API_BASE_URL}/fixtures`, {\n        params: { date: targetDate },\n        headers: this.apiHeaders\n      });\n      \n      const allFixtures: FixtureData[] = response.data.response || [];\n      const priorityFixtures = allFixtures.filter(f => PRIORITY_LEAGUES.includes(f.league.id));\n      \n      console.log(`[Pattern Scanner] Found ${priorityFixtures.length} fixtures in priority leagues`);\n      \n      for (const fixture of priorityFixtures.slice(0, 15)) {\n        try {\n          const homeTeamId = fixture.teams.home.id;\n          const awayTeamId = fixture.teams.away.id;\n          \n          // Buscar √∫ltimos 10 jogos de cada time\n          const [homeFixtures, awayFixtures] = await Promise.all([\n            this.fetchTeamLastMatches(homeTeamId, 10),\n            this.fetchTeamLastMatches(awayTeamId, 10)\n          ]);\n          \n          if (homeFixtures.length < 5 || awayFixtures.length < 5) continue;\n          \n          // Calcular estat√≠sticas\n          const homeStats = this.calculateTeamStats(homeFixtures, homeTeamId);\n          const awayStats = this.calculateTeamStats(awayFixtures, awayTeamId);\n          \n          // PATTERN MATCHING - Testar cada mercado\n          const patterns = this.detectPatterns(homeStats, awayStats, PATTERN_THRESHOLD);\n          \n          for (const pattern of patterns) {\n            opportunities.push({\n              fixtureId: String(fixture.fixture.id),\n              homeTeam: fixture.teams.home.name,\n              awayTeam: fixture.teams.away.name,\n              homeTeamLogo: fixture.teams.home.logo,\n              awayTeamLogo: fixture.teams.away.logo,\n              league: fixture.league.name,\n              leagueId: String(fixture.league.id),\n              matchTime: fixture.fixture.date,\n              pattern: pattern.market,\n              patternDescription: pattern.description,\n              probability: pattern.probability,\n              occurrences: pattern.occurrences,\n              totalGames: pattern.totalGames,\n              suggestedOdd: pattern.suggestedOdd,\n              rationale: pattern.rationale,\n              homeStats: {\n                matchesAnalyzed: homeStats.matchesAnalyzed,\n                over15Pct: homeStats.over15Pct,\n                over25Pct: homeStats.over25Pct,\n                bttsPct: homeStats.bttsPct,\n                avgCorners: homeStats.avgCorners\n              },\n              awayStats: {\n                matchesAnalyzed: awayStats.matchesAnalyzed,\n                over15Pct: awayStats.over15Pct,\n                over25Pct: awayStats.over25Pct,\n                bttsPct: awayStats.bttsPct,\n                avgCorners: awayStats.avgCorners\n              }\n            });\n          }\n          \n          // Rate limit\n          await new Promise(r => setTimeout(r, 200));\n          \n        } catch (error) {\n          console.error(`[Pattern Scanner] Error analyzing fixture ${fixture.fixture.id}:`, error);\n        }\n      }\n      \n      // Ordenar por probabilidade (maior primeiro)\n      opportunities.sort((a, b) => b.probability - a.probability);\n      \n      console.log(`[Pattern Scanner] Found ${opportunities.length} opportunities with >= ${PATTERN_THRESHOLD}% probability`);\n      \n      return opportunities;\n      \n    } catch (error) {\n      console.error('[Pattern Scanner] Error:', error);\n      return [];\n    }\n  }\n  \n  /**\n   * Detecta padr√µes estat√≠sticos nos √∫ltimos 10 jogos\n   */\n  private detectPatterns(homeStats: TeamStats, awayStats: TeamStats, threshold: number): DetectedPattern[] {\n    const patterns: DetectedPattern[] = [];\n    const totalGames = homeStats.matchesAnalyzed + awayStats.matchesAnalyzed;\n    \n    // OVER 1.5 GOLS - Precisa de >80% nos jogos combinados\n    const over15Combined = (homeStats.over15Pct + awayStats.over15Pct) / 2;\n    if (over15Combined >= threshold) {\n      patterns.push({\n        market: 'Over 1.5 Gols FT',\n        description: 'Pelo menos 2 gols na partida',\n        probability: over15Combined,\n        occurrences: Math.round((over15Combined / 100) * totalGames),\n        totalGames,\n        suggestedOdd: 1.30,\n        rationale: [\n          `${homeStats.teamName}: Over 1.5 em ${homeStats.over15Pct.toFixed(0)}% dos jogos`,\n          `${awayStats.teamName}: Over 1.5 em ${awayStats.over15Pct.toFixed(0)}% dos jogos`,\n          `Padr√£o detectado em ${over15Combined.toFixed(0)}% dos ${totalGames} jogos analisados`\n        ]\n      });\n    }\n    \n    // OVER 2.5 GOLS - Precisa de >70% (ajustado para mais oportunidades)\n    const over25Combined = (homeStats.over25Pct + awayStats.over25Pct) / 2;\n    if (over25Combined >= threshold - 10) {\n      patterns.push({\n        market: 'Over 2.5 Gols FT',\n        description: 'Pelo menos 3 gols na partida',\n        probability: over25Combined,\n        occurrences: Math.round((over25Combined / 100) * totalGames),\n        totalGames,\n        suggestedOdd: 1.65,\n        rationale: [\n          `${homeStats.teamName}: Over 2.5 em ${homeStats.over25Pct.toFixed(0)}% dos jogos`,\n          `${awayStats.teamName}: Over 2.5 em ${awayStats.over25Pct.toFixed(0)}% dos jogos`,\n          `Padr√£o detectado em ${over25Combined.toFixed(0)}% dos ${totalGames} jogos analisados`\n        ]\n      });\n    }\n    \n    // BTTS (Ambas Marcam) - Precisa de >75%\n    const bttsCombinad = (homeStats.bttsPct + awayStats.bttsPct) / 2;\n    if (bttsCombinad >= threshold - 5) {\n      patterns.push({\n        market: 'Ambas Marcam',\n        description: 'Sim - Ambos times marcam',\n        probability: bttsCombinad,\n        occurrences: Math.round((bttsCombinad / 100) * totalGames),\n        totalGames,\n        suggestedOdd: 1.75,\n        rationale: [\n          `${homeStats.teamName}: BTTS em ${homeStats.bttsPct.toFixed(0)}% dos jogos`,\n          `${awayStats.teamName}: BTTS em ${awayStats.bttsPct.toFixed(0)}% dos jogos`,\n          `Padr√£o detectado em ${bttsCombinad.toFixed(0)}% dos ${totalGames} jogos analisados`\n        ]\n      });\n    }\n    \n    // ESCANTEIOS OVER 8.5 - M√©dia combinada > 9.5\n    const avgCornersTotal = homeStats.avgCorners + awayStats.avgCorners;\n    if (avgCornersTotal >= 9.5) {\n      const cornersProb = Math.min(85, 50 + (avgCornersTotal - 9.5) * 10);\n      if (cornersProb >= threshold - 10) {\n        patterns.push({\n          market: 'Over 8.5 Escanteios',\n          description: 'Pelo menos 9 escanteios na partida',\n          probability: cornersProb,\n          occurrences: Math.round((cornersProb / 100) * totalGames),\n          totalGames,\n          suggestedOdd: 1.85,\n          rationale: [\n            `${homeStats.teamName}: m√©dia de ${homeStats.avgCorners.toFixed(1)} escanteios/jogo`,\n            `${awayStats.teamName}: m√©dia de ${awayStats.avgCorners.toFixed(1)} escanteios/jogo`,\n            `M√©dia combinada: ${avgCornersTotal.toFixed(1)} escanteios`\n          ]\n        });\n      }\n    }\n    \n    // GOL NO 1¬∫ TEMPO - Ambos times marcam no primeiro tempo\n    const htGoalsProb = (homeStats.goalsFirstHalfOver05Pct + awayStats.goalsFirstHalfOver05Pct) / 2;\n    if (htGoalsProb >= threshold) {\n      patterns.push({\n        market: 'Over 0.5 Gols HT',\n        description: 'Pelo menos 1 gol no 1¬∫ tempo',\n        probability: htGoalsProb,\n        occurrences: Math.round((htGoalsProb / 100) * totalGames),\n        totalGames,\n        suggestedOdd: 1.35,\n        rationale: [\n          `${homeStats.teamName}: Gol no 1¬∫T em ${homeStats.goalsFirstHalfOver05Pct.toFixed(0)}% dos jogos`,\n          `${awayStats.teamName}: Gol no 1¬∫T em ${awayStats.goalsFirstHalfOver05Pct.toFixed(0)}% dos jogos`,\n          `Padr√£o detectado em ${htGoalsProb.toFixed(0)}% dos jogos`\n        ]\n      });\n    }\n    \n    // CART√ïES - Ambos times recebem cart√£o\n    if (homeStats.bothTeamsCardPct >= threshold - 10 && awayStats.bothTeamsCardPct >= threshold - 10) {\n      const cardsProb = (homeStats.bothTeamsCardPct + awayStats.bothTeamsCardPct) / 2;\n      patterns.push({\n        market: 'Ambas Recebem Cart√£o',\n        description: 'Sim - Ambos times recebem cart√£o',\n        probability: cardsProb,\n        occurrences: Math.round((cardsProb / 100) * totalGames),\n        totalGames,\n        suggestedOdd: 1.40,\n        rationale: [\n          `${homeStats.teamName}: Ambos c/ cart√£o em ${homeStats.bothTeamsCardPct.toFixed(0)}% dos jogos`,\n          `${awayStats.teamName}: Ambos c/ cart√£o em ${awayStats.bothTeamsCardPct.toFixed(0)}% dos jogos`,\n          `Padr√£o detectado em ${cardsProb.toFixed(0)}% dos jogos`\n        ]\n      });\n    }\n    \n    return patterns;\n  }\n}\n\ninterface PatternOpportunity {\n  fixtureId: string;\n  homeTeam: string;\n  awayTeam: string;\n  homeTeamLogo: string;\n  awayTeamLogo: string;\n  league: string;\n  leagueId: string;\n  matchTime: string;\n  pattern: string;\n  patternDescription: string;\n  probability: number;\n  occurrences: number;\n  totalGames: number;\n  suggestedOdd: number;\n  rationale: string[];\n  homeStats: {\n    matchesAnalyzed: number;\n    over15Pct: number;\n    over25Pct: number;\n    bttsPct: number;\n    avgCorners: number;\n  };\n  awayStats: {\n    matchesAnalyzed: number;\n    over15Pct: number;\n    over25Pct: number;\n    bttsPct: number;\n    avgCorners: number;\n  };\n}\n\ninterface DetectedPattern {\n  market: string;\n  description: string;\n  probability: number;\n  occurrences: number;\n  totalGames: number;\n  suggestedOdd: number;\n  rationale: string[];\n}\n\nexport const aiPredictionEngine = new AIPredictionEngine();\n","path":null,"size_bytes":105421,"size_tokens":null},"client/src/pages/hot-matches.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { \n  Flame, \n  Activity, \n  Target, \n  Bell, \n  BellOff, \n  RefreshCw,\n  TrendingUp,\n  Clock,\n  Zap,\n  AlertTriangle,\n  Play,\n  Square,\n  ChevronDown,\n  ChevronUp\n} from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\nimport { motion, AnimatePresence } from \"framer-motion\";\n\ninterface HotMatch {\n  id: string;\n  fixtureId: string;\n  league: string;\n  homeTeam: string;\n  awayTeam: string;\n  homeTeamLogo: string | null;\n  awayTeamLogo: string | null;\n  matchMinute: string;\n  homeScore: string;\n  awayScore: string;\n  matchStatus: string;\n  homePossession: string;\n  awayPossession: string;\n  homeShotsOnTarget: string;\n  awayShotsOnTarget: string;\n  homeCorners: string;\n  awayCorners: string;\n  homeDangerousAttacks: string;\n  awayDangerousAttacks: string;\n  homePressureIndex: string;\n  awayPressureIndex: string;\n  homeGoalProbability: string;\n  awayGoalProbability: string;\n  homePressureDelta: string;\n  awayPressureDelta: string;\n  alertTriggered: boolean;\n  createdAt: string;\n}\n\ninterface LiveAlert {\n  id: string;\n  fixtureId: string;\n  alertType: string;\n  teamSide: string;\n  pressureIndex: string;\n  goalProbability: string;\n  alertTitle: string;\n  alertMessage: string;\n  matchMinute: string;\n  currentScore: string;\n  createdAt: string;\n}\n\nexport default function HotMatchesPage() {\n  const { user } = useAuth();\n  const [expandedMatch, setExpandedMatch] = useState<string | null>(null);\n  const [autoRefresh, setAutoRefresh] = useState(true);\n\n  const isAdmin = user?.role === \"admin\" || user?.email === \"kwillianferreira@gmail.com\";\n\n  const { data: hotMatchesData, isLoading: isLoadingMatches, refetch: refetchMatches } = useQuery({\n    queryKey: [\"hot-matches\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/live/pressure?limit=30\");\n      if (!res.ok) throw new Error(\"Failed to fetch hot matches\");\n      return res.json();\n    },\n    refetchInterval: autoRefresh ? 30000 : false,\n  });\n\n  const { data: alertsData, isLoading: isLoadingAlerts } = useQuery({\n    queryKey: [\"live-alerts\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/live/alerts?limit=10\");\n      if (!res.ok) throw new Error(\"Failed to fetch alerts\");\n      return res.json();\n    },\n    refetchInterval: autoRefresh ? 30000 : false,\n  });\n\n  const { data: monitorStatus, refetch: refetchStatus } = useQuery({\n    queryKey: [\"monitor-status\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/live/monitor/status\");\n      if (!res.ok) throw new Error(\"Failed to fetch status\");\n      return res.json();\n    },\n    refetchInterval: 10000,\n  });\n\n  const startMonitor = useMutation({\n    mutationFn: async () => {\n      const res = await fetch(\"/api/live/monitor/start\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          adminEmail: user?.email,\n          adminUserId: user?.id,\n          intervalMs: 45000,\n        }),\n      });\n      if (!res.ok) throw new Error(\"Failed to start monitor\");\n      return res.json();\n    },\n    onSuccess: () => {\n      refetchStatus();\n      refetchMatches();\n    },\n  });\n\n  const stopMonitor = useMutation({\n    mutationFn: async () => {\n      const res = await fetch(\"/api/live/monitor/stop\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          adminEmail: user?.email,\n          adminUserId: user?.id,\n        }),\n      });\n      if (!res.ok) throw new Error(\"Failed to stop monitor\");\n      return res.json();\n    },\n    onSuccess: () => {\n      refetchStatus();\n    },\n  });\n\n  const hotMatches: HotMatch[] = hotMatchesData?.matches || [];\n  const alerts: LiveAlert[] = alertsData?.alerts || [];\n  const isMonitorRunning = monitorStatus?.status?.isRunning || false;\n\n  const getPressureColor = (pressure: number) => {\n    if (pressure >= 80) return \"text-red-500\";\n    if (pressure >= 60) return \"text-orange-500\";\n    if (pressure >= 40) return \"text-yellow-500\";\n    return \"text-green-500\";\n  };\n\n  const getPressureBg = (pressure: number) => {\n    if (pressure >= 80) return \"bg-red-500/20 border-red-500/50\";\n    if (pressure >= 60) return \"bg-orange-500/20 border-orange-500/50\";\n    if (pressure >= 40) return \"bg-yellow-500/20 border-yellow-500/50\";\n    return \"bg-green-500/20 border-green-500/50\";\n  };\n\n  const formatDelta = (delta: string) => {\n    const num = parseFloat(delta);\n    if (num > 0) return `+${num.toFixed(1)}%`;\n    return `${num.toFixed(1)}%`;\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-black to-zinc-950 text-white p-4 md:p-6\">\n      <div className=\"max-w-6xl mx-auto space-y-6\">\n        <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\n          <div>\n            <h1 className=\"text-2xl md:text-3xl font-bold flex items-center gap-3\">\n              <Flame className=\"w-8 h-8 text-orange-500\" />\n              Jogos Quentes\n            </h1>\n            <p className=\"text-zinc-400 mt-1\">\n              Monitor de press√£o ao vivo - Alta probabilidade de gol\n            </p>\n          </div>\n\n          <div className=\"flex items-center gap-4\">\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={() => refetchMatches()}\n              className=\"border-zinc-700\"\n              data-testid=\"button-refresh\"\n            >\n              <RefreshCw className=\"w-4 h-4 mr-2\" />\n              Atualizar\n            </Button>\n          </div>\n        </div>\n\n        <div className=\"flex items-center gap-3\">\n          <div className=\"flex items-center gap-2 px-3 py-1.5 rounded-full text-sm bg-green-500/20 text-green-400 border border-green-500/50\">\n            <div className=\"w-2 h-2 rounded-full bg-green-500 animate-pulse\" />\n            Monitor Ativo 24/7\n          </div>\n\n          <Badge variant=\"outline\" className=\"border-zinc-700\">\n            {hotMatches.length} jogos ao vivo\n          </Badge>\n        </div>\n\n        {alerts.length > 0 && (\n          <Card className=\"bg-zinc-900/50 border-orange-500/30 backdrop-blur\">\n            <CardHeader className=\"pb-3\">\n              <CardTitle className=\"text-lg flex items-center gap-2\">\n                <Bell className=\"w-5 h-5 text-orange-500\" />\n                Alertas Recentes\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-2\">\n                {alerts.slice(0, 5).map((alert) => (\n                  <motion.div\n                    key={alert.id}\n                    initial={{ opacity: 0, x: -20 }}\n                    animate={{ opacity: 1, x: 0 }}\n                    className=\"flex items-center justify-between p-3 rounded-lg bg-zinc-800/50 border border-zinc-700\"\n                  >\n                    <div className=\"flex items-center gap-3\">\n                      <Zap className=\"w-5 h-5 text-yellow-500\" />\n                      <div>\n                        <p className=\"font-medium text-sm\">{alert.alertTitle}</p>\n                        <p className=\"text-xs text-zinc-400\">{alert.alertMessage}</p>\n                      </div>\n                    </div>\n                    <div className=\"text-right\">\n                      <Badge variant=\"outline\" className=\"border-yellow-500/50 text-yellow-400\">\n                        {parseFloat(alert.goalProbability).toFixed(0)}% prob. gol\n                      </Badge>\n                    </div>\n                  </motion.div>\n                ))}\n              </div>\n            </CardContent>\n          </Card>\n        )}\n\n        {isLoadingMatches ? (\n          <div className=\"flex items-center justify-center py-20\">\n            <RefreshCw className=\"w-8 h-8 animate-spin text-[#33b864]\" />\n          </div>\n        ) : hotMatches.length === 0 ? (\n          <Card className=\"bg-zinc-900/50 border-zinc-800\">\n            <CardContent className=\"py-12 text-center\">\n              <Activity className=\"w-12 h-12 text-zinc-600 mx-auto mb-4\" />\n              <h3 className=\"text-lg font-medium text-zinc-400\">\n                Nenhum jogo ao vivo no momento\n              </h3>\n              <p className=\"text-sm text-zinc-500 mt-1\">\n                {isMonitorRunning \n                  ? \"Aguardando jogos com alta press√£o...\"\n                  : \"Inicie o monitor para come√ßar a rastrear jogos ao vivo\"\n                }\n              </p>\n            </CardContent>\n          </Card>\n        ) : (\n          <div className=\"grid gap-4\">\n            <AnimatePresence>\n              {hotMatches.map((match, index) => {\n                const homePressure = parseFloat(match.homePressureIndex);\n                const awayPressure = parseFloat(match.awayPressureIndex);\n                const maxPressure = Math.max(homePressure, awayPressure);\n                const isExpanded = expandedMatch === match.id;\n                const dominantSide = homePressure > awayPressure ? 'home' : 'away';\n                const dominantTeam = dominantSide === 'home' ? match.homeTeam : match.awayTeam;\n\n                return (\n                  <motion.div\n                    key={match.id}\n                    initial={{ opacity: 0, y: 20 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    exit={{ opacity: 0, y: -20 }}\n                    transition={{ delay: index * 0.05 }}\n                  >\n                    <Card \n                      className={cn(\n                        \"bg-zinc-900/50 border transition-all duration-300 cursor-pointer hover:bg-zinc-900/70\",\n                        getPressureBg(maxPressure),\n                        match.alertTriggered && \"ring-2 ring-orange-500/50\"\n                      )}\n                      onClick={() => setExpandedMatch(isExpanded ? null : match.id)}\n                      data-testid={`card-match-${match.fixtureId}`}\n                    >\n                      <CardContent className=\"p-4\">\n                        <div className=\"flex items-center justify-between\">\n                          <div className=\"flex items-center gap-4\">\n                            {match.alertTriggered && (\n                              <div className=\"absolute -top-2 -left-2\">\n                                <span className=\"flex h-4 w-4\">\n                                  <span className=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-orange-400 opacity-75\" />\n                                  <span className=\"relative inline-flex rounded-full h-4 w-4 bg-orange-500\" />\n                                </span>\n                              </div>\n                            )}\n\n                            <div className=\"flex flex-col items-center gap-1\">\n                              <Badge variant=\"outline\" className=\"text-xs border-zinc-600\">\n                                {match.league}\n                              </Badge>\n                              <div className=\"flex items-center gap-1 text-zinc-400\">\n                                <Clock className=\"w-3 h-3\" />\n                                <span className=\"text-xs font-mono\">{match.matchMinute}'</span>\n                              </div>\n                            </div>\n\n                            <div className=\"flex items-center gap-4\">\n                              <div className=\"flex flex-col items-center gap-1 w-24\">\n                                {match.homeTeamLogo && (\n                                  <img \n                                    src={match.homeTeamLogo} \n                                    alt={match.homeTeam}\n                                    className=\"w-8 h-8 object-contain\"\n                                  />\n                                )}\n                                <span className=\"text-xs text-center line-clamp-1\">{match.homeTeam}</span>\n                              </div>\n\n                              <div className=\"text-center\">\n                                <div className=\"text-2xl font-bold\">\n                                  {match.homeScore} - {match.awayScore}\n                                </div>\n                              </div>\n\n                              <div className=\"flex flex-col items-center gap-1 w-24\">\n                                {match.awayTeamLogo && (\n                                  <img \n                                    src={match.awayTeamLogo} \n                                    alt={match.awayTeam}\n                                    className=\"w-8 h-8 object-contain\"\n                                  />\n                                )}\n                                <span className=\"text-xs text-center line-clamp-1\">{match.awayTeam}</span>\n                              </div>\n                            </div>\n                          </div>\n\n                          <div className=\"flex items-center gap-6\">\n                            <div className=\"hidden md:flex flex-col items-center\">\n                              <span className=\"text-xs text-zinc-500 mb-1\">Press√£o</span>\n                              <div className=\"flex items-center gap-2\">\n                                <span className={cn(\"text-sm font-bold\", getPressureColor(homePressure))}>\n                                  {homePressure.toFixed(0)}%\n                                </span>\n                                <span className=\"text-zinc-600\">vs</span>\n                                <span className={cn(\"text-sm font-bold\", getPressureColor(awayPressure))}>\n                                  {awayPressure.toFixed(0)}%\n                                </span>\n                              </div>\n                            </div>\n\n                            <div className=\"flex flex-col items-center\">\n                              <span className=\"text-xs text-zinc-500 mb-1\">Prob. Gol</span>\n                              <div className=\"flex items-center gap-1\">\n                                <Target className=\"w-4 h-4 text-orange-500\" />\n                                <span className=\"font-bold text-orange-400\">\n                                  {Math.max(\n                                    parseFloat(match.homeGoalProbability),\n                                    parseFloat(match.awayGoalProbability)\n                                  ).toFixed(0)}%\n                                </span>\n                              </div>\n                            </div>\n\n                            <div className=\"flex flex-col items-center\">\n                              <span className=\"text-xs text-zinc-500 mb-1\">Dominante</span>\n                              <Badge className={cn(\n                                \"text-xs\",\n                                dominantSide === 'home' ? \"bg-blue-500/20 text-blue-400\" : \"bg-purple-500/20 text-purple-400\"\n                              )}>\n                                {dominantTeam.substring(0, 12)}\n                              </Badge>\n                            </div>\n\n                            <Button variant=\"ghost\" size=\"sm\" className=\"p-1\">\n                              {isExpanded ? (\n                                <ChevronUp className=\"w-5 h-5\" />\n                              ) : (\n                                <ChevronDown className=\"w-5 h-5\" />\n                              )}\n                            </Button>\n                          </div>\n                        </div>\n\n                        <AnimatePresence>\n                          {isExpanded && (\n                            <motion.div\n                              initial={{ height: 0, opacity: 0 }}\n                              animate={{ height: \"auto\", opacity: 1 }}\n                              exit={{ height: 0, opacity: 0 }}\n                              transition={{ duration: 0.3 }}\n                              className=\"overflow-hidden\"\n                            >\n                              <Separator className=\"my-4 bg-zinc-800\" />\n\n                              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                                <div className=\"space-y-1\">\n                                  <span className=\"text-xs text-zinc-500\">Posse de Bola</span>\n                                  <div className=\"flex items-center justify-between text-sm\">\n                                    <span className=\"font-medium\">{match.homePossession}%</span>\n                                    <span className=\"font-medium\">{match.awayPossession}%</span>\n                                  </div>\n                                  <Progress \n                                    value={parseFloat(match.homePossession)} \n                                    className=\"h-2 bg-zinc-800\"\n                                  />\n                                </div>\n\n                                <div className=\"space-y-1\">\n                                  <span className=\"text-xs text-zinc-500\">Chutes ao Gol</span>\n                                  <div className=\"flex items-center justify-between text-sm\">\n                                    <span className=\"font-medium\">{match.homeShotsOnTarget}</span>\n                                    <span className=\"font-medium\">{match.awayShotsOnTarget}</span>\n                                  </div>\n                                  <div className=\"flex gap-1\">\n                                    <div \n                                      className=\"h-2 bg-blue-500 rounded-l\" \n                                      style={{ \n                                        width: `${(parseInt(match.homeShotsOnTarget) / (parseInt(match.homeShotsOnTarget) + parseInt(match.awayShotsOnTarget) || 1)) * 100}%` \n                                      }} \n                                    />\n                                    <div \n                                      className=\"h-2 bg-purple-500 rounded-r flex-1\" \n                                    />\n                                  </div>\n                                </div>\n\n                                <div className=\"space-y-1\">\n                                  <span className=\"text-xs text-zinc-500\">Escanteios</span>\n                                  <div className=\"flex items-center justify-between text-sm\">\n                                    <span className=\"font-medium\">{match.homeCorners}</span>\n                                    <span className=\"font-medium\">{match.awayCorners}</span>\n                                  </div>\n                                  <div className=\"flex gap-1\">\n                                    <div \n                                      className=\"h-2 bg-blue-500 rounded-l\" \n                                      style={{ \n                                        width: `${(parseInt(match.homeCorners) / (parseInt(match.homeCorners) + parseInt(match.awayCorners) || 1)) * 100}%` \n                                      }} \n                                    />\n                                    <div \n                                      className=\"h-2 bg-purple-500 rounded-r flex-1\" \n                                    />\n                                  </div>\n                                </div>\n\n                                <div className=\"space-y-1\">\n                                  <span className=\"text-xs text-zinc-500\">Ataques Perigosos</span>\n                                  <div className=\"flex items-center justify-between text-sm\">\n                                    <span className=\"font-medium\">{match.homeDangerousAttacks}</span>\n                                    <span className=\"font-medium\">{match.awayDangerousAttacks}</span>\n                                  </div>\n                                  <div className=\"flex gap-1\">\n                                    <div \n                                      className=\"h-2 bg-blue-500 rounded-l\" \n                                      style={{ \n                                        width: `${(parseInt(match.homeDangerousAttacks) / (parseInt(match.homeDangerousAttacks) + parseInt(match.awayDangerousAttacks) || 1)) * 100}%` \n                                      }} \n                                    />\n                                    <div \n                                      className=\"h-2 bg-purple-500 rounded-r flex-1\" \n                                    />\n                                  </div>\n                                </div>\n                              </div>\n\n                              <div className=\"grid grid-cols-2 gap-4 mt-4\">\n                                <div className={cn(\n                                  \"p-3 rounded-lg border\",\n                                  getPressureBg(homePressure)\n                                )}>\n                                  <div className=\"flex items-center justify-between mb-2\">\n                                    <span className=\"text-sm font-medium\">{match.homeTeam}</span>\n                                    <div className=\"flex items-center gap-1\">\n                                      {parseFloat(match.homePressureDelta) > 0 && (\n                                        <TrendingUp className=\"w-4 h-4 text-green-500\" />\n                                      )}\n                                      <span className={cn(\n                                        \"text-xs\",\n                                        parseFloat(match.homePressureDelta) > 0 ? \"text-green-400\" : \"text-red-400\"\n                                      )}>\n                                        {formatDelta(match.homePressureDelta)}\n                                      </span>\n                                    </div>\n                                  </div>\n                                  <div className=\"flex items-center gap-3\">\n                                    <div className=\"flex-1\">\n                                      <div className=\"flex justify-between text-xs text-zinc-500 mb-1\">\n                                        <span>Press√£o</span>\n                                        <span className={getPressureColor(homePressure)}>\n                                          {homePressure.toFixed(1)}%\n                                        </span>\n                                      </div>\n                                      <Progress \n                                        value={homePressure} \n                                        className=\"h-2\"\n                                      />\n                                    </div>\n                                    <div className=\"text-center\">\n                                      <Target className=\"w-5 h-5 text-orange-500 mx-auto mb-1\" />\n                                      <span className=\"text-sm font-bold text-orange-400\">\n                                        {parseFloat(match.homeGoalProbability).toFixed(0)}%\n                                      </span>\n                                    </div>\n                                  </div>\n                                </div>\n\n                                <div className={cn(\n                                  \"p-3 rounded-lg border\",\n                                  getPressureBg(awayPressure)\n                                )}>\n                                  <div className=\"flex items-center justify-between mb-2\">\n                                    <span className=\"text-sm font-medium\">{match.awayTeam}</span>\n                                    <div className=\"flex items-center gap-1\">\n                                      {parseFloat(match.awayPressureDelta) > 0 && (\n                                        <TrendingUp className=\"w-4 h-4 text-green-500\" />\n                                      )}\n                                      <span className={cn(\n                                        \"text-xs\",\n                                        parseFloat(match.awayPressureDelta) > 0 ? \"text-green-400\" : \"text-red-400\"\n                                      )}>\n                                        {formatDelta(match.awayPressureDelta)}\n                                      </span>\n                                    </div>\n                                  </div>\n                                  <div className=\"flex items-center gap-3\">\n                                    <div className=\"flex-1\">\n                                      <div className=\"flex justify-between text-xs text-zinc-500 mb-1\">\n                                        <span>Press√£o</span>\n                                        <span className={getPressureColor(awayPressure)}>\n                                          {awayPressure.toFixed(1)}%\n                                        </span>\n                                      </div>\n                                      <Progress \n                                        value={awayPressure} \n                                        className=\"h-2\"\n                                      />\n                                    </div>\n                                    <div className=\"text-center\">\n                                      <Target className=\"w-5 h-5 text-orange-500 mx-auto mb-1\" />\n                                      <span className=\"text-sm font-bold text-orange-400\">\n                                        {parseFloat(match.awayGoalProbability).toFixed(0)}%\n                                      </span>\n                                    </div>\n                                  </div>\n                                </div>\n                              </div>\n\n                              {maxPressure >= 70 && (\n                                <div className=\"mt-4 p-3 rounded-lg bg-orange-500/10 border border-orange-500/30 flex items-center gap-3\">\n                                  <AlertTriangle className=\"w-5 h-5 text-orange-500\" />\n                                  <div>\n                                    <p className=\"text-sm font-medium text-orange-400\">\n                                      Alta Press√£o Detectada\n                                    </p>\n                                    <p className=\"text-xs text-zinc-400\">\n                                      {dominantTeam} est√° pressionando fortemente. \n                                      Probabilidade de gol nos pr√≥ximos 5 minutos: {Math.max(\n                                        parseFloat(match.homeGoalProbability),\n                                        parseFloat(match.awayGoalProbability)\n                                      ).toFixed(0)}%\n                                    </p>\n                                  </div>\n                                </div>\n                              )}\n                            </motion.div>\n                          )}\n                        </AnimatePresence>\n                      </CardContent>\n                    </Card>\n                  </motion.div>\n                );\n              })}\n            </AnimatePresence>\n          </div>\n        )}\n\n        <Card className=\"bg-zinc-900/30 border-zinc-800\">\n          <CardContent className=\"py-4\">\n            <div className=\"flex items-center justify-between text-sm text-zinc-500\">\n              <div className=\"flex items-center gap-2\">\n                <Activity className=\"w-4 h-4\" />\n                <span>√öltima atualiza√ß√£o: {new Date().toLocaleTimeString('pt-BR')}</span>\n              </div>\n              <div className=\"flex items-center gap-4\">\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"w-3 h-3 rounded-full bg-red-500\" />\n                  <span>&gt;80% Cr√≠tico</span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"w-3 h-3 rounded-full bg-orange-500\" />\n                  <span>&gt;60% Alto</span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"w-3 h-3 rounded-full bg-yellow-500\" />\n                  <span>&gt;40% M√©dio</span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"w-3 h-3 rounded-full bg-green-500\" />\n                  <span>&lt;40% Baixo</span>\n                </div>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":28868,"size_tokens":null},"client/src/components/ai-drafts-panel.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Button } from \"@/components/ui/button\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { toast } from \"sonner\";\nimport axios from \"axios\";\nimport { \n  Brain, \n  Check, \n  X, \n  Loader2, \n  TrendingUp, \n  Target, \n  Zap,\n  ChevronDown,\n  ChevronUp,\n  Sparkles,\n  Calendar,\n  Clock,\n  BarChart3,\n  CheckCircle2,\n  Info,\n  Link,\n  ArrowUpDown,\n  ArrowDown,\n  ArrowUp\n} from \"lucide-react\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from \"@/components/ui/popover\";\n\ninterface BetLeg {\n  homeTeam: string;\n  awayTeam: string;\n  homeTeamLogo?: string;\n  awayTeamLogo?: string;\n  league: string;\n  fixtureId?: string;\n  market: string;\n  outcome?: string;\n  odd: number;\n  probability?: number;\n  confidence?: number;\n  rationale?: string[];\n  time: string;\n}\n\ninterface AiDraft {\n  id: string;\n  fixtureId: string;\n  league: string;\n  homeTeam: string;\n  awayTeam: string;\n  homeTeamLogo: string | null;\n  awayTeamLogo: string | null;\n  matchTime: string;\n  market: string;\n  predictedOutcome: string;\n  suggestedOdd: string;\n  suggestedStake: string;\n  confidence: string;\n  probability: string;\n  expectedValue: string | null;\n  analysisRationale: string | null;\n  formScore: string | null;\n  goalTrendScore: string | null;\n  h2hScore: string | null;\n  status: string;\n  createdAt: string;\n  isCombo?: boolean;\n  legs?: string;\n  totalOdd?: string;\n}\n\ninterface AiStats {\n  pendingDrafts: number;\n  highConfidence: number;\n  markets: {\n    over25: number;\n    under25: number;\n    btts: number;\n    result: number;\n    corners: number;\n    cards: number;\n    shots: number;\n  };\n}\n\ntype MarketFilter = 'all' | 'over25' | 'btts' | 'highConfidence' | 'corners' | 'cards' | 'shots';\ntype SortOrder = 'desc' | 'asc' | 'none';\ntype SortField = 'probability' | 'confidence' | 'odd';\n\nexport function AiDraftsPanel() {\n  const queryClient = useQueryClient();\n  const { user } = useAuth();\n  const [selectedDate, setSelectedDate] = useState(() => {\n    const now = new Date();\n    const year = now.getFullYear();\n    const month = String(now.getMonth() + 1).padStart(2, '0');\n    const day = String(now.getDate()).padStart(2, '0');\n    return `${year}-${month}-${day}`;\n  });\n  const [isAnalyzing, setIsAnalyzing] = useState(false);\n  const [isScanningPatterns, setIsScanningPatterns] = useState(false);\n  const [patternOpportunities, setPatternOpportunities] = useState<any[]>([]);\n  const [expandedDraft, setExpandedDraft] = useState<string | null>(null);\n  const [selectedDrafts, setSelectedDrafts] = useState<Set<string>>(new Set());\n  const [activeFilter, setActiveFilter] = useState<MarketFilter>('all');\n  const [editedCombos, setEditedCombos] = useState<Record<string, BetLeg[]>>({});\n  const [betLinks, setBetLinks] = useState<Record<string, string>>({});\n  const [sortOrder, setSortOrder] = useState<SortOrder>('desc');\n  const [sortField, setSortField] = useState<SortField>('probability');\n\n  const { data: drafts = [], isLoading: loadingDrafts, refetch: refetchDrafts } = useQuery<AiDraft[]>({\n    queryKey: ['ai-drafts'],\n    queryFn: async () => {\n      const response = await axios.get('/api/ai/drafts');\n      return response.data;\n    },\n  });\n\n  const { data: stats } = useQuery<AiStats>({\n    queryKey: ['ai-stats'],\n    queryFn: async () => {\n      const response = await axios.get('/api/ai/stats');\n      return response.data;\n    },\n  });\n\n  const runAnalysis = async () => {\n    if (!user?.email || !user?.id) {\n      toast.error(\"Voc√™ precisa estar logado como admin\");\n      return;\n    }\n\n    setIsAnalyzing(true);\n    try {\n      const response = await axios.post('/api/ai/analyze', {\n        date: selectedDate,\n        adminEmail: user.email,\n        adminUserId: user.id,\n      });\n\n      if (response.data.success) {\n        toast.success(response.data.message);\n        refetchDrafts();\n        queryClient.invalidateQueries({ queryKey: ['ai-stats'] });\n      }\n    } catch (error: any) {\n      toast.error(error.response?.data?.error || \"Erro ao executar an√°lise\");\n    } finally {\n      setIsAnalyzing(false);\n    }\n  };\n\n  const scanPatternOpportunities = async () => {\n    if (!user?.email || !user?.id) {\n      toast.error(\"Voc√™ precisa estar logado como admin\");\n      return;\n    }\n\n    setIsScanningPatterns(true);\n    try {\n      const response = await axios.get('/api/ai/pattern-scanner', {\n        params: { date: selectedDate }\n      });\n\n      if (response.data.success) {\n        setPatternOpportunities(response.data.opportunities || []);\n        if (response.data.opportunities?.length > 0) {\n          toast.success(`${response.data.opportunities.length} oportunidades encontradas com ‚â•80% probabilidade!`);\n        } else {\n          toast.info(\"Nenhuma oportunidade com ‚â•80% encontrada para esta data.\");\n        }\n      }\n    } catch (error: any) {\n      const errorMsg = error.response?.data?.error || \"Erro ao escanear padr√µes\";\n      if (errorMsg.includes('limit') || errorMsg.includes('request')) {\n        toast.error(\"Limite de API atingido. Tente novamente amanh√£.\");\n      } else {\n        toast.error(errorMsg);\n      }\n    } finally {\n      setIsScanningPatterns(false);\n    }\n  };\n\n  const approveDraft = async (id: string) => {\n    if (!user?.email || !user?.id) return;\n\n    try {\n      const response = await axios.post(`/api/ai/drafts/${id}/approve`, {\n        adminEmail: user.email,\n        adminUserId: user.id,\n        betLink: betLinks[id] || null,\n      });\n\n      if (response.data.success) {\n        toast.success(\"Previs√£o aprovada e publicada!\");\n        refetchDrafts();\n        queryClient.invalidateQueries({ queryKey: ['tips'] });\n        queryClient.invalidateQueries({ queryKey: ['ai-stats'] });\n        // Limpar o link ap√≥s aprovar\n        setBetLinks(prev => {\n          const newLinks = { ...prev };\n          delete newLinks[id];\n          return newLinks;\n        });\n      }\n    } catch (error: any) {\n      toast.error(error.response?.data?.error || \"Erro ao aprovar previs√£o\");\n    }\n  };\n\n  const rejectDraft = async (id: string) => {\n    if (!user?.email || !user?.id) return;\n\n    try {\n      const response = await axios.post(`/api/ai/drafts/${id}/reject`, {\n        adminEmail: user.email,\n        adminUserId: user.id,\n      });\n\n      if (response.data.success) {\n        toast.success(\"Previs√£o rejeitada\");\n        refetchDrafts();\n        queryClient.invalidateQueries({ queryKey: ['ai-stats'] });\n      }\n    } catch (error: any) {\n      toast.error(error.response?.data?.error || \"Erro ao rejeitar previs√£o\");\n    }\n  };\n\n  const bulkApprove = async () => {\n    if (!user?.email || !user?.id || selectedDrafts.size === 0) return;\n\n    try {\n      const response = await axios.post('/api/ai/drafts/bulk-approve', {\n        ids: Array.from(selectedDrafts),\n        adminEmail: user.email,\n        adminUserId: user.id,\n      });\n\n      if (response.data.success) {\n        toast.success(response.data.message);\n        setSelectedDrafts(new Set());\n        refetchDrafts();\n        queryClient.invalidateQueries({ queryKey: ['tips'] });\n        queryClient.invalidateQueries({ queryKey: ['ai-stats'] });\n      }\n    } catch (error: any) {\n      toast.error(error.response?.data?.error || \"Erro ao aprovar em lote\");\n    }\n  };\n\n  const toggleDraftSelection = (id: string) => {\n    const newSelected = new Set(selectedDrafts);\n    if (newSelected.has(id)) {\n      newSelected.delete(id);\n    } else {\n      newSelected.add(id);\n    }\n    setSelectedDrafts(newSelected);\n  };\n\n  const selectAllHighConfidence = () => {\n    const highConfidenceIds = drafts\n      .filter(d => parseFloat(d.confidence) >= 85)\n      .map(d => d.id);\n    setSelectedDrafts(new Set(highConfidenceIds));\n  };\n\n  // Fun√ß√£o para remover uma linha do combo\n  const removeComboLeg = async (draftId: string, legIndex: number, currentLegs: BetLeg[]) => {\n    if (currentLegs.length <= 1) {\n      toast.error(\"Combo precisa ter pelo menos 1 linha. Rejeite o bilhete se n√£o quiser publicar.\");\n      return;\n    }\n\n    const newLegs = currentLegs.filter((_, idx) => idx !== legIndex);\n    \n    // Recalcular odd total e probabilidade combinada\n    const newTotalOdd = newLegs.reduce((acc, leg) => acc * leg.odd, 1);\n    const newCombinedProbability = newLegs.reduce((acc, leg) => acc * ((leg.probability || 50) / 100), 1) * 100;\n    const newAvgConfidence = newLegs.reduce((acc, leg) => acc + (leg.confidence || 85), 0) / newLegs.length;\n\n    try {\n      const response = await axios.patch(`/api/ai/drafts/${draftId}/update-legs`, {\n        legs: newLegs,\n        totalOdd: newTotalOdd,\n        probability: newCombinedProbability,\n        confidence: newAvgConfidence,\n        adminEmail: user?.email,\n        adminUserId: user?.id,\n      });\n\n      if (response.data.success) {\n        toast.success(`Linha removida! Combo agora tem ${newLegs.length} sele√ß√µes`);\n        // Atualizar estado local para refletir a mudan√ßa\n        setEditedCombos(prev => ({ ...prev, [draftId]: newLegs }));\n        refetchDrafts();\n        queryClient.invalidateQueries({ queryKey: ['ai-stats'] });\n      }\n    } catch (error: any) {\n      toast.error(error.response?.data?.error || \"Erro ao remover linha do combo\");\n    }\n  };\n\n  const getConfidenceColor = (confidence: number) => {\n    if (confidence >= 85) return 'text-green-400 bg-green-500/20';\n    if (confidence >= 75) return 'text-yellow-400 bg-yellow-500/20';\n    return 'text-orange-400 bg-orange-500/20';\n  };\n\n  const normalizeText = (text: string): string => {\n    return text.toLowerCase()\n      .normalize('NFD')\n      .replace(/[\\u0300-\\u036f]/g, '');\n  };\n\n  const filterDrafts = (drafts: AiDraft[]): AiDraft[] => {\n    let filtered = drafts;\n    \n    if (activeFilter !== 'all') {\n      filtered = drafts.filter(draft => {\n        const market = normalizeText(draft.market);\n        const confidence = parseFloat(draft.confidence);\n        \n        switch (activeFilter) {\n          case 'highConfidence':\n            return confidence >= 85;\n          case 'over25':\n            return market.includes('over 2.5') || market.includes('over 1.5') || market.includes('gols');\n          case 'btts':\n            return market.includes('btts') || market.includes('ambas');\n          case 'corners':\n            return market.includes('corner') || market.includes('escanteio');\n          case 'cards':\n            return market.includes('card') || market.includes('cartao') || market.includes('cartoes');\n          case 'shots':\n            return market.includes('shot') || market.includes('chute');\n          default:\n            return true;\n        }\n      });\n    }\n    \n    // Aplicar ordena√ß√£o\n    if (sortOrder !== 'none') {\n      filtered = [...filtered].sort((a, b) => {\n        let valueA: number;\n        let valueB: number;\n        \n        switch (sortField) {\n          case 'probability':\n            valueA = parseFloat(a.probability) || 0;\n            valueB = parseFloat(b.probability) || 0;\n            break;\n          case 'confidence':\n            valueA = parseFloat(a.confidence) || 0;\n            valueB = parseFloat(b.confidence) || 0;\n            break;\n          case 'odd':\n            valueA = parseFloat(a.suggestedOdd) || parseFloat(a.totalOdd || '0') || 0;\n            valueB = parseFloat(b.suggestedOdd) || parseFloat(b.totalOdd || '0') || 0;\n            break;\n          default:\n            valueA = parseFloat(a.probability) || 0;\n            valueB = parseFloat(b.probability) || 0;\n        }\n        \n        return sortOrder === 'desc' ? valueB - valueA : valueA - valueB;\n      });\n    }\n    \n    return filtered;\n  };\n\n  const toggleSortOrder = () => {\n    if (sortOrder === 'desc') {\n      setSortOrder('asc');\n    } else if (sortOrder === 'asc') {\n      setSortOrder('none');\n    } else {\n      setSortOrder('desc');\n    }\n  };\n\n  const getSortIcon = () => {\n    if (sortOrder === 'desc') return <ArrowDown className=\"w-4 h-4\" />;\n    if (sortOrder === 'asc') return <ArrowUp className=\"w-4 h-4\" />;\n    return <ArrowUpDown className=\"w-4 h-4\" />;\n  };\n\n  const getSortLabel = () => {\n    const fieldLabels: Record<SortField, string> = {\n      probability: 'Probabilidade',\n      confidence: 'Confian√ßa',\n      odd: 'Odd'\n    };\n    \n    if (sortOrder === 'none') return `Ordenar por ${fieldLabels[sortField]}`;\n    if (sortOrder === 'desc') return `${fieldLabels[sortField]} (Maior ‚Üí Menor)`;\n    return `${fieldLabels[sortField]} (Menor ‚Üí Maior)`;\n  };\n\n  const filteredDrafts = filterDrafts(drafts);\n\n  // Formatar data/hora no timezone brasileiro\n  const formatMatchTime = (dateString: string) => {\n    const date = new Date(dateString);\n    const dateFormatted = date.toLocaleDateString('pt-BR', {\n      day: '2-digit',\n      month: '2-digit',\n      timeZone: 'America/Sao_Paulo'\n    });\n    const timeFormatted = date.toLocaleTimeString('pt-BR', {\n      hour: '2-digit',\n      minute: '2-digit',\n      timeZone: 'America/Sao_Paulo'\n    });\n    return `${dateFormatted} √†s ${timeFormatted}`;\n  };\n\n  // Formatar apenas a hora\n  const formatMatchHour = (dateString: string) => {\n    const date = new Date(dateString);\n    return date.toLocaleTimeString('pt-BR', {\n      hour: '2-digit',\n      minute: '2-digit',\n      timeZone: 'America/Sao_Paulo'\n    });\n  };\n\n  // Formatar apenas a data\n  const formatMatchDate = (dateString: string) => {\n    const date = new Date(dateString);\n    return date.toLocaleDateString('pt-BR', {\n      day: '2-digit',\n      month: '2-digit',\n      year: 'numeric',\n      timeZone: 'America/Sao_Paulo'\n    });\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header Stats - Clickable Filter Cards */}\n      <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n        <div \n          onClick={() => setActiveFilter(activeFilter === 'all' ? 'all' : 'all')}\n          className={`bg-gradient-to-br from-primary/20 to-primary/5 border rounded-xl p-4 cursor-pointer transition-all hover:scale-[1.02] ${activeFilter === 'all' ? 'border-primary ring-2 ring-primary/50' : 'border-primary/30'}`}\n          data-testid=\"filter-all\"\n        >\n          <div className=\"flex items-center gap-2 mb-2\">\n            <Brain className=\"w-5 h-5 text-primary\" />\n            <span className=\"text-xs text-gray-400\">RASCUNHOS</span>\n          </div>\n          <p className=\"text-2xl font-bold text-white\">{stats?.pendingDrafts || 0}</p>\n        </div>\n        \n        <div \n          onClick={() => setActiveFilter(activeFilter === 'highConfidence' ? 'all' : 'highConfidence')}\n          className={`bg-gradient-to-br from-green-500/20 to-green-500/5 border rounded-xl p-4 cursor-pointer transition-all hover:scale-[1.02] ${activeFilter === 'highConfidence' ? 'border-green-400 ring-2 ring-green-400/50' : 'border-green-500/30'}`}\n          data-testid=\"filter-high-confidence\"\n        >\n          <div className=\"flex items-center gap-2 mb-2\">\n            <Target className=\"w-5 h-5 text-green-400\" />\n            <span className=\"text-xs text-gray-400\">ALTA CONFIAN√áA</span>\n          </div>\n          <p className=\"text-2xl font-bold text-green-400\">{stats?.highConfidence || 0}</p>\n        </div>\n        \n        <div \n          onClick={() => setActiveFilter(activeFilter === 'over25' ? 'all' : 'over25')}\n          className={`bg-gradient-to-br from-blue-500/20 to-blue-500/5 border rounded-xl p-4 cursor-pointer transition-all hover:scale-[1.02] ${activeFilter === 'over25' ? 'border-blue-400 ring-2 ring-blue-400/50' : 'border-blue-500/30'}`}\n          data-testid=\"filter-over25\"\n        >\n          <div className=\"flex items-center gap-2 mb-2\">\n            <TrendingUp className=\"w-5 h-5 text-blue-400\" />\n            <span className=\"text-xs text-gray-400\">OVER 2.5</span>\n          </div>\n          <p className=\"text-2xl font-bold text-blue-400\">{stats?.markets?.over25 || 0}</p>\n        </div>\n        \n        <div \n          onClick={() => setActiveFilter(activeFilter === 'btts' ? 'all' : 'btts')}\n          className={`bg-gradient-to-br from-purple-500/20 to-purple-500/5 border rounded-xl p-4 cursor-pointer transition-all hover:scale-[1.02] ${activeFilter === 'btts' ? 'border-purple-400 ring-2 ring-purple-400/50' : 'border-purple-500/30'}`}\n          data-testid=\"filter-btts\"\n        >\n          <div className=\"flex items-center gap-2 mb-2\">\n            <Zap className=\"w-5 h-5 text-purple-400\" />\n            <span className=\"text-xs text-gray-400\">BTTS</span>\n          </div>\n          <p className=\"text-2xl font-bold text-purple-400\">{stats?.markets?.btts || 0}</p>\n        </div>\n      </div>\n\n      {/* Secondary Filter Row - More Markets */}\n      <div className=\"grid grid-cols-3 gap-3\">\n        <div \n          onClick={() => setActiveFilter(activeFilter === 'corners' ? 'all' : 'corners')}\n          className={`bg-gradient-to-br from-orange-500/20 to-orange-500/5 border rounded-lg p-3 cursor-pointer transition-all hover:scale-[1.02] ${activeFilter === 'corners' ? 'border-orange-400 ring-2 ring-orange-400/50' : 'border-orange-500/30'}`}\n          data-testid=\"filter-corners\"\n        >\n          <div className=\"flex items-center gap-2\">\n            <span className=\"text-lg\">üö©</span>\n            <span className=\"text-xs text-gray-400\">ESCANTEIOS</span>\n          </div>\n          <p className=\"text-xl font-bold text-orange-400\">{stats?.markets?.corners || 0}</p>\n        </div>\n        \n        <div \n          onClick={() => setActiveFilter(activeFilter === 'cards' ? 'all' : 'cards')}\n          className={`bg-gradient-to-br from-red-500/20 to-red-500/5 border rounded-lg p-3 cursor-pointer transition-all hover:scale-[1.02] ${activeFilter === 'cards' ? 'border-red-400 ring-2 ring-red-400/50' : 'border-red-500/30'}`}\n          data-testid=\"filter-cards\"\n        >\n          <div className=\"flex items-center gap-2\">\n            <span className=\"text-lg\">üü®</span>\n            <span className=\"text-xs text-gray-400\">CART√ïES</span>\n          </div>\n          <p className=\"text-xl font-bold text-red-400\">{stats?.markets?.cards || 0}</p>\n        </div>\n        \n        <div \n          onClick={() => setActiveFilter(activeFilter === 'shots' ? 'all' : 'shots')}\n          className={`bg-gradient-to-br from-cyan-500/20 to-cyan-500/5 border rounded-lg p-3 cursor-pointer transition-all hover:scale-[1.02] ${activeFilter === 'shots' ? 'border-cyan-400 ring-2 ring-cyan-400/50' : 'border-cyan-500/30'}`}\n          data-testid=\"filter-shots\"\n        >\n          <div className=\"flex items-center gap-2\">\n            <span className=\"text-lg\">üéØ</span>\n            <span className=\"text-xs text-gray-400\">CHUTES</span>\n          </div>\n          <p className=\"text-xl font-bold text-cyan-400\">{stats?.markets?.shots || 0}</p>\n        </div>\n      </div>\n\n      {/* Active Filter Indicator */}\n      {activeFilter !== 'all' && (\n        <div className=\"flex items-center justify-between bg-primary/10 border border-primary/30 rounded-lg px-4 py-2\">\n          <span className=\"text-sm text-primary font-medium\">\n            Filtro ativo: <span className=\"font-bold uppercase\">{activeFilter === 'highConfidence' ? 'Alta Confian√ßa 85%+' : activeFilter === 'over25' ? 'Over 2.5 Gols' : activeFilter === 'btts' ? 'BTTS' : activeFilter === 'corners' ? 'Escanteios' : activeFilter === 'cards' ? 'Cart√µes' : 'Chutes'}</span>\n          </span>\n          <Button \n            variant=\"ghost\" \n            size=\"sm\" \n            onClick={() => setActiveFilter('all')}\n            className=\"text-primary hover:text-white\"\n          >\n            <X className=\"w-4 h-4 mr-1\" /> Limpar\n          </Button>\n        </div>\n      )}\n\n      {/* Confidence Explanation Card - Mobile Optimized */}\n      <div className=\"bg-gradient-to-r from-primary/10 via-green-500/5 to-blue-500/10 border-2 border-[#33b864]/40 rounded-2xl p-3 sm:p-4 shadow-lg shadow-[#33b864]/10\">\n        <div className=\"flex items-center gap-2 mb-2\">\n          <Target className=\"w-4 h-4 text-primary flex-shrink-0\" />\n          <h4 className=\"font-bold text-white text-xs sm:text-sm\">O que significa a % de Confian√ßa?</h4>\n        </div>\n        <p className=\"text-[10px] sm:text-xs text-gray-400 leading-relaxed mb-2\">\n          Indica o <span className=\"text-primary font-semibold\">n√≠vel de certeza da IA</span> baseado em estat√≠sticas, hist√≥rico H2H e forma dos times.\n        </p>\n        <div className=\"flex items-center justify-between gap-2 text-[10px] sm:text-xs\">\n          <span className=\"flex items-center gap-1\">\n            <span className=\"w-2 h-2 rounded-full bg-green-400\"></span>\n            <span className=\"text-green-400 font-semibold\">85%+</span>\n          </span>\n          <span className=\"flex items-center gap-1\">\n            <span className=\"w-2 h-2 rounded-full bg-yellow-400\"></span>\n            <span className=\"text-yellow-400 font-semibold\">75-84%</span>\n          </span>\n          <span className=\"flex items-center gap-1\">\n            <span className=\"w-2 h-2 rounded-full bg-orange-400\"></span>\n            <span className=\"text-orange-400 font-semibold\">&lt;75%</span>\n          </span>\n        </div>\n      </div>\n\n      {/* Analysis Controls - Unified Compact Group */}\n      <div className=\"bg-card border-2 border-[#33b864]/40 rounded-2xl p-4 shadow-lg shadow-[#33b864]/10\">\n        <div className=\"flex flex-col gap-3\">\n          {/* Date Picker Row */}\n          <div className=\"flex items-center gap-2\">\n            <Calendar className=\"w-4 h-4 text-primary\" />\n            <input\n              type=\"date\"\n              value={selectedDate}\n              onChange={(e) => setSelectedDate(e.target.value)}\n              className=\"bg-background border border-white/10 rounded-lg px-3 py-1.5 text-sm text-white focus:border-primary/50 focus:outline-none flex-1\"\n              data-testid=\"input-ai-date\"\n            />\n          </div>\n          \n          {/* Action Buttons - Horizontal Group */}\n          <div className=\"flex flex-wrap gap-2\">\n            <Button\n              onClick={runAnalysis}\n              disabled={isAnalyzing}\n              size=\"sm\"\n              className=\"bg-gradient-to-r from-primary to-green-600 hover:from-primary/90 hover:to-green-600/90 text-black font-bold gap-1.5 flex-1 min-w-[140px]\"\n              data-testid=\"button-run-analysis\"\n            >\n              {isAnalyzing ? (\n                <Loader2 className=\"w-3.5 h-3.5 animate-spin\" />\n              ) : (\n                <Brain className=\"w-3.5 h-3.5\" />\n              )}\n              {isAnalyzing ? 'Analisando...' : 'An√°lise IA'}\n            </Button>\n\n            <Button\n              onClick={scanPatternOpportunities}\n              disabled={isScanningPatterns}\n              size=\"sm\"\n              className=\"bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-500 hover:to-blue-400 text-white font-bold gap-1.5 flex-1 min-w-[140px]\"\n              data-testid=\"button-scan-patterns\"\n            >\n              {isScanningPatterns ? (\n                <Loader2 className=\"w-3.5 h-3.5 animate-spin\" />\n              ) : (\n                <Target className=\"w-3.5 h-3.5\" />\n              )}\n              {isScanningPatterns ? 'Escaneando...' : 'Oportunidades'}\n            </Button>\n\n            {drafts.length > 0 && (\n              <Button\n                onClick={selectAllHighConfidence}\n                size=\"sm\"\n                className=\"bg-gradient-to-r from-yellow-600 to-amber-500 hover:from-yellow-500 hover:to-amber-400 text-black font-bold gap-1.5 flex-1 min-w-[140px]\"\n                data-testid=\"button-select-high-confidence\"\n              >\n                <Zap className=\"w-3.5 h-3.5\" />\n                Alta Confian√ßa\n              </Button>\n            )}\n          </div>\n\n          {/* Bulk Approve - Full Width When Visible */}\n          {selectedDrafts.size > 0 && (\n            <Button\n              onClick={bulkApprove}\n              size=\"sm\"\n              className=\"bg-green-600 hover:bg-green-700 text-white font-bold gap-2 w-full\"\n              data-testid=\"button-bulk-approve\"\n            >\n              <CheckCircle2 className=\"w-4 h-4\" />\n              Aprovar {selectedDrafts.size} Selecionados\n            </Button>\n          )}\n        </div>\n      </div>\n\n      {/* Pattern Scanner Results */}\n      {patternOpportunities.length > 0 && (\n        <div className=\"bg-card border-2 border-blue-500/40 rounded-2xl overflow-hidden shadow-lg shadow-blue-500/10\">\n          <div className=\"p-4 border-b border-blue-500/20 bg-gradient-to-r from-blue-500/10 to-transparent flex justify-between items-center\">\n            <h3 className=\"font-bold text-white flex items-center gap-2\">\n              <Target className=\"w-5 h-5 text-blue-400\" />\n              Oportunidades (Regra dos 10 Jogos)\n            </h3>\n            <span className=\"text-xs bg-blue-500/20 text-blue-400 px-3 py-1 rounded-full font-semibold\">\n              {patternOpportunities.length} padr√µes ‚â•80%\n            </span>\n          </div>\n          <div className=\"divide-y divide-blue-500/10\">\n            {patternOpportunities.slice(0, 10).map((opp, idx) => (\n              <div key={idx} className=\"p-4 hover:bg-blue-500/5 transition-colors\">\n                <div className=\"flex items-center gap-3 mb-2\">\n                  <div className=\"flex items-center gap-1\">\n                    <img src={opp.homeTeamLogo} alt=\"\" className=\"w-6 h-6\" />\n                    <span className=\"text-sm font-bold text-white\">{opp.homeTeam}</span>\n                  </div>\n                  <span className=\"text-xs text-gray-500\">vs</span>\n                  <div className=\"flex items-center gap-1\">\n                    <img src={opp.awayTeamLogo} alt=\"\" className=\"w-6 h-6\" />\n                    <span className=\"text-sm font-bold text-white\">{opp.awayTeam}</span>\n                  </div>\n                  <span className=\"ml-auto text-xs text-gray-400\">{opp.league}</span>\n                </div>\n                \n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <span className=\"text-sm font-bold text-blue-400\">{opp.pattern}</span>\n                    <p className=\"text-xs text-gray-400 mt-1\">{opp.patternDescription}</p>\n                  </div>\n                  <div className=\"text-right\">\n                    <div className={`text-lg font-bold ${opp.probability >= 85 ? 'text-green-400' : 'text-yellow-400'}`}>\n                      {opp.probability.toFixed(0)}%\n                    </div>\n                    <p className=\"text-xs text-gray-500\">\n                      {opp.occurrences}/{opp.totalGames} jogos\n                    </p>\n                  </div>\n                </div>\n                \n                <div className=\"mt-2 text-xs text-gray-400 space-y-1\">\n                  {opp.rationale?.slice(0, 2).map((r: string, i: number) => (\n                    <p key={i}>‚Ä¢ {r}</p>\n                  ))}\n                </div>\n              </div>\n            ))}\n          </div>\n          <div className=\"p-3 border-t border-blue-500/10 bg-blue-500/5\">\n            <p className=\"text-xs text-blue-400/70 text-center\">\n              Dados baseados nos √∫ltimos 10 jogos de cada time. Threshold m√≠nimo: 80%\n            </p>\n          </div>\n        </div>\n      )}\n\n      {/* Drafts List */}\n      <div className=\"bg-card border-2 border-[#33b864]/40 rounded-2xl overflow-hidden shadow-lg shadow-[#33b864]/10\">\n        <div className=\"p-4 border-b border-primary/10 bg-gradient-to-r from-primary/10 to-transparent\">\n          <div className=\"flex justify-between items-center mb-3\">\n            <h3 className=\"font-bold text-white flex items-center gap-2\">\n              <Sparkles className=\"w-5 h-5 text-primary\" />\n              Previs√µes da IA\n            </h3>\n            <div className=\"flex items-center gap-2\">\n              {activeFilter !== 'all' && (\n                <span className=\"text-xs bg-yellow-500/20 text-yellow-400 px-2 py-1 rounded-full font-semibold\">\n                  {filteredDrafts.length} de {drafts.length}\n                </span>\n              )}\n              <span className=\"text-xs bg-primary/20 text-primary px-3 py-1 rounded-full font-semibold\">\n                {filteredDrafts.length} Rascunhos\n              </span>\n            </div>\n          </div>\n          \n          {/* Sorting Controls */}\n          <div className=\"flex items-center gap-2 flex-wrap\">\n            <span className=\"text-xs text-gray-400 mr-1\">Ordenar:</span>\n            \n            {/* Sort Field Selector */}\n            <div className=\"flex items-center bg-background/50 rounded-lg p-0.5 border border-white/10\">\n              <button\n                onClick={() => setSortField('probability')}\n                className={`text-xs px-2.5 py-1 rounded-md transition-all ${\n                  sortField === 'probability' \n                    ? 'bg-primary text-black font-bold' \n                    : 'text-gray-400 hover:text-white'\n                }`}\n                data-testid=\"sort-by-probability\"\n              >\n                Probabilidade\n              </button>\n              <button\n                onClick={() => setSortField('confidence')}\n                className={`text-xs px-2.5 py-1 rounded-md transition-all ${\n                  sortField === 'confidence' \n                    ? 'bg-primary text-black font-bold' \n                    : 'text-gray-400 hover:text-white'\n                }`}\n                data-testid=\"sort-by-confidence\"\n              >\n                Confian√ßa\n              </button>\n              <button\n                onClick={() => setSortField('odd')}\n                className={`text-xs px-2.5 py-1 rounded-md transition-all ${\n                  sortField === 'odd' \n                    ? 'bg-primary text-black font-bold' \n                    : 'text-gray-400 hover:text-white'\n                }`}\n                data-testid=\"sort-by-odd\"\n              >\n                Odd\n              </button>\n            </div>\n            \n            {/* Sort Order Toggle */}\n            <button\n              onClick={toggleSortOrder}\n              className={`flex items-center gap-1.5 text-xs px-3 py-1.5 rounded-lg border transition-all ${\n                sortOrder !== 'none'\n                  ? 'bg-primary/20 border-primary/50 text-primary font-semibold'\n                  : 'bg-background/50 border-white/10 text-gray-400 hover:text-white'\n              }`}\n              data-testid=\"toggle-sort-order\"\n            >\n              {getSortIcon()}\n              <span className=\"hidden sm:inline\">\n                {sortOrder === 'desc' ? 'Maior ‚Üí Menor' : sortOrder === 'asc' ? 'Menor ‚Üí Maior' : 'Sem ordem'}\n              </span>\n              <span className=\"sm:hidden\">\n                {sortOrder === 'desc' ? '‚Üì' : sortOrder === 'asc' ? '‚Üë' : '‚áÖ'}\n              </span>\n            </button>\n            \n            {/* Quick Reset */}\n            {(sortOrder !== 'desc' || sortField !== 'probability') && (\n              <button\n                onClick={() => { setSortField('probability'); setSortOrder('desc'); }}\n                className=\"text-xs text-gray-500 hover:text-primary transition-colors underline underline-offset-2\"\n                data-testid=\"reset-sort\"\n              >\n                Resetar\n              </button>\n            )}\n          </div>\n        </div>\n\n        {loadingDrafts ? (\n          <div className=\"p-8 flex items-center justify-center\">\n            <Loader2 className=\"w-8 h-8 text-primary animate-spin\" />\n          </div>\n        ) : filteredDrafts.length === 0 ? (\n          <div className=\"p-8 text-center text-gray-400\">\n            <Brain className=\"w-12 h-12 mx-auto mb-4 opacity-30\" />\n            {activeFilter !== 'all' ? (\n              <>\n                <p>Nenhuma previs√£o encontrada para este filtro</p>\n                <Button \n                  variant=\"ghost\" \n                  onClick={() => setActiveFilter('all')}\n                  className=\"mt-2 text-primary\"\n                >\n                  Ver todas as previs√µes\n                </Button>\n              </>\n            ) : (\n              <>\n                <p>Nenhuma previs√£o pendente</p>\n                <p className=\"text-sm mt-2\">Execute a an√°lise para gerar previs√µes</p>\n              </>\n            )}\n          </div>\n        ) : (\n          <div className=\"divide-y divide-white/5\">\n            {filteredDrafts.map((draft) => {\n              const confidence = parseFloat(draft.confidence);\n              const isExpanded = expandedDraft === draft.id;\n              const isSelected = selectedDrafts.has(draft.id);\n              const rationale = draft.analysisRationale ? JSON.parse(draft.analysisRationale) : [];\n              const isCombo = draft.isCombo;\n              \n              // Safe parsing of legs with fallback\n              let legs: BetLeg[] = [];\n              try {\n                if (draft.legs && typeof draft.legs === 'string') {\n                  legs = JSON.parse(draft.legs);\n                } else if (Array.isArray(draft.legs)) {\n                  legs = draft.legs;\n                }\n              } catch (e) {\n                console.warn('[AI Drafts] Failed to parse legs:', e);\n                legs = [];\n              }\n              \n              const displayOdd = isCombo && draft.totalOdd ? parseFloat(draft.totalOdd) : parseFloat(draft.suggestedOdd);\n\n              return (\n                <div \n                  key={draft.id}\n                  className={`p-4 transition-all ${isSelected ? 'bg-primary/10' : 'hover:bg-white/5'} ${isCombo ? 'border-l-4 border-l-primary' : ''}`}\n                >\n                  {/* Combo Header */}\n                  {isCombo && (\n                    <div className=\"flex items-center gap-2 mb-3 pb-2 border-b border-primary/20\">\n                      <Sparkles className=\"w-4 h-4 text-primary\" />\n                      <span className=\"text-xs font-bold text-primary uppercase tracking-wide\">\n                        Combo {legs.length} Sele√ß√µes\n                      </span>\n                      <span className=\"text-xs bg-primary/20 text-primary px-2 py-0.5 rounded-full\">\n                        Odd Total: {displayOdd.toFixed(2)}\n                      </span>\n                    </div>\n                  )}\n\n                  {/* Combo Legs List - REDESIGNED CLEAN LAYOUT */}\n                  {isCombo && legs.length > 0 ? (\n                    <div className=\"space-y-3\">\n                      {legs.map((leg, idx) => (\n                        <div key={idx} className=\"bg-slate-800/60 rounded-xl p-4 border border-white/10 group\">\n                          {/* Line Number + Remove */}\n                          <div className=\"flex items-center justify-between mb-3\">\n                            <div className=\"flex items-center gap-2\">\n                              <span className=\"w-7 h-7 rounded-full bg-primary/20 flex items-center justify-center text-sm font-bold text-primary\">\n                                {idx + 1}\n                              </span>\n                              <span className=\"text-xs text-gray-500\">{leg.league}</span>\n                            </div>\n                            <button\n                              onClick={() => removeComboLeg(draft.id, idx, legs)}\n                              className=\"w-8 h-8 rounded-full bg-red-500/10 hover:bg-red-500/30 flex items-center justify-center transition-all\"\n                              title=\"Remover\"\n                              data-testid={`btn-remove-leg-${draft.id}-${idx}`}\n                            >\n                              <X className=\"w-4 h-4 text-red-400\" />\n                            </button>\n                          </div>\n\n                          {/* Teams Row - Full Width */}\n                          <div className=\"flex items-center gap-3 mb-3\">\n                            <div className=\"flex items-center gap-2 flex-1\">\n                              {leg.homeTeamLogo && <img src={leg.homeTeamLogo} alt=\"\" className=\"w-8 h-8\" />}\n                              <span className=\"font-bold text-white text-base\">{leg.homeTeam}</span>\n                            </div>\n                            <span className=\"text-gray-500 text-sm\">vs</span>\n                            <div className=\"flex items-center gap-2 flex-1 justify-end\">\n                              <span className=\"font-bold text-white text-base\">{leg.awayTeam}</span>\n                              {leg.awayTeamLogo && <img src={leg.awayTeamLogo} alt=\"\" className=\"w-8 h-8\" />}\n                            </div>\n                          </div>\n\n                          {/* Market + Outcome - Full Width Clear */}\n                          <div className=\"bg-primary/10 rounded-lg p-3 mb-3\">\n                            <p className=\"text-primary font-bold text-base\">{leg.market}</p>\n                            {leg.outcome && <p className=\"text-white text-sm mt-1\">{leg.outcome}</p>}\n                          </div>\n\n                          {/* Stats Row */}\n                          <div className=\"flex items-center justify-between\">\n                            <div className={`px-4 py-2 rounded-lg ${\n                              (leg.probability || 0) >= 85 ? 'bg-green-500/20 text-green-400' : \n                              (leg.probability || 0) >= 75 ? 'bg-yellow-500/20 text-yellow-400' : \n                              'bg-orange-500/20 text-orange-400'\n                            }`}>\n                              <span className=\"text-lg font-bold\">{(leg.probability || 0).toFixed(0)}%</span>\n                              <span className=\"text-xs ml-1 opacity-70\">prob</span>\n                            </div>\n                            <div className=\"bg-white/10 rounded-lg px-4 py-2\">\n                              <span className=\"text-xl font-bold text-white\">{leg.odd.toFixed(2)}</span>\n                              <span className=\"text-xs ml-1 text-gray-400\">odd</span>\n                            </div>\n                          </div>\n                        </div>\n                      ))}\n                      \n                      {/* Combo Summary - Bigger and Clearer */}\n                      <div className=\"bg-gradient-to-r from-primary/20 to-primary/10 rounded-xl p-4 border border-primary/30\">\n                        <div className=\"flex items-center justify-between\">\n                          <div>\n                            <p className=\"text-xs text-gray-400 mb-1\">Probabilidade Combinada</p>\n                            <p className={`text-2xl font-bold ${\n                              parseFloat(draft.probability) >= 50 ? 'text-green-400' : \n                              parseFloat(draft.probability) >= 30 ? 'text-yellow-400' : 'text-orange-400'\n                            }`}>\n                              {parseFloat(draft.probability).toFixed(1)}%\n                            </p>\n                          </div>\n                          <div className=\"text-right\">\n                            <p className=\"text-xs text-gray-400 mb-1\">Odd Total</p>\n                            <p className=\"text-3xl font-bold text-primary\">{displayOdd.toFixed(2)}</p>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  ) : (\n                    /* Single Bet - REDESIGNED CLEAN LAYOUT */\n                    <div className=\"space-y-4\">\n                      {/* Date/Time Header - PROMINENT */}\n                      <div className=\"flex items-center justify-between bg-slate-800/50 rounded-lg px-3 py-2\">\n                        <div className=\"flex items-center gap-2\">\n                          <Calendar className=\"w-4 h-4 text-primary\" />\n                          <span className=\"text-sm font-semibold text-white\">{formatMatchDate(draft.matchTime)}</span>\n                        </div>\n                        <div className=\"flex items-center gap-2\">\n                          <Clock className=\"w-4 h-4 text-primary\" />\n                          <span className=\"text-sm font-bold text-primary\">{formatMatchHour(draft.matchTime)}</span>\n                        </div>\n                      </div>\n                      \n                      {/* Teams Row - Full Width Clear */}\n                      <div className=\"flex items-center gap-3\">\n                        <div className=\"flex items-center gap-2 flex-1\">\n                          {draft.homeTeamLogo && <img src={draft.homeTeamLogo} alt=\"\" className=\"w-10 h-10\" />}\n                          <div>\n                            <p className=\"font-bold text-white text-base\">{draft.homeTeam}</p>\n                            <p className=\"text-xs text-gray-500\">{draft.league}</p>\n                          </div>\n                        </div>\n                        <span className=\"text-gray-500 font-bold\">vs</span>\n                        <div className=\"flex items-center gap-2 flex-1 justify-end text-right\">\n                          <div>\n                            <p className=\"font-bold text-white text-base\">{draft.awayTeam}</p>\n                          </div>\n                          {draft.awayTeamLogo && <img src={draft.awayTeamLogo} alt=\"\" className=\"w-10 h-10\" />}\n                        </div>\n                      </div>\n\n                      {/* Market + Outcome - Full Width Clear Box */}\n                      <div className=\"bg-primary/10 rounded-xl p-4 border border-primary/30\">\n                        <p className=\"text-primary font-bold text-lg\">{draft.market}</p>\n                        {draft.predictedOutcome && <p className=\"text-white text-sm mt-1\">{draft.predictedOutcome}</p>}\n                      </div>\n\n                      {/* Stats Row - Big and Clear */}\n                      <div className=\"flex items-center justify-between gap-3\">\n                        <div className={`flex-1 rounded-xl p-3 text-center ${getConfidenceColor(confidence)}`}>\n                          <p className=\"text-2xl font-bold\">{confidence.toFixed(0)}%</p>\n                          <p className=\"text-xs opacity-70\">Confian√ßa</p>\n                        </div>\n                        <div className=\"flex-1 bg-white/10 rounded-xl p-3 text-center\">\n                          <p className=\"text-2xl font-bold text-white\">{displayOdd.toFixed(2)}</p>\n                          <p className=\"text-xs text-gray-400\">Odd</p>\n                        </div>\n                        <button\n                          onClick={() => toggleDraftSelection(draft.id)}\n                          className={`w-14 h-14 rounded-xl border-2 flex items-center justify-center transition-all ${\n                            isSelected \n                              ? 'bg-primary border-primary' \n                              : 'border-white/20 hover:border-primary/50'\n                          }`}\n                          data-testid={`checkbox-draft-${draft.id}`}\n                        >\n                          {isSelected && <Check className=\"w-6 h-6 text-black\" />}\n                        </button>\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Bet Link Input + Actions - Clean Row */}\n                  <div className=\"mt-4 pt-4 border-t border-white/10 space-y-3\">\n                    {/* Bet Link */}\n                    <div className=\"flex items-center gap-2 bg-slate-800/50 rounded-lg p-2\">\n                      <Link className=\"w-5 h-5 text-gray-400 flex-shrink-0\" />\n                      <Input\n                        placeholder=\"Cole o link Bet365 aqui (opcional)\"\n                        value={betLinks[draft.id] || ''}\n                        onChange={(e) => setBetLinks(prev => ({ ...prev, [draft.id]: e.target.value }))}\n                        className=\"h-10 text-sm bg-transparent border-0 focus-visible:ring-0 placeholder:text-gray-500\"\n                        data-testid={`input-bet-link-${draft.id}`}\n                      />\n                    </div>\n\n                    {/* Action Buttons - Big and Clear */}\n                    <div className=\"flex gap-3\">\n                      <Button\n                        onClick={() => approveDraft(draft.id)}\n                        className=\"flex-1 h-12 bg-green-600 hover:bg-green-700 text-white font-bold text-base gap-2\"\n                        data-testid={`button-approve-${draft.id}`}\n                      >\n                        <Check className=\"w-5 h-5\" />\n                        Aprovar\n                      </Button>\n                      <Button\n                        variant=\"outline\"\n                        onClick={() => rejectDraft(draft.id)}\n                        className=\"flex-1 h-12 border-red-500/50 text-red-400 hover:bg-red-500/10 font-bold text-base gap-2\"\n                        data-testid={`button-reject-${draft.id}`}\n                      >\n                        <X className=\"w-5 h-5\" />\n                        Rejeitar\n                      </Button>\n                    </div>\n                  </div>\n\n                  {/* Entenda o Motivo da Entrada - Expandable Button */}\n                  <button\n                    onClick={() => setExpandedDraft(isExpanded ? null : draft.id)}\n                    className={`w-full mt-3 py-2 px-4 rounded-lg border transition-all flex items-center justify-center gap-2 text-sm font-medium ${\n                      isExpanded \n                        ? 'bg-primary/20 border-primary/50 text-primary' \n                        : 'bg-white/5 border-white/10 text-gray-400 hover:text-white hover:border-primary/30'\n                    }`}\n                    data-testid={`button-expand-${draft.id}`}\n                  >\n                    <Brain className=\"w-4 h-4\" />\n                    {isExpanded ? 'Ocultar explica√ß√£o' : 'Entenda o motivo da entrada'}\n                    {isExpanded ? <ChevronUp className=\"w-4 h-4\" /> : <ChevronDown className=\"w-4 h-4\" />}\n                  </button>\n\n                  {/* Expanded Details - Explica√ß√£o do Analista */}\n                  {isExpanded && (\n                    <div className=\"mt-4 animate-in slide-in-from-top-2 duration-200\">\n                      <div className=\"bg-gradient-to-br from-slate-800/80 to-slate-900/80 border border-white/10 rounded-xl p-5 relative\">\n                        {/* Aspas decorativas */}\n                        <div className=\"absolute top-3 left-4 text-4xl text-primary/30 font-serif\">\"</div>\n                        \n                        {/* Texto da an√°lise */}\n                        <div className=\"pl-8 pr-4 space-y-3\">\n                          <p className=\"text-gray-200 leading-relaxed text-sm\">\n                            {(() => {\n                              const formScore = draft.formScore ? parseFloat(draft.formScore) : 0;\n                              const goalTrend = draft.goalTrendScore ? parseFloat(draft.goalTrendScore) : 0;\n                              const h2hScore = draft.h2hScore ? parseFloat(draft.h2hScore) : 0;\n                              const prob = parseFloat(draft.probability);\n                              const ev = draft.expectedValue ? parseFloat(draft.expectedValue) : 0;\n                              \n                              let analysis = `Analisando o confronto entre ${draft.homeTeam} e ${draft.awayTeam}, `;\n                              \n                              if (formScore > 70) {\n                                analysis += `percebi que ambos os times est√£o em boa fase recente (${formScore.toFixed(0)}% de aproveitamento). `;\n                              } else if (formScore > 50) {\n                                analysis += `notei uma fase irregular dos times (${formScore.toFixed(0)}% de aproveitamento). `;\n                              } else {\n                                analysis += `os times n√£o est√£o em sua melhor forma ultimamente. `;\n                              }\n                              \n                              if (draft.market?.includes('Over') || draft.market?.includes('Gols')) {\n                                if (goalTrend > 70) {\n                                  analysis += `O hist√≥rico de gols √© muito favor√°vel ‚Äî nos √∫ltimos jogos, a tend√™ncia de gols est√° em ${goalTrend.toFixed(0)}%, o que refor√ßa a entrada em ${draft.market}. `;\n                                } else {\n                                  analysis += `A tend√™ncia de gols est√° em ${goalTrend.toFixed(0)}%, mas outros fatores compensam. `;\n                                }\n                              }\n                              \n                              if (draft.market?.includes('BTTS') || draft.market?.includes('Ambas')) {\n                                analysis += `Olhando os √∫ltimos confrontos, ambas as equipes t√™m mostrado capacidade ofensiva consistente. `;\n                              }\n                              \n                              if (draft.market?.includes('Escanteio') || draft.market?.includes('Corner')) {\n                                analysis += `O padr√£o de escanteios desses times nos √∫ltimos jogos sustenta essa entrada. `;\n                              }\n                              \n                              if (draft.market?.includes('Cart√£o') || draft.market?.includes('Card')) {\n                                analysis += `O hist√≥rico de cart√µes e o estilo de jogo das equipes indicam potencial para essa entrada. `;\n                              }\n                              \n                              if (h2hScore > 60) {\n                                analysis += `O confronto direto tamb√©m √© um fator positivo ‚Äî no hist√≥rico H2H (${h2hScore.toFixed(0)}%), esse padr√£o se repetiu. `;\n                              }\n                              \n                              analysis += `Com base em tudo isso, a probabilidade calculada ficou em ${prob.toFixed(0)}%, `;\n                              analysis += `o que me d√° ${confidence.toFixed(0)}% de confian√ßa nessa entrada.`;\n                              \n                              if (ev > 0) {\n                                analysis += ` Al√©m disso, o valor esperado √© positivo (+${ev.toFixed(1)}%), indicando vantagem matem√°tica a longo prazo.`;\n                              }\n                              \n                              return analysis;\n                            })()}\n                          </p>\n                          \n                          {/* Dados estat√≠sticos em linha */}\n                          {rationale.length > 0 && (\n                            <div className=\"pt-3 mt-3 border-t border-white/10\">\n                              <p className=\"text-xs text-gray-500 mb-2\">Dados utilizados:</p>\n                              <div className=\"flex flex-wrap gap-2\">\n                                {rationale.slice(0, 4).map((reason: string, index: number) => (\n                                  <span key={index} className=\"text-xs bg-white/5 text-gray-400 px-2 py-1 rounded\">\n                                    {reason}\n                                  </span>\n                                ))}\n                              </div>\n                            </div>\n                          )}\n                        </div>\n                        \n                        {/* Aspas de fechamento */}\n                        <div className=\"absolute bottom-3 right-4 text-4xl text-primary/30 font-serif\">\"</div>\n                        \n                        {/* Assinatura */}\n                        <div className=\"mt-4 pt-3 border-t border-white/10 flex items-center justify-between\">\n                          <div className=\"flex items-center gap-2\">\n                            <div className=\"w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center\">\n                              <Brain className=\"w-4 h-4 text-primary\" />\n                            </div>\n                            <div>\n                              <p className=\"text-xs font-semibold text-white\">TRUE SIGNAL IA</p>\n                              <p className=\"text-[10px] text-gray-500\">An√°lise automatizada</p>\n                            </div>\n                          </div>\n                          <div className=\"text-right\">\n                            <p className={`text-sm font-bold ${confidence >= 85 ? 'text-green-400' : confidence >= 75 ? 'text-yellow-400' : 'text-orange-400'}`}>\n                              {confidence.toFixed(0)}% confian√ßa\n                            </p>\n                            {draft.expectedValue && parseFloat(draft.expectedValue) > 0 && (\n                              <div className=\"flex items-center gap-1\">\n                                <p className=\"text-xs text-green-400\">+{parseFloat(draft.expectedValue).toFixed(1)}% EV</p>\n                                <Popover>\n                                  <PopoverTrigger asChild>\n                                    <button className=\"w-4 h-4 rounded-full bg-white/10 hover:bg-white/20 flex items-center justify-center transition-colors\">\n                                      <Info className=\"w-2.5 h-2.5 text-gray-400\" />\n                                    </button>\n                                  </PopoverTrigger>\n                                  <PopoverContent className=\"w-80 bg-background/95 backdrop-blur-sm border border-white/10 p-4\" side=\"left\">\n                                    <div className=\"space-y-3\">\n                                      <h4 className=\"font-bold text-white flex items-center gap-2\">\n                                        <TrendingUp className=\"w-4 h-4 text-green-400\" />\n                                        O que √© EV (Valor Esperado)?\n                                      </h4>\n                                      <p className=\"text-xs text-gray-300 leading-relaxed\">\n                                        O <span className=\"text-green-400 font-semibold\">EV positivo</span> indica que a odd oferecida pela casa √© <span className=\"text-white\">maior do que deveria ser</span>, dando vantagem matem√°tica a voc√™.\n                                      </p>\n                                      <div className=\"bg-white/5 rounded-lg p-3 space-y-2\">\n                                        <p className=\"text-xs text-gray-400\">\n                                          <span className=\"text-white font-semibold\">Exemplo:</span> Se a probabilidade √© 67% e a odd √© 1.65\n                                        </p>\n                                        <p className=\"text-xs text-gray-400\">\n                                          EV = (67% √ó 1.65) - 100% = <span className=\"text-green-400 font-bold\">+10.5%</span>\n                                        </p>\n                                      </div>\n                                      <div className=\"border-t border-white/10 pt-3\">\n                                        <p className=\"text-xs text-yellow-400 font-semibold mb-1\">‚ö†Ô∏è Importante:</p>\n                                        <p className=\"text-xs text-gray-400 leading-relaxed\">\n                                          EV positivo <span className=\"text-white\">n√£o garante ganhar esse jogo espec√≠fico</span>. Significa que fazendo muitas apostas com EV+, voc√™ tende a ter <span className=\"text-green-400\">lucro no longo prazo</span>.\n                                        </p>\n                                      </div>\n                                    </div>\n                                  </PopoverContent>\n                                </Popover>\n                              </div>\n                            )}\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              );\n            })}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":56215,"size_tokens":null},"server/combo-utils.ts":{"content":"export interface ComboLeg {\n  homeTeam: string;\n  awayTeam: string;\n  league: string;\n  market: string;\n  outcome: string;\n  odd: number;\n  time?: string;\n  fixtureId?: string;\n  homeTeamLogo?: string;\n  awayTeamLogo?: string;\n}\n\nexport interface ComboMetadata {\n  fixtureId: null;\n  league: string;\n  homeTeam: string;\n  awayTeam: string;\n  homeTeamLogo: null;\n  awayTeamLogo: null;\n  matchTime: string;\n  market: string;\n  odd: string;\n  totalOdd: string;\n  isCombo: true;\n  legs: string;\n}\n\nconst MIN_COMBO_LEGS = 2;\nconst MIN_TOTAL_ODD = 1.50;\n\nexport function validateComboLegs(legs: any[]): { valid: boolean; error?: string } {\n  if (!legs || !Array.isArray(legs)) {\n    return { valid: false, error: \"Legs deve ser um array\" };\n  }\n  \n  if (legs.length < MIN_COMBO_LEGS) {\n    return { valid: false, error: `Combo deve ter no m√≠nimo ${MIN_COMBO_LEGS} sele√ß√µes` };\n  }\n  \n  for (let i = 0; i < legs.length; i++) {\n    const leg = legs[i];\n    if (!leg.homeTeam || !leg.awayTeam || !leg.market || !leg.odd) {\n      return { valid: false, error: `Leg ${i + 1} tem campos obrigat√≥rios faltando` };\n    }\n    if (typeof leg.odd !== 'number' || leg.odd <= 1) {\n      return { valid: false, error: `Leg ${i + 1} tem odd inv√°lida` };\n    }\n  }\n  \n  const totalOdd = legs.reduce((acc, leg) => acc * (leg.odd || 1), 1);\n  if (totalOdd < MIN_TOTAL_ODD) {\n    return { valid: false, error: `Odd total ${totalOdd.toFixed(2)} √© menor que o m√≠nimo ${MIN_TOTAL_ODD}` };\n  }\n  \n  return { valid: true };\n}\n\nexport function deriveComboMetadata(legs: ComboLeg[], formattedTime: string): ComboMetadata | null {\n  const validation = validateComboLegs(legs);\n  if (!validation.valid) {\n    console.warn('[Combo Utils] Validation failed:', validation.error);\n    return null;\n  }\n  \n  const totalOdd = legs.reduce((acc, leg) => acc * (leg.odd || 1), 1);\n  \n  const uniqueLeagues = Array.from(new Set(legs.map(l => l.league).filter(Boolean))).slice(0, 3);\n  const comboLeague = uniqueLeagues.length <= 2 \n    ? uniqueLeagues.join(' ‚Ä¢ ') \n    : `${uniqueLeagues[0]} +${legs.length - 1}`;\n  \n  return {\n    fixtureId: null,\n    league: comboLeague || 'M√∫ltipla',\n    homeTeam: `M√∫ltipla ${legs.length} Jogos`,\n    awayTeam: `Odd Total: ${totalOdd.toFixed(2)}`,\n    homeTeamLogo: null,\n    awayTeamLogo: null,\n    matchTime: formattedTime,\n    market: `Combo ${legs.length} Sele√ß√µes`,\n    odd: String(totalOdd.toFixed(2)),\n    totalOdd: String(totalOdd.toFixed(2)),\n    isCombo: true,\n    legs: JSON.stringify(legs),\n  };\n}\n\nexport function parseLegs(legsData: any): ComboLeg[] {\n  if (!legsData) return [];\n  if (Array.isArray(legsData)) return legsData;\n  if (typeof legsData === 'string') {\n    try {\n      const parsed = JSON.parse(legsData);\n      return Array.isArray(parsed) ? parsed : [];\n    } catch {\n      return [];\n    }\n  }\n  return [];\n}\n\nexport function normalizeTipForResponse(tip: any): any {\n  const parsedLegs = parseLegs(tip.legs);\n  \n  const isCombo = tip.isCombo ?? (parsedLegs.length > 1);\n  const totalOdd = tip.totalOdd \n    ? parseFloat(String(tip.totalOdd)) \n    : (parsedLegs.length > 0 \n        ? parsedLegs.reduce((acc, leg) => acc * (leg.odd || 1), 1) \n        : parseFloat(String(tip.odd)));\n  \n  return {\n    ...tip,\n    legs: parsedLegs,\n    isCombo,\n    totalOdd,\n  };\n}\n","path":null,"size_bytes":3300,"size_tokens":null},"server/live-pressure-monitor.ts":{"content":"import axios from 'axios';\nimport { db } from './db';\nimport { livePressureSnapshots, liveAlerts, liveMonitorSettings, type InsertLivePressureSnapshot, type InsertLiveAlert } from '@shared/schema';\nimport { eq, desc, and, gte, sql } from 'drizzle-orm';\n\nconst API_FOOTBALL_KEY = process.env.FOOTBALL_API_KEY || process.env.API_FOOTBALL_KEY;\nconst API_FOOTBALL_BASE_URL = 'https://v3.football.api-sports.io';\n\ninterface LiveFixture {\n  fixture: {\n    id: number;\n    status: {\n      short: string;\n      elapsed: number | null;\n    };\n  };\n  league: {\n    id: number;\n    name: string;\n    logo: string;\n  };\n  teams: {\n    home: { id: number; name: string; logo: string };\n    away: { id: number; name: string; logo: string };\n  };\n  goals: {\n    home: number | null;\n    away: number | null;\n  };\n  statistics?: Array<{\n    team: { id: number };\n    statistics: Array<{\n      type: string;\n      value: string | number | null;\n    }>;\n  }>;\n}\n\ninterface LiveStatistics {\n  // Posse e controle\n  possession: number;\n  passesTotal: number;\n  passesAccuracy: number;\n  \n  // Finaliza√ß√µes\n  shotsTotal: number;\n  shotsOnTarget: number;\n  shotsOffTarget: number;\n  shotsBlocked: number;\n  shotsInsideBox: number;\n  shotsOutsideBox: number;\n  \n  // Press√£o e ataques\n  dangerousAttacks: number;\n  attacks: number;\n  \n  // Escanteios e bolas paradas\n  corners: number;\n  freeKicks: number;\n  throwIns: number;\n  goalKicks: number;\n  \n  // Defesa\n  saves: number;\n  offsides: number;\n  \n  // Faltas e cart√µes\n  fouls: number;\n  yellowCards: number;\n  redCards: number;\n  \n  // Calculados/Estimados\n  xG: number;                    // Expected Goals estimado\n  pressureIntensity: number;     // Intensidade de press√£o (0-100)\n}\n\ninterface MatchEvent {\n  time: number;\n  type: 'goal' | 'card' | 'subst' | 'var' | 'penalty';\n  teamId: number;\n  playerId?: number;\n  playerName?: string;\n  assistId?: number;\n  assistName?: string;\n  detail?: string;  // 'Yellow Card', 'Red Card', 'Normal Goal', 'Penalty', etc.\n}\n\ninterface OddsData {\n  homeWin: number;\n  draw: number;\n  awayWin: number;\n  over15: number;\n  over25: number;\n  bttsYes: number;\n}\n\ninterface PressureCalculation {\n  pressureIndex: number;\n  goalProbability: number;\n  pressureDelta: number;\n}\n\n// Pesos calibrados cientificamente baseados em an√°lise de mercado (Overlyzer, AI Stats)\n// Soma = 1.0 para normaliza√ß√£o (percentual de contribui√ß√£o)\nconst PRESSURE_WEIGHTS = {\n  shotsOnTarget: 0.28,      // Maior peso - correla√ß√£o direta com gols\n  dangerousAttacks: 0.24,   // Alto impacto - ataques na √°rea\n  xGDelta: 0.18,            // Expected goals delta\n  corners: 0.12,            // Press√£o ofensiva\n  possessionSwing: 0.10,    // Delta de posse (n√£o valor absoluto)\n  cardsTempo: 0.05,         // Ritmo de cart√µes indica intensidade\n  totalAttacks: 0.03,       // Ataques gerais (menor peso)\n};\n\n// Thresholds separados para HT (1¬∫ tempo) vs FT (2¬∫ tempo)\nconst HT_THRESHOLDS = {\n  minMinute: 15,              // S√≥ alertar ap√≥s 15'\n  pressureIndex: 68,          // Press√£o m√≠nima para alerta\n  pressureDelta: 18,          // Surge m√≠nimo\n  goalProbability: 65,        // Probabilidade de gol\n  xGThreshold: 0.32,          // xG acumulado em 5 min\n};\n\nconst FT_THRESHOLDS = {\n  minMinute: 55,              // S√≥ alertar ap√≥s 55'\n  pressureIndex: 72,          // Press√£o mais alta no 2¬∫ tempo\n  pressureDelta: 24,          // Surge maior necess√°rio\n  goalProbability: 70,        // Probabilidade mais exigente\n  sustainedPolls: 2,          // Press√£o sustentada por 2 polls\n  winProbDelta: 12,           // Delta de prob. de vit√≥ria\n};\n\n// Mercados dispon√≠veis na Bet365 com linhas m√≠nimas\nconst BET365_MARKETS = {\n  goals: { min: 1.5, common: [1.5, 2.5, 3.5, 4.5] },\n  corners: { min: 6.5, common: [6.5, 7.5, 8.5, 9.5, 10.5] },\n  cards: { min: 3.5, common: [3.5, 4.5, 5.5] },\n  shotsOnTarget: { min: 4.5, common: [4.5, 5.5, 6.5] },\n};\n\n// Tiers de confian√ßa\nconst CONFIDENCE_TIERS = {\n  PRIME: { min: 85, label: 'PRIME', emoji: 'üèÜ' },\n  CORE: { min: 80, label: 'CORE', emoji: '‚≠ê' },\n  WATCH: { min: 75, label: 'WATCH', emoji: 'üëÅÔ∏è' },\n};\n\n// ==================== MULTI-BOT SYSTEM ====================\n\ninterface FavoritismProfile {\n  teamId: number;\n  teamName: string;\n  isHome: boolean;\n  favoritismScore: number;        // 0-100: quanto esse time √© favorito\n  formScore: number;              // 0-100: forma recente (√∫ltimos 5 jogos)\n  strengthScore: number;          // 0-100: for√ßa ofensiva/defensiva\n  tablePositionDelta: number;     // Diferen√ßa de posi√ß√£o na tabela (-20 a +20)\n  impliedOdds: number;            // Probabilidade impl√≠cita das odds (0-100)\n  homeAdvantage: number;          // Bonus/penalty por jogar casa/fora\n}\n\ninterface BotSignal {\n  botId: string;\n  botName: string;\n  fixtureId: string;\n  teamSide: 'home' | 'away';\n  confidence: number;\n  favoritismScore: number;\n  pressureIndex: number;\n  goalProbability: number;\n  suggestedMarket: string;\n  reasoning: string;\n}\n\ninterface BotStrategy {\n  id: string;\n  name: string;\n  enabled: boolean;\n  evaluate: (\n    fixture: LiveFixture,\n    homeStats: LiveStatistics,\n    awayStats: LiveStatistics,\n    homePressure: PressureCalculation,\n    awayPressure: PressureCalculation,\n    homeProfile: FavoritismProfile,\n    awayProfile: FavoritismProfile,\n    matchMinute: number\n  ) => BotSignal | null;\n}\n\n// Thresholds espec√≠ficos por bot\nconst BOT_THRESHOLDS = {\n  home_favorite: {\n    minPressure: 72,\n    minFavoritism: 75,\n    minGoalProb: 70,\n    minPossessionDelta: 8,\n  },\n  away_dominant: {\n    minPressure: 68,\n    minFavoritism: 80,\n    minGoalProb: 65,\n    minXGDelta: 0.5,\n  },\n  market_favorite: {\n    minPressure: 65,\n    minFavoritism: 85,\n    minGoalProb: 68,\n    minImpliedOdds: 60,\n  },\n  pressure_surge: {\n    minPressure: 60,\n    minSurge: 20,\n    minGoalProb: 72,\n    maxTimeWindow: 5, // minutos\n  },\n};\n\n// Calcular perfil de favoritismo usando TODOS os dados da API-Football\nfunction calculateFavoritismProfile(\n  teamId: number,\n  teamName: string,\n  isHome: boolean,\n  stats: LiveStatistics,\n  opponentStats: LiveStatistics,\n  odds?: OddsData | null\n): FavoritismProfile {\n  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n  // AN√ÅLISE COMPLETA COM DADOS EXPANDIDOS DA API-FOOTBALL\n  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n  \n  // 1. An√°lise de finaliza√ß√µes (peso alto - correla√ß√£o direta com gols)\n  const shotsOnTargetRatio = stats.shotsOnTarget / Math.max(1, stats.shotsOnTarget + opponentStats.shotsOnTarget);\n  const shotsInsideBoxRatio = stats.shotsInsideBox / Math.max(1, stats.shotsInsideBox + opponentStats.shotsInsideBox);\n  const totalShotsRatio = stats.shotsTotal / Math.max(1, stats.shotsTotal + opponentStats.shotsTotal);\n  \n  // 2. An√°lise de xG (Expected Goals)\n  const xGDelta = stats.xG - opponentStats.xG;\n  const xGAdvantage = Math.min(100, Math.max(0, 50 + (xGDelta * 30)));\n  \n  // 3. An√°lise de posse e controle\n  const possessionAdvantage = stats.possession - 50;\n  const passAccuracyAdvantage = stats.passesAccuracy - opponentStats.passesAccuracy;\n  \n  // 4. An√°lise de press√£o e ataques\n  const attackDominance = stats.dangerousAttacks / Math.max(1, stats.dangerousAttacks + opponentStats.dangerousAttacks);\n  const pressureAdvantage = stats.pressureIntensity - opponentStats.pressureIntensity;\n  const cornersRatio = stats.corners / Math.max(1, stats.corners + opponentStats.corners);\n  \n  // 5. An√°lise defensiva\n  const opponentShotsBlocked = opponentStats.shotsBlocked;\n  const savesRatio = opponentStats.saves / Math.max(1, stats.shotsOnTarget); // Quantos chutes o goleiro advers√°rio defendeu\n  const defensiveScore = Math.min(100, 100 - (opponentStats.shotsOnTarget * 6) + (opponentShotsBlocked * 3));\n  \n  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n  // C√ÅLCULO DE SCORES COMPOSTOS\n  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n  \n  // Form score (0-100) - Desempenho ofensivo atual\n  const formScore = Math.min(100, Math.max(0,\n    (shotsOnTargetRatio * 25) +           // Chutes no gol\n    (shotsInsideBoxRatio * 20) +          // Chutes dentro da √°rea\n    (xGAdvantage * 0.25) +                // Vantagem de xG\n    (possessionAdvantage * 0.4 + 40) * 0.15 + // Posse de bola\n    (attackDominance * 100 * 0.15)        // Domin√¢ncia de ataques\n  ));\n  \n  // Strength score (0-100) - For√ßa geral do time\n  const offensiveStrength = Math.min(100, \n    (stats.shotsOnTarget * 6) + \n    (stats.shotsInsideBox * 4) +\n    (stats.dangerousAttacks * 0.6) +\n    (stats.xG * 20)\n  );\n  const strengthScore = (offensiveStrength * 0.55) + (defensiveScore * 0.45);\n  \n  // Pressure dominance (0-100) - Quem est√° pressionando\n  const pressureDominance = Math.min(100, Math.max(0,\n    50 + (pressureAdvantage * 0.5) + (cornersRatio * 30 - 15)\n  ));\n  \n  // Home advantage: +18 para casa, -8 para visitante (ajustado)\n  const homeAdvantage = isHome ? 18 : -8;\n  \n  // Implied odds from pre-match (se dispon√≠vel)\n  let impliedOdds = 50;\n  if (odds) {\n    const teamOdd = isHome ? odds.homeWin : odds.awayWin;\n    impliedOdds = Math.round((1 / teamOdd) * 100);\n  }\n  \n  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n  // FAVORITISMO FINAL (Modelo Composto)\n  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n  const favoritismScore = Math.min(100, Math.max(0,\n    (formScore * 0.30) +              // 30% - Forma atual no jogo\n    (strengthScore * 0.25) +          // 25% - For√ßa geral\n    (pressureDominance * 0.20) +      // 20% - Domin√¢ncia de press√£o\n    (impliedOdds * 0.15) +            // 15% - Odds pr√©-jogo (se dispon√≠vel)\n    homeAdvantage +                    // B√¥nus/penalidade casa/fora\n    10                                 // Base\n  ));\n  \n  return {\n    teamId,\n    teamName,\n    isHome,\n    favoritismScore,\n    formScore,\n    strengthScore,\n    tablePositionDelta: 0, // Seria preenchido com dados da tabela real\n    impliedOdds,\n    homeAdvantage,\n  };\n}\n\n// Estrat√©gia: Bot Fator Casa Favorito (Dados Expandidos)\nconst homeFavoriteBot: BotStrategy = {\n  id: 'home_favorite',\n  name: 'Fator Casa Favorito',\n  enabled: true,\n  evaluate: (fixture, homeStats, awayStats, homePressure, awayPressure, homeProfile, awayProfile, matchMinute) => {\n    const thresholds = BOT_THRESHOLDS.home_favorite;\n    \n    // Verificar se time da casa √© favorito e est√° dominando\n    if (homeProfile.favoritismScore < thresholds.minFavoritism) return null;\n    if (homePressure.pressureIndex < thresholds.minPressure) return null;\n    if (homePressure.goalProbability < thresholds.minGoalProb) return null;\n    \n    const possessionDelta = homeStats.possession - awayStats.possession;\n    if (possessionDelta < thresholds.minPossessionDelta) return null;\n    \n    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n    // AN√ÅLISE COM DADOS EXPANDIDOS DA API-FOOTBALL\n    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n    \n    // Usar xG calculado (mais preciso que chutes)\n    const xGDelta = homeStats.xG - awayStats.xG;\n    const xGBonus = Math.min(10, xGDelta * 8);\n    \n    // Analisar qualidade das chances (chutes dentro da √°rea)\n    const shotsQuality = homeStats.shotsInsideBox / Math.max(1, homeStats.shotsTotal);\n    const qualityBonus = Math.min(8, shotsQuality * 15);\n    \n    // Analisar controle do jogo (precis√£o de passes)\n    const passControlBonus = Math.min(5, (homeStats.passesAccuracy - awayStats.passesAccuracy) * 0.2);\n    \n    // Press√£o intensa (usar m√©trica calculada)\n    const pressureIntensityBonus = Math.min(8, homeStats.pressureIntensity * 0.1);\n    \n    // Calcular confian√ßa com dados expandidos\n    const confidence = Math.min(95, \n      (homeProfile.favoritismScore * 0.25) +\n      (homePressure.pressureIndex * 0.30) +\n      (homePressure.goalProbability * 0.25) +\n      xGBonus +\n      qualityBonus +\n      passControlBonus +\n      pressureIntensityBonus\n    );\n    \n    if (confidence < 75) return null;\n    \n    return {\n      botId: 'home_favorite',\n      botName: 'Fator Casa Favorito',\n      fixtureId: fixture.fixture.id.toString(),\n      teamSide: 'home',\n      confidence,\n      favoritismScore: homeProfile.favoritismScore,\n      pressureIndex: homePressure.pressureIndex,\n      goalProbability: homePressure.goalProbability,\n      suggestedMarket: `Pr√≥ximo Gol: ${fixture.teams.home.name}`,\n      reasoning: `Casa favorita (${homeProfile.favoritismScore.toFixed(0)}%) | xG: ${homeStats.xG.toFixed(2)} vs ${awayStats.xG.toFixed(2)} | Chutes √°rea: ${homeStats.shotsInsideBox} | Press√£o: ${homePressure.pressureIndex.toFixed(0)}%`,\n    };\n  },\n};\n\n// Estrat√©gia: Bot Visitante Superior (Dados Expandidos)\nconst awayDominantBot: BotStrategy = {\n  id: 'away_dominant',\n  name: 'Visitante Superior',\n  enabled: true,\n  evaluate: (fixture, homeStats, awayStats, homePressure, awayPressure, homeProfile, awayProfile, matchMinute) => {\n    const thresholds = BOT_THRESHOLDS.away_dominant;\n    \n    // Verificar se visitante √© muito superior\n    if (awayProfile.favoritismScore < thresholds.minFavoritism) return null;\n    if (awayPressure.pressureIndex < thresholds.minPressure) return null;\n    if (awayPressure.goalProbability < thresholds.minGoalProb) return null;\n    \n    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n    // AN√ÅLISE COM xG REAL DA API-FOOTBALL\n    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n    \n    // Usar xG j√° calculado (modelo preciso baseado em dados reais)\n    const xGDelta = awayStats.xG - homeStats.xG;\n    if (xGDelta < thresholds.minXGDelta) return null;\n    \n    // An√°lise adicional: qualidade de finaliza√ß√£o\n    const awayFinishingQuality = awayStats.shotsOnTarget / Math.max(1, awayStats.shotsTotal);\n    const homeFinishingQuality = homeStats.shotsOnTarget / Math.max(1, homeStats.shotsTotal);\n    const finishingBonus = Math.min(8, (awayFinishingQuality - homeFinishingQuality) * 30);\n    \n    // Visitante com chutes dentro da √°rea (mais perigosos)\n    const areaPresence = awayStats.shotsInsideBox > homeStats.shotsInsideBox ? 5 : 0;\n    \n    // Press√£o intensa do visitante (raro mas poderoso)\n    const pressureBonus = Math.min(10, (awayStats.pressureIntensity - homeStats.pressureIntensity) * 0.15);\n    \n    // Escanteios tamb√©m indicam dom√≠nio\n    const cornersBonus = awayStats.corners > homeStats.corners + 2 ? 5 : 0;\n    \n    // Calcular confian√ßa com dados expandidos\n    const confidence = Math.min(95, \n      (awayProfile.favoritismScore * 0.20) +\n      (awayPressure.pressureIndex * 0.25) +\n      (awayPressure.goalProbability * 0.20) +\n      (Math.min(15, xGDelta * 10)) +\n      finishingBonus +\n      areaPresence +\n      pressureBonus +\n      cornersBonus\n    );\n    \n    if (confidence < 75) return null;\n    \n    return {\n      botId: 'away_dominant',\n      botName: 'Visitante Superior',\n      fixtureId: fixture.fixture.id.toString(),\n      teamSide: 'away',\n      confidence,\n      favoritismScore: awayProfile.favoritismScore,\n      pressureIndex: awayPressure.pressureIndex,\n      goalProbability: awayPressure.goalProbability,\n      suggestedMarket: `Pr√≥ximo Gol: ${fixture.teams.away.name}`,\n      reasoning: `Visitante dominante | xG: ${awayStats.xG.toFixed(2)} vs ${homeStats.xG.toFixed(2)} (+${xGDelta.toFixed(2)}) | Chutes gol: ${awayStats.shotsOnTarget} | √Årea: ${awayStats.shotsInsideBox}`,\n    };\n  },\n};\n\n// Estrat√©gia: Bot Favorito do Mercado (Dados Expandidos + Odds)\nconst marketFavoriteBot: BotStrategy = {\n  id: 'market_favorite',\n  name: 'Favorito do Mercado',\n  enabled: true,\n  evaluate: (fixture, homeStats, awayStats, homePressure, awayPressure, homeProfile, awayProfile, matchMinute) => {\n    const thresholds = BOT_THRESHOLDS.market_favorite;\n    \n    // Determinar qual time √© o grande favorito (inclui odds pr√©-jogo)\n    const isBigHomeFavorite = homeProfile.favoritismScore >= thresholds.minFavoritism;\n    const isBigAwayFavorite = awayProfile.favoritismScore >= thresholds.minFavoritism;\n    \n    if (!isBigHomeFavorite && !isBigAwayFavorite) return null;\n    \n    const favoriteProfile = isBigHomeFavorite ? homeProfile : awayProfile;\n    const favoritePressure = isBigHomeFavorite ? homePressure : awayPressure;\n    const favoriteStats = isBigHomeFavorite ? homeStats : awayStats;\n    const opponentStats = isBigHomeFavorite ? awayStats : homeStats;\n    const favoriteTeam = isBigHomeFavorite ? fixture.teams.home : fixture.teams.away;\n    const teamSide: 'home' | 'away' = isBigHomeFavorite ? 'home' : 'away';\n    \n    if (favoritePressure.pressureIndex < thresholds.minPressure) return null;\n    if (favoritePressure.goalProbability < thresholds.minGoalProb) return null;\n    \n    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n    // AN√ÅLISE COM DADOS EXPANDIDOS + ODDS\n    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n    \n    // B√¥nus por implied odds alto (vindo das casas de apostas)\n    const impliedOddsBonus = Math.min(10, (favoriteProfile.impliedOdds - 50) * 0.2);\n    \n    // xG dominance\n    const xGDelta = favoriteStats.xG - opponentStats.xG;\n    const xGBonus = Math.min(8, xGDelta * 6);\n    \n    // Controle territorial (passes + press√£o)\n    const passControl = favoriteStats.passesAccuracy > opponentStats.passesAccuracy ? 4 : 0;\n    const pressureControl = favoriteStats.pressureIntensity > opponentStats.pressureIntensity ? 4 : 0;\n    \n    // Perigo ofensivo (chutes dentro da √°rea + defesas do goleiro advers√°rio)\n    const shotsDanger = Math.min(6, favoriteStats.shotsInsideBox * 1.5);\n    const savesForced = Math.min(5, opponentStats.saves * 1.2); // Goleiro advers√°rio trabalhando\n    \n    // Calcular confian√ßa com dados expandidos\n    const confidence = Math.min(95, \n      (favoriteProfile.favoritismScore * 0.25) +\n      (favoritePressure.pressureIndex * 0.25) +\n      (favoritePressure.goalProbability * 0.20) +\n      impliedOddsBonus +\n      xGBonus +\n      passControl +\n      pressureControl +\n      shotsDanger +\n      savesForced\n    );\n    \n    if (confidence < 78) return null;\n    \n    return {\n      botId: 'market_favorite',\n      botName: 'Favorito do Mercado',\n      fixtureId: fixture.fixture.id.toString(),\n      teamSide,\n      confidence,\n      favoritismScore: favoriteProfile.favoritismScore,\n      pressureIndex: favoritePressure.pressureIndex,\n      goalProbability: favoritePressure.goalProbability,\n      suggestedMarket: `${favoriteTeam.name} Vence ou Empata`,\n      reasoning: `Favorito mercado (${favoriteProfile.impliedOdds.toFixed(0)}% odds) | xG: ${favoriteStats.xG.toFixed(2)} | Chutes √°rea: ${favoriteStats.shotsInsideBox} | Defesas for√ßadas: ${opponentStats.saves}`,\n    };\n  },\n};\n\n// Estrat√©gia: Bot Explos√£o de Press√£o (Dados Expandidos)\nconst pressureSurgeBot: BotStrategy = {\n  id: 'pressure_surge',\n  name: 'Explos√£o de Press√£o',\n  enabled: true,\n  evaluate: (fixture, homeStats, awayStats, homePressure, awayPressure, homeProfile, awayProfile, matchMinute) => {\n    const thresholds = BOT_THRESHOLDS.pressure_surge;\n    \n    // Verificar surge de press√£o (delta alto)\n    const homeSurge = homePressure.pressureDelta >= thresholds.minSurge;\n    const awaySurge = awayPressure.pressureDelta >= thresholds.minSurge;\n    \n    if (!homeSurge && !awaySurge) return null;\n    \n    const surgingPressure = homeSurge ? homePressure : awayPressure;\n    const surgingStats = homeSurge ? homeStats : awayStats;\n    const opponentStats = homeSurge ? awayStats : homeStats;\n    const surgingTeam = homeSurge ? fixture.teams.home : fixture.teams.away;\n    const teamSide: 'home' | 'away' = homeSurge ? 'home' : 'away';\n    const surgingProfile = homeSurge ? homeProfile : awayProfile;\n    \n    if (surgingPressure.pressureIndex < thresholds.minPressure) return null;\n    if (surgingPressure.goalProbability < thresholds.minGoalProb) return null;\n    \n    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n    // AN√ÅLISE DE SURGE COM DADOS EXPANDIDOS\n    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n    \n    // Calcular surge baseado em m√∫ltiplas m√©tricas\n    const surgeBonus = Math.min(15, (surgingPressure.pressureDelta - thresholds.minSurge) * 1.5);\n    \n    // Verificar se o surge √© suportado por m√©tricas ofensivas\n    const xGRecent = surgingStats.xG; // xG acumulado (proxy para momento)\n    const shotsRecentBonus = Math.min(8, surgingStats.shotsOnTarget * 2);\n    \n    // Chutes dentro da √°rea indicam perigo real\n    const areaPresenceBonus = Math.min(6, surgingStats.shotsInsideBox * 2);\n    \n    // Escanteios recentes indicam press√£o territorial\n    const cornersBonus = surgingStats.corners > opponentStats.corners + 1 ? 4 : 0;\n    \n    // Ataques perigosos vs normais\n    const dangerRatio = surgingStats.dangerousAttacks / Math.max(1, surgingStats.attacks);\n    const dangerBonus = Math.min(5, dangerRatio * 10);\n    \n    // Press√£o intensa crescente\n    const pressureIntensityBonus = Math.min(6, surgingStats.pressureIntensity * 0.08);\n    \n    const confidence = Math.min(95, \n      (surgingPressure.pressureIndex * 0.25) +\n      (surgingPressure.goalProbability * 0.25) +\n      surgeBonus +\n      (surgingProfile.favoritismScore * 0.10) +\n      shotsRecentBonus +\n      areaPresenceBonus +\n      cornersBonus +\n      dangerBonus +\n      pressureIntensityBonus\n    );\n    \n    if (confidence < 75) return null;\n    \n    return {\n      botId: 'pressure_surge',\n      botName: 'Explos√£o de Press√£o',\n      fixtureId: fixture.fixture.id.toString(),\n      teamSide,\n      confidence,\n      favoritismScore: surgingProfile.favoritismScore,\n      pressureIndex: surgingPressure.pressureIndex,\n      goalProbability: surgingPressure.goalProbability,\n      suggestedMarket: `Pr√≥ximo Gol em 5min`,\n      reasoning: `üî• SURGE +${surgingPressure.pressureDelta.toFixed(0)}% | xG: ${surgingStats.xG.toFixed(2)} | Chutes gol: ${surgingStats.shotsOnTarget} | √Årea: ${surgingStats.shotsInsideBox} | Corners: ${surgingStats.corners}`,\n    };\n  },\n};\n\n// Array de todos os bots\nconst ALL_BOT_STRATEGIES: BotStrategy[] = [\n  homeFavoriteBot,\n  awayDominantBot,\n  marketFavoriteBot,\n  pressureSurgeBot,\n];\n\n// Ligas priorit√°rias com alta liquidez e dados confi√°veis\nconst MAJOR_LEAGUES = [\n  // Tier 1 - Top 5 Europa\n  39,   // Premier League (Inglaterra)\n  140,  // La Liga (Espanha)\n  135,  // Serie A (It√°lia)\n  78,   // Bundesliga (Alemanha)\n  61,   // Ligue 1 (Fran√ßa)\n  \n  // Tier 2 - Competi√ß√µes Europeias\n  2,    // UEFA Champions League\n  3,    // UEFA Europa League\n  848,  // UEFA Conference League\n  \n  // Tier 3 - Ligas Secund√°rias Europa\n  94,   // Primeira Liga (Portugal)\n  88,   // Eredivisie (Holanda)\n  144,  // Jupiler Pro League (B√©lgica)\n  203,  // S√ºper Lig (Turquia)\n  179,  // Premiership (Esc√≥cia)\n  \n  // Tier 4 - Am√©rica do Sul\n  71,   // Brasileir√£o S√©rie A\n  128,  // Argentina - Liga Profesional\n  13,   // Copa Libertadores\n  11,   // Copa Sudamericana\n  \n  // Tier 5 - Outros mercados importantes\n  40,   // Championship (Inglaterra 2¬™ divis√£o)\n  141,  // La Liga 2 (Espanha)\n  307,  // Saudi Pro League\n  253,  // MLS (EUA)\n];\n\n// Ligas a EXCLUIR (Sub-21, Amistosos, Baixa Liquidez)\nconst EXCLUDED_LEAGUES_PATTERNS = [\n  'U19', 'U20', 'U21', 'U23',           // Categorias de base\n  'Youth', 'J√∫nior', 'Junior',\n  'Reservas', 'Reserve',\n  'Amistoso', 'Friendly', 'Club Friendly',\n  'Women', 'Feminino',                   // Mercado separado\n];\n\nconst EXCLUDED_LEAGUE_IDS = [\n  // IDs espec√≠ficos de ligas a evitar\n  667,  // Friendlies Clubs\n  10,   // Friendlies\n];\n\n// Fun√ß√£o para verificar se liga deve ser exclu√≠da\nfunction isLeagueExcluded(leagueName: string, leagueId: number): boolean {\n  if (EXCLUDED_LEAGUE_IDS.includes(leagueId)) return true;\n  const upperName = leagueName.toUpperCase();\n  return EXCLUDED_LEAGUES_PATTERNS.some(pattern => \n    upperName.includes(pattern.toUpperCase())\n  );\n}\n\nclass LivePressureMonitorService {\n  private isRunning = false;\n  private pollInterval: NodeJS.Timeout | null = null;\n  private fixtureCache: Map<string, LiveFixture> = new Map();\n  private lastSnapshotMap: Map<string, { homePressure: number; awayPressure: number }> = new Map();\n  \n  private defaultSettings = {\n    pressureAlertThreshold: 70,\n    pressureSurgeThreshold: 25,\n    sustainedPressureIntervals: 2,\n    goalProbabilityAlertThreshold: 75,\n  };\n\n  async start(intervalMs: number = 45000) {\n    if (this.isRunning) {\n      console.log('[LIVE MONITOR] Already running');\n      return;\n    }\n\n    console.log(`[LIVE MONITOR] Starting with ${intervalMs}ms interval...`);\n    this.isRunning = true;\n    \n    await this.poll();\n    \n    this.pollInterval = setInterval(() => {\n      this.poll().catch(err => {\n        console.error('[LIVE MONITOR] Poll error:', err.message);\n      });\n    }, intervalMs);\n  }\n\n  stop() {\n    if (this.pollInterval) {\n      clearInterval(this.pollInterval);\n      this.pollInterval = null;\n    }\n    this.isRunning = false;\n    console.log('[LIVE MONITOR] Stopped');\n  }\n\n  async poll() {\n    try {\n      const liveFixtures = await this.fetchLiveFixtures();\n      \n      if (liveFixtures.length === 0) {\n        console.log('[LIVE MONITOR] No live fixtures found');\n        return;\n      }\n\n      // Primeiro: excluir ligas ruins (Sub-21, amistosos, etc.)\n      const cleanFixtures = liveFixtures.filter(f => \n        !isLeagueExcluded(f.league.name, f.league.id)\n      );\n\n      console.log(`[LIVE MONITOR] ${liveFixtures.length} ao vivo, ${cleanFixtures.length} ap√≥s filtro de qualidade`);\n\n      // Priorizar ligas principais\n      const priorityFixtures = cleanFixtures.filter(f => \n        MAJOR_LEAGUES.includes(f.league.id)\n      );\n\n      // Se n√£o tiver ligas principais, pegar outras ligas limpas\n      const fixturesToProcess = priorityFixtures.length > 0 \n        ? priorityFixtures.slice(0, 25)  // Aumentado para 25 ligas top\n        : cleanFixtures.slice(0, 15);     // At√© 15 outras ligas\n\n      console.log(`[LIVE MONITOR] Processando ${fixturesToProcess.length} jogos priorit√°rios`);\n\n      for (const fixture of fixturesToProcess) {\n        await this.processFixture(fixture);\n        await this.delay(150); // Reduzido delay para processar mais r√°pido\n      }\n\n    } catch (error: any) {\n      console.error('[LIVE MONITOR] Poll error:', error.message);\n    }\n  }\n\n  private async fetchLiveFixtures(): Promise<LiveFixture[]> {\n    if (!API_FOOTBALL_KEY) {\n      console.error('[LIVE MONITOR] API_FOOTBALL_KEY not configured');\n      return [];\n    }\n\n    try {\n      const response = await axios.get(`${API_FOOTBALL_BASE_URL}/fixtures`, {\n        params: { live: 'all' },\n        headers: { 'x-apisports-key': API_FOOTBALL_KEY },\n        timeout: 10000,\n      });\n\n      return response.data?.response || [];\n    } catch (error: any) {\n      console.error('[LIVE MONITOR] Failed to fetch live fixtures:', error.message);\n      return [];\n    }\n  }\n\n  private async fetchFixtureStatistics(fixtureId: number): Promise<LiveFixture['statistics'] | null> {\n    if (!API_FOOTBALL_KEY) return null;\n\n    try {\n      const response = await axios.get(`${API_FOOTBALL_BASE_URL}/fixtures/statistics`, {\n        params: { fixture: fixtureId },\n        headers: { 'x-apisports-key': API_FOOTBALL_KEY },\n        timeout: 10000,\n      });\n\n      return response.data?.response || null;\n    } catch (error: any) {\n      console.error(`[LIVE MONITOR] Failed to fetch statistics for fixture ${fixtureId}:`, error.message);\n      return null;\n    }\n  }\n\n  private parseStatistics(statsArray: LiveFixture['statistics'], teamId: number): LiveStatistics {\n    const defaultStats: LiveStatistics = {\n      possession: 50,\n      passesTotal: 0,\n      passesAccuracy: 0,\n      shotsTotal: 0,\n      shotsOnTarget: 0,\n      shotsOffTarget: 0,\n      shotsBlocked: 0,\n      shotsInsideBox: 0,\n      shotsOutsideBox: 0,\n      dangerousAttacks: 0,\n      attacks: 0,\n      corners: 0,\n      freeKicks: 0,\n      throwIns: 0,\n      goalKicks: 0,\n      saves: 0,\n      offsides: 0,\n      fouls: 0,\n      yellowCards: 0,\n      redCards: 0,\n      xG: 0,\n      pressureIntensity: 0,\n    };\n\n    if (!statsArray) return defaultStats;\n\n    const teamStats = statsArray.find(s => s.team.id === teamId);\n    if (!teamStats) return defaultStats;\n\n    const getValue = (type: string): number => {\n      const stat = teamStats.statistics.find(s => s.type.toLowerCase().includes(type.toLowerCase()));\n      if (!stat || stat.value === null) return 0;\n      const val = typeof stat.value === 'string' ? parseFloat(stat.value.replace('%', '')) : stat.value;\n      return isNaN(val) ? 0 : val;\n    };\n\n    // Extrair TODOS os dados dispon√≠veis da API-Football\n    const shotsOnTarget = getValue('shots on goal');\n    const shotsOffTarget = getValue('shots off goal');\n    const shotsBlocked = getValue('blocked shots');\n    const shotsInsideBox = getValue('shots insidebox');\n    const shotsOutsideBox = getValue('shots outsidebox');\n    const dangerousAttacks = getValue('dangerous') || getValue('attacks') * 0.3;\n    const attacks = getValue('attacks');\n    const corners = getValue('corner');\n    const passesTotal = getValue('total passes');\n    const passesAccuracy = getValue('passes %') || getValue('passes accurate');\n    \n    // Calcular xG estimado baseado em chutes\n    // Modelo simplificado: chute na √°rea = 0.12 xG, fora = 0.04 xG, no gol = 0.35 xG\n    const xG = (shotsOnTarget * 0.35) + \n               (shotsInsideBox * 0.12) + \n               (shotsOutsideBox * 0.04) -\n               (shotsOnTarget * 0.12); // Evitar contagem dupla\n    \n    // Calcular intensidade de press√£o (0-100)\n    const pressureIntensity = Math.min(100, \n      (dangerousAttacks * 1.5) + \n      (shotsOnTarget * 8) + \n      (corners * 3) +\n      (attacks * 0.5)\n    );\n\n    return {\n      possession: getValue('possession') || 50,\n      passesTotal,\n      passesAccuracy,\n      shotsTotal: getValue('total shots') || shotsOnTarget + shotsOffTarget,\n      shotsOnTarget,\n      shotsOffTarget,\n      shotsBlocked,\n      shotsInsideBox,\n      shotsOutsideBox,\n      dangerousAttacks,\n      attacks,\n      corners,\n      freeKicks: getValue('free kicks') || 0,\n      throwIns: getValue('throw') || 0,\n      goalKicks: getValue('goal kicks') || getValue('goalkeeper') || 0,\n      saves: getValue('goalkeeper saves') || getValue('saves') || 0,\n      offsides: getValue('offsides') || 0,\n      fouls: getValue('fouls'),\n      yellowCards: getValue('yellow'),\n      redCards: getValue('red'),\n      xG: Math.round(xG * 100) / 100,\n      pressureIntensity,\n    };\n  }\n\n  // Buscar eventos do jogo (gols, cart√µes, substitui√ß√µes)\n  private async fetchFixtureEvents(fixtureId: number): Promise<MatchEvent[]> {\n    if (!API_FOOTBALL_KEY) return [];\n\n    try {\n      const response = await axios.get(`${API_FOOTBALL_BASE_URL}/fixtures/events`, {\n        params: { fixture: fixtureId },\n        headers: { 'x-apisports-key': API_FOOTBALL_KEY },\n        timeout: 10000,\n      });\n\n      const events = response.data?.response || [];\n      return events.map((e: any) => ({\n        time: e.time?.elapsed || 0,\n        type: this.mapEventType(e.type),\n        teamId: e.team?.id || 0,\n        playerId: e.player?.id,\n        playerName: e.player?.name,\n        assistId: e.assist?.id,\n        assistName: e.assist?.name,\n        detail: e.detail,\n      }));\n    } catch (error: any) {\n      console.error(`[LIVE MONITOR] Failed to fetch events for fixture ${fixtureId}:`, error.message);\n      return [];\n    }\n  }\n\n  private mapEventType(type: string): MatchEvent['type'] {\n    const lower = type?.toLowerCase() || '';\n    if (lower.includes('goal')) return 'goal';\n    if (lower.includes('card')) return 'card';\n    if (lower.includes('subst')) return 'subst';\n    if (lower.includes('var')) return 'var';\n    if (lower.includes('penalty')) return 'penalty';\n    return 'goal';\n  }\n\n  // Buscar odds pr√©-jogo\n  private async fetchFixtureOdds(fixtureId: number): Promise<OddsData | null> {\n    if (!API_FOOTBALL_KEY) return null;\n\n    try {\n      const response = await axios.get(`${API_FOOTBALL_BASE_URL}/odds`, {\n        params: { fixture: fixtureId },\n        headers: { 'x-apisports-key': API_FOOTBALL_KEY },\n        timeout: 10000,\n      });\n\n      const oddsData = response.data?.response?.[0]?.bookmakers?.[0]?.bets || [];\n      \n      // Extrair Match Winner (1X2)\n      const matchWinner = oddsData.find((b: any) => b.name === 'Match Winner')?.values || [];\n      const homeOdd = parseFloat(matchWinner.find((v: any) => v.value === 'Home')?.odd || '2.0');\n      const drawOdd = parseFloat(matchWinner.find((v: any) => v.value === 'Draw')?.odd || '3.0');\n      const awayOdd = parseFloat(matchWinner.find((v: any) => v.value === 'Away')?.odd || '2.0');\n\n      // Extrair Over/Under 2.5\n      const overUnder = oddsData.find((b: any) => b.name === 'Goals Over/Under')?.values || [];\n      const over25 = parseFloat(overUnder.find((v: any) => v.value === 'Over 2.5')?.odd || '1.9');\n      const over15 = parseFloat(overUnder.find((v: any) => v.value === 'Over 1.5')?.odd || '1.4');\n\n      // Extrair BTTS\n      const btts = oddsData.find((b: any) => b.name === 'Both Teams Score')?.values || [];\n      const bttsYes = parseFloat(btts.find((v: any) => v.value === 'Yes')?.odd || '1.8');\n\n      return {\n        homeWin: homeOdd,\n        draw: drawOdd,\n        awayWin: awayOdd,\n        over15,\n        over25,\n        bttsYes,\n      };\n    } catch (error: any) {\n      console.error(`[LIVE MONITOR] Failed to fetch odds for fixture ${fixtureId}:`, error.message);\n      return null;\n    }\n  }\n\n  // Converter odds para probabilidade impl√≠cita (0-100)\n  private oddsToImpliedProbability(odd: number): number {\n    if (odd <= 1) return 100;\n    return Math.round((1 / odd) * 100);\n  }\n\n  private calculatePressure(\n    stats: LiveStatistics, \n    matchMinute: number,\n    opponentStats: LiveStatistics\n  ): PressureCalculation {\n    const normalizedMinute = Math.max(1, matchMinute);\n    \n    // Multiplicador de tempo: press√£o no final do jogo tem mais peso\n    const timeMultiplier = matchMinute > 80 ? 1.4 : matchMinute > 70 ? 1.25 : matchMinute > 60 ? 1.15 : 1;\n    \n    // Normaliza√ß√£o por minuto (projetado para 90 minutos)\n    const shotsPerMinute = stats.shotsOnTarget / normalizedMinute * 90;\n    const cornersPerMinute = stats.corners / normalizedMinute * 90;\n    const dangerousPerMinute = stats.dangerousAttacks / normalizedMinute * 90;\n    const attacksPerMinute = stats.attacks / normalizedMinute * 90;\n    \n    // Delta de posse CONTRA oponente (n√£o apenas vs 50%)\n    const possessionSwing = stats.possession - opponentStats.possession;\n    \n    // Ritmo de cart√µes (indicador de intensidade)\n    const cardsPerMinute = (stats.yellowCards + stats.redCards * 2) / normalizedMinute * 90;\n    \n    // xG aproximado de cada time\n    const teamXG = (stats.shotsOnTarget * 0.35 + (stats.shotsTotal - stats.shotsOnTarget) * 0.08);\n    const opponentXG = (opponentStats.shotsOnTarget * 0.35 + (opponentStats.shotsTotal - opponentStats.shotsOnTarget) * 0.08);\n    \n    // xG DELTA: diferen√ßa entre xG do time vs oponente\n    const xGDelta = teamXG - opponentXG;\n    \n    // F√≥rmula calibrada cientificamente\n    // Cada m√©trica √© normalizada para escala 0-100 antes de aplicar peso\n    const normalizedShots = Math.min(100, shotsPerMinute * 8);             // ~12 chutes/90min = 100\n    const normalizedDangerous = Math.min(100, dangerousPerMinute * 1.5);   // ~66 ataques perigosos = 100\n    const normalizedXGDelta = Math.min(100, Math.max(0, (xGDelta + 1.5) * 33.33)); // Delta -1.5 a +1.5 normalizado\n    const normalizedCorners = Math.min(100, cornersPerMinute * 10);        // ~10 escanteios = 100\n    const normalizedPossession = Math.min(100, Math.max(0, possessionSwing * 2 + 50)); // Swing -25 a +25\n    const normalizedCards = Math.min(100, cardsPerMinute * 20);            // ~5 cart√µes = 100\n    const normalizedAttacks = Math.min(100, attacksPerMinute * 0.8);       // ~125 ataques = 100\n    \n    let pressureIndex = \n      (normalizedShots * PRESSURE_WEIGHTS.shotsOnTarget) +\n      (normalizedDangerous * PRESSURE_WEIGHTS.dangerousAttacks) +\n      (normalizedXGDelta * PRESSURE_WEIGHTS.xGDelta) +\n      (normalizedCorners * PRESSURE_WEIGHTS.corners) +\n      (normalizedPossession * PRESSURE_WEIGHTS.possessionSwing) +\n      (normalizedCards * PRESSURE_WEIGHTS.cardsTempo) +\n      (normalizedAttacks * PRESSURE_WEIGHTS.totalAttacks);\n    \n    // Aplicar multiplicador de tempo\n    pressureIndex *= timeMultiplier;\n    \n    // Limitar entre 0-100\n    pressureIndex = Math.min(100, Math.max(0, pressureIndex));\n    \n    // C√°lculo de probabilidade de gol usando distribui√ß√£o Poisson ajustada\n    const baseGoalRate = 0.028; // Taxa base: ~2.5 gols/jogo = 0.028/minuto\n    const pressureMultiplier = 1 + (pressureIndex / 100) * 2.5;\n    const adjustedGoalRate = baseGoalRate * pressureMultiplier;\n    \n    // Probabilidade de pelo menos 1 gol nos pr√≥ximos 5 minutos\n    const lambda5min = adjustedGoalRate * 5;\n    const goalProbability5Min = (1 - Math.exp(-lambda5min)) * 100;\n    \n    return {\n      pressureIndex: Math.round(pressureIndex * 100) / 100,\n      goalProbability: Math.round(Math.min(95, goalProbability5Min) * 100) / 100,\n      pressureDelta: 0,\n    };\n  }\n\n  private async processFixture(fixture: LiveFixture) {\n    const fixtureId = fixture.fixture.id.toString();\n    const matchMinute = fixture.fixture.status.elapsed || 0;\n    const matchStatus = fixture.fixture.status.short;\n\n    if (!['1H', '2H', 'ET', 'P', 'BT'].includes(matchStatus)) {\n      return;\n    }\n\n    const statistics = await this.fetchFixtureStatistics(fixture.fixture.id);\n    \n    const homeStats = this.parseStatistics(statistics || [], fixture.teams.home.id);\n    const awayStats = this.parseStatistics(statistics || [], fixture.teams.away.id);\n\n    // Passar stats do oponente para c√°lculo correto de xG delta e posse swing\n    const homePressure = this.calculatePressure(homeStats, matchMinute, awayStats);\n    const awayPressure = this.calculatePressure(awayStats, matchMinute, homeStats);\n\n    const lastSnapshot = this.lastSnapshotMap.get(fixtureId);\n    if (lastSnapshot) {\n      homePressure.pressureDelta = homePressure.pressureIndex - lastSnapshot.homePressure;\n      awayPressure.pressureDelta = awayPressure.pressureIndex - lastSnapshot.awayPressure;\n    }\n\n    this.lastSnapshotMap.set(fixtureId, {\n      homePressure: homePressure.pressureIndex,\n      awayPressure: awayPressure.pressureIndex,\n    });\n\n    const snapshot: InsertLivePressureSnapshot = {\n      fixtureId,\n      league: fixture.league.name,\n      leagueId: fixture.league.id.toString(),\n      homeTeam: fixture.teams.home.name,\n      awayTeam: fixture.teams.away.name,\n      homeTeamLogo: fixture.teams.home.logo,\n      awayTeamLogo: fixture.teams.away.logo,\n      matchMinute: matchMinute.toString(),\n      homeScore: (fixture.goals.home || 0).toString(),\n      awayScore: (fixture.goals.away || 0).toString(),\n      matchStatus,\n      homePossession: homeStats.possession.toString(),\n      awayPossession: awayStats.possession.toString(),\n      homeShotsTotal: homeStats.shotsTotal.toString(),\n      awayShotsTotal: awayStats.shotsTotal.toString(),\n      homeShotsOnTarget: homeStats.shotsOnTarget.toString(),\n      awayShotsOnTarget: awayStats.shotsOnTarget.toString(),\n      homeCorners: homeStats.corners.toString(),\n      awayCorners: awayStats.corners.toString(),\n      homeDangerousAttacks: homeStats.dangerousAttacks.toString(),\n      awayDangerousAttacks: awayStats.dangerousAttacks.toString(),\n      homeAttacks: homeStats.attacks.toString(),\n      awayAttacks: awayStats.attacks.toString(),\n      homePressureIndex: homePressure.pressureIndex.toString(),\n      awayPressureIndex: awayPressure.pressureIndex.toString(),\n      homeGoalProbability: homePressure.goalProbability.toString(),\n      awayGoalProbability: awayPressure.goalProbability.toString(),\n      homePressureDelta: homePressure.pressureDelta.toString(),\n      awayPressureDelta: awayPressure.pressureDelta.toString(),\n      alertTriggered: false,\n      alertType: null,\n    };\n\n    const [insertedSnapshot] = await db.insert(livePressureSnapshots).values(snapshot).returning();\n\n    await this.checkAndTriggerAlerts(insertedSnapshot, fixture, homePressure, awayPressure, homeStats, awayStats);\n  }\n\n  private async checkAndTriggerAlerts(\n    snapshot: any,\n    fixture: LiveFixture,\n    homePressure: PressureCalculation,\n    awayPressure: PressureCalculation,\n    homeStats: LiveStatistics,\n    awayStats: LiveStatistics\n  ) {\n    const fixtureId = fixture.fixture.id.toString();\n    const matchMinute = fixture.fixture.status.elapsed || 0;\n    const matchStatus = fixture.fixture.status.short;\n    \n    // Determinar se estamos no 1¬∫ tempo (HT) ou 2¬∫ tempo (FT)\n    const isFirstHalf = matchStatus === '1H' || matchMinute <= 45;\n    const thresholds = isFirstHalf ? HT_THRESHOLDS : FT_THRESHOLDS;\n    \n    // Verificar minuto m√≠nimo para alertar\n    if (matchMinute < thresholds.minMinute) {\n      return; // Muito cedo para alertar\n    }\n\n    // Evitar alertas duplicados nos √∫ltimos 5 minutos\n    const recentAlerts = await db.select()\n      .from(liveAlerts)\n      .where(and(\n        eq(liveAlerts.fixtureId, fixtureId),\n        gte(liveAlerts.createdAt, new Date(Date.now() - 5 * 60 * 1000))\n      ))\n      .limit(1);\n\n    if (recentAlerts.length > 0) {\n      return;\n    }\n\n    // Buscar odds pr√©-jogo para c√°lculo de favoritismo (cache: 1x por jogo)\n    let odds: OddsData | null = null;\n    try {\n      odds = await this.fetchFixtureOdds(fixture.fixture.id);\n    } catch (e) {\n      // Odds n√£o dispon√≠veis, continuar sem\n    }\n\n    // Calcular perfis de favoritismo para os bots (com dados estendidos)\n    const homeProfile = calculateFavoritismProfile(\n      fixture.teams.home.id,\n      fixture.teams.home.name,\n      true,\n      homeStats,\n      awayStats,\n      odds\n    );\n    const awayProfile = calculateFavoritismProfile(\n      fixture.teams.away.id,\n      fixture.teams.away.name,\n      false,\n      awayStats,\n      homeStats,\n      odds\n    );\n\n    // ==================== MULTI-BOT ORCHESTRATOR ====================\n    // Executar todos os bots em paralelo\n    const botSignals: BotSignal[] = [];\n    \n    for (const bot of ALL_BOT_STRATEGIES) {\n      if (!bot.enabled) continue;\n      \n      try {\n        const signal = bot.evaluate(\n          fixture,\n          homeStats,\n          awayStats,\n          homePressure,\n          awayPressure,\n          homeProfile,\n          awayProfile,\n          matchMinute\n        );\n        \n        if (signal) {\n          botSignals.push(signal);\n          console.log(`[BOT ${bot.id.toUpperCase()}] Signal: ${signal.reasoning} (${signal.confidence.toFixed(0)}%)`);\n        }\n      } catch (err) {\n        console.error(`[BOT ${bot.id}] Error:`, err);\n      }\n    }\n\n    // Criar alerta para o melhor sinal (maior confian√ßa)\n    if (botSignals.length > 0) {\n      const bestSignal = botSignals.reduce((a, b) => a.confidence > b.confidence ? a : b);\n      \n      await this.createBotAlert(snapshot, fixture, bestSignal, isFirstHalf);\n      return; // Bot j√° criou alerta\n    }\n\n    // Fallback: L√≥gica de alerta padr√£o baseada em HT/FT\n    const shouldAlertHome = this.evaluateAlertCondition(homePressure, thresholds, isFirstHalf);\n    const shouldAlertAway = this.evaluateAlertCondition(awayPressure, thresholds, isFirstHalf);\n\n    if (shouldAlertHome) {\n      const confidence = this.calculateConfidenceTier(homePressure, thresholds);\n      await this.createAlert(snapshot, fixture, 'home', homePressure, confidence, isFirstHalf);\n    }\n\n    if (shouldAlertAway) {\n      const confidence = this.calculateConfidenceTier(awayPressure, thresholds);\n      await this.createAlert(snapshot, fixture, 'away', awayPressure, confidence, isFirstHalf);\n    }\n  }\n\n  private async createBotAlert(\n    snapshot: any,\n    fixture: LiveFixture,\n    signal: BotSignal,\n    isFirstHalf: boolean\n  ) {\n    const matchMinute = fixture.fixture.status.elapsed || 0;\n    const score = `${fixture.goals.home || 0}-${fixture.goals.away || 0}`;\n    const team = signal.teamSide === 'home' ? fixture.teams.home : fixture.teams.away;\n    \n    // Determinar tier de confian√ßa\n    const tier = signal.confidence >= 85 ? CONFIDENCE_TIERS.PRIME :\n                 signal.confidence >= 80 ? CONFIDENCE_TIERS.CORE :\n                 CONFIDENCE_TIERS.WATCH;\n    \n    const halfLabel = isFirstHalf ? '1T' : '2T';\n    \n    const alert: InsertLiveAlert = {\n      fixtureId: signal.fixtureId,\n      snapshotId: snapshot.id,\n      alertType: 'imminent_goal',\n      teamSide: signal.teamSide,\n      pressureIndex: signal.pressureIndex.toString(),\n      goalProbability: signal.goalProbability.toString(),\n      alertTitle: `${tier.emoji} [${signal.botName}] ${team.name}`,\n      alertMessage: `[${halfLabel} ${matchMinute}'] ${signal.reasoning}\\n\\nüí∞ Mercado: ${signal.suggestedMarket}\\nüìä Confian√ßa: ${signal.confidence.toFixed(0)}% | Press√£o: ${signal.pressureIndex.toFixed(0)}%`,\n      matchMinute: matchMinute.toString(),\n      currentScore: score,\n      notificationSent: false,\n    };\n\n    await db.insert(liveAlerts).values(alert);\n    \n    // Registrar estat√≠sticas do bot\n    const state = botState.get(signal.botId);\n    if (state) {\n      state.alertCount++;\n      botState.set(signal.botId, state);\n    }\n    \n    console.log(`[MULTI-BOT ALERT] ${signal.botName}: ${team.name} (${signal.confidence.toFixed(0)}% conf)`);\n  }\n\n  private evaluateAlertCondition(\n    pressure: PressureCalculation, \n    thresholds: typeof HT_THRESHOLDS | typeof FT_THRESHOLDS,\n    isFirstHalf: boolean\n  ): boolean {\n    // Condi√ß√£o 1: Press√£o acima do threshold\n    const highPressure = pressure.pressureIndex >= thresholds.pressureIndex;\n    \n    // Condi√ß√£o 2: Surge de press√£o (aumento r√°pido)\n    const pressureSurge = pressure.pressureDelta >= thresholds.pressureDelta;\n    \n    // Condi√ß√£o 3: Alta probabilidade de gol\n    const highGoalProb = pressure.goalProbability >= thresholds.goalProbability;\n    \n    // Para alertar, precisa de pelo menos 2 condi√ß√µes OU probabilidade muito alta\n    const conditionsMet = [highPressure, pressureSurge, highGoalProb].filter(Boolean).length;\n    \n    return conditionsMet >= 2 || pressure.goalProbability >= 80;\n  }\n\n  private calculateConfidenceTier(\n    pressure: PressureCalculation,\n    thresholds: typeof HT_THRESHOLDS | typeof FT_THRESHOLDS\n  ): { tier: string; confidence: number; emoji: string } {\n    // Score de confian√ßa baseado em m√∫ltiplos fatores\n    let confidence = 50; // Base\n    \n    // Adicionar pontos por press√£o acima do threshold\n    if (pressure.pressureIndex >= thresholds.pressureIndex) {\n      confidence += (pressure.pressureIndex - thresholds.pressureIndex) * 0.5;\n    }\n    \n    // Adicionar pontos por probabilidade de gol\n    confidence += pressure.goalProbability * 0.3;\n    \n    // Adicionar pontos por surge de press√£o\n    if (pressure.pressureDelta > 0) {\n      confidence += Math.min(20, pressure.pressureDelta * 0.8);\n    }\n    \n    // Limitar entre 50-100\n    confidence = Math.min(100, Math.max(50, confidence));\n    \n    // Determinar tier\n    if (confidence >= CONFIDENCE_TIERS.PRIME.min) {\n      return { tier: CONFIDENCE_TIERS.PRIME.label, confidence, emoji: CONFIDENCE_TIERS.PRIME.emoji };\n    } else if (confidence >= CONFIDENCE_TIERS.CORE.min) {\n      return { tier: CONFIDENCE_TIERS.CORE.label, confidence, emoji: CONFIDENCE_TIERS.CORE.emoji };\n    } else if (confidence >= CONFIDENCE_TIERS.WATCH.min) {\n      return { tier: CONFIDENCE_TIERS.WATCH.label, confidence, emoji: CONFIDENCE_TIERS.WATCH.emoji };\n    }\n    \n    return { tier: 'LOW', confidence, emoji: '‚ö†Ô∏è' };\n  }\n\n  private async createAlert(\n    snapshot: any,\n    fixture: LiveFixture,\n    side: 'home' | 'away',\n    pressure: PressureCalculation,\n    confidence: { tier: string; confidence: number; emoji: string },\n    isFirstHalf: boolean\n  ) {\n    const teamName = side === 'home' ? fixture.teams.home.name : fixture.teams.away.name;\n    const matchMinute = fixture.fixture.status.elapsed || 0;\n    const score = `${fixture.goals.home || 0}-${fixture.goals.away || 0}`;\n    const halfLabel = isFirstHalf ? '1T' : '2T';\n\n    let alertType: 'home_pressure' | 'away_pressure' | 'imminent_goal' | 'pressure_surge' = \n      side === 'home' ? 'home_pressure' : 'away_pressure';\n    \n    if (pressure.goalProbability >= 80) {\n      alertType = 'imminent_goal';\n    } else if (pressure.pressureDelta >= 20) {\n      alertType = 'pressure_surge';\n    }\n\n    // T√≠tulo com tier de confian√ßa\n    const alertTitle = `${confidence.emoji} [${confidence.tier}] ${teamName} pressionando!`;\n    const alertMessage = `${fixture.teams.home.name} ${score} ${fixture.teams.away.name} (${matchMinute}' - ${halfLabel})\\n` +\n      `Press√£o: ${pressure.pressureIndex.toFixed(0)}% | Prob. Gol: ${pressure.goalProbability.toFixed(0)}% | Conf: ${confidence.confidence.toFixed(0)}%`;\n\n    // Sugerir mercado baseado na situa√ß√£o\n    const marketSuggestion = this.suggestMarket(\n      fixture,\n      pressure,\n      matchMinute,\n      isFirstHalf\n    );\n\n    const alert: InsertLiveAlert = {\n      fixtureId: fixture.fixture.id.toString(),\n      snapshotId: snapshot.id,\n      alertType,\n      teamSide: side,\n      pressureIndex: pressure.pressureIndex.toString(),\n      goalProbability: pressure.goalProbability.toString(),\n      alertTitle,\n      alertMessage: `${alertMessage}\\nüìä Sugest√£o: ${marketSuggestion}`,\n      matchMinute: matchMinute.toString(),\n      currentScore: score,\n      notificationSent: false,\n      notificationId: null,\n      goalScoredWithin5Min: null,\n      actualOutcome: null,\n    };\n\n    const [insertedAlert] = await db.insert(liveAlerts).values(alert).returning();\n\n    await db.update(livePressureSnapshots)\n      .set({ alertTriggered: true, alertType })\n      .where(eq(livePressureSnapshots.id, snapshot.id));\n\n    console.log(`[LIVE ALERT] ${alertTitle} - ${alertMessage}`);\n    console.log(`[LIVE ALERT] Market: ${marketSuggestion}`);\n\n    return insertedAlert;\n  }\n\n  private suggestMarket(\n    fixture: LiveFixture,\n    pressure: PressureCalculation,\n    matchMinute: number,\n    isFirstHalf: boolean\n  ): string {\n    const currentGoals = (fixture.goals.home || 0) + (fixture.goals.away || 0);\n    const remainingMinutes = isFirstHalf ? 45 - matchMinute : 90 - matchMinute;\n    \n    // Se probabilidade de gol alta e ainda tem tempo\n    if (pressure.goalProbability >= 70 && remainingMinutes >= 10) {\n      if (isFirstHalf && currentGoals === 0) {\n        return `Over 0.5 Gols 1T ou Pr√≥ximo Gol`;\n      } else if (!isFirstHalf) {\n        const nextGoalLine = currentGoals + 0.5;\n        if (nextGoalLine <= BET365_MARKETS.goals.min) {\n          return `Over ${BET365_MARKETS.goals.min} Gols FT`;\n        }\n        return `Over ${nextGoalLine} Gols FT`;\n      }\n    }\n    \n    // Sugest√£o gen√©rica baseada em press√£o alta\n    if (pressure.pressureIndex >= 75) {\n      if (currentGoals <= 1) {\n        return `Over 1.5 Gols FT ou BTTS`;\n      }\n      return `Over ${currentGoals + 0.5} Gols FT`;\n    }\n    \n    return `Monitorar - Press√£o crescente`;\n  }\n\n  async getHotMatches(limit: number = 20): Promise<any[]> {\n    const tenMinutesAgo = new Date(Date.now() - 10 * 60 * 1000);\n    \n    const latestSnapshots = await db\n      .selectDistinctOn([livePressureSnapshots.fixtureId])\n      .from(livePressureSnapshots)\n      .where(gte(livePressureSnapshots.createdAt, tenMinutesAgo))\n      .orderBy(livePressureSnapshots.fixtureId, desc(livePressureSnapshots.createdAt));\n\n    const sortedByPressure = latestSnapshots.sort((a, b) => {\n      const maxPressureA = Math.max(\n        parseFloat(a.homePressureIndex || '0'),\n        parseFloat(a.awayPressureIndex || '0')\n      );\n      const maxPressureB = Math.max(\n        parseFloat(b.homePressureIndex || '0'),\n        parseFloat(b.awayPressureIndex || '0')\n      );\n      return maxPressureB - maxPressureA;\n    });\n\n    return sortedByPressure.slice(0, limit);\n  }\n\n  async getMatchPressureHistory(fixtureId: string, limit: number = 50): Promise<any[]> {\n    return db.select()\n      .from(livePressureSnapshots)\n      .where(eq(livePressureSnapshots.fixtureId, fixtureId))\n      .orderBy(desc(livePressureSnapshots.createdAt))\n      .limit(limit);\n  }\n\n  async getRecentAlerts(limit: number = 20): Promise<any[]> {\n    return db.select()\n      .from(liveAlerts)\n      .orderBy(desc(liveAlerts.createdAt))\n      .limit(limit);\n  }\n\n  private delay(ms: number): Promise<void> {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  getStatus() {\n    return {\n      isRunning: this.isRunning,\n      cachedFixtures: this.fixtureCache.size,\n      trackedMatches: this.lastSnapshotMap.size,\n    };\n  }\n}\n\nexport const livePressureMonitor = new LivePressureMonitorService();\n\n// ==================== MULTI-BOT API FUNCTIONS ====================\n\n// In-memory bot state (could be persisted to DB if needed)\nconst botState: Map<string, { enabled: boolean; alertCount: number; successCount: number }> = new Map([\n  ['home_favorite', { enabled: true, alertCount: 0, successCount: 0 }],\n  ['away_dominant', { enabled: true, alertCount: 0, successCount: 0 }],\n  ['market_favorite', { enabled: true, alertCount: 0, successCount: 0 }],\n  ['pressure_surge', { enabled: true, alertCount: 0, successCount: 0 }],\n]);\n\nexport function getBotConfigs() {\n  return ALL_BOT_STRATEGIES.map(bot => {\n    const state = botState.get(bot.id) || { enabled: true, alertCount: 0, successCount: 0 };\n    return {\n      id: bot.id,\n      name: bot.name,\n      enabled: state.enabled,\n      alertCount: state.alertCount,\n      successRate: state.alertCount > 0 \n        ? Math.round((state.successCount / state.alertCount) * 100) \n        : 0,\n      thresholds: BOT_THRESHOLDS[bot.id as keyof typeof BOT_THRESHOLDS] || {},\n    };\n  });\n}\n\nexport function toggleBot(botId: string, enabled: boolean) {\n  const bot = ALL_BOT_STRATEGIES.find(b => b.id === botId);\n  if (!bot) {\n    throw new Error(`Bot ${botId} not found`);\n  }\n  \n  // Update in-memory state\n  const state = botState.get(botId) || { enabled: true, alertCount: 0, successCount: 0 };\n  state.enabled = enabled;\n  botState.set(botId, state);\n  \n  // Update the bot strategy\n  bot.enabled = enabled;\n  \n  console.log(`[MULTI-BOT] Bot ${botId} ${enabled ? 'enabled' : 'disabled'}`);\n  \n  return {\n    id: bot.id,\n    name: bot.name,\n    enabled: state.enabled,\n    alertCount: state.alertCount,\n  };\n}\n\nexport function getBotStats() {\n  const stats: Record<string, any> = {};\n  \n  for (const bot of ALL_BOT_STRATEGIES) {\n    const state = botState.get(bot.id) || { enabled: true, alertCount: 0, successCount: 0 };\n    stats[bot.id] = {\n      name: bot.name,\n      enabled: state.enabled,\n      alertCount: state.alertCount,\n      successCount: state.successCount,\n      successRate: state.alertCount > 0 \n        ? Math.round((state.successCount / state.alertCount) * 100) \n        : 0,\n    };\n  }\n  \n  return stats;\n}\n\n// Increment bot alert count (called when bot generates an alert)\nexport function incrementBotAlert(botId: string, isSuccess: boolean = false) {\n  const state = botState.get(botId);\n  if (state) {\n    state.alertCount++;\n    if (isSuccess) {\n      state.successCount++;\n    }\n    botState.set(botId, state);\n  }\n}\n","path":null,"size_bytes":57360,"size_tokens":null},"server/multi-bot-engine.ts":{"content":"import { db } from \"./db\";\nimport { botStrategies, botSignals, botPerformanceStats, tips, livePressureSnapshots } from \"@shared/schema\";\nimport { eq, and, gte, lte, desc, sql } from \"drizzle-orm\";\n\n// =====================================================\n// MULTI-BOT STRATEGY DEFINITIONS\n// =====================================================\n\nexport interface BotStrategyConfig {\n  code: string;\n  name: string;\n  description: string;\n  icon: string;\n  color: string;\n  type: \"pre_live\" | \"live_ht\" | \"live_ft\" | \"live_late\" | \"special\";\n  minMinute: number | null;\n  maxMinute: number | null;\n  minPressure: number;\n  minConfidence: number;\n  parameters: Record<string, any>;\n}\n\n// Default bot strategies - PROMPT MESTRE CONDITIONS\nexport const DEFAULT_BOT_STRATEGIES: BotStrategyConfig[] = [\n  // --- 1. CARDS SPECIALIST (2¬∫ Tempo) ---\n  {\n    code: \"cards_specialist\",\n    name: \"üü® Cards Specialist\",\n    description: \"Jogo quente! Detecta alta probabilidade de mais cart√µes ou expuls√£o no 2¬∫ tempo.\",\n    icon: \"CreditCard\",\n    color: \"#eab308\",\n    type: \"live_ft\",\n    minMinute: 60,\n    maxMinute: 90,\n    minPressure: 45,\n    minConfidence: 68,\n    parameters: {\n      minYellowCards: 4, // Jogo j√° est√° pegado (4+ amarelos)\n      scoreDiffMax: 1, // Jogo disputado (Empate ou diferen√ßa de 1 gol)\n      foulsMin: 20, // Muitas faltas\n      preferredMarkets: [\"Over 4.5 Cards\", \"Over 5.5 Cards\", \"Cart√£o Vermelho\"]\n    }\n  },\n\n  // --- 2. CORNER PRO BOT (Intelig√™ncia Avan√ßada) ---\n  // Baseado em an√°lise de dados profissionais: Premier League 10.5 corners/game, \n  // Bundesliga 9.9, √∫ltimos 10 minutos = 1.5x mais corners\n  {\n    code: \"corners_master\",\n    name: \"üö© Corner PRO Bot\",\n    description: \"Algoritmo profissional: Last 10min Value, 1H Over, Handicap Analysis\",\n    icon: \"Flag\",\n    color: \"#06b6d4\",\n    type: \"live_ft\",\n    minMinute: 15,\n    maxMinute: 90,\n    minPressure: 40,\n    minConfidence: 68,\n    parameters: {\n      // Estrat√©gia 1: Last 10 Minutes Value Bet\n      last10MinEnabled: true,\n      last10MinWindow: [80, 90],\n      last10MinTrailingTeamBonus: 1.5, // 1.5x mais corners quando perdendo\n      // Estrat√©gia 2: First Half Over Exploitation\n      firstHalfEnabled: true,\n      firstHalfWindow: [15, 45],\n      highCornerLeagues: [\"Premier League\", \"Bundesliga\", \"Eredivisie\", \"Scottish Premiership\"],\n      leagueCornerAverages: {\n        \"Premier League\": 10.5,\n        \"Bundesliga\": 9.9,\n        \"Serie A\": 9.5,\n        \"La Liga\": 9.3,\n        \"Ligue 1\": 9.2,\n        \"Brasileir√£o\": 9.0,\n        \"Eredivisie\": 10.2,\n        \"Scottish Premiership\": 10.8\n      },\n      // Estrat√©gia 3: Live Under After High 1H\n      underAfterHigh1HEnabled: true,\n      high1HThreshold: 7, // Se 1H tem 7+ corners\n      // Estrat√©gia 4: Team Corner Handicap\n      dominantTeamEnabled: true,\n      dominantTeamCornersMin: 7.0, // M√©dia de corners/jogo\n      // Limiares de qualidade\n      minCurrentCorners: 3,\n      minCornersRate: 0.10, // corners/minuto m√≠nimo\n      minDangerousAttacks: 25,\n      minShotsTotal: 6,\n      // Proje√ß√£o e mercados\n      projectionBoostFinal10: 1.5, // Boost de 50% nos √∫ltimos 10 min\n      preferredMarkets: [\"Over 8.5 Corners\", \"Over 9.5 Corners\", \"Over 10.5 Corners\", \"Corner Handicap -1.5\"]\n    }\n  },\n\n  // --- 3. FATOR CASA (2¬∫ Tempo) ---\n  {\n    code: \"home_favorite\",\n    name: \"üè† Fator Casa\",\n    description: \"O dono da casa acordou! Press√£o pelo resultado.\",\n    icon: \"Home\",\n    color: \"#33b864\",\n    type: \"live_ft\",\n    minMinute: 45,\n    maxMinute: 80,\n    minPressure: 72,\n    minConfidence: 75,\n    parameters: {\n      homeTeamLosingOrDraw: true, // Casa empatando ou perdendo\n      homePossessionMin: 60, // Casa dominando a posse\n      homeAttacksAdvantage: 20, // Casa tem 20+ ataques perigosos que o rival\n      preferredMarkets: [\"Over 0.5 FT\", \"Gol Casa\", \"Over 1.5 FT\"]\n    }\n  },\n\n  // --- 4. GOL NO 1¬∫ TEMPO (HT) ---\n  {\n    code: \"ht_scorer\",\n    name: \"ü•Ö Gol no 1¬∫ Tempo\",\n    description: \"0x0 Mentiroso! O gol est√° maduro para sair no HT.\",\n    icon: \"Target\",\n    color: \"#8b5cf6\",\n    type: \"live_ht\",\n    minMinute: 15,\n    maxMinute: 38, // Janela de ouro do HT\n    minPressure: 70,\n    minConfidence: 75,\n    parameters: {\n      requireZeroZero: true, // Tem que estar 0x0\n      minShotsTotal: 6, // Jogo movimentado\n      preferredMarkets: [\"Over 0.5 HT\", \"Gol HT\"]\n    }\n  },\n\n  // --- 5. P√ìS CART√ÉO VERMELHO (Especial) ---\n  {\n    code: \"post_red_card\",\n    name: \"üö® P√≥s Cart√£o Vermelho\",\n    description: \"Expuls√£o detectada! Aproveite a desorganiza√ß√£o t√°tica.\",\n    icon: \"AlertTriangle\",\n    color: \"#ef4444\",\n    type: \"special\",\n    minMinute: null,\n    maxMinute: null,\n    minPressure: 65,\n    minConfidence: 72,\n    parameters: {\n      hasRedCard: true, // Algu√©m foi expulso\n      minTimeSinceRed: 5, // 5 minutos depois da expuls√£o (mercado ajustou)\n      requireScoreDraw: true, // Jogo empatado\n      timeRemainingMin: 15,\n      preferredMarkets: [\"Over 0.5 FT\", \"Pr√≥ximo Gol\", \"Gol Time 11 jogadores\"]\n    }\n  },\n\n  // --- 6. PRESS√ÉO FINAL 75-90 ---\n  {\n    code: \"late_pressure\",\n    name: \"üî• Press√£o Final 75-90\",\n    description: \"Blitz Final! O gol vai sair nos acr√©scimos.\",\n    icon: \"Clock\",\n    color: \"#f59e0b\",\n    type: \"live_late\",\n    minMinute: 75,\n    maxMinute: 90,\n    minPressure: 78,\n    minConfidence: 80,\n    parameters: {\n      scoreDiffMax: 1, // Jogo aberto\n      attacksLast10Min: 15, // Blitz nos √∫ltimos 10 min\n      urgencyFactor: true, // Time perdendo = mais urg√™ncia\n      preferredMarkets: [\"Over 0.5 FT\", \"Pr√≥ximo Gol\", \"Gol Acr√©scimos\"]\n    }\n  },\n\n  // --- 7. BTTS HUNTER (Ambas Marcam) ---\n  {\n    code: \"btts_hunter\",\n    name: \"‚öΩ‚öΩ BTTS Hunter\",\n    description: \"O empate vem a√≠! Tend√™ncia forte de Ambas Marcam.\",\n    icon: \"Crosshair\",\n    color: \"#ec4899\",\n    type: \"live_ft\",\n    minMinute: 55,\n    maxMinute: 80,\n    minPressure: 60,\n    minConfidence: 72,\n    parameters: {\n      goalsTotal: 1, // Jogo est√° 1x0 ou 0x1\n      losingTeamShotsOnTarget: 3, // Time que t√° perdendo t√° chutando\n      preferredMarkets: [\"BTTS Sim\", \"Over 1.5 FT\", \"Empate\"]\n    }\n  },\n\n  // --- 8. VISITANTE FAVORITO ---\n  {\n    code: \"away_dominant\",\n    name: \"‚úàÔ∏è Visitante Favorito\",\n    description: \"Favorito perdendo fora de casa. Oportunidade de valor.\",\n    icon: \"Plane\",\n    color: \"#3b82f6\",\n    type: \"live_ft\",\n    minMinute: 45,\n    maxMinute: 80,\n    minPressure: 75,\n    minConfidence: 78,\n    parameters: {\n      awayOddPreLive: 1.80, // Era favorito antes do jogo\n      awayLosingOrDraw: true, // Est√° perdendo ou empatando\n      preferredMarkets: [\"Gol Fora\", \"Over 0.5 FT\", \"Vit√≥ria Fora\"]\n    }\n  }\n];\n\n// =====================================================\n// MULTI-BOT ENGINE CLASS\n// =====================================================\n\nexport class MultiBotEngine {\n  private strategies: Map<string, BotStrategyConfig> = new Map();\n  private isRunning: boolean = false;\n  private pollInterval: NodeJS.Timeout | null = null;\n\n  constructor() {\n    DEFAULT_BOT_STRATEGIES.forEach(s => this.strategies.set(s.code, s));\n  }\n\n  // Initialize strategies in database\n  async initializeStrategies(): Promise<void> {\n    console.log(\"[Multi-Bot] Initializing bot strategies...\");\n    \n    for (const strategy of DEFAULT_BOT_STRATEGIES) {\n      const existing = await db.select()\n        .from(botStrategies)\n        .where(eq(botStrategies.strategyCode, strategy.code))\n        .limit(1);\n      \n      if (existing.length === 0) {\n        await db.insert(botStrategies).values({\n          strategyCode: strategy.code,\n          strategyName: strategy.name,\n          strategyDescription: strategy.description,\n          strategyIcon: strategy.icon,\n          strategyColor: strategy.color,\n          strategyType: strategy.type,\n          minMinute: strategy.minMinute ? String(strategy.minMinute) : null,\n          maxMinute: strategy.maxMinute ? String(strategy.maxMinute) : null,\n          minPressureThreshold: strategy.minPressure ? String(strategy.minPressure) : null,\n          minConfidenceThreshold: String(strategy.minConfidence),\n          parameters: JSON.stringify(strategy.parameters),\n          isActive: true\n        });\n        console.log(`[Multi-Bot] Created strategy: ${strategy.name}`);\n      }\n    }\n    \n    console.log(\"[Multi-Bot] Strategies initialized\");\n  }\n\n  // Get all strategies\n  async getStrategies(): Promise<any[]> {\n    return await db.select().from(botStrategies).orderBy(botStrategies.strategyName);\n  }\n\n  // Get signals for a strategy\n  async getSignals(strategyCode?: string, status?: string, limit: number = 50): Promise<any[]> {\n    let query = db.select().from(botSignals).orderBy(desc(botSignals.createdAt)).limit(limit);\n    \n    // Filters are applied in the where clause building\n    const conditions: any[] = [];\n    \n    if (strategyCode) {\n      conditions.push(eq(botSignals.strategyCode, strategyCode));\n    }\n    \n    if (status) {\n      conditions.push(eq(botSignals.signalStatus, status as any));\n    }\n    \n    if (conditions.length > 0) {\n      return await db.select()\n        .from(botSignals)\n        .where(conditions.length === 1 ? conditions[0] : and(...conditions))\n        .orderBy(desc(botSignals.createdAt))\n        .limit(limit);\n    }\n    \n    return await db.select()\n      .from(botSignals)\n      .orderBy(desc(botSignals.createdAt))\n      .limit(limit);\n  }\n\n  // Get performance stats for all bots\n  async getPerformanceStats(periodType: string = \"all_time\"): Promise<any[]> {\n    return await db.select()\n      .from(botPerformanceStats)\n      .where(eq(botPerformanceStats.periodType, periodType as any))\n      .orderBy(desc(botPerformanceStats.hitRate));\n  }\n\n  // Get detailed stats for a single bot\n  async getBotDetailedStats(strategyCode: string): Promise<any> {\n    const strategy = await db.select()\n      .from(botStrategies)\n      .where(eq(botStrategies.strategyCode, strategyCode))\n      .limit(1);\n    \n    if (strategy.length === 0) return null;\n    \n    const signals = await db.select()\n      .from(botSignals)\n      .where(eq(botSignals.strategyCode, strategyCode))\n      .orderBy(desc(botSignals.createdAt))\n      .limit(100);\n    \n    const stats = await db.select()\n      .from(botPerformanceStats)\n      .where(eq(botPerformanceStats.strategyCode, strategyCode));\n    \n    // Calculate stats from signals\n    const totalSignals = signals.length;\n    const hits = signals.filter(s => s.signalStatus === \"hit\").length;\n    const misses = signals.filter(s => s.signalStatus === \"miss\").length;\n    const pending = signals.filter(s => s.signalStatus === \"pending\").length;\n    \n    const hitRate = totalSignals > 0 ? ((hits / (hits + misses)) * 100) : 0;\n    \n    // Calculate profit (assuming 1 unit per bet)\n    let totalProfit = 0;\n    signals.forEach(s => {\n      if (s.signalStatus === \"hit\" && s.suggestedOdd) {\n        totalProfit += Number(s.suggestedOdd) - 1;\n      } else if (s.signalStatus === \"miss\") {\n        totalProfit -= 1;\n      }\n    });\n    \n    // Calculate streaks\n    let currentStreak = 0;\n    let longestWinStreak = 0;\n    let longestLossStreak = 0;\n    let tempWinStreak = 0;\n    let tempLossStreak = 0;\n    \n    for (const signal of signals.filter(s => s.signalStatus !== \"pending\")) {\n      if (signal.signalStatus === \"hit\") {\n        tempWinStreak++;\n        tempLossStreak = 0;\n        longestWinStreak = Math.max(longestWinStreak, tempWinStreak);\n      } else if (signal.signalStatus === \"miss\") {\n        tempLossStreak++;\n        tempWinStreak = 0;\n        longestLossStreak = Math.max(longestLossStreak, tempLossStreak);\n      }\n    }\n    \n    // Current streak\n    for (const signal of signals.filter(s => s.signalStatus !== \"pending\")) {\n      if (signal.signalStatus === \"hit\") {\n        if (currentStreak >= 0) currentStreak++;\n        else break;\n      } else if (signal.signalStatus === \"miss\") {\n        if (currentStreak <= 0) currentStreak--;\n        else break;\n      }\n    }\n    \n    return {\n      strategy: strategy[0],\n      signals: signals.slice(0, 20), // Last 20 signals\n      stats: {\n        totalSignals,\n        hits,\n        misses,\n        pending,\n        hitRate: hitRate.toFixed(1),\n        totalProfit: totalProfit.toFixed(2),\n        currentStreak,\n        longestWinStreak,\n        longestLossStreak\n      },\n      periodStats: stats\n    };\n  }\n\n  // Analyze live matches with all active bots\n  async analyzeWithBots(liveMatches: any[]): Promise<any[]> {\n    const activeStrategies = await db.select()\n      .from(botStrategies)\n      .where(eq(botStrategies.isActive, true));\n    \n    const signals: any[] = [];\n    \n    for (const match of liveMatches) {\n      for (const strategy of activeStrategies) {\n        const signal = await this.analyzeMatchWithStrategy(match, strategy);\n        if (signal) {\n          signals.push(signal);\n        }\n      }\n    }\n    \n    return signals;\n  }\n\n  // Analyze a single match with a specific strategy - PROMPT MESTRE CONDITIONS\n  private async analyzeMatchWithStrategy(match: any, strategy: any): Promise<any | null> {\n    const params = JSON.parse(strategy.parameters || \"{}\");\n    const minute = Number(match.matchMinute || match.elapsed || 0);\n    \n    // Check timing constraints (skip for special strategies like red card)\n    if (strategy.strategyCode !== \"post_red_card\") {\n      if (strategy.minMinute && minute < Number(strategy.minMinute)) return null;\n      if (strategy.maxMinute && minute > Number(strategy.maxMinute)) return null;\n    }\n    \n    // Extract all match data\n    const homePressure = Number(match.homePressureIndex || match.home_pressure || 50);\n    const awayPressure = Number(match.awayPressureIndex || match.away_pressure || 50);\n    const homePossession = Number(match.homePossession || match.home_possession || 50);\n    const awayPossession = Number(match.awayPossession || match.away_possession || 50);\n    const homeShotsOnTarget = Number(match.homeShotsOnTarget || match.home_shots_on_target || 0);\n    const awayShotsOnTarget = Number(match.awayShotsOnTarget || match.away_shots_on_target || 0);\n    const homeScore = Number(match.homeScore || match.home_score || 0);\n    const awayScore = Number(match.awayScore || match.away_score || 0);\n    const homeCorners = Number(match.homeCorners || match.home_corners || 0);\n    const awayCorners = Number(match.awayCorners || match.away_corners || 0);\n    const homeCards = Number(match.homeCards || match.home_cards || 0);\n    const awayCards = Number(match.awayCards || match.away_cards || 0);\n    const homeFouls = Number(match.homeFouls || match.home_fouls || 0);\n    const awayFouls = Number(match.awayFouls || match.away_fouls || 0);\n    const homeDangerousAttacks = Number(match.homeDangerousAttacks || match.home_dangerous_attacks || 0);\n    const awayDangerousAttacks = Number(match.awayDangerousAttacks || match.away_dangerous_attacks || 0);\n    const homeAttacks = Number(match.homeAttacks || match.home_attacks || 0);\n    const awayAttacks = Number(match.awayAttacks || match.away_attacks || 0);\n    const hasRedCard = Boolean(match.hasRedCard || match.has_red_card || (match.events && match.events.some((e: any) => e.type === 'red_card')));\n    const redCardMinute = Number(match.redCardMinute || match.red_card_minute || 0);\n    \n    const scoreDiff = Math.abs(homeScore - awayScore);\n    const totalGoals = homeScore + awayScore;\n    const totalShots = homeShotsOnTarget + awayShotsOnTarget;\n    const totalCards = homeCards + awayCards;\n    const totalFouls = homeFouls + awayFouls;\n    const totalCorners = homeCorners + awayCorners;\n    const totalAttacks = homeAttacks + awayAttacks;\n    \n    let confidence = 0;\n    let probability = 0;\n    let market = \"\";\n    let outcome = \"\";\n    let analysisData: any = {};\n    \n    switch (strategy.strategyCode) {\n      // --- 1. CARDS SPECIALIST (2¬∫ Tempo) ---\n      case \"cards_specialist\": {\n        const meetsYellowCards = totalCards >= params.minYellowCards;\n        const meetsScoreDiff = scoreDiff <= params.scoreDiffMax;\n        const meetsFouls = totalFouls >= params.foulsMin;\n        \n        if (meetsYellowCards && meetsScoreDiff && meetsFouls) {\n          const cardsRate = minute > 0 ? totalCards / minute : 0;\n          const projectedCards = totalCards + (90 - minute) * cardsRate;\n          confidence = Math.min(92, 55 + totalCards * 5 + (totalFouls / 5));\n          probability = Math.min(85, confidence * 0.92);\n          market = projectedCards >= 6 ? \"Over 5.5 Cards\" : \"Over 4.5 Cards\";\n          outcome = \"Sim\";\n          analysisData = {\n            trigger: \"üü® Jogo quente! Alta tend√™ncia de cart√µes\",\n            totalCards,\n            totalFouls,\n            scoreDiff,\n            projectedCards: projectedCards.toFixed(1),\n            message: params.preferredMarkets[0]\n          };\n        }\n        break;\n      }\n\n      // --- 2. CORNER PRO BOT (Intelig√™ncia Avan√ßada) ---\n      case \"corners_master\": {\n        const cornersRate = minute > 0 ? totalCorners / minute : 0;\n        const matchStatus = match.matchStatus || match.status || \"\";\n        const isFirstHalf = matchStatus === \"1H\" || matchStatus === \"HT\" || minute <= 45;\n        const isSecondHalf = minute > 45;\n        const isLast10Min = minute >= 80;\n        const league = match.league || match.leagueName || \"\";\n        \n        // Get league average corners\n        const leagueAverages: Record<string, number> = params.leagueCornerAverages || {};\n        const leagueAvg = leagueAverages[league] || 9.5;\n        const expectedCornersPerMin = leagueAvg / 90;\n        \n        // Check if team is trailing (more aggressive for corners)\n        const isHomeTrailing = homeScore < awayScore;\n        const isAwayTrailing = awayScore < homeScore;\n        const hasTrailingTeam = isHomeTrailing || isAwayTrailing;\n        \n        // Dangerous attacks indicator\n        const totalDangerousAttacks = homeDangerousAttacks + awayDangerousAttacks;\n        \n        let strategyTriggered = \"\";\n        let projectedCorners = 0;\n        let confidenceBonus = 0;\n        \n        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n        // ESTRAT√âGIA 1: LAST 10 MINUTES VALUE BET (80-90 min)\n        // Times perdendo atacam intensamente, corners 1.5x mais frequentes\n        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n        if (isLast10Min && params.last10MinEnabled && hasTrailingTeam) {\n          const trailingTeamAttacks = isHomeTrailing ? homeDangerousAttacks : awayDangerousAttacks;\n          const last10MinBoost = params.last10MinTrailingTeamBonus || 1.5;\n          \n          // Proje√ß√£o com boost dos √∫ltimos 10 min\n          const boostedRate = cornersRate * last10MinBoost;\n          projectedCorners = totalCorners + (90 - minute) * boostedRate;\n          \n          if (trailingTeamAttacks >= 20 && totalCorners >= 5) {\n            strategyTriggered = \"LAST_10_MIN_VALUE\";\n            confidenceBonus = 15; // Boost alto para √∫ltimos 10 min\n            confidence = Math.min(92, 60 + confidenceBonus + (projectedCorners - 8) * 3);\n          }\n        }\n        \n        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n        // ESTRAT√âGIA 2: FIRST HALF OVER EXPLOITATION (15-45 min)\n        // Ligas de alto corner produzem mais no 1¬∫ tempo\n        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n        if (!strategyTriggered && isFirstHalf && params.firstHalfEnabled && minute >= 15 && minute <= 45) {\n          const highCornerLeagues = params.highCornerLeagues || [];\n          const isHighCornerLeague = highCornerLeagues.some((l: string) => \n            league.toLowerCase().includes(l.toLowerCase())\n          );\n          \n          if (isHighCornerLeague || cornersRate >= expectedCornersPerMin * 1.2) {\n            // 1¬∫ tempo geralmente tem mais corners que bookmakers preveem\n            projectedCorners = totalCorners + (45 - minute) * cornersRate * 1.15;\n            const expectedHalfCorners = (leagueAvg / 2) + 0.5; // Ligas altas t√™m mais no 1H\n            \n            if (projectedCorners >= expectedHalfCorners && totalCorners >= 2) {\n              strategyTriggered = \"1H_OVER_EXPLOITATION\";\n              confidenceBonus = isHighCornerLeague ? 12 : 8;\n              confidence = Math.min(88, 55 + confidenceBonus + (projectedCorners - 4) * 4);\n            }\n          }\n        }\n        \n        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n        // ESTRAT√âGIA 3: LIVE PRESSURE STANDARD (50-85 min)\n        // Press√£o constante gera corners naturalmente\n        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n        if (!strategyTriggered && isSecondHalf && minute >= 50 && minute <= 85) {\n          const minRate = params.minCornersRate || 0.10;\n          const minDangerous = params.minDangerousAttacks || 25;\n          const minShots = params.minShotsTotal || 6;\n          \n          if (cornersRate >= minRate && totalDangerousAttacks >= minDangerous && totalShots >= minShots) {\n            projectedCorners = totalCorners + (90 - minute) * cornersRate * 1.2;\n            strategyTriggered = \"LIVE_PRESSURE\";\n            confidenceBonus = 10;\n            confidence = Math.min(88, 55 + confidenceBonus + (projectedCorners - 8) * 3 + (totalDangerousAttacks / 10));\n          }\n        }\n        \n        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n        // ESTRAT√âGIA 4: DOMINANT TEAM HANDICAP\n        // Times dominantes (City, Liverpool) excedem 8-10 corners\n        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n        if (!strategyTriggered && minute >= 30) {\n          const homeDominance = homeDangerousAttacks - awayDangerousAttacks;\n          const awayDominance = awayDangerousAttacks - homeDangerousAttacks;\n          const dominantTeamAdvantage = Math.max(homeDominance, awayDominance);\n          \n          if (dominantTeamAdvantage >= 15 && cornersRate >= 0.08) {\n            const dominantTeamCorners = homeDominance > awayDominance ? homeCorners : awayCorners;\n            projectedCorners = totalCorners + (90 - minute) * cornersRate * 1.25;\n            \n            if (dominantTeamCorners >= 3) {\n              strategyTriggered = \"DOMINANT_TEAM\";\n              confidenceBonus = 8;\n              confidence = Math.min(85, 50 + confidenceBonus + dominantTeamAdvantage * 0.5 + dominantTeamCorners * 3);\n            }\n          }\n        }\n        \n        // Determinar mercado baseado na proje√ß√£o\n        if (strategyTriggered && confidence >= Number(strategy.minConfidenceThreshold)) {\n          probability = Math.min(88, confidence * 0.92);\n          \n          // Escolher mercado baseado em proje√ß√£o e minuto\n          if (isFirstHalf) {\n            market = projectedCorners >= 5 ? \"Over 4.5 Corners HT\" : \"Over 3.5 Corners HT\";\n          } else if (projectedCorners >= 11) {\n            market = \"Over 10.5 Corners\";\n          } else if (projectedCorners >= 10) {\n            market = \"Over 9.5 Corners\";\n          } else {\n            market = \"Over 8.5 Corners\";\n          }\n          \n          outcome = \"Sim\";\n          analysisData = {\n            trigger: `üö© Corner PRO: ${strategyTriggered}`,\n            strategy: strategyTriggered,\n            totalCorners,\n            cornersRate: cornersRate.toFixed(3),\n            projectedCorners: projectedCorners.toFixed(1),\n            leagueAverage: leagueAvg,\n            minute,\n            isLast10Min,\n            hasTrailingTeam,\n            totalDangerousAttacks,\n            confidenceBonus,\n            message: strategyTriggered === \"LAST_10_MIN_VALUE\" \n              ? \"üî• √öltimos 10min - 1.5x mais corners!\" \n              : strategyTriggered === \"1H_OVER_EXPLOITATION\"\n              ? \"üìä Liga de alto corner - 1H Over Value\"\n              : strategyTriggered === \"DOMINANT_TEAM\"\n              ? \"üí™ Time dominante - Handicap favor√°vel\"\n              : \"üìà Press√£o constante gerando corners\"\n          };\n        }\n        break;\n      }\n\n      // --- 3. FATOR CASA (2¬∫ Tempo) ---\n      case \"home_favorite\": {\n        const homeLosingOrDraw = homeScore <= awayScore;\n        const homePossessionOk = homePossession >= params.homePossessionMin;\n        const homeAttacksAdvantage = homeDangerousAttacks - awayDangerousAttacks;\n        \n        if (homeLosingOrDraw && homePossessionOk && homeAttacksAdvantage >= params.homeAttacksAdvantage) {\n          confidence = Math.min(93, 55 + (homePossession - 50) * 0.8 + homeAttacksAdvantage * 0.5);\n          probability = Math.min(88, confidence * 0.92);\n          market = totalGoals === 0 ? \"Over 0.5 FT\" : \"Gol Casa\";\n          outcome = \"Sim\";\n          analysisData = {\n            trigger: \"üè† O dono da casa acordou!\",\n            homePossession,\n            homeAttacksAdvantage,\n            homeScore,\n            awayScore,\n            message: \"Press√£o pelo resultado\"\n          };\n        }\n        break;\n      }\n\n      // --- 4. GOL NO 1¬∫ TEMPO (HT) ---\n      case \"ht_scorer\": {\n        const matchStatus = match.matchStatus || match.status || \"\";\n        const isFirstHalf = matchStatus === \"1H\" || minute < 46;\n        const isZeroZero = homeScore === 0 && awayScore === 0;\n        const hasEnoughShots = totalShots >= params.minShotsTotal;\n        \n        if (isFirstHalf && isZeroZero && hasEnoughShots) {\n          confidence = Math.min(90, 55 + totalShots * 4 + Math.max(homePressure, awayPressure) * 0.3);\n          probability = Math.min(85, confidence * 0.9);\n          market = \"Over 0.5 HT\";\n          outcome = \"Sim\";\n          analysisData = {\n            trigger: \"ü•Ö 0x0 Mentiroso!\",\n            totalShots,\n            minute,\n            homePressure,\n            awayPressure,\n            message: \"O gol est√° maduro para sair no HT\"\n          };\n        }\n        break;\n      }\n\n      // --- 5. P√ìS CART√ÉO VERMELHO (Especial) ---\n      case \"post_red_card\": {\n        const timeSinceRed = minute - redCardMinute;\n        const isDraw = homeScore === awayScore;\n        const timeRemaining = 90 - minute;\n        \n        if (hasRedCard && \n            timeSinceRed >= params.minTimeSinceRed && \n            isDraw && \n            timeRemaining >= params.timeRemainingMin) {\n          confidence = Math.min(88, 60 + timeSinceRed * 1.5 + timeRemaining * 0.3);\n          probability = Math.min(82, confidence * 0.88);\n          market = \"Over 0.5 FT\";\n          outcome = \"Sim\";\n          analysisData = {\n            trigger: \"üö® Expuls√£o detectada!\",\n            timeSinceRed,\n            timeRemaining,\n            isDraw,\n            message: \"Aproveite a desorganiza√ß√£o t√°tica\"\n          };\n        }\n        break;\n      }\n\n      // --- 6. PRESS√ÉO FINAL 75-90 ---\n      case \"late_pressure\": {\n        const maxPressure = Math.max(homePressure, awayPressure);\n        const pressingTeam = homePressure > awayPressure ? \"home\" : \"away\";\n        const isLosingTeam = (pressingTeam === \"home\" && homeScore < awayScore) ||\n                            (pressingTeam === \"away\" && awayScore < homeScore);\n        const isGameOpen = scoreDiff <= params.scoreDiffMax;\n        \n        if (maxPressure >= Number(strategy.minPressureThreshold) && isGameOpen) {\n          confidence = Math.min(95, 60 + (maxPressure - 70) * 0.8);\n          if (isLosingTeam) confidence += 10; // Urgency bonus\n          probability = Math.min(90, confidence * 0.92);\n          market = \"Over 0.5 FT\";\n          outcome = \"Sim\";\n          analysisData = {\n            trigger: \"üî• Blitz Final!\",\n            pressingTeam,\n            maxPressure,\n            isLosingTeam,\n            minute,\n            message: \"O gol vai sair nos acr√©scimos\"\n          };\n        }\n        break;\n      }\n\n      // --- 7. BTTS HUNTER (Ambas Marcam) ---\n      case \"btts_hunter\": {\n        const is1x0or0x1 = totalGoals === 1 && scoreDiff === 1;\n        const losingTeamShotsOnTarget = homeScore < awayScore ? homeShotsOnTarget : awayShotsOnTarget;\n        \n        if (is1x0or0x1 && losingTeamShotsOnTarget >= params.losingTeamShotsOnTarget) {\n          confidence = Math.min(88, 55 + losingTeamShotsOnTarget * 6 + totalShots * 2);\n          probability = Math.min(82, confidence * 0.88);\n          market = \"BTTS Sim\";\n          outcome = \"Sim\";\n          analysisData = {\n            trigger: \"‚öΩ‚öΩ O empate vem a√≠!\",\n            homeScore,\n            awayScore,\n            losingTeamShotsOnTarget,\n            totalShots,\n            message: \"Tend√™ncia forte de Ambas Marcam\"\n          };\n        }\n        break;\n      }\n\n      // --- 8. VISITANTE FAVORITO ---\n      case \"away_dominant\": {\n        const awayLosingOrDraw = awayScore <= homeScore;\n        const awayOddPreLive = Number(match.awayOdd || match.away_odd || 2.0);\n        const wasFavorite = awayOddPreLive <= params.awayOddPreLive;\n        \n        if (awayLosingOrDraw && wasFavorite && awayPressure >= Number(strategy.minPressureThreshold)) {\n          confidence = Math.min(90, 55 + (awayPressure - 60) * 0.8 + awayShotsOnTarget * 4);\n          probability = Math.min(85, confidence * 0.9);\n          market = totalGoals === 0 ? \"Gol Fora\" : \"Over 0.5 FT\";\n          outcome = \"Sim\";\n          analysisData = {\n            trigger: \"‚úàÔ∏è Favorito perdendo fora de casa\",\n            awayOddPreLive,\n            awayPressure,\n            awayScore,\n            homeScore,\n            message: \"Oportunidade de valor\"\n          };\n        }\n        break;\n      }\n    }\n    \n    // Check minimum confidence\n    if (confidence < Number(strategy.minConfidenceThreshold)) return null;\n    if (!market) return null;\n    \n    // Check if signal already exists for this match + strategy\n    const existing = await db.select()\n      .from(botSignals)\n      .where(and(\n        eq(botSignals.fixtureId, String(match.fixtureId || match.fixture_id)),\n        eq(botSignals.strategyCode, strategy.strategyCode),\n        eq(botSignals.signalStatus, \"pending\")\n      ))\n      .limit(1);\n    \n    if (existing.length > 0) return null;\n    \n    // Determine signal type\n    const signalTypeValue: \"goal_ht\" | \"goal_ft\" | \"over_15\" | \"over_25\" | \"btts\" | \"corners\" | \"cards\" | \"goal_now\" = \n      market.includes(\"Corner\") ? \"corners\" : \n      market.includes(\"Card\") ? \"cards\" :\n      market.includes(\"BTTS\") ? \"btts\" :\n      market.includes(\"HT\") ? \"goal_ht\" : \"goal_ft\";\n    \n    // Create signal\n    const signal = {\n      strategyId: strategy.id,\n      strategyCode: strategy.strategyCode,\n      fixtureId: String(match.fixtureId || match.fixture_id),\n      league: match.league || match.leagueName || \"Unknown\",\n      leagueId: match.leagueId,\n      homeTeam: match.homeTeam || match.home_team,\n      awayTeam: match.awayTeam || match.away_team,\n      homeTeamLogo: match.homeTeamLogo || match.home_team_logo,\n      awayTeamLogo: match.awayTeamLogo || match.away_team_logo,\n      signalType: signalTypeValue,\n      market,\n      predictedOutcome: outcome,\n      signalMinute: String(minute),\n      scoreWhenGenerated: `${homeScore}-${awayScore}`,\n      matchStatus: match.matchStatus || match.status || \"LIVE\",\n      pressureIndex: String(Math.max(homePressure, awayPressure).toFixed(1)),\n      confidenceScore: String(confidence.toFixed(1)),\n      probabilityScore: String(probability.toFixed(1)),\n      analysisData: JSON.stringify(analysisData),\n      suggestedOdd: match.suggestedOdd || \"1.60\",\n      signalStatus: \"pending\" as const,\n      expiresAt: new Date(Date.now() + 30 * 60 * 1000), // 30 min expiry\n    };\n    \n    // Save to database\n    await db.insert(botSignals).values(signal as any);\n    \n    console.log(`[Multi-Bot] ${strategy.strategyName} signal: ${match.homeTeam} vs ${match.awayTeam} - ${market}`);\n    \n    return {\n      ...signal,\n      strategyName: strategy.strategyName,\n      strategyColor: strategy.strategyColor,\n      strategyIcon: strategy.strategyIcon\n    };\n  }\n\n  // Update signal outcome\n  async updateSignalOutcome(signalId: string, status: \"hit\" | \"miss\" | \"void\", finalScore: string): Promise<void> {\n    await db.update(botSignals)\n      .set({\n        signalStatus: status,\n        finalScore,\n        resolvedAt: new Date(),\n        updatedAt: new Date()\n      })\n      .where(eq(botSignals.id, signalId));\n    \n    // Update performance stats\n    const signal = await db.select().from(botSignals).where(eq(botSignals.id, signalId)).limit(1);\n    if (signal.length > 0) {\n      await this.updatePerformanceStats(signal[0].strategyCode);\n    }\n  }\n\n  // Update performance stats for a strategy\n  async updatePerformanceStats(strategyCode: string): Promise<void> {\n    const strategy = await db.select()\n      .from(botStrategies)\n      .where(eq(botStrategies.strategyCode, strategyCode))\n      .limit(1);\n    \n    if (strategy.length === 0) return;\n    \n    const signals = await db.select()\n      .from(botSignals)\n      .where(eq(botSignals.strategyCode, strategyCode));\n    \n    const totalSignals = signals.length;\n    const hits = signals.filter(s => s.signalStatus === \"hit\").length;\n    const misses = signals.filter(s => s.signalStatus === \"miss\").length;\n    const voids = signals.filter(s => s.signalStatus === \"void\").length;\n    const pending = signals.filter(s => s.signalStatus === \"pending\").length;\n    \n    const resolved = hits + misses;\n    const hitRate = resolved > 0 ? (hits / resolved) * 100 : 0;\n    \n    // Calculate profit/loss\n    let totalProfit = 0;\n    let totalLoss = 0;\n    let avgOdd = 0;\n    let avgConfidence = 0;\n    \n    signals.forEach(s => {\n      avgOdd += Number(s.suggestedOdd || 1.5);\n      avgConfidence += Number(s.confidenceScore || 0);\n      \n      if (s.signalStatus === \"hit\") {\n        totalProfit += Number(s.suggestedOdd || 1.5) - 1;\n      } else if (s.signalStatus === \"miss\") {\n        totalLoss += 1;\n      }\n    });\n    \n    avgOdd = totalSignals > 0 ? avgOdd / totalSignals : 0;\n    avgConfidence = totalSignals > 0 ? avgConfidence / totalSignals : 0;\n    const netProfit = totalProfit - totalLoss;\n    const roi = totalSignals > 0 ? (netProfit / totalSignals) * 100 : 0;\n    \n    // Upsert all_time stats\n    const existingStats = await db.select()\n      .from(botPerformanceStats)\n      .where(and(\n        eq(botPerformanceStats.strategyCode, strategyCode),\n        eq(botPerformanceStats.periodType, \"all_time\")\n      ))\n      .limit(1);\n    \n    const statsData = {\n      strategyId: strategy[0].id,\n      strategyCode,\n      periodType: \"all_time\" as const,\n      periodDate: \"all\",\n      totalSignals: String(totalSignals),\n      hitCount: String(hits),\n      missCount: String(misses),\n      voidCount: String(voids),\n      pendingCount: String(pending),\n      hitRate: String(hitRate.toFixed(2)),\n      roi: String(roi.toFixed(2)),\n      avgConfidence: String(avgConfidence.toFixed(2)),\n      avgOdd: String(avgOdd.toFixed(2)),\n      totalProfit: String(totalProfit.toFixed(2)),\n      totalLoss: String(totalLoss.toFixed(2)),\n      netProfit: String(netProfit.toFixed(2)),\n      updatedAt: new Date()\n    };\n    \n    if (existingStats.length > 0) {\n      await db.update(botPerformanceStats)\n        .set(statsData)\n        .where(eq(botPerformanceStats.id, existingStats[0].id));\n    } else {\n      await db.insert(botPerformanceStats).values(statsData);\n    }\n  }\n\n  // Toggle strategy active status\n  async toggleStrategy(strategyCode: string, isActive: boolean): Promise<void> {\n    await db.update(botStrategies)\n      .set({ isActive, updatedAt: new Date() })\n      .where(eq(botStrategies.strategyCode, strategyCode));\n  }\n\n  // Publish a signal as a tip\n  async publishSignal(signalId: string, createdBy: string): Promise<string> {\n    const signal = await db.select()\n      .from(botSignals)\n      .where(eq(botSignals.id, signalId))\n      .limit(1);\n    \n    if (signal.length === 0) throw new Error(\"Signal not found\");\n    \n    const s = signal[0];\n    \n    // Create tip from signal\n    const result = await db.insert(tips).values({\n      fixtureId: s.fixtureId,\n      league: s.league,\n      homeTeam: s.homeTeam,\n      awayTeam: s.awayTeam,\n      homeTeamLogo: s.homeTeamLogo,\n      awayTeamLogo: s.awayTeamLogo,\n      matchTime: new Date().toISOString(),\n      market: s.market,\n      odd: s.suggestedOdd || \"1.50\",\n      stake: s.suggestedStake || \"1.0\",\n      status: \"pending\",\n      isLive: true,\n      isCombo: false,\n      createdBy\n    }).returning({ id: tips.id });\n    \n    // Update signal as published\n    await db.update(botSignals)\n      .set({\n        isPublished: true,\n        publishedTipId: result[0].id,\n        updatedAt: new Date()\n      })\n      .where(eq(botSignals.id, signalId));\n    \n    return result[0].id;\n  }\n}\n\n// Singleton instance\nexport const multiBotEngine = new MultiBotEngine();\n","path":null,"size_bytes":37901,"size_tokens":null},"client/src/components/multi-bot-panel.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport {\n  Home,\n  Plane,\n  Clock,\n  AlertTriangle,\n  Target,\n  Crosshair,\n  Flag,\n  CreditCard,\n  TrendingUp,\n  TrendingDown,\n  Activity,\n  Check,\n  X,\n  Play,\n  Pause,\n  RefreshCw,\n  BarChart3,\n  Zap,\n  Bot,\n  Eye,\n} from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface MultiBotPanelProps {\n  adminEmail: string;\n  adminUserId: string;\n}\n\nconst ICON_MAP: Record<string, React.ReactNode> = {\n  Home: <Home className=\"w-5 h-5\" />,\n  Plane: <Plane className=\"w-5 h-5\" />,\n  Clock: <Clock className=\"w-5 h-5\" />,\n  AlertTriangle: <AlertTriangle className=\"w-5 h-5\" />,\n  Target: <Target className=\"w-5 h-5\" />,\n  Crosshair: <Crosshair className=\"w-5 h-5\" />,\n  Flag: <Flag className=\"w-5 h-5\" />,\n  CreditCard: <CreditCard className=\"w-5 h-5\" />,\n  Bot: <Bot className=\"w-5 h-5\" />,\n  Activity: <Activity className=\"w-5 h-5\" />,\n  TrendingUp: <TrendingUp className=\"w-5 h-5\" />,\n  Zap: <Zap className=\"w-5 h-5\" />,\n  BarChart3: <BarChart3 className=\"w-5 h-5\" />,\n};\n\nconst getIcon = (iconName: string | null | undefined): React.ReactNode => {\n  if (!iconName) return <Bot className=\"w-5 h-5\" />;\n  return ICON_MAP[iconName] || <Bot className=\"w-5 h-5\" />;\n};\n\nexport function MultiBotPanel({ adminEmail, adminUserId }: MultiBotPanelProps) {\n  const [selectedBot, setSelectedBot] = useState<string | null>(null);\n  const [activeTab, setActiveTab] = useState(\"overview\");\n  const queryClient = useQueryClient();\n  const { toast } = useToast();\n\n  // Fetch all strategies\n  const { data: strategiesData, isLoading: loadingStrategies } = useQuery({\n    queryKey: [\"multibot-strategies\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/multibot/strategies\");\n      return res.json();\n    },\n    refetchInterval: 30000,\n  });\n\n  // Fetch all signals\n  const { data: signalsData, isLoading: loadingSignals } = useQuery({\n    queryKey: [\"multibot-signals\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/multibot/signals?limit=100\");\n      return res.json();\n    },\n    refetchInterval: 15000,\n  });\n\n  // Fetch performance stats\n  const { data: performanceData } = useQuery({\n    queryKey: [\"multibot-performance\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/multibot/performance\");\n      return res.json();\n    },\n    refetchInterval: 60000,\n  });\n\n  // Fetch detailed stats for selected bot\n  const { data: botStats, isLoading: loadingBotStats } = useQuery({\n    queryKey: [\"multibot-bot-stats\", selectedBot],\n    queryFn: async () => {\n      if (!selectedBot) return null;\n      const res = await fetch(`/api/multibot/strategies/${selectedBot}/stats`);\n      return res.json();\n    },\n    enabled: !!selectedBot,\n  });\n\n  // Toggle strategy mutation\n  const toggleStrategyMutation = useMutation({\n    mutationFn: async ({ strategyCode, isActive }: { strategyCode: string; isActive: boolean }) => {\n      const res = await fetch(`/api/multibot/strategies/${strategyCode}/toggle`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ adminEmail, adminUserId, isActive }),\n      });\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"multibot-strategies\"] });\n      toast({ title: \"Status atualizado\", description: \"Bot foi atualizado com sucesso\" });\n    },\n    onError: () => {\n      toast({ title: \"Erro\", description: \"Falha ao atualizar bot\", variant: \"destructive\" });\n    },\n  });\n\n  // Resolve signal mutation\n  const resolveSignalMutation = useMutation({\n    mutationFn: async ({ signalId, status, finalScore }: { signalId: string; status: string; finalScore: string }) => {\n      const res = await fetch(`/api/multibot/signals/${signalId}/resolve`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ adminEmail, adminUserId, status, finalScore }),\n      });\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"multibot-signals\"] });\n      queryClient.invalidateQueries({ queryKey: [\"multibot-performance\"] });\n      toast({ title: \"Sinal resolvido\", description: \"Resultado atualizado com sucesso\" });\n    },\n    onError: () => {\n      toast({ title: \"Erro\", description: \"Falha ao resolver sinal\", variant: \"destructive\" });\n    },\n  });\n\n  // Analyze matches mutation\n  const analyzeMutation = useMutation({\n    mutationFn: async () => {\n      const res = await fetch(\"/api/multibot/analyze\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ adminEmail, adminUserId }),\n      });\n      return res.json();\n    },\n    onSuccess: (data) => {\n      queryClient.invalidateQueries({ queryKey: [\"multibot-signals\"] });\n      toast({\n        title: \"An√°lise conclu√≠da\",\n        description: `${data.matchesAnalyzed} jogos analisados, ${data.signalsGenerated} sinais gerados`,\n      });\n    },\n    onError: () => {\n      toast({ title: \"Erro\", description: \"Falha na an√°lise\", variant: \"destructive\" });\n    },\n  });\n\n  const strategies = strategiesData?.strategies || [];\n  const signals = signalsData?.signals || [];\n  const performance = performanceData?.stats || [];\n\n  // Calculate summary stats\n  const totalSignals = signals.length;\n  const pendingSignals = signals.filter((s: any) => s.signalStatus === \"pending\").length;\n  const hitSignals = signals.filter((s: any) => s.signalStatus === \"hit\").length;\n  const missSignals = signals.filter((s: any) => s.signalStatus === \"miss\").length;\n  const overallHitRate = hitSignals + missSignals > 0\n    ? ((hitSignals / (hitSignals + missSignals)) * 100).toFixed(1)\n    : \"0.0\";\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case \"hit\": return \"bg-green-500/20 text-green-400 border-green-500/30\";\n      case \"miss\": return \"bg-red-500/20 text-red-400 border-red-500/30\";\n      case \"pending\": return \"bg-yellow-500/20 text-yellow-400 border-yellow-500/30\";\n      case \"void\": return \"bg-gray-500/20 text-gray-400 border-gray-500/30\";\n      default: return \"bg-gray-500/20 text-gray-400\";\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-3\">\n          <Bot className=\"w-8 h-8 text-[#33b864]\" />\n          <div>\n            <h2 className=\"text-2xl font-bold text-white\">Multi-Bot System</h2>\n            <p className=\"text-sm text-gray-400\">\n              {strategies.filter((s: any) => s.isActive).length} bots ativos de {strategies.length}\n            </p>\n          </div>\n        </div>\n        <Button\n          onClick={() => analyzeMutation.mutate()}\n          disabled={analyzeMutation.isPending}\n          className=\"bg-[#33b864] hover:bg-[#2da055] text-white\"\n          data-testid=\"button-analyze-matches\"\n        >\n          {analyzeMutation.isPending ? (\n            <RefreshCw className=\"w-4 h-4 mr-2 animate-spin\" />\n          ) : (\n            <Zap className=\"w-4 h-4 mr-2\" />\n          )}\n          Analisar Jogos Ao Vivo\n        </Button>\n      </div>\n\n      {/* Summary Cards */}\n      <div className=\"grid grid-cols-2 md:grid-cols-5 gap-4\">\n        <Card className=\"bg-gray-900/50 border-gray-800\">\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-gray-400 text-sm\">Total Sinais</span>\n              <Activity className=\"w-4 h-4 text-gray-500\" />\n            </div>\n            <p className=\"text-2xl font-bold text-white mt-1\" data-testid=\"text-total-signals\">{totalSignals}</p>\n          </CardContent>\n        </Card>\n        <Card className=\"bg-gray-900/50 border-gray-800\">\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-gray-400 text-sm\">Pendentes</span>\n              <Clock className=\"w-4 h-4 text-yellow-500\" />\n            </div>\n            <p className=\"text-2xl font-bold text-yellow-400 mt-1\" data-testid=\"text-pending-signals\">{pendingSignals}</p>\n          </CardContent>\n        </Card>\n        <Card className=\"bg-gray-900/50 border-gray-800\">\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-gray-400 text-sm\">Acertos</span>\n              <Check className=\"w-4 h-4 text-green-500\" />\n            </div>\n            <p className=\"text-2xl font-bold text-green-400 mt-1\" data-testid=\"text-hit-signals\">{hitSignals}</p>\n          </CardContent>\n        </Card>\n        <Card className=\"bg-gray-900/50 border-gray-800\">\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-gray-400 text-sm\">Erros</span>\n              <X className=\"w-4 h-4 text-red-500\" />\n            </div>\n            <p className=\"text-2xl font-bold text-red-400 mt-1\" data-testid=\"text-miss-signals\">{missSignals}</p>\n          </CardContent>\n        </Card>\n        <Card className=\"bg-gray-900/50 border-gray-800\">\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-gray-400 text-sm\">% Acerto</span>\n              <BarChart3 className=\"w-4 h-4 text-[#33b864]\" />\n            </div>\n            <p className=\"text-2xl font-bold text-[#33b864] mt-1\" data-testid=\"text-hit-rate\">{overallHitRate}%</p>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Tabs */}\n      <Tabs value={activeTab} onValueChange={setActiveTab}>\n        <TabsList className=\"bg-gray-900/50 border border-gray-800 overflow-x-auto flex-nowrap\">\n          <TabsTrigger value=\"overview\" className=\"data-[state=active]:bg-[#33b864] min-w-fit\">\n            Vis√£o Geral\n          </TabsTrigger>\n          <TabsTrigger value=\"strategies\" className=\"data-[state=active]:bg-[#33b864] min-w-fit\">\n            Estrat√©gias\n          </TabsTrigger>\n          <TabsTrigger value=\"signals\" className=\"data-[state=active]:bg-[#33b864] min-w-fit\">\n            Sinais\n          </TabsTrigger>\n          <TabsTrigger value=\"reports\" className=\"data-[state=active]:bg-[#33b864] min-w-fit\">\n            Relat√≥rios\n          </TabsTrigger>\n        </TabsList>\n\n        {/* Overview Tab */}\n        <TabsContent value=\"overview\" className=\"space-y-4 mt-4\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n            {strategies.map((strategy: any) => {\n              const strategySignals = signals.filter((s: any) => s.strategyCode === strategy.strategyCode);\n              const hits = strategySignals.filter((s: any) => s.signalStatus === \"hit\").length;\n              const misses = strategySignals.filter((s: any) => s.signalStatus === \"miss\").length;\n              const hitRate = hits + misses > 0 ? ((hits / (hits + misses)) * 100).toFixed(1) : \"N/A\";\n              \n              return (\n                <Card\n                  key={strategy.id}\n                  className={`bg-gray-900/50 border-gray-800 cursor-pointer transition-all hover:border-[#33b864]/50 ${\n                    selectedBot === strategy.strategyCode ? \"border-[#33b864]\" : \"\"\n                  }`}\n                  onClick={() => setSelectedBot(strategy.strategyCode)}\n                  data-testid={`card-bot-${strategy.strategyCode}`}\n                >\n                  <CardContent className=\"p-4\">\n                    <div className=\"flex items-center justify-between mb-3\">\n                      <div className=\"flex items-center gap-2\">\n                        <div\n                          className=\"p-2 rounded-lg\"\n                          style={{ backgroundColor: `${strategy.strategyColor}20` }}\n                        >\n                          {getIcon(strategy.strategyIcon)}\n                        </div>\n                        <div>\n                          <h4 className=\"font-semibold text-white text-sm\">\n                            {strategy.strategyName}\n                          </h4>\n                          <p className=\"text-xs text-gray-500\">\n                            {strategy.strategyType === \"live_late\" ? \"75-90 min\" :\n                             strategy.strategyType === \"live_ht\" ? \"1¬∫ Tempo\" :\n                             strategy.strategyType === \"live_ft\" ? \"2¬∫ Tempo\" :\n                             strategy.strategyType === \"special\" ? \"Especial\" : \"Pr√©-Live\"}\n                          </p>\n                        </div>\n                      </div>\n                      <Switch\n                        checked={strategy.isActive}\n                        onCheckedChange={(checked) =>\n                          toggleStrategyMutation.mutate({\n                            strategyCode: strategy.strategyCode,\n                            isActive: checked,\n                          })\n                        }\n                        onClick={(e) => e.stopPropagation()}\n                        data-testid={`switch-bot-${strategy.strategyCode}`}\n                      />\n                    </div>\n\n                    <div className=\"grid grid-cols-3 gap-2 text-center\">\n                      <div>\n                        <p className=\"text-xs text-gray-500\">Sinais</p>\n                        <p className=\"text-sm font-bold text-white\">{strategySignals.length}</p>\n                      </div>\n                      <div>\n                        <p className=\"text-xs text-gray-500\">Acertos</p>\n                        <p className=\"text-sm font-bold text-green-400\">{hits}</p>\n                      </div>\n                      <div>\n                        <p className=\"text-xs text-gray-500\">% Acerto</p>\n                        <p className=\"text-sm font-bold\" style={{ color: strategy.strategyColor }}>\n                          {hitRate}%\n                        </p>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              );\n            })}\n          </div>\n        </TabsContent>\n\n        {/* Strategies Tab */}\n        <TabsContent value=\"strategies\" className=\"space-y-4 mt-4\">\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4\">\n            {strategies.map((strategy: any) => (\n              <Card key={strategy.id} className=\"bg-gray-900/50 border-gray-800\">\n                <CardHeader className=\"pb-2\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center gap-3\">\n                      <div\n                        className=\"p-2 rounded-lg\"\n                        style={{ backgroundColor: `${strategy.strategyColor}20` }}\n                      >\n                        {getIcon(strategy.strategyIcon)}\n                      </div>\n                      <div>\n                        <CardTitle className=\"text-lg text-white\">\n                          {strategy.strategyName}\n                        </CardTitle>\n                        <Badge\n                          variant=\"outline\"\n                          className={strategy.isActive ? \"text-green-400 border-green-400\" : \"text-gray-400\"}\n                        >\n                          {strategy.isActive ? \"Ativo\" : \"Inativo\"}\n                        </Badge>\n                      </div>\n                    </div>\n                    <Switch\n                      checked={strategy.isActive}\n                      onCheckedChange={(checked) =>\n                        toggleStrategyMutation.mutate({\n                          strategyCode: strategy.strategyCode,\n                          isActive: checked,\n                        })\n                      }\n                    />\n                  </div>\n                </CardHeader>\n                <CardContent>\n                  <p className=\"text-sm text-gray-400 mb-4\">\n                    {strategy.strategyDescription}\n                  </p>\n                  <div className=\"grid grid-cols-3 gap-4 text-sm\">\n                    <div>\n                      <p className=\"text-gray-500\">Tipo</p>\n                      <p className=\"text-white font-medium\">\n                        {strategy.strategyType === \"live_late\" ? \"Final (75-90')\" :\n                         strategy.strategyType === \"live_ht\" ? \"1¬∫ Tempo\" :\n                         strategy.strategyType === \"live_ft\" ? \"2¬∫ Tempo\" :\n                         strategy.strategyType === \"special\" ? \"Especial\" : \"Pr√©-Live\"}\n                      </p>\n                    </div>\n                    <div>\n                      <p className=\"text-gray-500\">Press√£o M√≠n.</p>\n                      <p className=\"text-white font-medium\">\n                        {strategy.minPressureThreshold ? `${strategy.minPressureThreshold}%` : \"N/A\"}\n                      </p>\n                    </div>\n                    <div>\n                      <p className=\"text-gray-500\">Confian√ßa M√≠n.</p>\n                      <p className=\"text-white font-medium\">{strategy.minConfidenceThreshold}%</p>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        </TabsContent>\n\n        {/* Signals Tab */}\n        <TabsContent value=\"signals\" className=\"mt-4\">\n          <Card className=\"bg-gray-900/50 border-gray-800\">\n            <CardHeader>\n              <CardTitle className=\"text-white flex items-center gap-2\">\n                <Activity className=\"w-5 h-5 text-[#33b864]\" />\n                Sinais Recentes\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <ScrollArea className=\"h-[500px]\">\n                <div className=\"space-y-3\">\n                  {loadingSignals ? (\n                    <p className=\"text-gray-400 text-center py-4\">Carregando...</p>\n                  ) : signals.length === 0 ? (\n                    <p className=\"text-gray-400 text-center py-4\">Nenhum sinal gerado ainda</p>\n                  ) : (\n                    signals.map((signal: any) => (\n                      <div\n                        key={signal.id}\n                        className=\"bg-gray-800/50 rounded-lg p-4 border border-gray-700\"\n                        data-testid={`card-signal-${signal.id}`}\n                      >\n                        <div className=\"flex items-start justify-between gap-4\">\n                          <div className=\"flex-1 min-w-0\">\n                            <div className=\"flex items-center gap-2 mb-2\">\n                              <Badge\n                                variant=\"outline\"\n                                className={getStatusColor(signal.signalStatus)}\n                              >\n                                {signal.signalStatus === \"hit\" ? \"‚úì ACERTO\" :\n                                 signal.signalStatus === \"miss\" ? \"‚úó ERRO\" :\n                                 signal.signalStatus === \"pending\" ? \"‚è≥ PENDENTE\" : signal.signalStatus.toUpperCase()}\n                              </Badge>\n                              <Badge variant=\"outline\" className=\"text-gray-400 border-gray-600\">\n                                {signal.strategyCode}\n                              </Badge>\n                            </div>\n                            \n                            <div className=\"flex items-center gap-2 mb-1\">\n                              {signal.homeTeamLogo && (\n                                <img src={signal.homeTeamLogo} alt=\"\" className=\"w-5 h-5\" />\n                              )}\n                              <span className=\"text-white font-medium truncate\">\n                                {signal.homeTeam} vs {signal.awayTeam}\n                              </span>\n                              {signal.awayTeamLogo && (\n                                <img src={signal.awayTeamLogo} alt=\"\" className=\"w-5 h-5\" />\n                              )}\n                            </div>\n                            \n                            <div className=\"flex items-center gap-4 text-sm text-gray-400\">\n                              <span>{signal.league}</span>\n                              <span>{signal.signalMinute}'</span>\n                              <span className=\"text-[#33b864]\">{signal.market}</span>\n                              <span>Confian√ßa: {signal.confidenceScore}%</span>\n                            </div>\n                          </div>\n                          \n                          {signal.signalStatus === \"pending\" && (\n                            <div className=\"flex gap-2\">\n                              <Button\n                                size=\"sm\"\n                                variant=\"outline\"\n                                className=\"border-green-500 text-green-400 hover:bg-green-500/20\"\n                                onClick={() => resolveSignalMutation.mutate({\n                                  signalId: signal.id,\n                                  status: \"hit\",\n                                  finalScore: signal.scoreWhenGenerated,\n                                })}\n                                data-testid={`button-hit-${signal.id}`}\n                              >\n                                <Check className=\"w-4 h-4\" />\n                              </Button>\n                              <Button\n                                size=\"sm\"\n                                variant=\"outline\"\n                                className=\"border-red-500 text-red-400 hover:bg-red-500/20\"\n                                onClick={() => resolveSignalMutation.mutate({\n                                  signalId: signal.id,\n                                  status: \"miss\",\n                                  finalScore: signal.scoreWhenGenerated,\n                                })}\n                                data-testid={`button-miss-${signal.id}`}\n                              >\n                                <X className=\"w-4 h-4\" />\n                              </Button>\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                    ))\n                  )}\n                </div>\n              </ScrollArea>\n            </CardContent>\n          </Card>\n        </TabsContent>\n\n        {/* Reports Tab */}\n        <TabsContent value=\"reports\" className=\"mt-4\">\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            {strategies.map((strategy: any) => {\n              const strategySignals = signals.filter((s: any) => s.strategyCode === strategy.strategyCode);\n              const hits = strategySignals.filter((s: any) => s.signalStatus === \"hit\").length;\n              const misses = strategySignals.filter((s: any) => s.signalStatus === \"miss\").length;\n              const pending = strategySignals.filter((s: any) => s.signalStatus === \"pending\").length;\n              const total = hits + misses;\n              const hitRate = total > 0 ? ((hits / total) * 100).toFixed(1) : \"0.0\";\n              \n              let profit = 0;\n              strategySignals.forEach((s: any) => {\n                if (s.signalStatus === \"hit\") profit += Number(s.suggestedOdd || 1.5) - 1;\n                if (s.signalStatus === \"miss\") profit -= 1;\n              });\n\n              return (\n                <Card key={strategy.id} className=\"bg-gray-900/50 border-gray-800\">\n                  <CardHeader className=\"pb-2\">\n                    <div className=\"flex items-center gap-3\">\n                      <div\n                        className=\"p-2 rounded-lg\"\n                        style={{ backgroundColor: `${strategy.strategyColor}20` }}\n                      >\n                        {getIcon(strategy.strategyIcon)}\n                      </div>\n                      <CardTitle className=\"text-lg text-white\">\n                        {strategy.strategyName}\n                      </CardTitle>\n                    </div>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"grid grid-cols-2 gap-4 mb-4\">\n                      <div className=\"bg-gray-800/50 rounded-lg p-3 text-center\">\n                        <p className=\"text-xs text-gray-500 mb-1\">Taxa de Acerto</p>\n                        <p\n                          className=\"text-2xl font-bold\"\n                          style={{ color: Number(hitRate) >= 55 ? \"#33b864\" : Number(hitRate) >= 45 ? \"#eab308\" : \"#ef4444\" }}\n                        >\n                          {hitRate}%\n                        </p>\n                      </div>\n                      <div className=\"bg-gray-800/50 rounded-lg p-3 text-center\">\n                        <p className=\"text-xs text-gray-500 mb-1\">Lucro/Preju√≠zo</p>\n                        <div className=\"flex items-center justify-center gap-1\">\n                          {profit >= 0 ? (\n                            <TrendingUp className=\"w-5 h-5 text-green-400\" />\n                          ) : (\n                            <TrendingDown className=\"w-5 h-5 text-red-400\" />\n                          )}\n                          <p className={`text-2xl font-bold ${profit >= 0 ? \"text-green-400\" : \"text-red-400\"}`}>\n                            {profit >= 0 ? \"+\" : \"\"}{profit.toFixed(2)}u\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n\n                    <div className=\"grid grid-cols-4 gap-2 text-center text-sm\">\n                      <div>\n                        <p className=\"text-gray-500\">Total</p>\n                        <p className=\"font-bold text-white\">{strategySignals.length}</p>\n                      </div>\n                      <div>\n                        <p className=\"text-gray-500\">Acertos</p>\n                        <p className=\"font-bold text-green-400\">{hits}</p>\n                      </div>\n                      <div>\n                        <p className=\"text-gray-500\">Erros</p>\n                        <p className=\"font-bold text-red-400\">{misses}</p>\n                      </div>\n                      <div>\n                        <p className=\"text-gray-500\">Pendentes</p>\n                        <p className=\"font-bold text-yellow-400\">{pending}</p>\n                      </div>\n                    </div>\n\n                    {/* Visual progress bar */}\n                    <div className=\"mt-4\">\n                      <div className=\"flex h-2 rounded-full overflow-hidden bg-gray-700\">\n                        <div\n                          className=\"bg-green-500\"\n                          style={{ width: `${total > 0 ? (hits / total) * 100 : 0}%` }}\n                        />\n                        <div\n                          className=\"bg-red-500\"\n                          style={{ width: `${total > 0 ? (misses / total) * 100 : 0}%` }}\n                        />\n                      </div>\n                      <div className=\"flex justify-between text-xs text-gray-500 mt-1\">\n                        <span>Acertos: {total > 0 ? ((hits / total) * 100).toFixed(0) : 0}%</span>\n                        <span>Erros: {total > 0 ? ((misses / total) * 100).toFixed(0) : 0}%</span>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              );\n            })}\n          </div>\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n}\n","path":null,"size_bytes":28011,"size_tokens":null},"server/market-resolver.ts":{"content":"/**\n * Market Resolver - Resolves betting markets against real match data\n * Supports: Goals (FT/HT/2H), BTTS, 1X2, Double Chance, Corners, Cards, Shots\n */\n\nexport interface MatchData {\n  homeGoals: number;\n  awayGoals: number;\n  homeGoalsHT: number;\n  awayGoalsHT: number;\n  homeCorners: number;\n  awayCorners: number;\n  homeYellowCards: number;\n  awayYellowCards: number;\n  homeRedCards: number;\n  awayRedCards: number;\n  homeShotsOnTarget: number;\n  awayShotsOnTarget: number;\n  homeShotsTotal: number;\n  awayShotsTotal: number;\n}\n\nexport interface MarketResolution {\n  result: 'green' | 'red';\n  actualValue?: number;\n  line?: number;\n  marketType: string;\n}\n\nexport function resolveMarket(market: string, matchData: MatchData, homeTeam?: string, awayTeam?: string): MarketResolution | null {\n  const marketLower = market.toLowerCase();\n  \n  // Calculate totals\n  const totalGoals = matchData.homeGoals + matchData.awayGoals;\n  const totalGoalsHT = matchData.homeGoalsHT + matchData.awayGoalsHT;\n  const goals2H = totalGoals - totalGoalsHT;\n  const totalCorners = matchData.homeCorners + matchData.awayCorners;\n  const totalYellowCards = matchData.homeYellowCards + matchData.awayYellowCards;\n  const totalRedCards = matchData.homeRedCards + matchData.awayRedCards;\n  const totalCards = totalYellowCards + totalRedCards;\n  const totalShotsOnTarget = matchData.homeShotsOnTarget + matchData.awayShotsOnTarget;\n  const totalShots = matchData.homeShotsTotal + matchData.awayShotsTotal;\n  \n  // Detect market period\n  const is2HMarket = /2[¬∫¬™]?\\s*tempo|second\\s*half|2nd\\s*half|2h(t)?|\\bh2\\b/i.test(market);\n  const isHTMarket = !is2HMarket && /1[¬∫¬™]?\\s*tempo|first\\s*half|1st\\s*half|1h(t)?|\\bh1\\b|half\\s*time|\\bht\\b/i.test(market);\n  const isFTMarket = !isHTMarket && !is2HMarket;\n  \n  // Detect market category\n  const isCornerMarket = /corner|escanteio/i.test(market);\n  const isCardMarket = /cart[√£a]o|card/i.test(market);\n  const isShotMarket = /chute|shot|finaliza[√ßc]/i.test(market);\n  const isGoalMarket = !isCornerMarket && !isCardMarket && !isShotMarket;\n  \n  // Extract line from market (e.g., \"Over 2.5\" -> 2.5)\n  const lineMatch = market.match(/(\\d+\\.?\\d*)/);\n  const line = lineMatch ? parseFloat(lineMatch[1]) : null;\n  \n  // ===== GOALS MARKETS =====\n  if (isGoalMarket) {\n    const relevantGoals = is2HMarket ? goals2H : isHTMarket ? totalGoalsHT : totalGoals;\n    \n    // Over/Under Goals\n    if (/over|mais\\s*de|acima/i.test(market) && line !== null) {\n      const won = relevantGoals > line;\n      return { \n        result: won ? 'green' : 'red', \n        actualValue: relevantGoals, \n        line, \n        marketType: `goals_over_${line}` \n      };\n    }\n    if (/under|menos\\s*de|abaixo/i.test(market) && line !== null) {\n      const won = relevantGoals < line;\n      return { \n        result: won ? 'green' : 'red', \n        actualValue: relevantGoals, \n        line, \n        marketType: `goals_under_${line}` \n      };\n    }\n    \n    // BTTS (Both Teams To Score)\n    if (/btts|ambas?\\s*marcam|ambos?\\s*marcam|both\\s*teams?\\s*(to\\s*)?score/i.test(market)) {\n      const bttsYes = matchData.homeGoals > 0 && matchData.awayGoals > 0;\n      const isBttsNo = /n[√£a]o|no/i.test(market);\n      const won = isBttsNo ? !bttsYes : bttsYes;\n      return { \n        result: won ? 'green' : 'red', \n        marketType: isBttsNo ? 'btts_no' : 'btts_yes' \n      };\n    }\n    \n    // Match Result (1X2)\n    if (/1x2|resultado\\s*(final)?|match\\s*result|winner|vit[√≥o]ria|vencer|win/i.test(market) ||\n        /^[12x]$/i.test(market.trim()) || /[-:]\\s*[12x]\\s*$/i.test(market)) {\n      \n      // Home win (1)\n      if (/home|casa|[-:]\\s*1\\s*$|\\(1\\)|:\\s*1\\b/i.test(market) || \n          (homeTeam && marketLower.includes(homeTeam.toLowerCase()))) {\n        const won = matchData.homeGoals > matchData.awayGoals;\n        return { result: won ? 'green' : 'red', marketType: '1x2_home' };\n      }\n      \n      // Away win (2)\n      if (/away|fora|[-:]\\s*2\\s*$|\\(2\\)|:\\s*2\\b/i.test(market) ||\n          (awayTeam && marketLower.includes(awayTeam.toLowerCase()))) {\n        const won = matchData.awayGoals > matchData.homeGoals;\n        return { result: won ? 'green' : 'red', marketType: '1x2_away' };\n      }\n      \n      // Draw (X)\n      if (/draw|empate|[-:]\\s*x\\s*$/i.test(market)) {\n        const won = matchData.homeGoals === matchData.awayGoals;\n        return { result: won ? 'green' : 'red', marketType: '1x2_draw' };\n      }\n    }\n    \n    // Double Chance\n    if (/dupla\\s*chance|double\\s*chance/i.test(market)) {\n      if (/1x|home\\s*or\\s*draw|casa\\s*ou\\s*empate/i.test(market)) {\n        const won = matchData.homeGoals >= matchData.awayGoals;\n        return { result: won ? 'green' : 'red', marketType: 'dc_1x' };\n      }\n      if (/x2|draw\\s*or\\s*away|empate\\s*ou\\s*fora/i.test(market)) {\n        const won = matchData.awayGoals >= matchData.homeGoals;\n        return { result: won ? 'green' : 'red', marketType: 'dc_x2' };\n      }\n      if (/12|home\\s*or\\s*away/i.test(market)) {\n        const won = matchData.homeGoals !== matchData.awayGoals;\n        return { result: won ? 'green' : 'red', marketType: 'dc_12' };\n      }\n    }\n    \n    // Draw standalone\n    if (/^empate$|^draw$/i.test(market.trim())) {\n      const won = matchData.homeGoals === matchData.awayGoals;\n      return { result: won ? 'green' : 'red', marketType: '1x2_draw' };\n    }\n  }\n  \n  // ===== CORNERS MARKETS =====\n  if (isCornerMarket && line !== null) {\n    if (/over|mais\\s*de|acima/i.test(market)) {\n      const won = totalCorners > line;\n      return { \n        result: won ? 'green' : 'red', \n        actualValue: totalCorners, \n        line, \n        marketType: `corners_over_${line}` \n      };\n    }\n    if (/under|menos\\s*de|abaixo/i.test(market)) {\n      const won = totalCorners < line;\n      return { \n        result: won ? 'green' : 'red', \n        actualValue: totalCorners, \n        line, \n        marketType: `corners_under_${line}` \n      };\n    }\n  }\n  \n  // ===== CARDS MARKETS =====\n  if (isCardMarket && line !== null) {\n    if (/over|mais\\s*de|acima/i.test(market)) {\n      const won = totalCards > line;\n      return { \n        result: won ? 'green' : 'red', \n        actualValue: totalCards, \n        line, \n        marketType: `cards_over_${line}` \n      };\n    }\n    if (/under|menos\\s*de|abaixo/i.test(market)) {\n      const won = totalCards < line;\n      return { \n        result: won ? 'green' : 'red', \n        actualValue: totalCards, \n        line, \n        marketType: `cards_under_${line}` \n      };\n    }\n    \n    // Both teams receive card\n    if (/ambas?\\s*receberem?\\s*cart[√£a]o|both\\s*teams?\\s*receive/i.test(market)) {\n      const bothReceived = (matchData.homeYellowCards + matchData.homeRedCards) > 0 && \n                           (matchData.awayYellowCards + matchData.awayRedCards) > 0;\n      const isNo = /n[√£a]o|no/i.test(market);\n      const won = isNo ? !bothReceived : bothReceived;\n      return { result: won ? 'green' : 'red', marketType: isNo ? 'cards_both_no' : 'cards_both_yes' };\n    }\n  }\n  \n  // ===== SHOTS MARKETS =====\n  if (isShotMarket && line !== null) {\n    const relevantShots = /alvo|target/i.test(market) ? totalShotsOnTarget : totalShots;\n    \n    if (/over|mais\\s*de|acima/i.test(market)) {\n      const won = relevantShots > line;\n      return { \n        result: won ? 'green' : 'red', \n        actualValue: relevantShots, \n        line, \n        marketType: `shots_over_${line}` \n      };\n    }\n    if (/under|menos\\s*de|abaixo/i.test(market)) {\n      const won = relevantShots < line;\n      return { \n        result: won ? 'green' : 'red', \n        actualValue: relevantShots, \n        line, \n        marketType: `shots_under_${line}` \n      };\n    }\n  }\n  \n  // Unknown market - return null for manual review\n  console.log(`[Market Resolver] Unknown market format: \"${market}\"`);\n  return null;\n}\n\n/**\n * Resolve a combo/multiple bet - ALL legs must win\n */\nexport function resolveCombo(legs: Array<{ market: string; homeTeam?: string; awayTeam?: string }>, matchDataMap: Map<string, MatchData>): 'green' | 'red' | null {\n  let allWon = true;\n  let hasUnresolved = false;\n  \n  for (const leg of legs) {\n    const fixtureKey = `${leg.homeTeam}_${leg.awayTeam}`;\n    const matchData = matchDataMap.get(fixtureKey);\n    \n    if (!matchData) {\n      hasUnresolved = true;\n      continue;\n    }\n    \n    const resolution = resolveMarket(leg.market, matchData, leg.homeTeam, leg.awayTeam);\n    \n    if (!resolution) {\n      hasUnresolved = true;\n      continue;\n    }\n    \n    if (resolution.result === 'red') {\n      return 'red'; // One loss = entire combo loses\n    }\n  }\n  \n  if (hasUnresolved) {\n    return null; // Can't determine yet\n  }\n  \n  return allWon ? 'green' : 'red';\n}\n\n/**\n * Extract match statistics from API-Football response\n */\nexport function extractMatchData(fixture: any, statistics: any[]): MatchData {\n  const homeStats = statistics?.[0]?.statistics || [];\n  const awayStats = statistics?.[1]?.statistics || [];\n  \n  const getStat = (stats: any[], type: string): number => {\n    const stat = stats.find((s: any) => s.type.toLowerCase().includes(type.toLowerCase()));\n    if (!stat || stat.value === null) return 0;\n    return typeof stat.value === 'string' ? parseInt(stat.value) || 0 : stat.value;\n  };\n  \n  return {\n    homeGoals: fixture.goals?.home ?? 0,\n    awayGoals: fixture.goals?.away ?? 0,\n    homeGoalsHT: fixture.score?.halftime?.home ?? 0,\n    awayGoalsHT: fixture.score?.halftime?.away ?? 0,\n    homeCorners: getStat(homeStats, 'corner'),\n    awayCorners: getStat(awayStats, 'corner'),\n    homeYellowCards: getStat(homeStats, 'yellow'),\n    awayYellowCards: getStat(awayStats, 'yellow'),\n    homeRedCards: getStat(homeStats, 'red'),\n    awayRedCards: getStat(awayStats, 'red'),\n    homeShotsOnTarget: getStat(homeStats, 'shots on goal'),\n    awayShotsOnTarget: getStat(awayStats, 'shots on goal'),\n    homeShotsTotal: getStat(homeStats, 'total shots'),\n    awayShotsTotal: getStat(awayStats, 'total shots')\n  };\n}\n","path":null,"size_bytes":10027,"size_tokens":null},"client/src/hooks/use-user-bets.ts":{"content":"import { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport axios from \"axios\";\nimport { useAuth } from \"./use-auth\";\n\ninterface UserBet {\n  id: string;\n  userId: string;\n  tipId: string;\n  enteredAt: string;\n  result: 'pending' | 'green' | 'red';\n  resultMarkedAt: string | null;\n  stakeUsed: string;\n  oddAtEntry: string;\n  profit: string | null;\n}\n\ninterface UserStats {\n  greens: number;\n  reds: number;\n  pending: number;\n  profit: number;\n  totalBets: number;\n  assertivity: number;\n  monthName: string;\n}\n\nexport function useUserBets() {\n  const { user } = useAuth();\n  const queryClient = useQueryClient();\n\n  const { data: userBets = [], isLoading: betsLoading } = useQuery<UserBet[]>({\n    queryKey: ['user-bets', user?.id],\n    queryFn: async () => {\n      if (!user?.id) return [];\n      const response = await axios.get(`/api/user-bets/${user.id}`);\n      return response.data.bets || [];\n    },\n    enabled: !!user?.id,\n  });\n\n  const { data: stats, isLoading: statsLoading } = useQuery<UserStats>({\n    queryKey: ['user-bets-stats', user?.id],\n    queryFn: async () => {\n      if (!user?.id) return null;\n      const response = await axios.get(`/api/user-bets/stats/${user.id}`);\n      return response.data;\n    },\n    enabled: !!user?.id,\n  });\n\n  const enterBetMutation = useMutation({\n    mutationFn: async ({ tipId, stakeUsed, oddAtEntry }: { tipId: string; stakeUsed: string; oddAtEntry: string }) => {\n      if (!user?.id) throw new Error('User not logged in');\n      const response = await axios.post('/api/user-bets', {\n        userId: user.id,\n        tipId,\n        stakeUsed,\n        oddAtEntry\n      });\n      return response.data;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['user-bets', user?.id] });\n      queryClient.invalidateQueries({ queryKey: ['user-bets-stats', user?.id] });\n    }\n  });\n\n  const markResultMutation = useMutation({\n    mutationFn: async ({ tipId, result }: { tipId: string; result: 'green' | 'red' }) => {\n      if (!user?.id) throw new Error('User not logged in');\n      const response = await axios.patch(`/api/user-bets/${user.id}/${tipId}`, { result });\n      return response.data;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['user-bets', user?.id] });\n      queryClient.invalidateQueries({ queryKey: ['user-bets-stats', user?.id] });\n    }\n  });\n\n  const hasEntered = (tipId: string) => {\n    return userBets.some(bet => bet.tipId === tipId);\n  };\n\n  const getBet = (tipId: string) => {\n    return userBets.find(bet => bet.tipId === tipId);\n  };\n\n  const enterBet = async (tipId: string, stakeUsed: string, oddAtEntry: string) => {\n    return enterBetMutation.mutateAsync({ tipId, stakeUsed, oddAtEntry });\n  };\n\n  const markResult = async (tipId: string, result: 'green' | 'red') => {\n    return markResultMutation.mutateAsync({ tipId, result });\n  };\n\n  return {\n    userBets,\n    stats,\n    hasEntered,\n    getBet,\n    enterBet,\n    markResult,\n    isLoading: betsLoading || statsLoading,\n    isEntering: enterBetMutation.isPending,\n    isMarkingResult: markResultMutation.isPending,\n  };\n}\n","path":null,"size_bytes":3148,"size_tokens":null},"server/result-checker.ts":{"content":"import axios from 'axios';\nimport { db } from './db';\nimport { tips, userBets } from '@shared/schema';\nimport { eq, and, isNotNull } from 'drizzle-orm';\nimport { resolveMarket, extractMatchData, MatchData } from './market-resolver';\n\nconst API_BASE_URL = 'https://v3.football.api-sports.io';\nconst FOOTBALL_API_KEY = process.env.FOOTBALL_API_KEY;\n\ninterface FixtureResult {\n  fixture: {\n    id: number;\n    status: { short: string; long: string };\n  };\n  teams: {\n    home: { id: number; name: string };\n    away: { id: number; name: string };\n  };\n  goals: {\n    home: number | null;\n    away: number | null;\n  };\n  score: {\n    halftime: { home: number | null; away: number | null };\n    fulltime: { home: number | null; away: number | null };\n  };\n}\n\nexport class ResultChecker {\n  private isRunning = false;\n  private intervalId: NodeJS.Timeout | null = null;\n\n  async checkPendingTips(): Promise<{ checked: number; updated: number }> {\n    if (!FOOTBALL_API_KEY) {\n      console.warn('[Result Checker] API key not configured');\n      return { checked: 0, updated: 0 };\n    }\n\n    console.log('[Result Checker] Starting check for pending tips...');\n    \n    const pendingTips = await db.select()\n      .from(tips)\n      .where(\n        and(\n          eq(tips.status, 'pending'),\n          isNotNull(tips.fixtureId)\n        )\n      );\n\n    console.log(`[Result Checker] Found ${pendingTips.length} pending tips with fixtureId`);\n\n    let checked = 0;\n    let updated = 0;\n\n    for (const tip of pendingTips) {\n      try {\n        const result = await this.checkTipResult(tip);\n        checked++;\n        \n        if (result !== null) {\n          const tipOdd = parseFloat(String(tip.totalOdd || tip.odd || 1));\n          const stake = parseFloat(String(tip.stake || '1'));\n          const profit = result === 'green' \n            ? (tipOdd - 1) * stake\n            : -stake;\n          \n          // Update tip status\n          await db.update(tips)\n            .set({\n              status: result,\n              settledAt: new Date(),\n              resultProfit: String(profit.toFixed(2)),\n              updatedAt: new Date()\n            })\n            .where(eq(tips.id, tip.id));\n          \n          console.log(`[Result Checker] Updated tip ${tip.id}: ${result} (profit: ${profit.toFixed(2)}u)`);\n          \n          // Sync user bets with canonical result\n          await this.syncUserBetsWithResult(tip.id, result, tipOdd);\n          \n          updated++;\n        }\n      } catch (error) {\n        console.error(`[Result Checker] Error checking tip ${tip.id}:`, error);\n      }\n      \n      // Rate limiting: 500ms between API calls\n      await new Promise(resolve => setTimeout(resolve, 500));\n    }\n\n    console.log(`[Result Checker] Finished: ${checked} checked, ${updated} updated`);\n    return { checked, updated };\n  }\n\n  /**\n   * Sync all user bets for a tip with the canonical result\n   */\n  private async syncUserBetsWithResult(tipId: string, result: 'green' | 'red', tipOdd: number): Promise<void> {\n    try {\n      // Get all user bets for this tip\n      const bets = await db.select()\n        .from(userBets)\n        .where(eq(userBets.tipId, tipId));\n      \n      if (bets.length === 0) return;\n      \n      console.log(`[Result Checker] Syncing ${bets.length} user bets for tip ${tipId}`);\n      \n      for (const bet of bets) {\n        const stakeUsed = parseFloat(bet.stakeUsed || '1');\n        const oddAtEntry = parseFloat(bet.oddAtEntry || String(tipOdd));\n        const profit = result === 'green' \n          ? (oddAtEntry - 1) * stakeUsed\n          : -stakeUsed;\n        \n        await db.update(userBets)\n          .set({\n            result,\n            resultMarkedAt: new Date(),\n            profit: String(profit.toFixed(2))\n          })\n          .where(eq(userBets.id, bet.id));\n      }\n      \n      console.log(`[Result Checker] Synced ${bets.length} user bets to ${result}`);\n    } catch (error) {\n      console.error(`[Result Checker] Error syncing user bets for tip ${tipId}:`, error);\n    }\n  }\n\n  private async checkTipResult(tip: any): Promise<'green' | 'red' | null> {\n    if (!tip.fixtureId) return null;\n\n    try {\n      // Fetch fixture data with statistics\n      const [fixtureResponse, statsResponse] = await Promise.all([\n        axios.get(`${API_BASE_URL}/fixtures`, {\n          params: { id: tip.fixtureId },\n          headers: { 'x-apisports-key': FOOTBALL_API_KEY }\n        }),\n        axios.get(`${API_BASE_URL}/fixtures/statistics`, {\n          params: { fixture: tip.fixtureId },\n          headers: { 'x-apisports-key': FOOTBALL_API_KEY }\n        })\n      ]);\n\n      const fixture = fixtureResponse.data.response?.[0] as FixtureResult | undefined;\n      if (!fixture) return null;\n\n      const status = fixture.fixture.status.short;\n      \n      // Only settle finished matches\n      if (!['FT', 'AET', 'PEN'].includes(status)) {\n        return null;\n      }\n\n      // Extract match data including statistics\n      const statistics = statsResponse.data.response || [];\n      const matchData = extractMatchData(fixture, statistics);\n      \n      // Check if it's a combo/multi-leg bet\n      if (tip.isCombo && tip.legs) {\n        return this.resolveComboTip(tip, tip.fixtureId);\n      }\n      \n      // Single bet - use market resolver\n      const resolution = resolveMarket(tip.market, matchData, tip.homeTeam, tip.awayTeam);\n      \n      if (resolution) {\n        console.log(`[Result Checker] Market \"${tip.market}\" resolved: ${resolution.result} (actual: ${resolution.actualValue ?? 'N/A'})`);\n        return resolution.result;\n      }\n      \n      console.log(`[Result Checker] Could not resolve market: ${tip.market}`);\n      return null;\n\n    } catch (error) {\n      console.error(`[Result Checker] API error for fixture ${tip.fixtureId}:`, error);\n      return null;\n    }\n  }\n\n  /**\n   * Resolve a combo/multi-leg bet\n   * ALL legs must win for the combo to win\n   * Each leg fetches its own fixture data to ensure correct resolution\n   */\n  private async resolveComboTip(tip: any, primaryFixtureId: string): Promise<'green' | 'red' | null> {\n    try {\n      let legs: any[];\n      try {\n        legs = typeof tip.legs === 'string' ? JSON.parse(tip.legs) : tip.legs;\n      } catch {\n        return null;\n      }\n      \n      if (!Array.isArray(legs) || legs.length === 0) return null;\n      \n      console.log(`[Result Checker] Resolving combo with ${legs.length} legs`);\n      \n      // Build a map of fixtureId -> matchData for all unique fixtures\n      const fixtureIds = new Set<string>();\n      for (const leg of legs) {\n        if (leg.fixtureId) {\n          fixtureIds.add(String(leg.fixtureId));\n        }\n      }\n      // Add primary fixture if exists\n      if (primaryFixtureId) {\n        fixtureIds.add(String(primaryFixtureId));\n      }\n      \n      // Fetch all fixture data in parallel\n      const matchDataMap = new Map<string, MatchData>();\n      const fetchPromises = Array.from(fixtureIds).map(async (fixtureId) => {\n        const data = await this.fetchFixtureMatchData(fixtureId);\n        if (data) {\n          matchDataMap.set(fixtureId, data.matchData);\n          return { fixtureId, finished: data.finished };\n        }\n        return { fixtureId, finished: false };\n      });\n      \n      const results = await Promise.all(fetchPromises);\n      \n      // Check if all fixtures are finished\n      const allFinished = results.every(r => r.finished);\n      if (!allFinished) {\n        console.log('[Result Checker] Some fixtures in combo not finished yet');\n        return null;\n      }\n      \n      // Now resolve each leg using its specific fixture data\n      for (const leg of legs) {\n        // Each leg MUST have its own fixtureId - do not fallback to primary\n        if (!leg.fixtureId) {\n          console.log(`[Result Checker] Leg missing fixtureId: ${leg.homeTeam} vs ${leg.awayTeam} - cannot settle`);\n          return null; // Cannot settle combo with missing fixture binding\n        }\n        \n        const legFixtureId = String(leg.fixtureId);\n        const matchData = matchDataMap.get(legFixtureId);\n        \n        if (!matchData) {\n          console.log(`[Result Checker] No match data for leg fixture ${legFixtureId}`);\n          return null;\n        }\n        \n        const resolution = resolveMarket(leg.market, matchData, leg.homeTeam, leg.awayTeam);\n        \n        if (!resolution) {\n          console.log(`[Result Checker] Could not resolve leg market: ${leg.market}`);\n          return null;\n        }\n        \n        if (resolution.result === 'red') {\n          console.log(`[Result Checker] Leg lost: ${leg.homeTeam} vs ${leg.awayTeam} - ${leg.market}`);\n          return 'red'; // One loss = entire combo loses\n        }\n        \n        console.log(`[Result Checker] Leg won: ${leg.homeTeam} vs ${leg.awayTeam} - ${leg.market}`);\n      }\n      \n      console.log('[Result Checker] All legs won - combo GREEN!');\n      return 'green';\n      \n    } catch (error) {\n      console.error('[Result Checker] Error resolving combo:', error);\n      return null;\n    }\n  }\n  \n  /**\n   * Fetch match data for a specific fixture\n   */\n  private async fetchFixtureMatchData(fixtureId: string): Promise<{ matchData: MatchData; finished: boolean } | null> {\n    try {\n      const [fixtureResponse, statsResponse] = await Promise.all([\n        axios.get(`${API_BASE_URL}/fixtures`, {\n          params: { id: fixtureId },\n          headers: { 'x-apisports-key': FOOTBALL_API_KEY }\n        }),\n        axios.get(`${API_BASE_URL}/fixtures/statistics`, {\n          params: { fixture: fixtureId },\n          headers: { 'x-apisports-key': FOOTBALL_API_KEY }\n        })\n      ]);\n\n      const fixture = fixtureResponse.data.response?.[0];\n      if (!fixture) return null;\n\n      const status = fixture.fixture.status.short;\n      const finished = ['FT', 'AET', 'PEN'].includes(status);\n      \n      const statistics = statsResponse.data.response || [];\n      const matchData = extractMatchData(fixture, statistics);\n      \n      return { matchData, finished };\n      \n    } catch (error) {\n      console.error(`[Result Checker] Error fetching fixture ${fixtureId}:`, error);\n      return null;\n    }\n  }\n\n  /**\n   * Check result for a single leg in a combo\n   */\n  private async checkLegResult(leg: any): Promise<'green' | 'red' | null> {\n    if (!leg.fixtureId) return null;\n    \n    try {\n      const [fixtureResponse, statsResponse] = await Promise.all([\n        axios.get(`${API_BASE_URL}/fixtures`, {\n          params: { id: leg.fixtureId },\n          headers: { 'x-apisports-key': FOOTBALL_API_KEY }\n        }),\n        axios.get(`${API_BASE_URL}/fixtures/statistics`, {\n          params: { fixture: leg.fixtureId },\n          headers: { 'x-apisports-key': FOOTBALL_API_KEY }\n        })\n      ]);\n\n      const fixture = fixtureResponse.data.response?.[0];\n      if (!fixture) return null;\n\n      const status = fixture.fixture.status.short;\n      if (!['FT', 'AET', 'PEN'].includes(status)) {\n        return null;\n      }\n\n      const statistics = statsResponse.data.response || [];\n      const matchData = extractMatchData(fixture, statistics);\n      \n      const resolution = resolveMarket(leg.market, matchData, leg.homeTeam, leg.awayTeam);\n      return resolution?.result ?? null;\n      \n    } catch (error) {\n      console.error(`[Result Checker] Error checking leg fixture ${leg.fixtureId}:`, error);\n      return null;\n    }\n  }\n\n  start(intervalMinutes: number = 10): void {\n    if (this.isRunning) {\n      console.log('[Result Checker] Already running');\n      return;\n    }\n\n    this.isRunning = true;\n    console.log(`[Result Checker] Starting with ${intervalMinutes} minute interval`);\n\n    // Run immediately on start\n    this.checkPendingTips();\n\n    // Then run at interval\n    this.intervalId = setInterval(() => {\n      this.checkPendingTips();\n    }, intervalMinutes * 60 * 1000);\n  }\n\n  stop(): void {\n    if (this.intervalId) {\n      clearInterval(this.intervalId);\n      this.intervalId = null;\n    }\n    this.isRunning = false;\n    console.log('[Result Checker] Stopped');\n  }\n\n  isActive(): boolean {\n    return this.isRunning;\n  }\n}\n\nexport const resultChecker = new ResultChecker();\n","path":null,"size_bytes":12212,"size_tokens":null},"client/src/components/tip-analysis-modal.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Badge } from '@/components/ui/badge';\nimport { ScrollArea } from '@/components/ui/scroll-area';\nimport { \n  Target, \n  CornerRightDown, \n  Swords, \n  CloudRain, \n  Brain, \n  TrendingUp, \n  ChevronRight,\n  Loader2,\n  AlertTriangle\n} from 'lucide-react';\nimport { cn } from '@/lib/utils';\nimport axios from 'axios';\n\ninterface GoalsAnalysis {\n  over15Pct: number;\n  over25Pct: number;\n  over35Pct: number;\n  avgGoalsHome: number;\n  avgGoalsAway: number;\n  expectedGoals: number;\n  bttsRate: number;\n  homeExpectedGoals: number;\n  awayExpectedGoals: number;\n}\n\ninterface CornersAnalysis {\n  avgCornersHome: number;\n  avgCornersAway: number;\n  totalExpectedCorners: number;\n  over75Pct: number;\n  over85Pct: number;\n  over95Pct: number;\n  over105Pct: number;\n}\n\ninterface H2HAnalysis {\n  totalGames: number;\n  homeWins: number;\n  awayWins: number;\n  draws: number;\n  avgGoals: number;\n  avgCorners: number;\n}\n\ninterface ClimateAnalysis {\n  temperature: string;\n  humidity: string;\n  conditions: string;\n  impact: string;\n}\n\ninterface MarketRecommendation {\n  marketType: string;\n  marketLabel: string;\n  selection: string;\n  bookmakerOdd: number;\n  modelProbability: number;\n  fairOdd: number;\n  evPercent: number;\n  evRating: 'excellent' | 'good' | 'moderate' | 'low' | 'negative';\n  suggestedStake: number;\n  kellyStake: number;\n  rationale: string[];\n  confidenceLevel: 'high' | 'medium' | 'low';\n  isMainPick: boolean;\n  isValueBet: boolean;\n}\n\ninterface TipAnalysisData {\n  goalsAnalysis: GoalsAnalysis | null;\n  cornersAnalysis: CornersAnalysis | null;\n  h2hAnalysis: H2HAnalysis | null;\n  climateAnalysis: ClimateAnalysis | null;\n  tacticalInsights: string[];\n  finalRecommendation: string;\n}\n\ninterface Props {\n  tipId: string;\n  homeTeam: string;\n  awayTeam: string;\n  trigger: React.ReactNode;\n}\n\nexport function TipAnalysisModal({ tipId, homeTeam, awayTeam, trigger }: Props) {\n  const [open, setOpen] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [analysis, setAnalysis] = useState<TipAnalysisData | null>(null);\n  const [recommendations, setRecommendations] = useState<MarketRecommendation[]>([]);\n\n  useEffect(() => {\n    if (open && !analysis) {\n      fetchAnalysis();\n    }\n  }, [open]);\n\n  const fetchAnalysis = async () => {\n    setLoading(true);\n    setError(null);\n    \n    try {\n      const response = await axios.get(`/api/tips/${tipId}/analysis`);\n      if (response.data.success) {\n        setAnalysis(response.data.analysis);\n        setRecommendations(response.data.marketRecommendations || []);\n      }\n    } catch (err: any) {\n      console.error('Error fetching analysis:', err);\n      setError(err.response?.data?.error || 'Erro ao carregar an√°lise');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getEvColor = (ev: number) => {\n    if (ev >= 10) return 'text-green-400 bg-green-500/20 border-green-500/30';\n    if (ev >= 5) return 'text-yellow-400 bg-yellow-500/20 border-yellow-500/30';\n    if (ev >= 0) return 'text-orange-400 bg-orange-500/20 border-orange-500/30';\n    return 'text-red-400 bg-red-500/20 border-red-500/30';\n  };\n\n  const getConfidenceColor = (level: string) => {\n    if (level === 'high') return 'text-green-400 bg-green-500/20 border-green-500/30';\n    if (level === 'medium') return 'text-yellow-400 bg-yellow-500/20 border-yellow-500/30';\n    return 'text-orange-400 bg-orange-500/20 border-orange-500/30';\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={setOpen}>\n      <DialogTrigger asChild>\n        {trigger}\n      </DialogTrigger>\n      <DialogContent className=\"max-w-2xl max-h-[90vh] bg-[#0d0d0d] border-white/10 p-0 overflow-hidden\">\n        <DialogHeader className=\"p-4 pb-0 border-b border-white/5\">\n          <DialogTitle className=\"flex items-center gap-3 text-white\">\n            <div className=\"w-8 h-8 rounded-lg bg-gradient-to-br from-purple-500/20 to-blue-500/20 flex items-center justify-center\">\n              <Brain className=\"w-4 h-4 text-purple-400\" />\n            </div>\n            <div>\n              <span className=\"text-sm font-normal text-gray-400\">An√°lise Completa</span>\n              <p className=\"text-base font-bold\">{homeTeam} vs {awayTeam}</p>\n            </div>\n          </DialogTitle>\n        </DialogHeader>\n\n        <ScrollArea className=\"h-[70vh]\">\n          {loading ? (\n            <div className=\"flex flex-col items-center justify-center py-12 gap-3\">\n              <Loader2 className=\"w-8 h-8 text-purple-400 animate-spin\" />\n              <p className=\"text-gray-400 text-sm\">Gerando an√°lise com IA...</p>\n            </div>\n          ) : error ? (\n            <div className=\"flex flex-col items-center justify-center py-12 gap-3 px-6\">\n              <AlertTriangle className=\"w-10 h-10 text-orange-400\" />\n              <p className=\"text-gray-300 text-center\">{error}</p>\n              <button \n                onClick={fetchAnalysis}\n                className=\"mt-4 px-4 py-2 bg-purple-500/20 text-purple-300 rounded-lg hover:bg-purple-500/30 transition-colors\"\n              >\n                Tentar novamente\n              </button>\n            </div>\n          ) : analysis ? (\n            <Tabs defaultValue=\"ev\" className=\"w-full\">\n              <TabsList className=\"w-full justify-start bg-[#1a1a1a] border-b border-white/5 rounded-none p-0\">\n                <TabsTrigger value=\"ev\" className=\"data-[state=active]:bg-purple-500/20 data-[state=active]:text-purple-300 rounded-none px-4 py-2.5 text-xs\">\n                  <TrendingUp className=\"w-3 h-3 mr-1.5\" />\n                  Mercados EV+\n                </TabsTrigger>\n                <TabsTrigger value=\"goals\" className=\"data-[state=active]:bg-purple-500/20 data-[state=active]:text-purple-300 rounded-none px-4 py-2.5 text-xs\">\n                  <Target className=\"w-3 h-3 mr-1.5\" />\n                  Gols\n                </TabsTrigger>\n                <TabsTrigger value=\"corners\" className=\"data-[state=active]:bg-purple-500/20 data-[state=active]:text-purple-300 rounded-none px-4 py-2.5 text-xs\">\n                  <CornerRightDown className=\"w-3 h-3 mr-1.5\" />\n                  Escanteios\n                </TabsTrigger>\n                <TabsTrigger value=\"h2h\" className=\"data-[state=active]:bg-purple-500/20 data-[state=active]:text-purple-300 rounded-none px-4 py-2.5 text-xs\">\n                  <Swords className=\"w-3 h-3 mr-1.5\" />\n                  H2H\n                </TabsTrigger>\n                <TabsTrigger value=\"tactics\" className=\"data-[state=active]:bg-purple-500/20 data-[state=active]:text-purple-300 rounded-none px-4 py-2.5 text-xs\">\n                  <Brain className=\"w-3 h-3 mr-1.5\" />\n                  T√°ticas\n                </TabsTrigger>\n              </TabsList>\n\n              <div className=\"p-4\">\n                <TabsContent value=\"ev\" className=\"m-0\">\n                  <div className=\"space-y-3\">\n                    <h3 className=\"text-sm font-semibold text-white flex items-center gap-2\">\n                      <TrendingUp className=\"w-4 h-4 text-green-400\" />\n                      Mercados com Valor Positivo (EV+)\n                    </h3>\n                    \n                    {recommendations.length > 0 ? (\n                      <div className=\"space-y-2\">\n                        {recommendations\n                          .filter(r => r.evPercent > 0)\n                          .sort((a, b) => b.evPercent - a.evPercent)\n                          .map((rec, idx) => (\n                            <div \n                              key={idx}\n                              className={cn(\n                                \"p-3 rounded-lg border transition-colors\",\n                                rec.isMainPick \n                                  ? \"bg-gradient-to-r from-green-500/10 to-emerald-500/10 border-green-500/30\" \n                                  : \"bg-white/5 border-white/10\"\n                              )}\n                            >\n                              <div className=\"flex items-start justify-between gap-3\">\n                                <div className=\"flex-1\">\n                                  <div className=\"flex items-center gap-2 mb-1\">\n                                    <span className=\"text-white font-medium text-sm\">{rec.marketLabel}</span>\n                                    {rec.isMainPick && (\n                                      <Badge className=\"bg-green-500/20 text-green-400 text-[10px] px-1.5 py-0\">\n                                        PRINCIPAL\n                                      </Badge>\n                                    )}\n                                    {rec.isValueBet && (\n                                      <Badge className=\"bg-purple-500/20 text-purple-400 text-[10px] px-1.5 py-0\">\n                                        VALUE\n                                      </Badge>\n                                    )}\n                                  </div>\n                                  <p className=\"text-gray-300 text-sm mb-2\">{rec.selection}</p>\n                                  \n                                  <div className=\"flex flex-wrap gap-2 text-[10px]\">\n                                    <span className=\"px-2 py-0.5 rounded bg-blue-500/20 text-blue-300\">\n                                      Odd: {rec.bookmakerOdd.toFixed(2)}\n                                    </span>\n                                    <span className=\"px-2 py-0.5 rounded bg-gray-500/20 text-gray-300\">\n                                      Fair Odd: {rec.fairOdd.toFixed(2)}\n                                    </span>\n                                    <span className=\"px-2 py-0.5 rounded bg-purple-500/20 text-purple-300\">\n                                      Prob: {rec.modelProbability.toFixed(0)}%\n                                    </span>\n                                    <span className={cn(\"px-2 py-0.5 rounded border\", getConfidenceColor(rec.confidenceLevel))}>\n                                      {rec.confidenceLevel === 'high' ? 'Alta' : rec.confidenceLevel === 'medium' ? 'M√©dia' : 'Baixa'}\n                                    </span>\n                                  </div>\n                                </div>\n                                \n                                <div className={cn(\n                                  \"flex flex-col items-center px-3 py-2 rounded-lg border\",\n                                  getEvColor(rec.evPercent)\n                                )}>\n                                  <span className=\"text-lg font-bold\">+{rec.evPercent.toFixed(1)}%</span>\n                                  <span className=\"text-[10px] opacity-80\">EV</span>\n                                </div>\n                              </div>\n                              \n                              {rec.rationale && typeof rec.rationale === 'object' && Array.isArray(rec.rationale) && rec.rationale.length > 0 && (\n                                <div className=\"mt-2 pt-2 border-t border-white/5\">\n                                  <p className=\"text-[10px] text-gray-400\">\n                                    {rec.rationale.join(' ‚Ä¢ ')}\n                                  </p>\n                                </div>\n                              )}\n                              \n                              <div className=\"mt-2 flex items-center gap-3 text-[10px] text-gray-500\">\n                                <span>Stake sugerido: <span className=\"text-white font-medium\">{rec.suggestedStake.toFixed(1)}u</span></span>\n                                <span>Kelly: <span className=\"text-white font-medium\">{(rec.kellyStake * 100).toFixed(1)}%</span></span>\n                              </div>\n                            </div>\n                          ))\n                        }\n                        \n                        {recommendations.filter(r => r.evPercent > 0).length === 0 && (\n                          <div className=\"text-center py-8 text-gray-500\">\n                            <AlertTriangle className=\"w-8 h-8 mx-auto mb-2 opacity-50\" />\n                            <p className=\"text-sm\">Nenhum mercado com EV positivo encontrado</p>\n                          </div>\n                        )}\n                      </div>\n                    ) : (\n                      <div className=\"text-center py-8 text-gray-500\">\n                        <p className=\"text-sm\">Sem recomenda√ß√µes dispon√≠veis</p>\n                      </div>\n                    )}\n                  </div>\n                </TabsContent>\n\n                <TabsContent value=\"goals\" className=\"m-0\">\n                  {analysis.goalsAnalysis ? (\n                    <div className=\"space-y-4\">\n                      <h3 className=\"text-sm font-semibold text-white flex items-center gap-2\">\n                        <Target className=\"w-4 h-4 text-green-400\" />\n                        An√°lise de Gols\n                      </h3>\n                      \n                      <div className=\"grid grid-cols-2 gap-3\">\n                        <StatCard \n                          label=\"Expectativa de Gols\" \n                          value={analysis.goalsAnalysis.expectedGoals.toFixed(2)}\n                          sublabel=\"xG total\"\n                        />\n                        <StatCard \n                          label=\"BTTS Rate\" \n                          value={`${analysis.goalsAnalysis.bttsRate.toFixed(0)}%`}\n                          sublabel=\"Ambos marcam\"\n                        />\n                      </div>\n                      \n                      <div className=\"bg-white/5 rounded-lg p-3\">\n                        <p className=\"text-xs text-gray-400 mb-3\">Probabilidades de Over/Under</p>\n                        <div className=\"space-y-2\">\n                          <ProgressBar label=\"Over 1.5\" value={analysis.goalsAnalysis.over15Pct} />\n                          <ProgressBar label=\"Over 2.5\" value={analysis.goalsAnalysis.over25Pct} />\n                          <ProgressBar label=\"Over 3.5\" value={analysis.goalsAnalysis.over35Pct} />\n                        </div>\n                      </div>\n                      \n                      <div className=\"grid grid-cols-2 gap-3\">\n                        <div className=\"bg-blue-500/10 rounded-lg p-3 border border-blue-500/20\">\n                          <p className=\"text-[10px] text-blue-300 mb-1\">{homeTeam}</p>\n                          <p className=\"text-xl font-bold text-white\">{analysis.goalsAnalysis.homeExpectedGoals.toFixed(2)}</p>\n                          <p className=\"text-[10px] text-gray-400\">xG esperado</p>\n                        </div>\n                        <div className=\"bg-red-500/10 rounded-lg p-3 border border-red-500/20\">\n                          <p className=\"text-[10px] text-red-300 mb-1\">{awayTeam}</p>\n                          <p className=\"text-xl font-bold text-white\">{analysis.goalsAnalysis.awayExpectedGoals.toFixed(2)}</p>\n                          <p className=\"text-[10px] text-gray-400\">xG esperado</p>\n                        </div>\n                      </div>\n                    </div>\n                  ) : (\n                    <EmptyState message=\"An√°lise de gols n√£o dispon√≠vel\" />\n                  )}\n                </TabsContent>\n\n                <TabsContent value=\"corners\" className=\"m-0\">\n                  {analysis.cornersAnalysis ? (\n                    <div className=\"space-y-4\">\n                      <h3 className=\"text-sm font-semibold text-white flex items-center gap-2\">\n                        <CornerRightDown className=\"w-4 h-4 text-orange-400\" />\n                        An√°lise de Escanteios\n                      </h3>\n                      \n                      <div className=\"grid grid-cols-3 gap-3\">\n                        <StatCard \n                          label={homeTeam} \n                          value={analysis.cornersAnalysis.avgCornersHome.toFixed(1)}\n                          sublabel=\"m√©dia/jogo\"\n                        />\n                        <StatCard \n                          label=\"Total Esperado\" \n                          value={analysis.cornersAnalysis.totalExpectedCorners.toFixed(1)}\n                          sublabel=\"escanteios\"\n                          highlight\n                        />\n                        <StatCard \n                          label={awayTeam} \n                          value={analysis.cornersAnalysis.avgCornersAway.toFixed(1)}\n                          sublabel=\"m√©dia/jogo\"\n                        />\n                      </div>\n                      \n                      <div className=\"bg-white/5 rounded-lg p-3\">\n                        <p className=\"text-xs text-gray-400 mb-3\">Probabilidades de Over Corners</p>\n                        <div className=\"space-y-2\">\n                          <ProgressBar label=\"Over 7.5\" value={analysis.cornersAnalysis.over75Pct} color=\"orange\" />\n                          <ProgressBar label=\"Over 8.5\" value={analysis.cornersAnalysis.over85Pct} color=\"orange\" />\n                          <ProgressBar label=\"Over 9.5\" value={analysis.cornersAnalysis.over95Pct} color=\"orange\" />\n                          <ProgressBar label=\"Over 10.5\" value={analysis.cornersAnalysis.over105Pct} color=\"orange\" />\n                        </div>\n                      </div>\n                    </div>\n                  ) : (\n                    <EmptyState message=\"An√°lise de escanteios n√£o dispon√≠vel\" />\n                  )}\n                </TabsContent>\n\n                <TabsContent value=\"h2h\" className=\"m-0\">\n                  {analysis.h2hAnalysis ? (\n                    <div className=\"space-y-4\">\n                      <h3 className=\"text-sm font-semibold text-white flex items-center gap-2\">\n                        <Swords className=\"w-4 h-4 text-purple-400\" />\n                        Hist√≥rico de Confrontos\n                      </h3>\n                      \n                      <div className=\"bg-white/5 rounded-lg p-4\">\n                        <p className=\"text-xs text-gray-400 mb-3\">{analysis.h2hAnalysis.totalGames} jogos analisados</p>\n                        \n                        <div className=\"flex items-center justify-between mb-4\">\n                          <div className=\"text-center flex-1\">\n                            <p className=\"text-2xl font-bold text-green-400\">{analysis.h2hAnalysis.homeWins}</p>\n                            <p className=\"text-[10px] text-gray-400\">{homeTeam}</p>\n                          </div>\n                          <div className=\"text-center px-4\">\n                            <p className=\"text-2xl font-bold text-gray-400\">{analysis.h2hAnalysis.draws}</p>\n                            <p className=\"text-[10px] text-gray-400\">Empates</p>\n                          </div>\n                          <div className=\"text-center flex-1\">\n                            <p className=\"text-2xl font-bold text-red-400\">{analysis.h2hAnalysis.awayWins}</p>\n                            <p className=\"text-[10px] text-gray-400\">{awayTeam}</p>\n                          </div>\n                        </div>\n                        \n                        <div className=\"h-2 rounded-full overflow-hidden flex bg-gray-700\">\n                          <div \n                            className=\"bg-green-500 transition-all\" \n                            style={{ width: `${(analysis.h2hAnalysis.homeWins / analysis.h2hAnalysis.totalGames) * 100}%` }}\n                          />\n                          <div \n                            className=\"bg-gray-500 transition-all\" \n                            style={{ width: `${(analysis.h2hAnalysis.draws / analysis.h2hAnalysis.totalGames) * 100}%` }}\n                          />\n                          <div \n                            className=\"bg-red-500 transition-all\" \n                            style={{ width: `${(analysis.h2hAnalysis.awayWins / analysis.h2hAnalysis.totalGames) * 100}%` }}\n                          />\n                        </div>\n                      </div>\n                      \n                      <div className=\"grid grid-cols-2 gap-3\">\n                        <StatCard \n                          label=\"M√©dia de Gols\" \n                          value={analysis.h2hAnalysis.avgGoals.toFixed(1)}\n                          sublabel=\"por jogo\"\n                        />\n                        <StatCard \n                          label=\"M√©dia Escanteios\" \n                          value={analysis.h2hAnalysis.avgCorners.toFixed(1)}\n                          sublabel=\"por jogo\"\n                        />\n                      </div>\n                    </div>\n                  ) : (\n                    <EmptyState message=\"Hist√≥rico de confrontos n√£o dispon√≠vel\" />\n                  )}\n                </TabsContent>\n\n                <TabsContent value=\"tactics\" className=\"m-0\">\n                  <div className=\"space-y-4\">\n                    <h3 className=\"text-sm font-semibold text-white flex items-center gap-2\">\n                      <Brain className=\"w-4 h-4 text-blue-400\" />\n                      Insights T√°ticos\n                    </h3>\n                    \n                    {analysis.tacticalInsights && analysis.tacticalInsights.length > 0 ? (\n                      <div className=\"space-y-2\">\n                        {analysis.tacticalInsights.map((insight, idx) => (\n                          <div \n                            key={idx}\n                            className=\"flex items-start gap-3 p-3 bg-white/5 rounded-lg border border-white/10\"\n                          >\n                            <ChevronRight className=\"w-4 h-4 text-blue-400 mt-0.5 flex-shrink-0\" />\n                            <p className=\"text-sm text-gray-300\">{insight}</p>\n                          </div>\n                        ))}\n                      </div>\n                    ) : (\n                      <EmptyState message=\"Insights t√°ticos n√£o dispon√≠veis\" />\n                    )}\n                    \n                    {analysis.finalRecommendation && (\n                      <div className=\"mt-4 p-4 bg-gradient-to-r from-purple-500/10 to-blue-500/10 rounded-lg border border-purple-500/20\">\n                        <p className=\"text-xs text-purple-300 mb-2 font-medium\">Recomenda√ß√£o Final</p>\n                        <p className=\"text-sm text-white\">{analysis.finalRecommendation}</p>\n                      </div>\n                    )}\n                  </div>\n                </TabsContent>\n              </div>\n            </Tabs>\n          ) : null}\n        </ScrollArea>\n      </DialogContent>\n    </Dialog>\n  );\n}\n\nfunction StatCard({ label, value, sublabel, highlight }: { label: string; value: string; sublabel: string; highlight?: boolean }) {\n  return (\n    <div className={cn(\n      \"rounded-lg p-3 border\",\n      highlight \n        ? \"bg-gradient-to-br from-green-500/20 to-emerald-500/20 border-green-500/30\" \n        : \"bg-white/5 border-white/10\"\n    )}>\n      <p className=\"text-[10px] text-gray-400 truncate\">{label}</p>\n      <p className={cn(\"text-xl font-bold\", highlight ? \"text-green-400\" : \"text-white\")}>{value}</p>\n      <p className=\"text-[10px] text-gray-500\">{sublabel}</p>\n    </div>\n  );\n}\n\nfunction ProgressBar({ label, value, color = 'green' }: { label: string; value: number; color?: 'green' | 'orange' }) {\n  const bgColor = color === 'green' ? 'bg-green-500' : 'bg-orange-500';\n  const trackColor = color === 'green' ? 'bg-green-500/20' : 'bg-orange-500/20';\n  \n  return (\n    <div className=\"flex items-center gap-3\">\n      <span className=\"text-xs text-gray-400 w-16\">{label}</span>\n      <div className={cn(\"flex-1 h-2 rounded-full\", trackColor)}>\n        <div \n          className={cn(\"h-full rounded-full transition-all\", bgColor)}\n          style={{ width: `${Math.min(value, 100)}%` }}\n        />\n      </div>\n      <span className=\"text-xs text-white font-medium w-10 text-right\">{value.toFixed(0)}%</span>\n    </div>\n  );\n}\n\nfunction EmptyState({ message }: { message: string }) {\n  return (\n    <div className=\"text-center py-8 text-gray-500\">\n      <AlertTriangle className=\"w-8 h-8 mx-auto mb-2 opacity-50\" />\n      <p className=\"text-sm\">{message}</p>\n    </div>\n  );\n}\n","path":null,"size_bytes":24580,"size_tokens":null},"client/src/pages/video-promo.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { Download, ArrowLeft, Play } from \"lucide-react\";\nimport { useLocation } from \"wouter\";\nimport { useState } from \"react\";\n\nimport video1 from '@assets/generated_videos/soccer_ball_data_visualization_slow-mo.mp4';\nimport video2 from '@assets/generated_videos/elite_analysts_war_room_scene.mp4';\nimport video3 from '@assets/generated_videos/premium_app_showcase_iphone_close-up.mp4';\nimport video4 from '@assets/generated_videos/ai_neural_network_data_processing.mp4';\nimport video5 from '@assets/generated_videos/goal_celebration_victory_moment.mp4';\nimport videoPromo from '@assets/generated_videos/true_signal_sports_betting_app_promo.mp4';\nimport videoTeam from '@assets/generated_videos/team_working_office_green_shirts.mp4';\nimport videoAnalyst from '@assets/generated_videos/analyst_typing_dashboard_close-up.mp4';\nimport videoManPhone from '@assets/generated_videos/man_using_app_on_phone_office.mp4';\nimport videoWalkthrough from '@assets/generated_videos/office_walkthrough_team_working.mp4';\nimport videoWoman from '@assets/generated_videos/woman_celebrating_app_win_smartphone.mp4';\nimport videoDrone1 from '@assets/generated_videos/aerial_drone_soccer_field_ai_tracking.mp4';\nimport videoDrone2 from '@assets/generated_videos/top-down_tactical_analysis_overlay.mp4';\nimport videoDrone3 from '@assets/generated_videos/night_match_drone_ai_data_overlay.mp4';\nimport videoMockup1 from '@assets/generated_videos/phone_mockup_green_screen_hands.mp4';\nimport videoMockup2 from '@assets/generated_videos/person_couch_phone_mockup_screen.mp4';\nimport videoManCelebrate from '@assets/generated_videos/man_celebrating_looking_at_phone.mp4';\nimport videoStats3D from '@assets/generated_videos/3d_statistics_visualization_floating.mp4';\nimport videoStatsMatch from '@assets/generated_videos/soccer_match_stats_visualization.mp4';\nimport take1 from '@assets/generated_videos/take_1_soccer_field_data_hud.mp4';\nimport take2 from '@assets/generated_videos/take_2_war_room_analysts_screens.mp4';\nimport take3 from '@assets/generated_videos/take_3_phone_hero_product_shot.mp4';\nimport take4 from '@assets/generated_videos/take_4_notification_push_alert.mp4';\nimport take5 from '@assets/generated_videos/take_5_copy_button_press_action.mp4';\nimport logoReveal from '@assets/generated_videos/logo_true_signal_animated_reveal.mp4';\nimport greenProfit from '@assets/generated_videos/green_profit_notification_celebration.mp4';\nimport manWinning from '@assets/generated_videos/man_genuine_celebration_winning_reaction.mp4';\nimport ctaFinal from '@assets/generated_videos/cta_final_5_dias_gratis_end_card.mp4';\nimport logoOriginal from '@assets/generated_videos/true_signal_shield_pulse_logo_animation.mp4';\nimport logoFinal from '@assets/generated_videos/shield_pulse_logo_true_gray_signal_white.mp4';\nimport logoBillion from '@assets/generated_videos/elegant_billion_style_logo_true_signal.mp4';\nimport greenMatrix from '@assets/generated_videos/matrix_style_professional_green_celebration.mp4';\nimport redFrustration from '@assets/generated_videos/red_frustration_hollywood_disappointment_moment.mp4';\nimport socialProof from '@assets/generated_videos/social_proof_stats_87_assertividade_premium.mp4';\nimport urgencyTimer from '@assets/generated_videos/urgency_countdown_ultimas_vagas_timer.mp4';\nimport matchMatrix from '@assets/generated_videos/football_match_matrix_algorithm_tracking.mp4';\nimport playerData from '@assets/generated_videos/sportsman_running_matrix_data_overlay.mp4';\nimport fanStadium from '@assets/generated_videos/fan_in_stadium_checking_phone_green_glow.mp4';\nimport pushNotif from '@assets/generated_videos/smartphone_push_notification_green_alert.mp4';\nimport floatingCard from '@assets/generated_videos/person_with_floating_notification_card_face.mp4';\nimport stadiumPOV from '@assets/generated_videos/stadium_pov_phone_screen_visible_overlay_ready.mp4';\nimport dronePossession from '@assets/generated_videos/drone_possession_web_tactical_green_lines.mp4';\nimport droneStriker from '@assets/generated_videos/drone_striker_tracking_hud_speed_metrics.mp4';\nimport droneHeatmap from '@assets/generated_videos/drone_corner_kick_heat_map_pressure_zone.mp4';\nimport warRoom from '@assets/generated_videos/war_room_analysts_green_screens_billions.mp4';\nimport matrixGlitch from '@assets/generated_videos/stadium_matrix_wireframe_digital_glitch.mp4';\nimport stressedEye from '@assets/generated_videos/stressed_eye_red_screen_frustration_defeat.mp4';\nimport luxuryNotif from '@assets/generated_videos/phone_notification_green_luxury_suit_urgent.mp4';\nimport serverDoor from '@assets/generated_videos/server_door_closing_access_restricted_vault.mp4';\nimport moneyShot from '@assets/generated_videos/money_shot_phone_holographic_cards_dataverse.mp4';\nimport moneyShotV2 from '@assets/generated_videos/phone_holographic_cards_with_stats_content.mp4';\nimport notifSequence from '@assets/generated_videos/notifications_emerging_from_phone_one_by_one.mp4';\n\nconst videos = [\n  { \n    src: notifSequence, \n    title: \"üí∞ MONEY SHOT V3: Notifica√ß√µes Saindo\", \n    description: \"Cards emergindo um por um do celular com conte√∫do\",\n    filename: \"money_shot_v3_sequence.mp4\",\n    category: \"final\"\n  },\n  { \n    src: moneyShotV2, \n    title: \"üí∞ MONEY SHOT V2: Cards com Conte√∫do\", \n    description: \"Precis√£o 94% | An√°lise | Assertividade 84% | 20 Traders\",\n    filename: \"money_shot_v2_stats.mp4\",\n    category: \"final\"\n  },\n  { \n    src: moneyShot, \n    title: \"üí∞ MONEY SHOT V1: Data Stream\", \n    description: \"Vers√£o anterior - celular + cards hologr√°ficos\",\n    filename: \"money_shot_v1.mp4\",\n    category: \"final\"\n  },\n  { \n    src: warRoom, \n    title: \"üè¢ WAR ROOM: Equipe Billions Style\", \n    description: \"Sala de opera√ß√µes com 20 analistas e telas verdes\",\n    filename: \"war_room_billions.mp4\",\n    category: \"final\"\n  },\n  { \n    src: matrixGlitch, \n    title: \"üëÅÔ∏è GANCHO A: Olho de Deus Matrix\", \n    description: \"Est√°dio virando wireframe digital - scroll stopper\",\n    filename: \"gancho_matrix_glitch.mp4\",\n    category: \"final\"\n  },\n  { \n    src: stressedEye, \n    title: \"üò§ GANCHO B: Frustra√ß√£o do Amador\", \n    description: \"Olho estressado refletindo tela vermelha de perdas\",\n    filename: \"gancho_frustrac√£o_red.mp4\",\n    category: \"final\"\n  },\n  { \n    src: luxuryNotif, \n    title: \"üíé GANCHO C: Dopamina do Luxo\", \n    description: \"Celular premium + m√£o de terno pegando notifica√ß√£o\",\n    filename: \"gancho_dopamina_luxo.mp4\",\n    category: \"final\"\n  },\n  { \n    src: serverDoor, \n    title: \"üö™ URG√äNCIA: Porta do Cofre Fechando\", \n    description: \"Sala de servidores com acesso restrito\",\n    filename: \"urgencia_porta_cofre.mp4\",\n    category: \"final\"\n  },\n  { \n    src: dronePossession, \n    title: \"üöÅ DRONE TEIA: Posse de Bola T√°tica\", \n    description: \"Vista a√©rea com linhas verdes conectando jogadores\",\n    filename: \"drone_teia_posse.mp4\",\n    category: \"final\"\n  },\n  { \n    src: droneStriker, \n    title: \"üöÅ DRONE VELOCIDADE: Atacante + HUD\", \n    description: \"Tracking shot com veloc√≠metro e m√©tricas\",\n    filename: \"drone_velocidade_hud.mp4\",\n    category: \"final\"\n  },\n  { \n    src: droneHeatmap, \n    title: \"üöÅ DRONE PRESS√ÉO: Mapa de Calor\", \n    description: \"Escanteio com zona de press√£o cr√≠tica\",\n    filename: \"drone_pressao_heatmap.mp4\",\n    category: \"final\"\n  },\n  { \n    src: stadiumPOV, \n    title: \"üì± EST√ÅDIO POV: Celular na M√£o\", \n    description: \"Vista do est√°dio com tela do celular vis√≠vel - pronto pra overlay\",\n    filename: \"estadio_pov_celular.mp4\",\n    category: \"final\"\n  },\n  { \n    src: matchMatrix, \n    title: \"‚öΩ JOGO AO VIVO: Algoritmo Matrix\", \n    description: \"Partida com an√°lise de press√£o e posse em tempo real\",\n    filename: \"jogo_algoritmo_matrix.mp4\",\n    category: \"final\"\n  },\n  { \n    src: playerData, \n    title: \"üèÉ JOGADOR: Performance Matrix\", \n    description: \"Atleta correndo com dados de velocidade e m√©tricas\",\n    filename: \"jogador_performance_matrix.mp4\",\n    category: \"final\"\n  },\n  { \n    src: fanStadium, \n    title: \"üèüÔ∏è TORCEDOR: Est√°dio + Celular\", \n    description: \"F√£ na arquibancada vendo resultado - pronto pra overlay\",\n    filename: \"torcedor_estadio_celular.mp4\",\n    category: \"final\"\n  },\n  { \n    src: pushNotif, \n    title: \"üì± PUSH: Notifica√ß√£o no Celular\", \n    description: \"Smartphone recebendo alerta verde\",\n    filename: \"push_notification_celular.mp4\",\n    category: \"final\"\n  },\n  { \n    src: floatingCard, \n    title: \"üîî CARD: Notifica√ß√£o Flutuante\", \n    description: \"Pessoa com card hologr√°fico ao lado do rosto\",\n    filename: \"card_notificacao_flutuante.mp4\",\n    category: \"final\"\n  },\n  { \n    src: redFrustration, \n    title: \"üò§ DOR/RED: Frustra√ß√£o Hollywood\", \n    description: \"Momento de derrota elegante - Contraste pro GREEN\",\n    filename: \"red_frustration_hollywood.mp4\",\n    category: \"final\"\n  },\n  { \n    src: greenMatrix, \n    title: \"üé¨ GREEN MATRIX: Celebra√ß√£o Hollywood\", \n    description: \"Vit√≥ria elegante estilo Matrix - Meta Ads Ready\",\n    filename: \"green_matrix_hollywood.mp4\",\n    category: \"final\"\n  },\n  { \n    src: socialProof, \n    title: \"üìä PROVA SOCIAL: 87% Assertividade\", \n    description: \"Estat√≠sticas premium estilo Bloomberg/Matrix\",\n    filename: \"prova_social_stats.mp4\",\n    category: \"final\"\n  },\n  { \n    src: urgencyTimer, \n    title: \"‚è∞ URG√äNCIA: √öltimas Vagas\", \n    description: \"Countdown elegante com escassez\",\n    filename: \"urgencia_countdown.mp4\",\n    category: \"final\"\n  },\n  { \n    src: logoBillion, \n    title: \"üèÜ LOGO BILLION: Estilo Premium\", \n    description: \"Escudo + pulso + texto elegante sem sombras\",\n    filename: \"logo_billion_premium.mp4\",\n    category: \"final\"\n  },\n  { \n    src: logoFinal, \n    title: \"LOGO V2: Com sombra verde\", \n    description: \"Vers√£o com efeito glow no texto\",\n    filename: \"logo_v2_glow.mp4\",\n    category: \"final\"\n  },\n  { \n    src: logoOriginal, \n    title: \"LOGO V1: ESCUDO + PULSO\", \n    description: \"Vers√£o anterior sem texto estilizado\",\n    filename: \"logo_v1_escudo_pulso.mp4\",\n    category: \"final\"\n  },\n  { \n    src: logoReveal, \n    title: \"ABERTURA: LOGO ANIMADA\", \n    description: \"Logo TRUE SIGNAL surgindo com efeito neon\",\n    filename: \"abertura_logo.mp4\",\n    category: \"final\"\n  },\n  { \n    src: greenProfit, \n    title: \"CL√çMAX: GREEN +R$ 1.250\", \n    description: \"Notifica√ß√£o de lucro com confete\",\n    filename: \"climax_green_lucro.mp4\",\n    category: \"final\"\n  },\n  { \n    src: manWinning, \n    title: \"REA√á√ÉO: CELEBRA√á√ÉO REAL\", \n    description: \"Cliente comemorando vit√≥ria aut√™ntica\",\n    filename: \"reacao_celebracao.mp4\",\n    category: \"final\"\n  },\n  { \n    src: ctaFinal, \n    title: \"CTA: 5 DIAS GR√ÅTIS\", \n    description: \"Encerramento com chamada para a√ß√£o\",\n    filename: \"cta_5_dias_gratis.mp4\",\n    category: \"final\"\n  },\n  { \n    src: take1, \n    title: \"TAKE 1: CAMPO + DADOS\", \n    description: \"Campo de futebol com HUD e dados TRUE SIGNAL\",\n    filename: \"take1_campo_dados.mp4\",\n    category: \"roteiro\"\n  },\n  { \n    src: take2, \n    title: \"TAKE 2: WAR ROOM\", \n    description: \"Central de opera√ß√µes com analistas e telas\",\n    filename: \"take2_war_room.mp4\",\n    category: \"roteiro\"\n  },\n  { \n    src: take3, \n    title: \"TAKE 3: CELULAR HERO\", \n    description: \"Celular com app TRUE SIGNAL em destaque\",\n    filename: \"take3_celular_hero.mp4\",\n    category: \"roteiro\"\n  },\n  { \n    src: take4, \n    title: \"TAKE 4: NOTIFICA√á√ÉO\", \n    description: \"Push notification TRUE SIGNAL chegando\",\n    filename: \"take4_notificacao.mp4\",\n    category: \"roteiro\"\n  },\n  { \n    src: take5, \n    title: \"TAKE 5: COPIAR BILHETE\", \n    description: \"Dedo pressionando bot√£o COPIAR\",\n    filename: \"take5_copiar_bilhete.mp4\",\n    category: \"roteiro\"\n  },\n  { \n    src: videoMockup1, \n    title: \"MOCKUP: M√ÉOS + CELULAR\", \n    description: \"Celular para adicionar tela depois\",\n    filename: \"mockup_maos_celular.mp4\",\n    category: \"mockup\"\n  },\n  { \n    src: videoMockup2, \n    title: \"MOCKUP: SOF√Å + CELULAR\", \n    description: \"Pessoa no sof√° com celular para edi√ß√£o\",\n    filename: \"mockup_sofa_celular.mp4\",\n    category: \"mockup\"\n  },\n  { \n    src: videoManCelebrate, \n    title: \"CELEBRA√á√ÉO: CAF√â\", \n    description: \"Homem comemorando no caf√©\",\n    filename: \"celebracao_cafe.mp4\",\n    category: \"mockup\"\n  },\n  { \n    src: videoStats3D, \n    title: \"STATS: GR√ÅFICOS 3D\", \n    description: \"Estat√≠sticas flutuantes 3D com TRUE SIGNAL\",\n    filename: \"stats_graficos_3d.mp4\",\n    category: \"stats\"\n  },\n  { \n    src: videoStatsMatch, \n    title: \"STATS: AN√ÅLISE JOGO\", \n    description: \"Visualiza√ß√£o de estat√≠sticas de partida\",\n    filename: \"stats_analise_jogo.mp4\",\n    category: \"stats\"\n  },\n  { \n    src: videoDrone1, \n    title: \"DRONE: VIS√ÉO A√âREA\", \n    description: \"Vista a√©rea do campo com tracking\",\n    filename: \"drone_visao_aerea.mp4\",\n    category: \"drone\"\n  },\n  { \n    src: videoDrone2, \n    title: \"DRONE: AN√ÅLISE T√ÅTICA\", \n    description: \"Vis√£o de cima com overlay de dados\",\n    filename: \"drone_analise_tatica.mp4\",\n    category: \"drone\"\n  },\n  { \n    src: videoDrone3, \n    title: \"DRONE: JOGO NOTURNO\", \n    description: \"Partida noturna com IA captando dados\",\n    filename: \"drone_jogo_noturno.mp4\",\n    category: \"drone\"\n  },\n  { \n    src: videoTeam, \n    title: \"EQUIPE TRABALHANDO\", \n    description: \"Time no escrit√≥rio com camisetas verdes\",\n    filename: \"equipe_trabalhando.mp4\",\n    category: \"realista\"\n  },\n  { \n    src: videoAnalyst, \n    title: \"ANALISTA NO PC\", \n    description: \"Close-up do dashboard na tela\",\n    filename: \"analista_pc.mp4\",\n    category: \"realista\"\n  },\n  { \n    src: videoManPhone, \n    title: \"USANDO O APP\", \n    description: \"Homem usando o app no escrit√≥rio\",\n    filename: \"usando_app_celular.mp4\",\n    category: \"realista\"\n  },\n  { \n    src: videoWalkthrough, \n    title: \"TOUR ESCRIT√ìRIO\", \n    description: \"Walkthrough pelo escrit√≥rio moderno\",\n    filename: \"tour_escritorio.mp4\",\n    category: \"realista\"\n  },\n  { \n    src: videoWoman, \n    title: \"CELEBRANDO VIT√ìRIA\", \n    description: \"Mulher comemorando resultado\",\n    filename: \"celebrando_vitoria.mp4\",\n    category: \"realista\"\n  },\n  { \n    src: video1, \n    title: \"CENA 1: O Gancho\", \n    description: \"Chute em slow-motion com dados\",\n    filename: \"cena1_gancho.mp4\",\n    category: \"cinematico\"\n  },\n  { \n    src: video2, \n    title: \"CENA 2: War Room\", \n    description: \"Centro de opera√ß√µes\",\n    filename: \"cena2_war_room.mp4\",\n    category: \"cinematico\"\n  },\n  { \n    src: video3, \n    title: \"CENA 3: O Produto\", \n    description: \"Showcase do app no iPhone\",\n    filename: \"cena3_produto.mp4\",\n    category: \"cinematico\"\n  },\n  { \n    src: video4, \n    title: \"CENA 4: Motor de IA\", \n    description: \"Rede neural processando dados\",\n    filename: \"cena4_motor_ia.mp4\",\n    category: \"cinematico\"\n  },\n  { \n    src: video5, \n    title: \"CENA 5: O Resultado\", \n    description: \"Gol e celebra√ß√£o\",\n    filename: \"cena5_resultado.mp4\",\n    category: \"cinematico\"\n  },\n  { \n    src: videoPromo, \n    title: \"PROMO GERAL\", \n    description: \"V√≠deo promocional completo\",\n    filename: \"true_signal_promo.mp4\",\n    category: \"cinematico\"\n  },\n];\n\nconst categoryLabels: Record<string, { label: string; color: string }> = {\n  final: { label: '‚≠ê ESSENCIAL', color: 'bg-green-500/30 text-green-300' },\n  roteiro: { label: 'ROTEIRO ADS', color: 'bg-yellow-500/30 text-yellow-300' },\n  mockup: { label: 'MOCKUP', color: 'bg-pink-500/30 text-pink-300' },\n  stats: { label: 'ESTAT√çSTICAS', color: 'bg-orange-500/30 text-orange-300' },\n  drone: { label: 'DRONE FX', color: 'bg-cyan-500/30 text-cyan-300' },\n  realista: { label: 'EQUIPE REAL', color: 'bg-blue-500/30 text-blue-300' },\n  cinematico: { label: 'CINEMATOGR√ÅFICO', color: 'bg-purple-500/30 text-purple-300' },\n};\n\nexport default function VideoPromoPage() {\n  const [, setLocation] = useLocation();\n  const [selectedVideo, setSelectedVideo] = useState(0);\n  const [filter, setFilter] = useState<string>('todos');\n\n  const filteredVideos = filter === 'todos' \n    ? videos \n    : videos.filter(v => v.category === filter);\n\n  const handleDownload = (src: string, filename: string) => {\n    const link = document.createElement('a');\n    link.href = src;\n    link.download = filename;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  const downloadAll = () => {\n    filteredVideos.forEach((video, index) => {\n      setTimeout(() => {\n        handleDownload(video.src, video.filename);\n      }, index * 500);\n    });\n  };\n\n  const currentVideo = filteredVideos[selectedVideo] || filteredVideos[0];\n  const currentCategory = currentVideo ? categoryLabels[currentVideo.category] : null;\n\n  return (\n    <div className=\"min-h-screen bg-black p-4\">\n      <div className=\"max-w-4xl mx-auto space-y-6\">\n        <div className=\"flex items-center justify-between\">\n          <Button \n            onClick={() => setLocation('/')}\n            variant=\"ghost\"\n            className=\"text-white hover:bg-white/10\"\n            data-testid=\"btn-back\"\n          >\n            <ArrowLeft className=\"w-5 h-5 mr-2\" />\n            Voltar\n          </Button>\n          <Button \n            onClick={downloadAll}\n            className=\"bg-primary hover:bg-primary/90 text-black font-bold\"\n            data-testid=\"btn-download-all\"\n          >\n            <Download className=\"w-5 h-5 mr-2\" />\n            Baixar ({filteredVideos.length})\n          </Button>\n        </div>\n\n        <div className=\"text-center\">\n          <h1 className=\"text-3xl font-bold text-white mb-2\">V√≠deos Promocionais</h1>\n          <p className=\"text-gray-400\">TRUE SIGNAL - {videos.length} v√≠deos para sua campanha</p>\n        </div>\n\n        <div className=\"flex flex-wrap justify-center gap-2\">\n          <Button\n            onClick={() => { setFilter('todos'); setSelectedVideo(0); }}\n            variant={filter === 'todos' ? 'default' : 'outline'}\n            className={filter === 'todos' ? 'bg-primary text-black' : 'border-white/20 text-white'}\n            size=\"sm\"\n          >\n            Todos ({videos.length})\n          </Button>\n          <Button\n            onClick={() => { setFilter('final'); setSelectedVideo(0); }}\n            variant={filter === 'final' ? 'default' : 'outline'}\n            className={filter === 'final' ? 'bg-green-500 text-black' : 'border-white/20 text-white'}\n            size=\"sm\"\n          >\n            ‚≠ê Essencial (28)\n          </Button>\n          <Button\n            onClick={() => { setFilter('roteiro'); setSelectedVideo(0); }}\n            variant={filter === 'roteiro' ? 'default' : 'outline'}\n            className={filter === 'roteiro' ? 'bg-yellow-500 text-black' : 'border-white/20 text-white'}\n            size=\"sm\"\n          >\n            Roteiro (5)\n          </Button>\n          <Button\n            onClick={() => { setFilter('mockup'); setSelectedVideo(0); }}\n            variant={filter === 'mockup' ? 'default' : 'outline'}\n            className={filter === 'mockup' ? 'bg-pink-500 text-black' : 'border-white/20 text-white'}\n            size=\"sm\"\n          >\n            Mockup (3)\n          </Button>\n          <Button\n            onClick={() => { setFilter('stats'); setSelectedVideo(0); }}\n            variant={filter === 'stats' ? 'default' : 'outline'}\n            className={filter === 'stats' ? 'bg-orange-500 text-black' : 'border-white/20 text-white'}\n            size=\"sm\"\n          >\n            Stats (2)\n          </Button>\n          <Button\n            onClick={() => { setFilter('drone'); setSelectedVideo(0); }}\n            variant={filter === 'drone' ? 'default' : 'outline'}\n            className={filter === 'drone' ? 'bg-cyan-500 text-black' : 'border-white/20 text-white'}\n            size=\"sm\"\n          >\n            Drone (3)\n          </Button>\n          <Button\n            onClick={() => { setFilter('realista'); setSelectedVideo(0); }}\n            variant={filter === 'realista' ? 'default' : 'outline'}\n            className={filter === 'realista' ? 'bg-blue-500 text-black' : 'border-white/20 text-white'}\n            size=\"sm\"\n          >\n            Equipe (5)\n          </Button>\n          <Button\n            onClick={() => { setFilter('cinematico'); setSelectedVideo(0); }}\n            variant={filter === 'cinematico' ? 'default' : 'outline'}\n            className={filter === 'cinematico' ? 'bg-purple-500 text-black' : 'border-white/20 text-white'}\n            size=\"sm\"\n          >\n            Cine (6)\n          </Button>\n        </div>\n\n        <div className=\"relative rounded-2xl overflow-hidden border-2 border-primary/30 shadow-2xl shadow-primary/20 bg-black\">\n          <video \n            key={currentVideo?.src}\n            src={currentVideo?.src} \n            controls \n            autoPlay \n            loop \n            playsInline\n            className=\"w-full max-h-[60vh] object-contain\"\n            data-testid=\"video-main\"\n          />\n          <div className=\"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4\">\n            <div className=\"flex items-center gap-2 mb-1\">\n              {currentCategory && (\n                <span className={`text-xs px-2 py-0.5 rounded ${currentCategory.color}`}>\n                  {currentCategory.label}\n                </span>\n              )}\n            </div>\n            <h2 className=\"text-xl font-bold text-white\">{currentVideo?.title}</h2>\n            <p className=\"text-gray-300 text-sm\">{currentVideo?.description}</p>\n          </div>\n        </div>\n\n        <div className=\"flex justify-center\">\n          <Button \n            onClick={() => handleDownload(currentVideo?.src, currentVideo?.filename)}\n            className=\"bg-primary hover:bg-primary/90 text-black font-bold h-12 px-8\"\n            data-testid=\"btn-download-current\"\n          >\n            <Download className=\"w-5 h-5 mr-2\" />\n            Baixar Este V√≠deo\n          </Button>\n        </div>\n\n        <div className=\"grid grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-2\">\n          {filteredVideos.map((video, index) => (\n            <button\n              key={video.filename}\n              onClick={() => setSelectedVideo(index)}\n              className={`relative rounded-xl overflow-hidden border-2 transition-all hover:scale-[1.02] ${\n                selectedVideo === index \n                  ? 'border-primary ring-2 ring-primary/50' \n                  : 'border-white/20 hover:border-primary/50'\n              }`}\n              data-testid={`btn-video-${index}`}\n            >\n              <video \n                src={video.src} \n                muted \n                playsInline\n                className=\"w-full h-16 object-cover\"\n              />\n              <div className=\"absolute inset-0 bg-black/40 flex items-center justify-center\">\n                <Play className=\"w-5 h-5 text-white/80\" />\n              </div>\n              <div className=\"absolute bottom-0 left-0 right-0 bg-black/80 p-1\">\n                <p className=\"text-white text-[8px] font-semibold truncate\">{video.title}</p>\n              </div>\n              {selectedVideo === index && (\n                <div className=\"absolute top-1 right-1 w-2 h-2 bg-primary rounded-full animate-pulse\" />\n              )}\n            </button>\n          ))}\n        </div>\n\n        <div className=\"bg-white/5 rounded-xl p-4 text-center\">\n          <p className=\"text-gray-400 text-sm\">\n            <span className=\"text-primary font-semibold\">{videos.length} v√≠deos</span> ‚Ä¢ MP4 ‚Ä¢ 8 segundos ‚Ä¢ 9:16\n          </p>\n          <p className=\"text-gray-500 text-xs mt-2\">\n            5 Roteiro ADS + 3 Mockup + 2 Stats + 3 Drone + 5 Equipe + 6 Cinematogr√°fico\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":23949,"size_tokens":null},"server/elite-prediction-engine.ts":{"content":"import axios from 'axios';\n\nconst API_FOOTBALL_KEY = process.env.FOOTBALL_API_KEY || process.env.API_FOOTBALL_KEY || '';\nconst API_BASE = 'https://v3.football.api-sports.io';\n\nif (!API_FOOTBALL_KEY) {\n  console.warn('[ELITE ENGINE] ‚ö†Ô∏è No API-Football key found. Set FOOTBALL_API_KEY environment variable.');\n}\n\ninterface TeamStats {\n  teamId: number;\n  teamName: string;\n  avgGoalsScored: number;\n  avgGoalsConceded: number;\n  avgGoalsScoredHome: number;\n  avgGoalsConcededHome: number;\n  avgGoalsScoredAway: number;\n  avgGoalsConcededAway: number;\n  xG: number;\n  xGA: number;\n  over15Rate: number;\n  over25Rate: number;\n  bttsRate: number;\n  goalsHTRate: number;\n  cleanSheetRate: number;\n  failedToScoreRate: number;\n  avgCorners: number;\n  avgCornersAgainst: number;\n  avgCards: number;\n  avgCardsAgainst: number;\n  avgFouls: number;\n  avgShots: number;\n  avgShotsOnTarget: number;\n  formLast5: string;\n  formPoints: number;\n  winStreak: number;\n  lossStreak: number;\n  unbeatenStreak: number;\n  noWinStreak: number;\n  position: number;\n  leagueSize: number;\n  matchesPlayed: number;\n}\n\ninterface RefereeStats {\n  refereeId: number;\n  refereeName: string;\n  avgYellowCards: number;\n  avgRedCards: number;\n  avgTotalCards: number;\n  avgFouls: number;\n  gamesOfficiated: number;\n  over35CardsRate: number;\n  over45CardsRate: number;\n}\n\ninterface MatchContext {\n  isClassico: boolean;\n  classicoIntensity: number;\n  homeTeamNeedsPoints: boolean;\n  awayTeamNeedsPoints: boolean;\n  isTopOfTableClash: boolean;\n  isRelegationBattle: boolean;\n  isTitleDecider: boolean;\n  matchImportance: number;\n  restDaysHome: number;\n  restDaysAway: number;\n}\n\ninterface PatternAnalysis {\n  over25GoalsRate: number;\n  over35GoalsRate: number;\n  bttsRate: number;\n  over85CornersRate: number;\n  over95CornersRate: number;\n  over35CardsRate: number;\n  over45CardsRate: number;\n  over55CardsRate: number;\n  matchesAnalyzed: number;\n  matchesWithStats: number;\n}\n\ninterface PoissonProbabilities {\n  homeWin: number;\n  draw: number;\n  awayWin: number;\n  over05: number;\n  over15: number;\n  over25: number;\n  over35: number;\n  btts: number;\n  htOver05: number;\n  exactScores: { score: string; probability: number }[];\n}\n\ninterface AnalyzedOpportunity {\n  fixtureId: number;\n  homeTeam: string;\n  awayTeam: string;\n  homeTeamLogo: string;\n  awayTeamLogo: string;\n  league: string;\n  leagueLogo: string;\n  matchDate: string;\n  matchTime: string;\n  market: string;\n  probability: number;\n  bookmakerOdd: number | null;\n  fairOdd: number;\n  expectedValue: number | null;\n  status: 'APPROVED' | 'REJECTED_NO_ODDS' | 'REJECTED_LOW_EV' | 'REJECTED_LOW_PROB';\n  rejectionReason?: string;\n  potentialBadge: 'DIAMOND' | 'GOLD' | 'SILVER' | null;\n}\n\ninterface EliteSignal {\n  fixtureId: number;\n  league: string;\n  leagueLogo: string;\n  homeTeam: string;\n  awayTeam: string;\n  homeTeamLogo: string;\n  awayTeamLogo: string;\n  matchDate: string;\n  matchTime: string;\n  market: string;\n  marketCategory: 'GOALS' | 'CORNERS' | 'CARDS' | 'BTTS' | 'RESULT';\n  prediction: string;\n  probability: number;\n  bookmakerOdd: number;\n  fairOdd: number;\n  expectedValue: number;\n  confidenceScore: number;\n  badgeType: 'DIAMOND' | 'GOLD' | 'SILVER';\n  reasoning: {\n    primary: string;\n    homeAnalysis: string;\n    awayAnalysis: string;\n    h2hInsight: string;\n    refereeInsight?: string;\n    contextInsight: string;\n  };\n  patternStrength: number;\n  dataPoints: {\n    homeForm: string;\n    awayForm: string;\n    h2hRecord: string;\n    homePosition: string;\n    awayPosition: string;\n    referee?: string;\n  };\n  rawProbabilities: PoissonProbabilities;\n}\n\ninterface EliteScanResult {\n  scanTimestamp: string;\n  totalFixturesScanned: number;\n  fixturesAnalyzed: number;\n  signalsGenerated: number;\n  diamondSignals: number;\n  goldSignals: number;\n  silverSignals: number;\n  avgExpectedValue: number;\n  opportunities: EliteSignal[];\n  analyzedOpportunities: AnalyzedOpportunity[];\n}\n\nconst TOP_LEAGUES = [\n  // TIER 1 - Principais Ligas Europeias\n  39,   // Premier League\n  140,  // La Liga\n  135,  // Serie A\n  78,   // Bundesliga\n  61,   // Ligue 1\n  \n  // TIER 1 - Competi√ß√µes Europeias\n  2,    // Champions League\n  3,    // Europa League\n  848,  // Conference League\n  \n  // TIER 2 - Segundas Divis√µes Top 5\n  218,  // Championship (England)\n  141,  // La Liga 2 (Spain)\n  136,  // Serie B (Italy)\n  79,   // 2. Bundesliga\n  62,   // Ligue 2 (France)\n  \n  // TIER 2 - Ligas Europeias Secund√°rias\n  94,   // Primeira Liga (Portugal)\n  88,   // Eredivisie (Netherlands)\n  144,  // Jupiler Pro League (Belgium)\n  203,  // Super Lig (Turkey)\n  179,  // Scottish Premiership\n  235,  // Russian Premier League\n  106,  // Ekstraklasa (Poland)\n  113,  // Super League (Switzerland)\n  103,  // Eliteserien (Norway)\n  119,  // Allsvenskan (Sweden)\n  210,  // Super League (Greece)\n  197,  // Super Liga (Serbia)\n  207,  // Premijer Liga (Bosnia)\n  172,  // HNL (Croatia)\n  318,  // Superliga (Denmark)\n  185,  // Tipsport Liga (Czech)\n  271,  // NB I (Hungary)\n  \n  // TIER 2 - Am√©ricas\n  71,   // Brasileir√£o S√©rie A\n  72,   // Brasileir√£o S√©rie B\n  128,  // Liga Argentina\n  129,  // Copa Argentina\n  13,   // Libertadores\n  11,   // Copa Sudamericana\n  253,  // MLS\n  262,  // Liga MX\n  263,  // Liga MX Clausura\n  239,  // Primera Divisi√≥n (Chile)\n  240,  // Primera Divisi√≥n (Colombia)\n  281,  // Primera Divisi√≥n (Peru)\n  \n  // TIER 3 - √Åsia e Oceania\n  307,  // Saudi Pro League\n  169,  // Super League (China)\n  292,  // K League 1 (Korea)\n  98,   // J1 League (Japan)\n  188,  // A-League (Australia)\n  \n  // TIER 3 - Copas Nacionais com bom volume\n  45,   // FA Cup (England)\n  143,  // Copa del Rey (Spain)\n  137,  // Coppa Italia\n  81,   // DFB Pokal\n  66,   // Coupe de France\n  73,   // Copa do Brasil\n  \n  // TIER 3 - Ligas Adicionais com bom volume\n  333,  // Super Liga (Slovakia)\n  345,  // Czech Liga\n  244,  // League One (England)\n  245,  // League Two (England)\n  283,  // Primera Divisi√≥n (Uruguay)\n  384,  // Liga Profesional (Paraguay)\n  242,  // Liga Pro (Ecuador)\n  332,  // Cypriot First Division\n];\n// Total: 61 ligas\n\nconst EXCLUDED_KEYWORDS = [\n  'U17', 'U18', 'U19', 'U20', 'U21', 'U23',\n  'Sub-17', 'Sub-18', 'Sub-19', 'Sub-20', 'Sub-21', 'Sub-23',\n  'Youth', 'Juvenil', 'Reserve', 'Reserva', 'Amateur', 'Amador',\n  'Women', 'Feminino', 'W ', ' W', 'Friendly', 'Amistoso'\n];\n\nconst CLASSICO_PAIRS: Record<number, number[]> = {\n  33: [34],     // Man United vs Man City\n  34: [33],\n  40: [47],     // Liverpool vs Chelsea\n  47: [40],\n  42: [50],     // Arsenal vs Tottenham\n  50: [42],\n  529: [530],   // Barcelona vs Real Madrid\n  530: [529],\n  489: [505],   // AC Milan vs Inter Milan\n  505: [489],\n  487: [492],   // Lazio vs Roma (Derby della Capitale)\n  492: [487],\n  157: [165],   // Bayern Munich vs Borussia Dortmund\n  165: [157],\n  85: [95],     // PSG vs Marseille\n  95: [85],\n  127: [131],   // Flamengo vs Fluminense\n  131: [127],\n  121: [126],   // Palmeiras vs Corinthians\n  126: [121],\n  118: [119],   // S√£o Paulo vs Santos\n  119: [118],\n  435: [436],   // River Plate vs Boca Juniors\n  436: [435],\n  211: [212],   // Benfica vs Porto\n  212: [211],\n  194: [197],   // Ajax vs Feyenoord\n  197: [194],\n  541: [548],   // Real Madrid vs Atletico Madrid\n  548: [541],\n};\n\nclass ElitePredictionEngine {\n  private cache = new Map<string, { data: any; expiry: number }>();\n  private readonly CACHE_TTL = 6 * 60 * 60 * 1000;\n\n  private getCached<T>(key: string): T | null {\n    const cached = this.cache.get(key);\n    if (cached && cached.expiry > Date.now()) {\n      return cached.data as T;\n    }\n    return null;\n  }\n\n  private setCache(key: string, data: any): void {\n    this.cache.set(key, { data, expiry: Date.now() + this.CACHE_TTL });\n  }\n\n  private async apiRequest<T>(endpoint: string, params: Record<string, any> = {}): Promise<T | null> {\n    const cacheKey = `${endpoint}_${JSON.stringify(params)}`;\n    const cached = this.getCached<T>(cacheKey);\n    if (cached) return cached;\n\n    try {\n      const response = await axios.get(`${API_BASE}${endpoint}`, {\n        headers: { 'x-apisports-key': API_FOOTBALL_KEY },\n        params,\n        timeout: 15000\n      });\n\n      if (response.data?.response) {\n        this.setCache(cacheKey, response.data.response);\n        return response.data.response;\n      }\n      return null;\n    } catch (error: any) {\n      console.error(`[ELITE] API Error ${endpoint}:`, error.message);\n      return null;\n    }\n  }\n\n  private factorial(n: number): number {\n    if (n <= 1) return 1;\n    let result = 1;\n    for (let i = 2; i <= n; i++) result *= i;\n    return result;\n  }\n\n  private poissonProbability(lambda: number, k: number): number {\n    if (lambda <= 0) return k === 0 ? 1 : 0;\n    return (Math.pow(lambda, k) * Math.exp(-lambda)) / this.factorial(k);\n  }\n\n  private calculatePoissonProbabilities(lambdaHome: number, lambdaAway: number): PoissonProbabilities {\n    let homeWin = 0, draw = 0, awayWin = 0;\n    let over05 = 0, over15 = 0, over25 = 0, over35 = 0;\n    let btts = 0, htOver05 = 0;\n    const exactScores: { score: string; probability: number }[] = [];\n\n    for (let h = 0; h <= 8; h++) {\n      for (let a = 0; a <= 8; a++) {\n        const prob = this.poissonProbability(lambdaHome, h) * this.poissonProbability(lambdaAway, a);\n        const totalGoals = h + a;\n\n        if (h > a) homeWin += prob;\n        else if (h === a) draw += prob;\n        else awayWin += prob;\n\n        if (totalGoals >= 1) over05 += prob;\n        if (totalGoals >= 2) over15 += prob;\n        if (totalGoals >= 3) over25 += prob;\n        if (totalGoals >= 4) over35 += prob;\n\n        if (h > 0 && a > 0) btts += prob;\n\n        if (h <= 5 && a <= 5) {\n          exactScores.push({ score: `${h}-${a}`, probability: prob * 100 });\n        }\n      }\n    }\n\n    const lambdaHT = (lambdaHome + lambdaAway) * 0.42;\n    htOver05 = 1 - this.poissonProbability(lambdaHT, 0);\n\n    exactScores.sort((a, b) => b.probability - a.probability);\n\n    return {\n      homeWin: homeWin * 100,\n      draw: draw * 100,\n      awayWin: awayWin * 100,\n      over05: over05 * 100,\n      over15: over15 * 100,\n      over25: over25 * 100,\n      over35: over35 * 100,\n      btts: btts * 100,\n      htOver05: htOver05 * 100,\n      exactScores: exactScores.slice(0, 10)\n    };\n  }\n\n  private calculateExpectedValue(probability: number, bookmakerOdd: number): number {\n    const fairOdd = 100 / probability;\n    const ev = ((probability / 100) * bookmakerOdd - 1) * 100;\n    return ev;\n  }\n\n  private async fetchFixtures(date: string): Promise<any[]> {\n    const fixtures = await this.apiRequest<any[]>('/fixtures', { date, status: 'NS' });\n    return fixtures || [];\n  }\n\n  private async fetchTeamStatistics(teamId: number, leagueId: number, season: number): Promise<any> {\n    return await this.apiRequest('/teams/statistics', { team: teamId, league: leagueId, season });\n  }\n\n  private async fetchTeamLastMatches(teamId: number, last: number = 10): Promise<any[]> {\n    const matches = await this.apiRequest<any[]>('/fixtures', { team: teamId, last, status: 'FT' });\n    return matches || [];\n  }\n\n  private async fetchH2H(team1Id: number, team2Id: number, last: number = 10): Promise<any[]> {\n    const h2h = await this.apiRequest<any[]>('/fixtures/headtohead', { h2h: `${team1Id}-${team2Id}`, last });\n    return h2h || [];\n  }\n\n  private async fetchStandings(leagueId: number, season: number): Promise<any[]> {\n    const standings = await this.apiRequest<any[]>('/standings', { league: leagueId, season });\n    if (standings && standings[0]?.league?.standings) {\n      return standings[0].league.standings[0] || [];\n    }\n    return [];\n  }\n\n  private async fetchFixtureStatistics(fixtureId: number): Promise<any[]> {\n    const stats = await this.apiRequest<any[]>('/fixtures/statistics', { fixture: fixtureId });\n    return stats || [];\n  }\n\n  private async fetchOdds(fixtureId: number): Promise<any> {\n    // FALLBACK MULTI-BOOKMAKER: Bet365 ‚Üí Pinnacle ‚Üí 1xBet ‚Üí Unibet ‚Üí qualquer dispon√≠vel\n    const BOOKMAKER_PRIORITY = [\n      { id: 8, name: 'Bet365' },\n      { id: 3, name: 'Pinnacle' },\n      { id: 29, name: '1xBet' },\n      { id: 16, name: 'Unibet' },\n      { id: 11, name: 'Betway' },\n      { id: 1, name: 'Bwin' },\n    ];\n\n    // Primeiro, tentar buscar todas as odds do fixture (sem filtro de bookmaker)\n    const cacheKey = `odds_all_${fixtureId}`;\n    let allOdds: any[] | null = this.getCached<any[]>(cacheKey);\n    \n    if (!allOdds) {\n      try {\n        const response = await axios.get(`${API_BASE}/odds`, {\n          headers: { 'x-apisports-key': API_FOOTBALL_KEY },\n          params: { fixture: fixtureId },\n          timeout: 15000\n        });\n        \n        if (response.data?.response?.[0]?.bookmakers) {\n          allOdds = response.data.response[0].bookmakers as any[];\n          this.setCache(cacheKey, allOdds);\n          console.log(`[ELITE] ‚úÖ Odds carregadas para fixture ${fixtureId}: ${allOdds.length} bookmakers dispon√≠veis`);\n        } else {\n          console.log(`[ELITE] ‚ö†Ô∏è Nenhuma odds dispon√≠vel para fixture ${fixtureId}`);\n          return null;\n        }\n      } catch (error: any) {\n        if (error.response?.status === 429) {\n          console.log(`[ELITE] ‚ö†Ô∏è Rate limit (429) ao buscar odds para fixture ${fixtureId}`);\n        } else {\n          console.error(`[ELITE] Erro ao buscar odds:`, error.message);\n        }\n        return null;\n      }\n    }\n\n    if (!allOdds || allOdds.length === 0) return null;\n\n    // Procurar bookmaker por prioridade\n    for (const bk of BOOKMAKER_PRIORITY) {\n      const bookmaker = allOdds.find((b: any) => b.id === bk.id);\n      if (bookmaker?.bets?.length > 0) {\n        console.log(`[ELITE] üìä Usando odds de ${bk.name} para fixture ${fixtureId}`);\n        return { bookmakers: [bookmaker] };\n      }\n    }\n\n    // Fallback: usar qualquer bookmaker dispon√≠vel\n    const anyBookmaker = allOdds.find((b: any) => b.bets?.length > 0);\n    if (anyBookmaker) {\n      console.log(`[ELITE] üìä Usando odds de ${anyBookmaker.name} (fallback) para fixture ${fixtureId}`);\n      return { bookmakers: [anyBookmaker] };\n    }\n\n    console.log(`[ELITE] ‚ö†Ô∏è Nenhum bookmaker com odds v√°lidas para fixture ${fixtureId}`);\n    return null;\n  }\n\n  private isLeagueExcluded(leagueName: string): boolean {\n    return EXCLUDED_KEYWORDS.some(kw => leagueName.toLowerCase().includes(kw.toLowerCase()));\n  }\n\n  private calculateFormPoints(matches: any[], teamId: number): { formString: string; points: number; streak: any } {\n    let points = 0;\n    let formString = '';\n    let winStreak = 0, lossStreak = 0, unbeatenStreak = 0, noWinStreak = 0;\n    let currentWin = 0, currentLoss = 0, currentUnbeaten = 0, currentNoWin = 0;\n\n    for (const match of matches.slice(0, 5)) {\n      const isHome = match.teams.home.id === teamId;\n      const teamGoals = isHome ? match.goals.home : match.goals.away;\n      const oppGoals = isHome ? match.goals.away : match.goals.home;\n\n      if (teamGoals > oppGoals) {\n        formString += 'W';\n        points += 3;\n        currentWin++;\n        currentUnbeaten++;\n        currentLoss = 0;\n        currentNoWin = 0;\n      } else if (teamGoals === oppGoals) {\n        formString += 'D';\n        points += 1;\n        currentUnbeaten++;\n        currentNoWin++;\n        currentWin = 0;\n        currentLoss = 0;\n      } else {\n        formString += 'L';\n        currentLoss++;\n        currentNoWin++;\n        currentWin = 0;\n        currentUnbeaten = 0;\n      }\n\n      winStreak = Math.max(winStreak, currentWin);\n      lossStreak = Math.max(lossStreak, currentLoss);\n      unbeatenStreak = Math.max(unbeatenStreak, currentUnbeaten);\n      noWinStreak = Math.max(noWinStreak, currentNoWin);\n    }\n\n    return {\n      formString,\n      points,\n      streak: { winStreak, lossStreak, unbeatenStreak, noWinStreak }\n    };\n  }\n\n  private async analyzeTeam(teamId: number, matches: any[], leagueId: number, season: number): Promise<TeamStats & { patterns: PatternAnalysis }> {\n    const teamName = matches[0]?.teams?.home?.id === teamId \n      ? matches[0]?.teams?.home?.name \n      : matches[0]?.teams?.away?.name || 'Unknown';\n\n    let goalsScored = 0, goalsConceded = 0;\n    let goalsScoredHome = 0, goalsConcededHome = 0;\n    let goalsScoredAway = 0, goalsConcededAway = 0;\n    let over15 = 0, over25 = 0, btts = 0, goalsHT = 0;\n    let cleanSheets = 0, failedToScore = 0;\n    let corners = 0, cornersAgainst = 0;\n    let cards = 0, cardsAgainst = 0;\n    let fouls = 0, foulsAgainst = 0;\n    let shots = 0, shotsOnTarget = 0;\n    let homeGames = 0, awayGames = 0;\n    let matchesWithStats = 0;\n    \n    // NOVA AN√ÅLISE: Contar padr√µes por jogo\n    let gamesOver25Goals = 0;\n    let gamesOver35Goals = 0;\n    let gamesBtts = 0;\n    let gamesOver85Corners = 0;\n    let gamesOver95Corners = 0;\n    let gamesOver35Cards = 0;\n    let gamesOver45Cards = 0;\n    let gamesOver55Cards = 0;\n\n    // Usar apenas √∫ltimos 8 jogos para an√°lise\n    const recentMatches = matches.slice(0, 8);\n    const fixtureIds = recentMatches.map(m => m.fixture.id);\n    const statsPromises = fixtureIds.map(id => this.fetchFixtureStatistics(id));\n    const allStats = await Promise.all(statsPromises);\n\n    for (let i = 0; i < recentMatches.length; i++) {\n      const match = recentMatches[i];\n      const isHome = match.teams.home.id === teamId;\n      const teamGoals = isHome ? (match.goals.home ?? 0) : (match.goals.away ?? 0);\n      const oppGoals = isHome ? (match.goals.away ?? 0) : (match.goals.home ?? 0);\n      const htHome = match.score?.halftime?.home ?? 0;\n      const htAway = match.score?.halftime?.away ?? 0;\n      const totalGoals = teamGoals + oppGoals;\n\n      goalsScored += teamGoals;\n      goalsConceded += oppGoals;\n\n      if (isHome) {\n        goalsScoredHome += teamGoals;\n        goalsConcededHome += oppGoals;\n        homeGames++;\n      } else {\n        goalsScoredAway += teamGoals;\n        goalsConcededAway += oppGoals;\n        awayGames++;\n      }\n\n      // Contagem de padr√µes de gols\n      if (totalGoals >= 2) over15++;\n      if (totalGoals >= 3) { over25++; gamesOver25Goals++; }\n      if (totalGoals >= 4) gamesOver35Goals++;\n      if (teamGoals > 0 && oppGoals > 0) { btts++; gamesBtts++; }\n      if (htHome + htAway > 0) goalsHT++;\n      if (oppGoals === 0) cleanSheets++;\n      if (teamGoals === 0) failedToScore++;\n\n      // An√°lise de estat√≠sticas detalhadas do jogo\n      if (i < allStats.length && allStats[i] && allStats[i].length >= 2) {\n        matchesWithStats++;\n        const teamStatsIdx = isHome ? 0 : 1;\n        const oppStatsIdx = isHome ? 1 : 0;\n        const teamMatchStats = allStats[i][teamStatsIdx]?.statistics || [];\n        const oppMatchStats = allStats[i][oppStatsIdx]?.statistics || [];\n\n        const getStat = (stats: any[], name: string): number => {\n          const stat = stats.find((s: any) => s.type === name);\n          if (!stat || stat.value === null) return 0;\n          return typeof stat.value === 'string' ? parseInt(stat.value) || 0 : stat.value || 0;\n        };\n\n        const matchCorners = getStat(teamMatchStats, 'Corner Kicks') + getStat(oppMatchStats, 'Corner Kicks');\n        const matchCards = getStat(teamMatchStats, 'Yellow Cards') + getStat(teamMatchStats, 'Red Cards') +\n                          getStat(oppMatchStats, 'Yellow Cards') + getStat(oppMatchStats, 'Red Cards');\n\n        corners += getStat(teamMatchStats, 'Corner Kicks');\n        cornersAgainst += getStat(oppMatchStats, 'Corner Kicks');\n        cards += getStat(teamMatchStats, 'Yellow Cards') + getStat(teamMatchStats, 'Red Cards');\n        cardsAgainst += getStat(oppMatchStats, 'Yellow Cards') + getStat(oppMatchStats, 'Red Cards');\n        fouls += getStat(teamMatchStats, 'Fouls');\n        foulsAgainst += getStat(oppMatchStats, 'Fouls');\n        shots += getStat(teamMatchStats, 'Total Shots');\n        shotsOnTarget += getStat(teamMatchStats, 'Shots on Goal');\n\n        // Contagem de padr√µes no jogo\n        if (matchCorners >= 9) gamesOver85Corners++;\n        if (matchCorners >= 10) gamesOver95Corners++;\n        if (matchCards >= 4) gamesOver35Cards++;\n        if (matchCards >= 5) gamesOver45Cards++;\n        if (matchCards >= 6) gamesOver55Cards++;\n      }\n    }\n\n    const n = recentMatches.length || 1;\n    const statsN = matchesWithStats || 1;\n    const form = this.calculateFormPoints(recentMatches, teamId);\n\n    let position = 0, leagueSize = 0;\n    try {\n      const standings = await this.fetchStandings(leagueId, season);\n      const teamStanding = standings.find((s: any) => s.team?.id === teamId);\n      if (teamStanding) {\n        position = teamStanding.rank || 0;\n        leagueSize = standings.length;\n      }\n    } catch {}\n\n    const avgGoalsScoredCalc = goalsScored / n;\n    const avgGoalsConcededCalc = goalsConceded / n;\n\n    // Calcular taxas de padr√µes\n    const patterns: PatternAnalysis = {\n      over25GoalsRate: (gamesOver25Goals / n) * 100,\n      over35GoalsRate: (gamesOver35Goals / n) * 100,\n      bttsRate: (gamesBtts / n) * 100,\n      over85CornersRate: statsN >= 3 ? (gamesOver85Corners / statsN) * 100 : 0,\n      over95CornersRate: statsN >= 3 ? (gamesOver95Corners / statsN) * 100 : 0,\n      over35CardsRate: statsN >= 3 ? (gamesOver35Cards / statsN) * 100 : 0,\n      over45CardsRate: statsN >= 3 ? (gamesOver45Cards / statsN) * 100 : 0,\n      over55CardsRate: statsN >= 3 ? (gamesOver55Cards / statsN) * 100 : 0,\n      matchesAnalyzed: n,\n      matchesWithStats: statsN\n    };\n\n    console.log(`[ELITE STATS] ${teamName}: ${n} jogos analisados, ${statsN} com estat√≠sticas completas`);\n    console.log(`[ELITE PATTERNS] ${teamName}: Over2.5=${patterns.over25GoalsRate.toFixed(0)}%, BTTS=${patterns.bttsRate.toFixed(0)}%, Over4.5Cards=${patterns.over45CardsRate.toFixed(0)}%, Over8.5Corners=${patterns.over85CornersRate.toFixed(0)}%`);\n\n    return {\n      teamId,\n      teamName,\n      avgGoalsScored: avgGoalsScoredCalc,\n      avgGoalsConceded: avgGoalsConcededCalc,\n      avgGoalsScoredHome: homeGames > 0 ? goalsScoredHome / homeGames : avgGoalsScoredCalc,\n      avgGoalsConcededHome: homeGames > 0 ? goalsConcededHome / homeGames : avgGoalsConcededCalc,\n      avgGoalsScoredAway: awayGames > 0 ? goalsScoredAway / awayGames : avgGoalsScoredCalc,\n      avgGoalsConcededAway: awayGames > 0 ? goalsConcededAway / awayGames : avgGoalsConcededCalc,\n      xG: avgGoalsScoredCalc,\n      xGA: avgGoalsConcededCalc,\n      over15Rate: (over15 / n) * 100,\n      over25Rate: (over25 / n) * 100,\n      bttsRate: (btts / n) * 100,\n      goalsHTRate: (goalsHT / n) * 100,\n      cleanSheetRate: (cleanSheets / n) * 100,\n      failedToScoreRate: (failedToScore / n) * 100,\n      avgCorners: corners / statsN,\n      avgCornersAgainst: cornersAgainst / statsN,\n      avgCards: cards / statsN,\n      avgCardsAgainst: cardsAgainst / statsN,\n      avgFouls: fouls / statsN,\n      avgShots: shots / statsN,\n      avgShotsOnTarget: shotsOnTarget / statsN,\n      formLast5: form.formString,\n      formPoints: form.points,\n      winStreak: form.streak.winStreak,\n      lossStreak: form.streak.lossStreak,\n      unbeatenStreak: form.streak.unbeatenStreak,\n      noWinStreak: form.streak.noWinStreak,\n      position,\n      leagueSize,\n      matchesPlayed: n,\n      patterns\n    };\n  }\n\n  private analyzeMatchContext(\n    homeStats: TeamStats,\n    awayStats: TeamStats,\n    h2hMatches: any[],\n    homeTeamId: number,\n    awayTeamId: number\n  ): MatchContext {\n    const isClassico = CLASSICO_PAIRS[homeTeamId]?.includes(awayTeamId) || false;\n    \n    let classicoIntensity = 0;\n    if (isClassico) {\n      let h2hCards = 0;\n      for (const match of h2hMatches.slice(0, 5)) {\n        h2hCards += 4;\n      }\n      classicoIntensity = Math.min(100, h2hCards * 5);\n    }\n\n    const leagueSize = Math.max(homeStats.leagueSize, awayStats.leagueSize) || 20;\n    const homeNeedsPoints = homeStats.position >= leagueSize - 4 || \n                           homeStats.position <= 4 || \n                           homeStats.noWinStreak >= 3;\n    const awayNeedsPoints = awayStats.position >= leagueSize - 4 || \n                           awayStats.position <= 4 || \n                           awayStats.noWinStreak >= 3;\n    \n    const isTopOfTableClash = homeStats.position <= 5 && awayStats.position <= 5;\n    const isRelegationBattle = homeStats.position >= leagueSize - 4 && awayStats.position >= leagueSize - 4;\n    const isTitleDecider = homeStats.position <= 2 && awayStats.position <= 2;\n\n    let matchImportance = 50;\n    if (isClassico) matchImportance += 25;\n    if (isTopOfTableClash) matchImportance += 20;\n    if (isRelegationBattle) matchImportance += 15;\n    if (isTitleDecider) matchImportance += 30;\n    if (homeNeedsPoints || awayNeedsPoints) matchImportance += 10;\n    matchImportance = Math.min(100, matchImportance);\n\n    return {\n      isClassico,\n      classicoIntensity,\n      homeTeamNeedsPoints: homeNeedsPoints,\n      awayTeamNeedsPoints: awayNeedsPoints,\n      isTopOfTableClash,\n      isRelegationBattle,\n      isTitleDecider,\n      matchImportance,\n      restDaysHome: 3,\n      restDaysAway: 3\n    };\n  }\n\n  private analyzeH2H(h2hMatches: any[], homeTeamId: number): {\n    homeWins: number;\n    awayWins: number;\n    draws: number;\n    avgGoals: number;\n    over25Rate: number;\n    bttsRate: number;\n    avgCards: number;\n    record: string;\n    totalMatches: number;\n  } {\n    let homeWins = 0, awayWins = 0, draws = 0;\n    let totalGoals = 0, over25 = 0, btts = 0;\n    const n = h2hMatches.length || 1;\n\n    for (const match of h2hMatches) {\n      const hGoals = match.goals.home ?? 0;\n      const aGoals = match.goals.away ?? 0;\n      const isHomeInH2H = match.teams.home.id === homeTeamId;\n\n      if (hGoals > aGoals) {\n        if (isHomeInH2H) homeWins++; else awayWins++;\n      } else if (aGoals > hGoals) {\n        if (isHomeInH2H) awayWins++; else homeWins++;\n      } else {\n        draws++;\n      }\n\n      totalGoals += hGoals + aGoals;\n      if (hGoals + aGoals >= 3) over25++;\n      if (hGoals > 0 && aGoals > 0) btts++;\n    }\n\n    return {\n      homeWins,\n      awayWins,\n      draws,\n      avgGoals: totalGoals / n,\n      over25Rate: (over25 / n) * 100,\n      bttsRate: (btts / n) * 100,\n      avgCards: 4.2,\n      record: `${homeWins}V ${draws}E ${awayWins}D`,\n      totalMatches: h2hMatches.length\n    };\n  }\n\n  private extractOdds(oddsData: any): Record<string, number> {\n    const odds: Record<string, number> = {};\n    \n    if (!oddsData?.bookmakers?.[0]?.bets) return odds;\n\n    for (const bet of oddsData.bookmakers[0].bets) {\n      const betName = bet.name;\n      for (const value of bet.values || []) {\n        const key = `${betName}_${value.value}`;\n        odds[key] = parseFloat(value.odd) || 0;\n      }\n    }\n\n    return odds;\n  }\n\n  private generateSignals(\n    fixture: any,\n    homeStats: TeamStats & { patterns: PatternAnalysis },\n    awayStats: TeamStats & { patterns: PatternAnalysis },\n    h2hData: ReturnType<typeof this.analyzeH2H>,\n    context: MatchContext,\n    probabilities: PoissonProbabilities,\n    odds: Record<string, number>\n  ): { signals: EliteSignal[], analyzed: AnalyzedOpportunity[] } {\n    const signals: EliteSignal[] = [];\n    const analyzed: AnalyzedOpportunity[] = [];\n    const matchDate = new Date(fixture.fixture.date);\n\n    // VALIDA√á√ÉO: M√≠nimo de dados para an√°lise confi√°vel\n    const MIN_GAMES_REQUIRED = 5;\n    const MIN_STATS_REQUIRED = 3;\n    \n    if (homeStats.matchesPlayed < MIN_GAMES_REQUIRED || awayStats.matchesPlayed < MIN_GAMES_REQUIRED) {\n      console.log(`[ELITE] ‚ùå Dados insuficientes: ${homeStats.teamName} (${homeStats.matchesPlayed}) vs ${awayStats.teamName} (${awayStats.matchesPlayed}) - m√≠nimo ${MIN_GAMES_REQUIRED}`);\n      return { signals: [], analyzed: [] };\n    }\n\n    const homePatterns = homeStats.patterns;\n    const awayPatterns = awayStats.patterns;\n\n    if (homePatterns.matchesWithStats < MIN_STATS_REQUIRED || awayPatterns.matchesWithStats < MIN_STATS_REQUIRED) {\n      console.log(`[ELITE] ‚ùå Estat√≠sticas insuficientes: ${homeStats.teamName} (${homePatterns.matchesWithStats}) vs ${awayStats.teamName} (${awayPatterns.matchesWithStats}) - m√≠nimo ${MIN_STATS_REQUIRED}`);\n      return { signals: [], analyzed: [] };\n    }\n\n    // Helper para criar oportunidade analisada (rastreamento)\n    const trackOpportunity = (\n      market: string,\n      probability: number,\n      bookmakerOdd: number | null,\n      ev: number | null,\n      status: AnalyzedOpportunity['status'],\n      rejectionReason?: string,\n      potentialBadge?: 'DIAMOND' | 'GOLD' | 'SILVER' | null\n    ) => {\n      analyzed.push({\n        fixtureId: fixture.fixture.id,\n        homeTeam: fixture.teams.home.name,\n        awayTeam: fixture.teams.away.name,\n        homeTeamLogo: fixture.teams.home.logo,\n        awayTeamLogo: fixture.teams.away.logo,\n        league: fixture.league.name,\n        leagueLogo: fixture.league.logo,\n        matchDate: matchDate.toLocaleDateString('pt-BR'),\n        matchTime: matchDate.toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' }),\n        market,\n        probability: Math.round(probability * 10) / 10,\n        bookmakerOdd,\n        fairOdd: Math.round((100 / probability) * 100) / 100,\n        expectedValue: ev !== null ? Math.round(ev * 10) / 10 : null,\n        status,\n        rejectionReason,\n        potentialBadge: potentialBadge || null\n      });\n    };\n\n    const createSignal = (\n      market: string,\n      category: EliteSignal['marketCategory'],\n      prediction: string,\n      probability: number,\n      oddKey: string,\n      reasoning: EliteSignal['reasoning'],\n      patternStrength: number\n    ): EliteSignal | null => {\n      const originalOdd = odds[oddKey] || 0;\n      let bookmakerOdd = originalOdd;\n      const fairOdd = 100 / probability;\n      \n      // Log detalhado de odds\n      if (originalOdd === 0) {\n        console.log(`[ELITE] ‚ö†Ô∏è ${market}: Odd n√£o encontrada para key \"${oddKey}\". Usando fallback.`);\n      }\n      \n      // Fallback quando odds n√£o dispon√≠veis: usar fairOdd com margem da casa\n      if (bookmakerOdd < 1.20) {\n        bookmakerOdd = fairOdd * 0.95; // 5% margem assumida\n        if (bookmakerOdd < 1.35) bookmakerOdd = 1.35;\n        console.log(`[ELITE] üìä ${market}: Fallback odd = ${bookmakerOdd.toFixed(2)} (fairOdd ${fairOdd.toFixed(2)} * 0.95)`);\n      }\n\n      const ev = this.calculateExpectedValue(probability, bookmakerOdd);\n      \n      // Determinar badge potencial antes de rejeitar\n      // GATES RELAXADOS: 75‚Üí72, 68‚Üí66, 62‚Üí60 para aumentar convers√£o mantendo EV‚â•3%\n      let potentialBadge: 'DIAMOND' | 'GOLD' | 'SILVER' | null = null;\n      if (ev >= 8 && probability >= 72) potentialBadge = 'DIAMOND';\n      else if (ev >= 5 && probability >= 66) potentialBadge = 'GOLD';\n      else if (ev >= 3 && probability >= 60) potentialBadge = 'SILVER';\n      \n      // Log detalhado de EV\n      console.log(`[ELITE] üìà ${market}: Prob=${probability.toFixed(1)}%, Odd=${bookmakerOdd.toFixed(2)}, EV=${ev.toFixed(1)}%, Badge=${potentialBadge || 'NONE'}`);\n      \n      // EV check\n      if (ev < 3) {\n        trackOpportunity(market, probability, bookmakerOdd, ev, 'REJECTED_LOW_EV', \n          `EV ${ev.toFixed(1)}% < 3% m√≠nimo`, potentialBadge);\n        console.log(`[ELITE] ‚ùå ${market}: EV ${ev.toFixed(1)}% abaixo do m√≠nimo 3%`);\n        return null;\n      }\n      \n      let badge: EliteSignal['badgeType'] = 'SILVER';\n      let confidenceScore = probability;\n      \n      if (ev >= 8 && probability >= 72) {\n        badge = 'DIAMOND';\n        confidenceScore = Math.min(98, probability + 3);\n      } else if (ev >= 5 && probability >= 66) {\n        badge = 'GOLD';\n        confidenceScore = Math.min(94, probability + 2);\n      } else if (ev >= 3 && probability >= 60) {\n        confidenceScore = Math.min(88, probability + 1);\n      } else {\n        trackOpportunity(market, probability, bookmakerOdd, ev, 'REJECTED_LOW_PROB',\n          `Prob ${probability.toFixed(1)}% < 60% para SILVER`, potentialBadge);\n        console.log(`[ELITE] ‚ùå ${market}: Prob ${probability.toFixed(1)}% abaixo do m√≠nimo para tier`);\n        return null;\n      }\n\n      // APROVADO! Rastrear como aprovado\n      trackOpportunity(market, probability, bookmakerOdd, ev, 'APPROVED', undefined, badge);\n      console.log(`[ELITE] ‚úÖ ${market}: APROVADO como ${badge}! EV=${ev.toFixed(1)}%, Prob=${probability.toFixed(1)}%`);\n\n      return {\n        fixtureId: fixture.fixture.id,\n        league: fixture.league.name,\n        leagueLogo: fixture.league.logo,\n        homeTeam: fixture.teams.home.name,\n        awayTeam: fixture.teams.away.name,\n        homeTeamLogo: fixture.teams.home.logo,\n        awayTeamLogo: fixture.teams.away.logo,\n        matchDate: matchDate.toLocaleDateString('pt-BR'),\n        matchTime: matchDate.toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' }),\n        market,\n        marketCategory: category,\n        prediction,\n        probability: Math.round(probability * 10) / 10,\n        bookmakerOdd: Math.round(bookmakerOdd * 100) / 100,\n        fairOdd: Math.round(fairOdd * 100) / 100,\n        expectedValue: Math.round(ev * 10) / 10,\n        confidenceScore: Math.round(confidenceScore),\n        badgeType: badge,\n        reasoning,\n        patternStrength,\n        dataPoints: {\n          homeForm: homeStats.formLast5,\n          awayForm: awayStats.formLast5,\n          h2hRecord: h2hData.record,\n          homePosition: `${homeStats.position}¬∫`,\n          awayPosition: `${awayStats.position}¬∫`\n        },\n        rawProbabilities: probabilities\n      };\n    };\n\n    // === AN√ÅLISE BASEADA EM PADR√ïES REAIS ===\n    // Calibra√ß√£o: probabilidade com shrinkage Bayesiano por tamanho de amostra + H2H ponderado\n    \n    // Helper: Calibrar probabilidade com shrinkage Bayesiano\n    // F√≥rmula: P_calibrado = (n * P_observado + k * P_prior) / (n + k)\n    // Priors por mercado: Goals/BTTS=45%, Cards=50%, Corners=45%, Over1.5=60%\n    const calibrateProb = (\n      homeRate: number, \n      awayRate: number, \n      priorRate: number, // Prior espec√≠fico por mercado\n      h2hRate: number, \n      h2hGames: number,\n      homeSampleSize: number,\n      awaySampleSize: number\n    ): number => {\n      const SHRINKAGE_FACTOR = 5; // k: for√ßa do shrinkage\n      \n      // Shrinkage por time usando prior espec√≠fico\n      const homeShrunk = (homeSampleSize * homeRate + SHRINKAGE_FACTOR * priorRate) / (homeSampleSize + SHRINKAGE_FACTOR);\n      const awayShrunk = (awaySampleSize * awayRate + SHRINKAGE_FACTOR * priorRate) / (awaySampleSize + SHRINKAGE_FACTOR);\n      \n      let baseRate = (homeShrunk + awayShrunk) / 2;\n      \n      // H2H ponderado por tamanho de amostra (5+ jogos = peso m√°ximo 20%)\n      if (h2hGames >= 3 && h2hRate > 0) {\n        const h2hWeight = Math.min(0.20, h2hGames * 0.04); // 3 jogos=12%, 5 jogos=20%\n        baseRate = baseRate * (1 - h2hWeight) + h2hRate * h2hWeight;\n      }\n      \n      // Cap final conservador\n      return Math.min(78, baseRate);\n    };\n    \n    // Contadores de observabilidade por gate\n    let gatesFailedGoals = 0;\n    let gatesFailedBtts = 0;\n    let gatesFailedCards = 0;\n    let gatesFailedCorners = 0;\n    let gatesFailedOver15 = 0;\n    \n    // 1. OVER 2.5 GOLS - Threshold flex√≠vel: 55%+ cada OU 50%+ com H2H forte\n    const combined25Rate = (homePatterns.over25GoalsRate + awayPatterns.over25GoalsRate) / 2;\n    const h2hConfirms25 = h2hData.over25Rate >= 55;\n    const home25Ok = homePatterns.over25GoalsRate >= 55;\n    const away25Ok = awayPatterns.over25GoalsRate >= 55;\n    const home25Relaxed = homePatterns.over25GoalsRate >= 45 && h2hConfirms25;\n    const away25Relaxed = awayPatterns.over25GoalsRate >= 45 && h2hConfirms25;\n    \n    if ((home25Ok && away25Ok) || (home25Ok && away25Relaxed) || (away25Ok && home25Relaxed)) {\n      const patternProb = calibrateProb(\n        homePatterns.over25GoalsRate, \n        awayPatterns.over25GoalsRate, \n        45, // Prior para Goals\n        h2hData.over25Rate, \n        h2hData.totalMatches,\n        homePatterns.matchesAnalyzed,\n        awayPatterns.matchesAnalyzed\n      );\n      console.log(`[ELITE] ‚úÖ PADR√ÉO Over 2.5: ${homeStats.teamName} ${homePatterns.over25GoalsRate.toFixed(0)}% + ${awayStats.teamName} ${awayPatterns.over25GoalsRate.toFixed(0)}% (H2H ${h2hData.over25Rate.toFixed(0)}%)`);\n      \n      const signal = createSignal(\n        'Over 2.5 Gols',\n        'GOALS',\n        `Mais de 2.5 gols`,\n        patternProb,\n        'Goals Over/Under_Over 2.5',\n        {\n          primary: `PADR√ÉO: ${homePatterns.over25GoalsRate.toFixed(0)}% + ${awayPatterns.over25GoalsRate.toFixed(0)}% = ${patternProb.toFixed(0)}% (calibrado)`,\n          homeAnalysis: `${homeStats.teamName}: Over 2.5 em ${homePatterns.over25GoalsRate.toFixed(0)}% dos √∫ltimos ${homePatterns.matchesAnalyzed} jogos`,\n          awayAnalysis: `${awayStats.teamName}: Over 2.5 em ${awayPatterns.over25GoalsRate.toFixed(0)}% dos √∫ltimos ${awayPatterns.matchesAnalyzed} jogos`,\n          h2hInsight: `H2H: ${h2hData.over25Rate.toFixed(0)}% Over 2.5 (${h2hData.totalMatches} jogos). M√©dia ${h2hData.avgGoals.toFixed(1)} gols`,\n          contextInsight: h2hConfirms25 ? `‚úì H2H confirma padr√£o de gols.` : `Padr√£o consistente em ambos.`\n        },\n        Math.round(patternProb)\n      );\n      if (signal) signals.push(signal);\n    } else {\n      gatesFailedGoals++;\n    }\n\n    // 2. BTTS - Threshold flex√≠vel: 50%+ cada OU 45%+ com H2H forte\n    const combinedBttsRate = (homePatterns.bttsRate + awayPatterns.bttsRate) / 2;\n    const h2hConfirmsBtts = h2hData.bttsRate >= 50;\n    const homeBttsOk = homePatterns.bttsRate >= 50;\n    const awayBttsOk = awayPatterns.bttsRate >= 50;\n    const homeBttsRelaxed = homePatterns.bttsRate >= 40 && h2hConfirmsBtts;\n    const awayBttsRelaxed = awayPatterns.bttsRate >= 40 && h2hConfirmsBtts;\n    \n    if ((homeBttsOk && awayBttsOk) || (homeBttsOk && awayBttsRelaxed) || (awayBttsOk && homeBttsRelaxed)) {\n      const patternProb = calibrateProb(\n        homePatterns.bttsRate, \n        awayPatterns.bttsRate, \n        45, // Prior para BTTS\n        h2hData.bttsRate, \n        h2hData.totalMatches,\n        homePatterns.matchesAnalyzed,\n        awayPatterns.matchesAnalyzed\n      );\n      console.log(`[ELITE] ‚úÖ PADR√ÉO BTTS: ${homeStats.teamName} ${homePatterns.bttsRate.toFixed(0)}% + ${awayStats.teamName} ${awayPatterns.bttsRate.toFixed(0)}% (H2H ${h2hData.bttsRate.toFixed(0)}%)`);\n      \n      const signal = createSignal(\n        'Ambas Marcam',\n        'BTTS',\n        `BTTS - Sim`,\n        patternProb,\n        'Both Teams Score_Yes',\n        {\n          primary: `PADR√ÉO: ${homePatterns.bttsRate.toFixed(0)}% + ${awayPatterns.bttsRate.toFixed(0)}% = ${patternProb.toFixed(0)}% (calibrado)`,\n          homeAnalysis: `${homeStats.teamName}: BTTS em ${homePatterns.bttsRate.toFixed(0)}% dos √∫ltimos ${homePatterns.matchesAnalyzed} jogos`,\n          awayAnalysis: `${awayStats.teamName}: BTTS em ${awayPatterns.bttsRate.toFixed(0)}% dos √∫ltimos ${awayPatterns.matchesAnalyzed} jogos`,\n          h2hInsight: `H2H BTTS: ${h2hData.bttsRate.toFixed(0)}%`,\n          contextInsight: h2hConfirmsBtts ? `‚úì H2H confirma padr√£o BTTS.` : `Ambos marcam e sofrem com frequ√™ncia.`\n        },\n        Math.round(patternProb)\n      );\n      if (signal) signals.push(signal);\n    } else {\n      gatesFailedBtts++;\n    }\n\n    // 3. OVER 4.5 CART√ïES - Com calibra√ß√£o Bayesiana\n    const combined45CardsRate = (homePatterns.over45CardsRate + awayPatterns.over45CardsRate) / 2;\n    const cards45Threshold = context.isClassico ? 35 : 45;\n    \n    if (homePatterns.over45CardsRate >= cards45Threshold && awayPatterns.over45CardsRate >= cards45Threshold) {\n      let patternProb = calibrateProb(\n        homePatterns.over45CardsRate, \n        awayPatterns.over45CardsRate, \n        50, // Prior para cards\n        0,\n        0,\n        homePatterns.matchesWithStats,\n        awayPatterns.matchesWithStats\n      );\n      // Boost para cl√°ssicos mas ainda respeitando cap de 78%\n      if (context.isClassico) patternProb = Math.min(78, patternProb + 5);\n      console.log(`[ELITE] ‚úÖ PADR√ÉO Over 4.5 Cart√µes: ${homeStats.teamName} ${homePatterns.over45CardsRate.toFixed(0)}% + ${awayStats.teamName} ${awayPatterns.over45CardsRate.toFixed(0)}% = ${patternProb.toFixed(0)}%`);\n      \n      const signal = createSignal(\n        'Over 4.5 Cart√µes',\n        'CARDS',\n        `+4.5 cart√µes`,\n        patternProb,\n        'Cards Over/Under_Over 4.5',\n        {\n          primary: `PADR√ÉO: ${homePatterns.over45CardsRate.toFixed(0)}% + ${awayPatterns.over45CardsRate.toFixed(0)}% = ${patternProb.toFixed(0)}% (calibrado)`,\n          homeAnalysis: `${homeStats.teamName}: Over 4.5 cards em ${homePatterns.over45CardsRate.toFixed(0)}% dos √∫ltimos ${homePatterns.matchesWithStats} jogos`,\n          awayAnalysis: `${awayStats.teamName}: Over 4.5 cards em ${awayPatterns.over45CardsRate.toFixed(0)}% dos √∫ltimos ${awayPatterns.matchesWithStats} jogos`,\n          h2hInsight: context.isClassico ? `üî• CL√ÅSSICO = intensidade extra` : `Perfil de jogo com faltas`,\n          contextInsight: context.isClassico ? `DERBY! Rivalidade eleva cart√µes.` : `Hist√≥rico consistente de cart√µes.`\n        },\n        Math.round(patternProb)\n      );\n      if (signal) signals.push(signal);\n    } else {\n      gatesFailedCards++;\n    }\n\n    // 4. OVER 3.5 CART√ïES - Com calibra√ß√£o (se Over 4.5 n√£o qualificou)\n    const combined35CardsRate = (homePatterns.over35CardsRate + awayPatterns.over35CardsRate) / 2;\n    if (homePatterns.over35CardsRate >= 55 && awayPatterns.over35CardsRate >= 55 && combined45CardsRate < 45) {\n      const patternProb = calibrateProb(\n        homePatterns.over35CardsRate, \n        awayPatterns.over35CardsRate, \n        50, // Prior para cards\n        0,\n        0,\n        homePatterns.matchesWithStats,\n        awayPatterns.matchesWithStats\n      );\n      console.log(`[ELITE] ‚úÖ PADR√ÉO Over 3.5 Cart√µes: ${homeStats.teamName} ${homePatterns.over35CardsRate.toFixed(0)}% + ${awayStats.teamName} ${awayPatterns.over35CardsRate.toFixed(0)}% = ${patternProb.toFixed(0)}%`);\n      \n      const signal = createSignal(\n        'Over 3.5 Cart√µes',\n        'CARDS',\n        `+3.5 cart√µes`,\n        patternProb,\n        'Cards Over/Under_Over 3.5',\n        {\n          primary: `PADR√ÉO: ${homePatterns.over35CardsRate.toFixed(0)}% + ${awayPatterns.over35CardsRate.toFixed(0)}% = ${patternProb.toFixed(0)}% (calibrado)`,\n          homeAnalysis: `${homeStats.teamName}: Over 3.5 cards em ${homePatterns.over35CardsRate.toFixed(0)}% dos jogos`,\n          awayAnalysis: `${awayStats.teamName}: Over 3.5 cards em ${awayPatterns.over35CardsRate.toFixed(0)}% dos jogos`,\n          h2hInsight: `Padr√£o consistente de cart√µes`,\n          contextInsight: `Alta frequ√™ncia de cart√µes nos jogos destes times.`\n        },\n        Math.round(patternProb)\n      );\n      if (signal) signals.push(signal);\n    }\n\n    // 5. OVER 8.5 ESCANTEIOS - Com calibra√ß√£o Bayesiana\n    const combined85CornersRate = (homePatterns.over85CornersRate + awayPatterns.over85CornersRate) / 2;\n    if (homePatterns.over85CornersRate >= 45 && awayPatterns.over85CornersRate >= 45) {\n      const patternProb = calibrateProb(\n        homePatterns.over85CornersRate, \n        awayPatterns.over85CornersRate, \n        45, // Prior para corners\n        0,\n        0,\n        homePatterns.matchesWithStats,\n        awayPatterns.matchesWithStats\n      );\n      console.log(`[ELITE] ‚úÖ PADR√ÉO Over 8.5 Cantos: ${homeStats.teamName} ${homePatterns.over85CornersRate.toFixed(0)}% + ${awayStats.teamName} ${awayPatterns.over85CornersRate.toFixed(0)}% = ${patternProb.toFixed(0)}%`);\n      \n      const signal = createSignal(\n        'Over 8.5 Escanteios',\n        'CORNERS',\n        `+8.5 corners`,\n        patternProb,\n        'Corners Over/Under_Over 8.5',\n        {\n          primary: `PADR√ÉO: ${homePatterns.over85CornersRate.toFixed(0)}% + ${awayPatterns.over85CornersRate.toFixed(0)}% = ${patternProb.toFixed(0)}% (calibrado)`,\n          homeAnalysis: `${homeStats.teamName}: Over 8.5 corners em ${homePatterns.over85CornersRate.toFixed(0)}% dos jogos`,\n          awayAnalysis: `${awayStats.teamName}: Over 8.5 corners em ${awayPatterns.over85CornersRate.toFixed(0)}% dos jogos`,\n          h2hInsight: `Estilo de jogo ofensivo de ambos`,\n          contextInsight: `Times que geram muitas finaliza√ß√µes e escanteios.`\n        },\n        Math.round(patternProb)\n      );\n      if (signal) signals.push(signal);\n    } else {\n      gatesFailedCorners++;\n    }\n    \n    // 6. OVER 1.5 GOLS - Mercado mais comum, threshold 70%+ para valor\n    if (homeStats.over15Rate >= 70 && awayStats.over15Rate >= 70) {\n      const patternProb = calibrateProb(\n        homeStats.over15Rate, \n        awayStats.over15Rate, \n        60, // Prior mais alto para Over 1.5\n        h2hData.avgGoals >= 2 ? 75 : 0, // H2H confirma se m√©dia >= 2 gols\n        h2hData.totalMatches,\n        homePatterns.matchesAnalyzed,\n        awayPatterns.matchesAnalyzed\n      );\n      console.log(`[ELITE] ‚úÖ PADR√ÉO Over 1.5: ${homeStats.teamName} ${homeStats.over15Rate.toFixed(0)}% + ${awayStats.teamName} ${awayStats.over15Rate.toFixed(0)}% = ${patternProb.toFixed(0)}%`);\n      \n      const signal = createSignal(\n        'Over 1.5 Gols',\n        'GOALS',\n        `Mais de 1.5 gols`,\n        patternProb,\n        'Goals Over/Under_Over 1.5',\n        {\n          primary: `PADR√ÉO FORTE: ${homeStats.over15Rate.toFixed(0)}% + ${awayStats.over15Rate.toFixed(0)}% = ${patternProb.toFixed(0)}% (calibrado)`,\n          homeAnalysis: `${homeStats.teamName}: Over 1.5 em ${homeStats.over15Rate.toFixed(0)}% dos jogos`,\n          awayAnalysis: `${awayStats.teamName}: Over 1.5 em ${awayStats.over15Rate.toFixed(0)}% dos jogos`,\n          h2hInsight: `H2H: m√©dia ${h2hData.avgGoals.toFixed(1)} gols/jogo`,\n          contextInsight: `Ambos os times raramente terminam com menos de 2 gols.`\n        },\n        Math.round(patternProb)\n      );\n      if (signal) signals.push(signal);\n    } else {\n      gatesFailedOver15++;\n    }\n\n    // Log de observabilidade\n    console.log(`[ELITE] ${fixture.teams.home.name} vs ${fixture.teams.away.name}: ${signals.length} sinais, ${analyzed.length} analisados | Gates falhos: Goals=${gatesFailedGoals}, BTTS=${gatesFailedBtts}, Cards=${gatesFailedCards}, Corners=${gatesFailedCorners}, Over15=${gatesFailedOver15}`);\n    return { signals, analyzed };\n  }\n\n  async runEliteScan(maxFixtures: number = 80): Promise<EliteScanResult> {\n    console.log('[ELITE ENGINE] üöÄ Iniciando varredura ELITE...');\n    \n    const today = new Date();\n    const tomorrow = new Date(today);\n    tomorrow.setDate(tomorrow.getDate() + 1);\n    \n    const todayStr = today.toISOString().split('T')[0];\n    const tomorrowStr = tomorrow.toISOString().split('T')[0];\n\n    const [fixturestoday, fixturesTomorrow] = await Promise.all([\n      this.fetchFixtures(todayStr),\n      this.fetchFixtures(tomorrowStr)\n    ]);\n\n    const allFixtures = [...fixturestoday, ...fixturesTomorrow];\n    console.log(`[ELITE ENGINE] Total fixtures: ${allFixtures.length}`);\n\n    const validFixtures = allFixtures\n      .filter(f => !this.isLeagueExcluded(f.league.name))\n      .sort((a, b) => {\n        const aTop = TOP_LEAGUES.includes(a.league.id) ? 0 : 1;\n        const bTop = TOP_LEAGUES.includes(b.league.id) ? 0 : 1;\n        return aTop - bTop;\n      })\n      .slice(0, maxFixtures);\n\n    console.log(`[ELITE ENGINE] Fixtures v√°lidos (top leagues): ${validFixtures.length}`);\n\n    const opportunities: EliteSignal[] = [];\n    const allAnalyzedOpportunities: AnalyzedOpportunity[] = [];\n    let fixturesAnalyzed = 0;\n\n    for (const fixture of validFixtures) {\n      try {\n        console.log(`[ELITE] Analisando: ${fixture.teams.home.name} vs ${fixture.teams.away.name}`);\n\n        const [homeMatches, awayMatches, h2hMatches, oddsData] = await Promise.all([\n          this.fetchTeamLastMatches(fixture.teams.home.id, 10),\n          this.fetchTeamLastMatches(fixture.teams.away.id, 10),\n          this.fetchH2H(fixture.teams.home.id, fixture.teams.away.id, 10),\n          this.fetchOdds(fixture.fixture.id)\n        ]);\n\n        if (homeMatches.length < 6 || awayMatches.length < 6) {\n          console.log(`[ELITE] Dados insuficientes para an√°lise`);\n          continue;\n        }\n\n        fixturesAnalyzed++;\n\n        const season = fixture.league.season || new Date().getFullYear();\n        const [homeStats, awayStats] = await Promise.all([\n          this.analyzeTeam(fixture.teams.home.id, homeMatches, fixture.league.id, season),\n          this.analyzeTeam(fixture.teams.away.id, awayMatches, fixture.league.id, season)\n        ]);\n\n        const h2hData = this.analyzeH2H(h2hMatches, fixture.teams.home.id);\n        const context = this.analyzeMatchContext(\n          homeStats, \n          awayStats, \n          h2hMatches,\n          fixture.teams.home.id,\n          fixture.teams.away.id\n        );\n\n        const homeAdvantage = 1.15;\n        const lambdaHome = (homeStats.xG * homeAdvantage + awayStats.xGA) / 2;\n        const lambdaAway = (awayStats.xG + homeStats.xGA) / 2 / homeAdvantage;\n        const probabilities = this.calculatePoissonProbabilities(lambdaHome, lambdaAway);\n\n        const odds = this.extractOdds(oddsData);\n        const { signals, analyzed } = this.generateSignals(\n          fixture,\n          homeStats,\n          awayStats,\n          h2hData,\n          context,\n          probabilities,\n          odds\n        );\n\n        opportunities.push(...signals);\n        allAnalyzedOpportunities.push(...analyzed);\n\n      } catch (error: any) {\n        console.error(`[ELITE] Erro: ${error.message}`);\n      }\n    }\n\n    opportunities.sort((a, b) => {\n      if (a.badgeType === 'DIAMOND' && b.badgeType !== 'DIAMOND') return -1;\n      if (b.badgeType === 'DIAMOND' && a.badgeType !== 'DIAMOND') return 1;\n      return b.expectedValue - a.expectedValue;\n    });\n\n    const diamondSignals = opportunities.filter(s => s.badgeType === 'DIAMOND').length;\n    const goldSignals = opportunities.filter(s => s.badgeType === 'GOLD').length;\n    const silverSignals = opportunities.filter(s => s.badgeType === 'SILVER').length;\n    const avgEV = opportunities.length > 0 \n      ? opportunities.reduce((sum, s) => sum + s.expectedValue, 0) / opportunities.length \n      : 0;\n\n    const result: EliteScanResult = {\n      scanTimestamp: new Date().toISOString(),\n      totalFixturesScanned: allFixtures.length,\n      fixturesAnalyzed,\n      signalsGenerated: opportunities.length,\n      diamondSignals,\n      goldSignals,\n      silverSignals,\n      avgExpectedValue: Math.round(avgEV * 10) / 10,\n      opportunities: opportunities.slice(0, 30),\n      analyzedOpportunities: allAnalyzedOpportunities\n    };\n\n    this.setCache('elite_last_scan', result);\n    console.log(`[ELITE ENGINE] ‚úÖ Scan completo: ${opportunities.length} sinais (${diamondSignals} DIAMOND, ${goldSignals} GOLD, ${silverSignals} SILVER) | ${allAnalyzedOpportunities.length} analisados`);\n\n    return result;\n  }\n\n  async getLastScanResult(): Promise<EliteScanResult | null> {\n    return this.getCached<EliteScanResult>('elite_last_scan');\n  }\n}\n\nexport const elitePredictionEngine = new ElitePredictionEngine();\n","path":null,"size_bytes":51336,"size_tokens":null},"server/oraculo-service.ts":{"content":"import axios from 'axios';\nimport { db } from './db';\nimport { aiAnalysisCache } from '@shared/schema';\nimport { eq, gte, and, desc } from 'drizzle-orm';\n\nconst API_BASE_URL = 'https://v3.football.api-sports.io';\nconst API_KEY = process.env.API_FOOTBALL_KEY || '';\n\ninterface FixtureData {\n  fixture: {\n    id: number;\n    date: string;\n    timestamp: number;\n    status: { short: string };\n  };\n  league: {\n    id: number;\n    name: string;\n    country: string;\n    season: number;\n  };\n  teams: {\n    home: { id: number; name: string; logo: string };\n    away: { id: number; name: string; logo: string };\n  };\n  goals: { home: number | null; away: number | null };\n  score: {\n    halftime: { home: number | null; away: number | null };\n    fulltime: { home: number | null; away: number | null };\n  };\n}\n\ninterface TeamMatchStats {\n  goalsScored: number;\n  goalsConceded: number;\n  goalsHT: number;\n  goalsConcededHT: number;\n  corners: number;\n  cornersAgainst: number;\n  fouls: number;\n  yellowCards: number;\n  redCards: number;\n  shotsOnTarget: number;\n  shotsTotal: number;\n  dangerousAttacks: number;\n}\n\ninterface OraculoSignal {\n  fixtureId: number;\n  league: string;\n  leagueCountry: string;\n  homeTeam: string;\n  awayTeam: string;\n  homeTeamLogo: string;\n  awayTeamLogo: string;\n  matchDate: string;\n  matchTime: string;\n  marketRecommendation: string;\n  confidenceScore: number;\n  badgeType: 'DIAMOND' | 'GOLD';\n  reasoning: {\n    pattern: string;\n    statsHome: string;\n    statsAway: string;\n    aiInsight: string;\n  };\n  dominanceIndex: {\n    home: number;\n    away: number;\n  };\n  rawData: {\n    homeRecurrence: number;\n    awayRecurrence: number;\n    h2hRecurrence: number;\n    sampleSize: number;\n  };\n}\n\ninterface OraculoScanResult {\n  scanTimestamp: string;\n  totalFixturesScanned: number;\n  fixturesAnalyzed: number;\n  signalsGenerated: number;\n  opportunities: OraculoSignal[];\n}\n\nclass OraculoService {\n  private apiHeaders = {\n    'x-apisports-key': API_KEY,\n    'x-rapidapi-host': 'v3.football.api-sports.io'\n  };\n\n  private readonly EXCLUDED_PATTERNS = [\n    'U17', 'U19', 'U20', 'U21', 'U23', 'Youth', 'Junior', 'Reserve',\n    'Friendly', 'Amistoso', 'Women', 'Feminino', 'Amateur', 'Oberliga'\n  ];\n\n  private readonly TOP_LEAGUES = [\n    39, 140, 135, 78, 61, 2, 3, 848, 71, 72, 94, 88, 128, 13, 11, 144, 179,\n    40, 203, 307, 235, 253, 262, 169, 119, 113, 103\n  ];\n\n  async getCachedData(cacheKey: string): Promise<any | null> {\n    try {\n      const cached = await db.select()\n        .from(aiAnalysisCache)\n        .where(and(\n          eq(aiAnalysisCache.cacheKey, cacheKey),\n          gte(aiAnalysisCache.expiresAt, new Date())\n        ))\n        .limit(1);\n      \n      if (cached.length > 0) {\n        return JSON.parse(cached[0].data);\n      }\n      return null;\n    } catch (error) {\n      return null;\n    }\n  }\n\n  async setCachedData(cacheKey: string, cacheType: string, data: any, hoursToExpire: number = 6): Promise<void> {\n    try {\n      const expiresAt = new Date(Date.now() + hoursToExpire * 60 * 60 * 1000);\n      \n      await db.insert(aiAnalysisCache)\n        .values({\n          cacheKey,\n          cacheType: cacheType as any,\n          data: JSON.stringify(data),\n          expiresAt,\n        })\n        .onConflictDoUpdate({\n          target: aiAnalysisCache.cacheKey,\n          set: {\n            data: JSON.stringify(data),\n            expiresAt,\n          }\n        });\n    } catch (error) {\n      console.error('[OR√ÅCULO] Cache write error:', error);\n    }\n  }\n\n  private isLeagueExcluded(leagueName: string): boolean {\n    const upper = leagueName.toUpperCase();\n    return this.EXCLUDED_PATTERNS.some(p => upper.includes(p.toUpperCase()));\n  }\n\n  private delay(ms: number): Promise<void> {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  async fetchFixturesForDate(date: string): Promise<FixtureData[]> {\n    const cacheKey = `oraculo_fixtures_${date}`;\n    const cached = await this.getCachedData(cacheKey);\n    if (cached) return cached;\n\n    try {\n      const response = await axios.get(`${API_BASE_URL}/fixtures`, {\n        params: { date, status: 'NS' },\n        headers: this.apiHeaders\n      });\n\n      const fixtures = response.data?.response || [];\n      await this.setCachedData(cacheKey, 'oraculo_fixtures', fixtures, 2);\n      return fixtures;\n    } catch (error: any) {\n      console.error('[OR√ÅCULO] Error fetching fixtures:', error.message);\n      return [];\n    }\n  }\n\n  async fetchTeamLastMatches(teamId: number, last: number = 10): Promise<FixtureData[]> {\n    const cacheKey = `oraculo_team_${teamId}_last${last}`;\n    const cached = await this.getCachedData(cacheKey);\n    if (cached) return cached;\n\n    try {\n      await this.delay(200);\n      const response = await axios.get(`${API_BASE_URL}/fixtures`, {\n        params: { team: teamId, last, status: 'FT' },\n        headers: this.apiHeaders\n      });\n\n      const fixtures = response.data?.response || [];\n      await this.setCachedData(cacheKey, 'team_fixtures', fixtures, 6);\n      return fixtures;\n    } catch (error: any) {\n      console.error(`[OR√ÅCULO] Error fetching team ${teamId} matches:`, error.message);\n      return [];\n    }\n  }\n\n  async fetchH2H(team1Id: number, team2Id: number, last: number = 5): Promise<FixtureData[]> {\n    const cacheKey = `oraculo_h2h_${team1Id}_${team2Id}`;\n    const cached = await this.getCachedData(cacheKey);\n    if (cached) return cached;\n\n    try {\n      await this.delay(200);\n      const response = await axios.get(`${API_BASE_URL}/fixtures/headtohead`, {\n        params: { h2h: `${team1Id}-${team2Id}`, last },\n        headers: this.apiHeaders\n      });\n\n      const fixtures = response.data?.response || [];\n      await this.setCachedData(cacheKey, 'h2h', fixtures, 24);\n      return fixtures;\n    } catch (error: any) {\n      console.error(`[OR√ÅCULO] Error fetching H2H:`, error.message);\n      return [];\n    }\n  }\n\n  async fetchFixtureStatistics(fixtureId: number): Promise<any | null> {\n    const cacheKey = `oraculo_stats_${fixtureId}`;\n    const cached = await this.getCachedData(cacheKey);\n    if (cached) return cached;\n\n    try {\n      await this.delay(150);\n      const response = await axios.get(`${API_BASE_URL}/fixtures/statistics`, {\n        params: { fixture: fixtureId },\n        headers: this.apiHeaders\n      });\n\n      const stats = response.data?.response || [];\n      if (stats.length >= 2) {\n        await this.setCachedData(cacheKey, 'fixture_stats', stats, 24);\n        return stats;\n      }\n      return null;\n    } catch (error: any) {\n      return null;\n    }\n  }\n\n  private parseStatValue(statArray: any[], type: string): number {\n    const stat = statArray.find((s: any) => s.type === type);\n    if (!stat) return 0;\n    const value = stat.value;\n    if (value === null || value === undefined) return 0;\n    if (typeof value === 'string') {\n      return parseInt(value.replace('%', '')) || 0;\n    }\n    return value;\n  }\n\n  private analyzeTeamPattern(\n    matches: FixtureData[],\n    teamId: number,\n    statsMap: Map<number, any>\n  ): {\n    goalsHTRate: number;\n    over15Rate: number;\n    over25Rate: number;\n    bttsRate: number;\n    avgCorners: number;\n    avgCornersAgainst: number;\n    avgFouls: number;\n    avgCards: number;\n    avgShots: number;\n    dominanceIndex: number;\n    lateGoalsRate: number;\n  } {\n    let goalsHT = 0, over15 = 0, over25 = 0, btts = 0, lateGoals = 0;\n    let totalCorners = 0, totalCornersAgainst = 0, totalFouls = 0, totalCards = 0, totalShots = 0;\n    let matchesWithStats = 0;\n    let shotsOnTarget = 0, goalsConceded = 0;\n\n    for (const match of matches) {\n      const isHome = match.teams.home.id === teamId;\n      const homeGoals = match.goals.home ?? 0;\n      const awayGoals = match.goals.away ?? 0;\n      const totalGoals = homeGoals + awayGoals;\n      const scored = isHome ? homeGoals : awayGoals;\n      const conceded = isHome ? awayGoals : homeGoals;\n\n      const htHome = match.score?.halftime?.home ?? 0;\n      const htAway = match.score?.halftime?.away ?? 0;\n      const htTotal = htHome + htAway;\n\n      if (htTotal > 0) goalsHT++;\n      if (totalGoals > 1.5) over15++;\n      if (totalGoals > 2.5) over25++;\n      if (homeGoals > 0 && awayGoals > 0) btts++;\n      \n      goalsConceded += conceded;\n\n      const stats = statsMap.get(match.fixture.id);\n      if (stats && stats.length >= 2) {\n        const teamStats = isHome ? stats[0]?.statistics : stats[1]?.statistics;\n        const oppStats = isHome ? stats[1]?.statistics : stats[0]?.statistics;\n        \n        if (teamStats) {\n          matchesWithStats++;\n          totalCorners += this.parseStatValue(teamStats, 'Corner Kicks');\n          totalFouls += this.parseStatValue(teamStats, 'Fouls');\n          totalCards += this.parseStatValue(teamStats, 'Yellow Cards') + this.parseStatValue(teamStats, 'Red Cards');\n          totalShots += this.parseStatValue(teamStats, 'Total Shots');\n          shotsOnTarget += this.parseStatValue(teamStats, 'Shots on Goal');\n        }\n        if (oppStats) {\n          totalCornersAgainst += this.parseStatValue(oppStats, 'Corner Kicks');\n        }\n      }\n    }\n\n    const n = matches.length || 1;\n    const nStats = matchesWithStats || 1;\n    const avgShotsOnTarget = shotsOnTarget / nStats;\n    const avgCorners = totalCorners / nStats;\n    const avgGoalsConceded = goalsConceded / n;\n\n    const dominanceIndex = avgGoalsConceded > 0 \n      ? (avgShotsOnTarget + avgCorners) / avgGoalsConceded \n      : (avgShotsOnTarget + avgCorners);\n\n    return {\n      goalsHTRate: (goalsHT / n) * 100,\n      over15Rate: (over15 / n) * 100,\n      over25Rate: (over25 / n) * 100,\n      bttsRate: (btts / n) * 100,\n      avgCorners: totalCorners / nStats,\n      avgCornersAgainst: totalCornersAgainst / nStats,\n      avgFouls: totalFouls / nStats,\n      avgCards: totalCards / nStats,\n      avgShots: totalShots / nStats,\n      dominanceIndex,\n      lateGoalsRate: (lateGoals / n) * 100,\n    };\n  }\n\n  private calculateConfidenceScore(\n    homeRecurrence: number,\n    awayRecurrence: number,\n    h2hRecurrence: number\n  ): number {\n    return (homeRecurrence * 0.4) + (awayRecurrence * 0.4) + (h2hRecurrence * 0.2);\n  }\n\n  private detectPatterns(\n    homeStats: ReturnType<typeof this.analyzeTeamPattern>,\n    awayStats: ReturnType<typeof this.analyzeTeamPattern>,\n    h2hMatches: FixtureData[]\n  ): { market: string; score: number; reasoning: OraculoSignal['reasoning'] }[] {\n    const patterns: { market: string; score: number; reasoning: OraculoSignal['reasoning'] }[] = [];\n\n    let h2hGoalsHT = 0, h2hOver15 = 0, h2hOver25 = 0, h2hBtts = 0;\n    for (const match of h2hMatches) {\n      const htHome = match.score?.halftime?.home ?? 0;\n      const htAway = match.score?.halftime?.away ?? 0;\n      const homeGoals = match.goals.home ?? 0;\n      const awayGoals = match.goals.away ?? 0;\n      const totalGoals = homeGoals + awayGoals;\n      \n      if (htHome + htAway > 0) h2hGoalsHT++;\n      if (totalGoals > 1.5) h2hOver15++;\n      if (totalGoals > 2.5) h2hOver25++;\n      if (homeGoals > 0 && awayGoals > 0) h2hBtts++;\n    }\n    const h2hN = Math.max(h2hMatches.length, 1);\n    const h2hGoalsHTRate = (h2hGoalsHT / h2hN) * 100;\n    const h2hOver15Rate = (h2hOver15 / h2hN) * 100;\n    const h2hOver25Rate = (h2hOver25 / h2hN) * 100;\n    const h2hBttsRate = (h2hBtts / h2hN) * 100;\n\n    const goalsHTScore = this.calculateConfidenceScore(homeStats.goalsHTRate, awayStats.goalsHTRate, h2hGoalsHTRate);\n    if (goalsHTScore >= 75 && homeStats.goalsHTRate >= 70 && awayStats.goalsHTRate >= 70) {\n      patterns.push({\n        market: 'Over 0.5 Gols HT (1¬∫ Tempo)',\n        score: Math.round(goalsHTScore),\n        reasoning: {\n          pattern: `Padr√£o detectado: Gols no 1¬∫ tempo em ${goalsHTScore.toFixed(0)}% das amostras combinadas.`,\n          statsHome: `Mandante tem gols no HT em ${homeStats.goalsHTRate.toFixed(0)}% dos √∫ltimos 10 jogos.`,\n          statsAway: `Visitante tem gols no HT em ${awayStats.goalsHTRate.toFixed(0)}% dos √∫ltimos 10 jogos.`,\n          aiInsight: `Alta probabilidade de jogo aberto desde o in√≠cio. Ambas equipes com tend√™ncia ofensiva precoce.`\n        }\n      });\n    }\n\n    const over15Score = this.calculateConfidenceScore(homeStats.over15Rate, awayStats.over15Rate, h2hOver15Rate);\n    if (over15Score >= 75 && homeStats.over15Rate >= 70 && awayStats.over15Rate >= 70) {\n      patterns.push({\n        market: 'Over 1.5 Gols FT',\n        score: Math.round(over15Score),\n        reasoning: {\n          pattern: `Padr√£o detectado: +1.5 gols em ${over15Score.toFixed(0)}% das amostras (${Math.round((homeStats.over15Rate + awayStats.over15Rate) / 2)}% m√©dia times).`,\n          statsHome: `Mandante tem Over 1.5 em ${homeStats.over15Rate.toFixed(0)}% dos jogos recentes.`,\n          statsAway: `Visitante tem Over 1.5 em ${awayStats.over15Rate.toFixed(0)}% dos jogos recentes.`,\n          aiInsight: `Tend√™ncia clara de jogos com pelo menos 2 gols totais.`\n        }\n      });\n    }\n\n    const over25Score = this.calculateConfidenceScore(homeStats.over25Rate, awayStats.over25Rate, h2hOver25Rate);\n    if (over25Score >= 75 && homeStats.over25Rate >= 60 && awayStats.over25Rate >= 60) {\n      patterns.push({\n        market: 'Over 2.5 Gols FT',\n        score: Math.round(over25Score),\n        reasoning: {\n          pattern: `Padr√£o detectado: +2.5 gols em ${over25Score.toFixed(0)}% das amostras combinadas.`,\n          statsHome: `Mandante tem Over 2.5 em ${homeStats.over25Rate.toFixed(0)}% dos jogos.`,\n          statsAway: `Visitante tem Over 2.5 em ${awayStats.over25Rate.toFixed(0)}% dos jogos.`,\n          aiInsight: `Perfil ofensivo de ambas equipes indica jogo com muitos gols.`\n        }\n      });\n    }\n\n    const bttsScore = this.calculateConfidenceScore(homeStats.bttsRate, awayStats.bttsRate, h2hBttsRate);\n    if (bttsScore >= 75 && homeStats.bttsRate >= 60 && awayStats.bttsRate >= 60) {\n      patterns.push({\n        market: 'Ambas Marcam (BTTS)',\n        score: Math.round(bttsScore),\n        reasoning: {\n          pattern: `Padr√£o detectado: BTTS em ${bttsScore.toFixed(0)}% das amostras.`,\n          statsHome: `Mandante: BTTS em ${homeStats.bttsRate.toFixed(0)}% dos jogos (ataque efetivo + defesa vazada).`,\n          statsAway: `Visitante: BTTS em ${awayStats.bttsRate.toFixed(0)}% dos jogos.`,\n          aiInsight: `Perfil de \"Defesa Vazada\" e \"Ataque Efetivo\" em ambos os times.`\n        }\n      });\n    }\n\n    const avgCornersProjected = homeStats.avgCorners + awayStats.avgCornersAgainst;\n    const minCornersThreshold = 9.5;\n    if (avgCornersProjected >= minCornersThreshold && homeStats.avgCorners >= 4.5) {\n      const cornersRecurrence = Math.min(90, 70 + (avgCornersProjected - minCornersThreshold) * 4);\n      const cornersScore = this.calculateConfidenceScore(cornersRecurrence, cornersRecurrence, cornersRecurrence);\n      if (cornersScore >= 75) {\n        const suggestedLine = Math.floor(avgCornersProjected - 1.5);\n        patterns.push({\n          market: `Over ${suggestedLine}.5 Escanteios`,\n          score: Math.round(cornersScore),\n          reasoning: {\n            pattern: `M√©dia projetada de ${avgCornersProjected.toFixed(1)} escanteios no jogo (linha sugerida: ${suggestedLine}.5).`,\n            statsHome: `Mandante produz ${homeStats.avgCorners.toFixed(1)} cantos/jogo e ${homeStats.avgShots.toFixed(1)} chutes/jogo.`,\n            statsAway: `Visitante cede ${awayStats.avgCornersAgainst.toFixed(1)} cantos/jogo.`,\n            aiInsight: `Press√£o ofensiva do mandante + defesa recuada do visitante = alto volume de cantos.`\n          }\n        });\n      }\n    }\n\n    const avgFoulsTotal = homeStats.avgFouls + awayStats.avgFouls;\n    const avgCardsTotal = homeStats.avgCards + awayStats.avgCards;\n    if (avgFoulsTotal >= 24 && avgCardsTotal >= 3.5) {\n      const cardsRecurrence = Math.min(90, 70 + (avgCardsTotal - 3.5) * 5);\n      const cardsScore = this.calculateConfidenceScore(cardsRecurrence, cardsRecurrence, cardsRecurrence);\n      if (cardsScore >= 75) {\n        const suggestedLine = Math.floor(avgCardsTotal);\n        patterns.push({\n          market: `Over ${suggestedLine}.5 Cart√µes`,\n          score: Math.round(cardsScore),\n          reasoning: {\n            pattern: `M√©dia de ${avgCardsTotal.toFixed(1)} cart√µes combinados nos jogos recentes.`,\n            statsHome: `Mandante: ${homeStats.avgFouls.toFixed(1)} faltas e ${homeStats.avgCards.toFixed(1)} cart√µes/jogo.`,\n            statsAway: `Visitante: ${awayStats.avgFouls.toFixed(1)} faltas e ${awayStats.avgCards.toFixed(1)} cart√µes/jogo.`,\n            aiInsight: `Jogo com alto n√≠vel de agressividade previsto (${avgFoulsTotal.toFixed(0)} faltas m√©dia combinada).`\n          }\n        });\n      }\n    }\n\n    return patterns;\n  }\n\n  async runDeepScan(maxFixtures: number = 50): Promise<OraculoScanResult> {\n    console.log('[OR√ÅCULO] Iniciando Deep Scan...');\n    \n    const today = new Date();\n    const tomorrow = new Date(today);\n    tomorrow.setDate(tomorrow.getDate() + 1);\n    \n    const todayStr = today.toISOString().split('T')[0];\n    const tomorrowStr = tomorrow.toISOString().split('T')[0];\n\n    const [fixturesToday, fixturesTomorrow] = await Promise.all([\n      this.fetchFixturesForDate(todayStr),\n      this.fetchFixturesForDate(tomorrowStr)\n    ]);\n\n    const allFixtures = [...fixturesToday, ...fixturesTomorrow];\n    console.log(`[OR√ÅCULO] ${allFixtures.length} jogos encontrados nas pr√≥ximas 24h`);\n\n    const validFixtures = allFixtures\n      .filter(f => !this.isLeagueExcluded(f.league.name))\n      .filter(f => this.TOP_LEAGUES.includes(f.league.id) || !f.league.name.includes('Cup'))\n      .slice(0, maxFixtures);\n\n    console.log(`[OR√ÅCULO] ${validFixtures.length} jogos v√°lidos ap√≥s filtragem`);\n\n    const opportunities: OraculoSignal[] = [];\n    let fixturesAnalyzed = 0;\n\n    for (const fixture of validFixtures) {\n      try {\n        console.log(`[OR√ÅCULO] Analisando: ${fixture.teams.home.name} vs ${fixture.teams.away.name}`);\n\n        const [homeMatches, awayMatches, h2hMatches] = await Promise.all([\n          this.fetchTeamLastMatches(fixture.teams.home.id, 10),\n          this.fetchTeamLastMatches(fixture.teams.away.id, 10),\n          this.fetchH2H(fixture.teams.home.id, fixture.teams.away.id, 5)\n        ]);\n\n        if (homeMatches.length < 8 || awayMatches.length < 8) {\n          console.log(`[OR√ÅCULO] Dados insuficientes (home: ${homeMatches.length}, away: ${awayMatches.length})`);\n          continue;\n        }\n\n        fixturesAnalyzed++;\n\n        const allMatchIds = [\n          ...homeMatches.map(m => m.fixture.id),\n          ...awayMatches.map(m => m.fixture.id),\n          ...h2hMatches.map(m => m.fixture.id)\n        ];\n        const uniqueIds = Array.from(new Set(allMatchIds));\n\n        const statsMap = new Map<number, any>();\n        for (const id of uniqueIds.slice(0, 20)) {\n          const stats = await this.fetchFixtureStatistics(id);\n          if (stats) statsMap.set(id, stats);\n        }\n\n        const homeStats = this.analyzeTeamPattern(homeMatches, fixture.teams.home.id, statsMap);\n        const awayStats = this.analyzeTeamPattern(awayMatches, fixture.teams.away.id, statsMap);\n\n        const patterns = this.detectPatterns(homeStats, awayStats, h2hMatches) as any[];\n\n        for (const pattern of patterns) {\n          const matchDate = new Date(fixture.fixture.date);\n          \n          opportunities.push({\n            fixtureId: fixture.fixture.id,\n            league: fixture.league.name,\n            leagueCountry: fixture.league.country,\n            homeTeam: fixture.teams.home.name,\n            awayTeam: fixture.teams.away.name,\n            homeTeamLogo: fixture.teams.home.logo,\n            awayTeamLogo: fixture.teams.away.logo,\n            matchDate: matchDate.toLocaleDateString('pt-BR'),\n            matchTime: matchDate.toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' }),\n            marketRecommendation: pattern.market,\n            confidenceScore: pattern.score,\n            badgeType: pattern.score >= 85 ? 'DIAMOND' : 'GOLD',\n            reasoning: pattern.reasoning,\n            dominanceIndex: {\n              home: Math.round(homeStats.dominanceIndex * 10) / 10,\n              away: Math.round(awayStats.dominanceIndex * 10) / 10\n            },\n            rawData: {\n              homeRecurrence: Math.round(homeStats.over15Rate),\n              awayRecurrence: Math.round(awayStats.over15Rate),\n              h2hRecurrence: h2hMatches.length > 0 ? 80 : 0,\n              sampleSize: homeMatches.length + awayMatches.length\n            }\n          });\n        }\n\n      } catch (error: any) {\n        console.error(`[OR√ÅCULO] Erro ao analisar ${fixture.teams.home.name} vs ${fixture.teams.away.name}:`, error.message);\n      }\n    }\n\n    opportunities.sort((a, b) => b.confidenceScore - a.confidenceScore);\n\n    const result: OraculoScanResult = {\n      scanTimestamp: new Date().toISOString(),\n      totalFixturesScanned: allFixtures.length,\n      fixturesAnalyzed,\n      signalsGenerated: opportunities.length,\n      opportunities: opportunities.slice(0, 20)\n    };\n\n    await this.setCachedData('oraculo_last_scan', 'oraculo_result', result, 4);\n\n    console.log(`[OR√ÅCULO] Scan conclu√≠do: ${opportunities.length} oportunidades encontradas`);\n    return result;\n  }\n\n  async getLastScanResult(): Promise<OraculoScanResult | null> {\n    return await this.getCachedData('oraculo_last_scan');\n  }\n}\n\nexport const oraculoService = new OraculoService();\n","path":null,"size_bytes":21524,"size_tokens":null}},"version":2}