PROTOCOLO REPLIT ARCHITECT ENGINE: VIS√ÉO COMPUTACIONAL (OCR DE APOSTAS) üü¢

Irm√£o, voc√™ subiu o n√≠vel para o teto agora. O que voc√™ quer √© OCR (Reconhecimento √ìptico de Caracteres) com Intelig√™ncia Artificial.

Para o sistema "ler" uma imagem (que para o computador √© s√≥ um monte de pixels coloridos) e entender o que √© "Time", o que √© "Odd" e o que √© "Mercado", n√≥s n√£o podemos usar c√≥digo simples. Precisamos de um C√©rebro Visual.

A Solu√ß√£o de Bilh√µes: Vamos integrar a OpenAI Vision API (GPT-4o) no seu Admin.

Voc√™ sobe o print.

O sistema envia para a IA.

A IA "l√™" o bilhete e devolve o JSON prontinho.

O formul√°rio se preenche sozinho magicamente.

Se voc√™ n√£o tiver chave da OpenAI, o c√≥digo ficar√° pronto esperando por ela, e voc√™ ter√° que preencher manualmente enquanto isso.

Aqui est√° o Prompt para criar essa funcionalidade de "Auto-Preenchimento M√°gico".

PROMPT MESTRE: AI BET SLIP SCANNER (AUTO-FILL)
ROLE: Senior AI Engineer & Fullstack Developer.

TASK: Implementar a funcionalidade de "Leitura Autom√°tica de Bilhete" no formul√°rio de cria√ß√£o de Tips (CreateTipForm.tsx). OBJETIVO: Ao fazer upload de uma imagem, o sistema deve process√°-la usando IA (OpenAI Vision) para extrair automaticamente: Times, Mercado e Odd, preenchendo os campos do formul√°rio.

1. BACKEND: O SERVI√áO DE VIS√ÉO (imageScanner.ts)
Crie uma Server Function (ou API Route) que recebe a imagem e chama a OpenAI.

Rota: /api/scan-ticket

L√≥gica:

Recebe a imagem em base64.

Envia para o modelo gpt-4o com o prompt:

"Analise esta imagem de bilhete de aposta. Extraia em JSON estrito: { home_team, away_team, market (ex: 'Over 2.5'), odd (number), league }."

Retorna o JSON limpo para o Frontend.

Depend√™ncia: npm install openai. Env Var: OPENAI_API_KEY (Adicionar aos Secrets).

2. FRONTEND: O BOT√ÉO DE UPLOAD INTELIGENTE
Atualize o CreateTipForm para ter uma "Dropzone M√°gica".

Visual: Uma √°rea tracejada grande no topo do formul√°rio.

Texto: "Arraste o Print da Bet aqui para preencher tudo automaticamente ü™Ñ".

Comportamento (handleImageUpload):

Ao soltar a imagem, mostre um Spinner Futurista: "A IA est√° lendo seu bilhete..."

Envie para a API /api/scan-ticket.

Auto-Fill: Ao receber a resposta, use setValue (do React Hook Form) para preencher os campos:

Time Casa

Time Fora

Mercado (Tente dar match no texto do Select)

Odd

Link da Imagem (J√° salva a imagem no Storage tamb√©m).

3. FALLBACK MANUAL (SEGURAN√áA)
A IA pode falhar ou o usu√°rio pode estar sem cr√©ditos.

O formul√°rio deve continuar edit√°vel.

Se a IA preencher errado (ex: leu "2.50" como "2.80"), o Admin pode clicar no campo e corrigir manualmente antes de salvar.

4. DESIGN DA √ÅREA DE UPLOAD
Estilo: border-2 border-dashed border-[#33b864]/50 bg-[#33b864]/5 rounded-xl p-8 text-center cursor-pointer hover:bg-[#33b864]/10 transition-colors.

√çcone: Uma c√¢mera ou scanner (ScanLine do Lucide).

COMANDO: Implemente a integra√ß√£o com OpenAI Vision para leitura de bilhetes. Transforme o upload de imagem no gatilho que preenche o formul√°rio, economizando tempo do Admin.